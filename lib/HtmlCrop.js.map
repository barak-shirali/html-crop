{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 75ec16eefa6b80588a47","webpack:///./src/index.js","webpack:///./~/html2canvas/dist/html2canvas.js","webpack:///./src/base-object.js","webpack:///./src/canvas-state.js","webpack:///./src/rect.js"],"names":["defaultOptions","key","ctrlKey","shiftKey","startButton","debug","HtmlCrop","doc","options","_document","Object","assign","_debugMode","log","_onKeyDown","bind","reset","_listenHotKey","_attachStartButton","_disableScroll","html","then","canvas","_canvas","selectionCanvas","createElement","_selectionCanvas","width","height","style","position","left","top","body","appendChild","_canvasState","_startButton","removeChild","removeEventListener","_attachCaptureButton","addEventListener","button","textNode","createTextNode","right","bottom","onclick","startCropping","_onCapture","_captureButton","event","keyOptions","ctx","getContext","selection","getSelection","imgData","getImageData","x","y","w","h","newCanvas","newCtx","putImageData","_enableScroll","dataURL","toDataURL","window","location","href","preventDefault","e","returnValue","preventDefaultForScrollKeys","keys","indexOf","keyCode","onkeydown","onmousewheel","f","exports","module","g","global","self","html2canvas","define","t","n","r","s","o","u","a","require","i","Error","code","l","call","length","_dereq_","root","freeExports","nodeType","freeModule","freeGlobal","punycode","maxInt","base","tMin","tMax","skew","damp","initialBias","initialN","delimiter","regexPunycode","regexNonASCII","regexSeparators","errors","baseMinusTMin","floor","Math","stringFromCharCode","String","fromCharCode","error","type","RangeError","map","array","fn","result","mapDomain","string","parts","split","replace","labels","encoded","join","ucs2decode","output","counter","value","extra","charCodeAt","push","ucs2encode","basicToDigit","codePoint","digitToBasic","digit","flag","adapt","delta","numPoints","firstTime","k","decode","input","inputLength","out","bias","basic","j","index","oldi","baseMinusT","lastIndexOf","splice","encode","handledCPCount","basicLength","m","q","currentValue","handledCPCountPlusOne","qMinusT","toUnicode","test","slice","toLowerCase","toASCII","amd","hasOwnProperty","restoreOwnerScroll","ownerDocument","defaultView","pageXOffset","pageYOffset","scrollTo","cloneCanvasContents","clonedCanvas","cloneNode","node","javascriptEnabled","clone","document","nodeValue","child","firstChild","nodeName","nextSibling","_scrollTop","scrollTop","_scrollLeft","scrollLeft","initNode","containerDocument","documentElement","container","className","visibility","border","scrolling","Promise","resolve","documentClone","contentWindow","onload","interval","setInterval","childNodes","clearInterval","navigator","userAgent","scrollY","scrollX","open","write","replaceChild","adoptNode","close","Color","b","fromArray","namedColor","rgb","rgba","hex6","hex3","prototype","darken","amount","round","isTransparent","isBlack","Array","isArray","min","_hex3","match","parseInt","_hex6","substring","_rgb","Number","_rgba","toString","color","colors","isColor","Support","CanvasRenderer","ImageLoader","NodeParser","NodeContainer","utils","createWindowClone","loadUrlDocument","getBounds","html2canvasNodeAttribute","html2canvasCloneIndex","nodeList","logging","start","Date","now","async","allowTaint","removeContainer","imageTimeout","renderer","strict","proxy","reject","innerWidth","innerHeight","absoluteUrl","renderWindow","undefined","setAttribute","renderDocument","onrendered","html2canvasExport","create","windowWidth","windowHeight","html2canvasIndex","attributeName","selector","querySelector","removeAttribute","clonedWindow","oncloneHandler","onclone","support","imageLoader","bounds","documentWidth","documentHeight","parser","ready","crop","cleanupContainer","parentNode","croppedCanvas","x1","max","x2","y1","y2","drawImage","scrollWidth","offsetWidth","clientWidth","scrollHeight","offsetHeight","clientHeight","url","link","smallImage","DummyImageContainer","src","promise","image","Image","onerror","complete","Font","family","size","img","span","sampleText","baseline","middle","fontFamily","fontSize","margin","padding","verticalAlign","offsetTop","lineHeight","lineWidth","FontMetrics","data","getMetrics","FrameContainer","sameOrigin","proxyLoad","URL","GradientContainer","imageData","colorStops","x0","y0","TYPES","LINEAR","RADIAL","REGEXP_COLORSTOP","ImageContainer","cors","tainted","crossOrigin","ProxyImageContainer","SVGContainer","SVGNodeContainer","LinearGradientContainer","WebkitGradientContainer","origin","getOrigin","findImages","nodes","images","reduce","imageNodes","concat","args","method","forEach","addImage","loadImage","findBackgroundImage","parseBackgroundImages","filter","hasImageBackground","callback","newImage","imageExists","isSVG","svg","isSameOrigin","useCORS","isInline","some","protocol","hostname","port","getPromise","timeout","dummy","get","found","fetch","all","timer","race","res","setTimeout","clearTimeout","apply","arguments","hasDirection","REGEXP_DIRECTION","reverse","ratio","parseFloat","isNaN","colorStop","colorStopMatch","unit","stop","find","count","logger","console","Function","parseBackgrounds","offsetBounds","parent","stack","borders","clip","backgroundClip","visible","computedStyles","styles","backgroundImages","transformData","transformMatrix","isPseudoElement","opacity","cloneTo","getOpacity","cssFloat","assignStack","children","isElementVisible","Node","TEXT_NODE","css","hasAttribute","getAttribute","attribute","computedStyle","before","prefixedCss","prefixes","prefix","substr","toUpperCase","getComputedStyle","cssInt","fontWeight","weight","parseClip","matches","CLIP","cssList","property","trim","isPercentage","parseBackgroundSize","targetRatio","currentRatio","parseBackgroundPosition","backgroundSize","parseBackgroundRepeat","parseTextShadows","textShadow","results","shadows","TEXT_SHADOW_PROPERTY","TEXT_SHADOW_VALUES","offsetX","offsetY","blur","parseTransform","hasTransform","offset","parseBounds","removePx","asFloat","matrix","parseTransformMatrix","transform","parseMatrix","MATRIX_PROPERTY","getValue","tagName","selectionValue","placeholder","option","selectedIndex","text","matrix3d","str","TextContainer","PseudoElementContainer","StackingContext","element","range","renderQueue","background","rectangle","canvasBackground","visibile","createPseudoHideStyles","disableAnimations","flatten","getChildren","getPseudoElements","fontMetrics","calculateOverflowClips","isElement","createStackingContexts","sortStackingContexts","parse","paint","renderIndex","asyncRenderer","appendToDOM","parseBorders","cssClip","hasParentClip","cleanDOM","isTextNode","queue","asyncTimer","createStyles","PSEUDO_HIDE_ELEMENT_CLASS_BEFORE","PSEUDO_HIDE_ELEMENT_CLASS_AFTER","hidePseudoElements","innerHTML","ELEMENT_NODE","getPseudoElement","after","toCamelCase","content","display","stripQuotes","isImage","pseudoNode","pseudoContainer","item","parentContainer","renderableNode","nonIgnoredElement","newStackingContext","hasOwnStacking","parentStack","getParentStack","contexts","isRootElement","hasOpacity","isPositionedForStacking","isBodyWithTransparentRoot","isPositioned","zIndex0","isInlineBlock","isFloating","sort","zIndexSort","parseTextBounds","textList","rangeBounds","getRangeBounds","replacementNode","splitText","getWrapperBounds","wrapper","backupText","createRange","setStart","setEnd","getBoundingClientRect","ClearTransform","negativeZindex","negativeZIndex","descendantElements","descendantNonFloats","not","nonInlineNonPositionedDescendants","inlineLevel","nonPositionedFloats","inFlow","stackLevel0","hasText","positiveZindex","positiveZIndex","isStackingContext","restore","paintText","paintNode","setOpacity","save","setTransform","paintCheckbox","paintRadio","paintElement","renderBackground","getWidth","renderBorders","imgContainer","renderImage","imageContainer","paintFormValue","radius","borderPoints","calculateCurvePoints","calculateBorders","checked","font","circleStroke","circle","ceil","properties","message","textContent","applyTextTransform","characters","ucs2","letterRendering","noLetterSpacing","hasUnicode","getWords","character","fontShadow","clearShadow","renderTextDecoration","metrics","borderColorTransforms","inset","nodeBounds","getBorderRadiusData","side","colorTransform","parseBackgroundClip","borderSide","bx","by","bw","bh","drawSide","c1","c2","c3","c4","topLeftOuter","topLeftInner","topRightOuter","topRightInner","bottomRightOuter","bottomRightInner","bottomLeftOuter","bottomLeftInner","borderArgs","parseCorner","getCurvePoints","r1","r2","kappa","sqrt","ox","oy","xm","ym","topLeft","bezierCurve","topRight","bottomRight","bottomLeft","borderRadius","tlh","tlv","trh","trv","brh","brv","blh","blv","topWidth","rightHeight","bottomWidth","leftHeight","subdivide","startControl","endControl","end","lerp","ab","bc","cd","abbc","bccd","dest","curveTo","curveToReversed","borderData","radius1","radius2","outer1","inner1","outer2","inner2","corner1","corner2","arr","asInt","zIndex","context","nodeContainer","arrays","first","words","onWordBoundary","word","isWordBoundary","characterCode","XHR","decode64","Proxy","proxyUrl","supportsCORS","XMLHttpRequest","createCallback","createProxyUrl","jsonp","response","proxyCount","ProxyURL","supportsCORSImage","cleanup","random","encodeURIComponent","documentFromHTML","DOMParser","parseFromString","implementation","createHTMLDocument","ee","host","head","insertBefore","getHideClass","Renderer","paddingLeft","paddingTop","paddingRight","paddingBottom","renderBackgroundColor","renderBackgroundImage","renderBorder","drawShape","backgroundImage","renderBackgroundRepeating","gradientImage","renderBackgroundGradient","repeat","backgroundRepeatShape","renderBackgroundRepeat","taintCtx","textBaseline","variables","setFillStyle","fillStyle","fillRect","beginPath","arc","PI","closePath","fill","stroke","strokeColor","strokeStyle","shape","taints","sx","sy","sw","sh","dx","dy","dw","dh","shapes","hasEntries","point","rect","variant","setVariable","globalAlpha","translate","fillText","backgroundPosition","borderLeft","borderTop","createPattern","resizeImage","gradient","createLinearGradient","addColorStop","ownStacking","testRangeBounds","testCORS","testSVG","testElement","rangeHeight","selectNode","hasFabric","inlineFormatting","fabric","loadSVGFromString","createCanvas","removeContentType","objects","StaticCanvas","lowerCanvasEl","setWidth","setHeight","add","util","groupSVGElements","renderAll","atob","_native","XMLSerializer","serializeToString","parseSVGDocument","capitalize","p1","p2","base64","chars","len","encoded1","encoded2","encoded3","encoded4","byte1","byte2","byte3","clientRect","offsetParent","offsetLeft","whitespace","definition","prefix_i","block","mode","numParen","quote","appendResult","c","xhr","status","responseText","statusText","send","BaseObject","isDebug","getName","CanvasState","debugMode","_onMouseDown","_onMouseMove","_onMouseUp","_onTouch","_width","_height","_ctx","_htmlTop","_htmlLeft","_valid","_shape","_dragging","_dragoffx","_dragoffy","_initRect","_initEvents","_interval","draw","mouse","getMouse","mx","my","contains","_x","_y","_currentHandle","getHoverSelectionHandle","oldx","oldy","handleIndex","cursor","_w","_h","evt","touches","newEvt","createEvent","target","srcElement","originalTarget","touch","changedTouches","initMouseEvent","screenX","screenY","clientX","clientY","altKey","metaKey","dispatchEvent","clearRect","clear","el","getOffset","pageX","pageY","Rect","selectionBoxSize","_selectionHandles","_selectionBoxSize","_fill","setLineDash","strokeRect","half","cur","handle"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;ACVA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;;;;;;;;;ACtCA;;;;AACA;;;;AACA;;;;;;;;;;;;AAEA,KAAMA,iBAAiB;AACrBC,QAAK;AACHC,cAAS,KADN;AAEHC,eAAU,IAFP;AAGHF,UAAK;AAHF,IADgB;AAMrBG,gBAAa,IANQ;AAOrBC,UAAO;AAPc,EAAvB;;KAUqBC,Q;;;AACnB;;;;;AAKA,qBAAYC,GAAZ,EAA+B;AAAA,SAAdC,OAAc,yDAAJ,EAAI;;AAAA;;AAAA;;AAG7B,WAAKC,SAAL,GAAiBF,GAAjB;AACA,WAAKC,OAAL,GAAeE,OAAOC,MAAP,CAAc,EAAd,EAAkBX,cAAlB,EAAkCQ,OAAlC,CAAf;AACA,WAAKI,UAAL,GAAkBJ,QAAQH,KAA1B;AACA,WAAKQ,GAAL,CAAS,aAAT;;AAEA;AACA;AACA,WAAKC,UAAL,GAAkB,MAAKA,UAAL,CAAgBC,IAAhB,OAAlB;;AAEA,WAAKC,KAAL;AAZ6B;AAa9B;;AAED;;;;;;;6BAGQ;AACN,YAAKC,aAAL;;AAEA,WAAI,KAAKT,OAAL,CAAaJ,WAAjB,EAA8B;AAC5B,cAAKc,kBAAL;AACD;AACF;;AAED;;;;;;qCAGgB;AAAA;;AACd,YAAKC,cAAL;;AAEA,kCAAY,KAAKV,SAAL,CAAeW,IAA3B,EAAiCC,IAAjC,CAAsC,UAACC,MAAD,EAAY;AAChD,gBAAKC,OAAL,GAAeD,MAAf;;AAEA,aAAME,kBAAkB,OAAKf,SAAL,CAAegB,aAAf,CAA6B,QAA7B,CAAxB;AACA,gBAAKC,gBAAL,GAAwBF,eAAxB;AACAA,yBAAgBG,KAAhB,GAAwBL,OAAOK,KAA/B;AACAH,yBAAgBI,MAAhB,GAAyBN,OAAOM,MAAhC;AACAJ,yBAAgBK,KAAhB,CAAsBC,QAAtB,GAAiC,OAAjC;AACAN,yBAAgBK,KAAhB,CAAsBE,IAAtB,GAA6B,GAA7B;AACAP,yBAAgBK,KAAhB,CAAsBG,GAAtB,GAA4B,GAA5B;AACAR,yBAAgBK,KAAhB,CAAsB,SAAtB,IAAmC,OAAnC;;AAEA,gBAAKpB,SAAL,CAAewB,IAAf,CAAoBC,WAApB,CAAgCV,eAAhC;;AAEA;AACA,gBAAKW,YAAL,GAAoB,0BAAgB,OAAK1B,SAArB,EAAgCe,eAAhC,EAAiD,IAAjD,CAApB;;AAEA;AACA,aAAI,OAAKY,YAAT,EAAuB;AACrB,kBAAK3B,SAAL,CAAewB,IAAf,CAAoBI,WAApB,CAAgC,OAAKD,YAArC;AACD;AACD,gBAAK3B,SAAL,CAAe6B,mBAAf,CAAmC,SAAnC,EAA8C,OAAKxB,UAAnD;AACA,gBAAKyB,oBAAL;AACD,QAvBD;AAwBD;;AAED;;;;;;mCAGc,CAEb;;AAED;;;;;;;+BAIU;AACR,cAAO,UAAP;AACD;;AAED;;;;;;qCAGgB;AACd,YAAK9B,SAAL,CAAe+B,gBAAf,CAAgC,SAAhC,EAA2C,KAAK1B,UAAhD;AACD;;AAED;;;;;;0CAGqB;AAAA,WACXL,SADW,GACG,IADH,CACXA,SADW;;AAEnB,WAAMgC,SAAShC,UAAUgB,aAAV,CAAwB,QAAxB,CAAf;AACA,WAAMiB,WAAWjC,UAAUkC,cAAV,CAAyB,gBAAzB,CAAjB;AACAF,cAAOP,WAAP,CAAmBQ,QAAnB;AACAD,cAAOZ,KAAP,CAAaC,QAAb,GAAwB,OAAxB;AACAW,cAAOZ,KAAP,CAAae,KAAb,GAAqB,MAArB;AACAH,cAAOZ,KAAP,CAAagB,MAAb,GAAsB,MAAtB;AACAJ,cAAOZ,KAAP,CAAa,SAAb,IAA0B,OAA1B;AACAY,cAAOK,OAAP,GAAiB,KAAKC,aAAL,CAAmBhC,IAAnB,CAAwB,IAAxB,CAAjB;;AAEA,YAAKqB,YAAL,GAAoBK,MAApB;AACAhC,iBAAUwB,IAAV,CAAeC,WAAf,CAA2BO,MAA3B;AACD;;AAED;;;;;;;4CAIuB;AAAA,WACbhC,SADa,GACC,IADD,CACbA,SADa;;AAErB,WAAMgC,SAAShC,UAAUgB,aAAV,CAAwB,QAAxB,CAAf;AACA,WAAMiB,WAAWjC,UAAUkC,cAAV,CAAyB,SAAzB,CAAjB;AACAF,cAAOP,WAAP,CAAmBQ,QAAnB;AACAD,cAAOZ,KAAP,CAAaC,QAAb,GAAwB,OAAxB;AACAW,cAAOZ,KAAP,CAAae,KAAb,GAAqB,MAArB;AACAH,cAAOZ,KAAP,CAAagB,MAAb,GAAsB,MAAtB;AACAJ,cAAOZ,KAAP,CAAa,SAAb,IAA0B,OAA1B;AACAY,cAAOK,OAAP,GAAiB,KAAKE,UAAL,CAAgBjC,IAAhB,CAAqB,IAArB,CAAjB;;AAEA,YAAKkC,cAAL,GAAsBR,MAAtB;AACAhC,iBAAUwB,IAAV,CAAeC,WAAf,CAA2BO,MAA3B;AACD;;AAED;;;;;;;gCAIWS,K,EAAO;AAAA,WAEdjD,GAFc,GAKZiD,KALY,CAEdjD,GAFc;AAAA,WAGdC,OAHc,GAKZgD,KALY,CAGdhD,OAHc;AAAA,WAIdC,QAJc,GAKZ+C,KALY,CAId/C,QAJc;AAAA,WAOTgD,UAPS,GAQZ,KAAK3C,OARO,CAOdP,GAPc;;;AAUhB,YAAKY,GAAL,6BAAmCX,OAAnC,eAAoDC,QAApD,aAAoEF,GAApE;;AAEA,WAAIA,QAAQkD,WAAWlD,GAAnB,IAA0BC,YAAYiD,WAAWjD,OAAjD,IAA4DiD,WAAWhD,QAA3E,EAAqF;AACnF,cAAKU,GAAL,CAAS,gDAAT;AACA,cAAKkC,aAAL;AACD;AACF;;AAED;;;;;;;kCAIa;AACX,WAAMK,MAAM,KAAK7B,OAAL,CAAa8B,UAAb,CAAwB,IAAxB,CAAZ;AACA,WAAMC,YAAY,KAAKnB,YAAL,CAAkBoB,YAAlB,EAAlB;AACA,WAAMC,UAAUJ,IAAIK,YAAJ,CAAiBH,UAAUI,CAA3B,EAA8BJ,UAAUK,CAAxC,EAA2CL,UAAUM,CAArD,EAAwDN,UAAUO,CAAlE,CAAhB;;AAEA,WAAMC,YAAY,KAAKrD,SAAL,CAAegB,aAAf,CAA6B,QAA7B,CAAlB;AACAqC,iBAAUnC,KAAV,GAAkB2B,UAAUM,CAA5B;AACAE,iBAAUlC,MAAV,GAAmB0B,UAAUO,CAA7B;AACA,WAAME,SAASD,UAAUT,UAAV,CAAqB,IAArB,CAAf;AACAU,cAAOC,YAAP,CAAoBR,OAApB,EAA6B,CAA7B,EAAgC,CAAhC;;AAEA,YAAKS,aAAL;;AAEA,WAAMC,UAAUJ,UAAUK,SAAV,CAAoB,WAApB,CAAhB;;AAEA;AACAC,cAAOC,QAAP,CAAgBC,IAAhB,GAAuBJ,OAAvB,CAhBW,CAgBqB;AACjC;;AAED;;;;;;;sCAIiB;AACf,WAAMK,iBAAiB,SAAjBA,cAAiB,GAAY;AAAA,aAAXC,CAAW,yDAAP,EAAO;;AACjC,aAAIA,EAAED,cAAN,EAAsB;AACpBC,aAAED,cAAF;AACD;AACDC,WAAEC,WAAF,GAAgB,KAAhB;AACD,QALD;;AAOA;AACA;AACA;AACA,WAAMC,8BAA8B,SAA9BA,2BAA8B,CAACF,CAAD,EAAO;AACzC,aAAMG,OAAO,CAAC,EAAD,EAAK,EAAL,EAAS,EAAT,EAAa,EAAb,EAAiB,EAAjB,EAAqB,EAArB,EAAyB,EAAzB,EAA6B,EAA7B,EAAiC,EAAjC,CAAb;AACA,aAAIA,KAAKC,OAAL,CAAaJ,EAAEK,OAAf,MAA4B,CAAC,CAAjC,EAAoC;AAClCN,0BAAeC,CAAf;AACA,kBAAO,KAAP;AACD;AACF,QAND;;AAQA,YAAK/D,SAAL,CAAeqE,SAAf,GAA2BJ,2BAA3B;AACA,YAAKjE,SAAL,CAAesE,YAAf,GAA8BR,cAA9B;AACD;;AAED;;;;;;;qCAIgB;AACd,YAAK9D,SAAL,CAAeqE,SAAf,GAA2B,IAA3B;AACA,YAAKrE,SAAL,CAAesE,YAAf,GAA8B,IAA9B;AACD;;;;;;mBA1MkBzE,Q;;;;;;;qYCdrB;;;;;GAOA,CAAC,SAAS0E,CAAT,CAAW,CAAC,GAAG,4BAAOC,OAAP,KAAiB,QAAjB,EAA2B,MAAOC,OAAP,GAAgB,WAA9C,CAA0D,CAACA,OAAOD,OAAP,CAAeD,GAAf,CAAmB,CAA9E,IAAmF,IAAG,IAAH,CAA0C,CAAC,iCAAO,EAAP,oCAAUA,CAAV,6SAAa,CAAxD,IAA4D,CAAC,GAAIG,EAAJ,CAAM,GAAG,MAAOf,OAAP,GAAgB,WAAnB,CAA+B,CAACe,EAAEf,MAAF,CAAS,CAAzC,IAA8C,IAAG,MAAOgB,OAAP,GAAgB,WAAnB,CAA+B,CAACD,EAAEC,MAAF,CAAS,CAAzC,IAA8C,IAAG,MAAOC,KAAP,GAAc,WAAjB,CAA6B,CAACF,EAAEE,IAAF,CAAO,CAArC,IAAyC,CAACF,EAAE,IAAF,CAAO,GAAEG,WAAF,CAAgBN,GAAhB,CAAoB,CAAC,CAArU,EAAuU,UAAU,CAAC,GAAIO,OAAJ,CAAWL,MAAX,CAAkBD,OAAlB,CAA0B,MAAQ,SAAST,EAAT,CAAWgB,CAAX,CAAaC,CAAb,CAAeC,CAAf,CAAiB,CAAC,QAASC,EAAT,CAAWC,CAAX,CAAaC,CAAb,CAAe,CAAC,GAAG,CAACJ,EAAEG,CAAF,CAAJ,CAAS,CAAC,GAAG,CAACJ,EAAEI,CAAF,CAAJ,CAAS,CAAC,GAAIE,GAAE,MAAOC,QAAP,EAAgB,UAAhB,EAA4BA,OAAlC,CAA0C,GAAG,CAACF,CAAD,EAAIC,CAAP,CAAS,MAAOA,CAAA,OAAAA,CAAEF,CAAF,CAAI,CAAC,CAAL,CAAP,CAAe,GAAGI,CAAH,CAAK,MAAOA,GAAEJ,CAAF,CAAI,CAAC,CAAL,CAAP,CAAe,GAAIZ,GAAE,GAAIiB,MAAJ,CAAU,uBAAuBL,CAAvB,CAAyB,GAAnC,CAAN,CAA8C,KAAMZ,GAAEkB,IAAF,CAAO,kBAAP,CAA0BlB,CAAhC,CAAkC,IAAImB,GAAEV,EAAEG,CAAF,EAAK,CAACX,QAAQ,EAAT,CAAX,CAAwBO,EAAEI,CAAF,EAAK,CAAL,EAAQQ,IAAR,CAAaD,EAAElB,OAAf,CAAuB,SAAST,CAAT,CAAW,CAAC,GAAIiB,GAAED,EAAEI,CAAF,EAAK,CAAL,EAAQpB,CAAR,CAAN,CAAiB,MAAOmB,GAAEF,EAAEA,CAAF,CAAIjB,CAAN,CAAP,CAAgB,CAApE,CAAqE2B,CAArE,CAAuEA,EAAElB,OAAzE,CAAiFT,CAAjF,CAAmFgB,CAAnF,CAAqFC,CAArF,CAAuFC,CAAvF,EAA0F,OAAOD,GAAEG,CAAF,EAAKX,OAAZ,CAAoB,IAAIe,GAAE,MAAOD,QAAP,EAAgB,UAAhB,EAA4BA,OAAlC,CAA0C,IAAI,GAAIH,GAAE,CAAV,CAAYA,EAAEF,EAAEW,MAAhB,CAAuBT,GAAvB,EAA2BD,EAAED,EAAEE,CAAF,CAAF,EAA3B,CAAmC,MAAOD,EAAP,CAAS,CAAzb,CAA2b,CAAC,EAAE,CAAC,SAASW,OAAT,CAAiBpB,MAAjB,CAAwBD,OAAxB,CAAgC,CACl1B,CAAC,SAAUG,MAAV,CAAiB,CAClB,kDACA,CAAE,UAASmB,IAAT,CAAe,CAEhB,4BACA,GAAIC,aAAc,OAAOvB,QAAP,mCAAOA,OAAP,IAAkB,QAAlB,EAA8BA,OAA9B,EACjB,CAACA,QAAQwB,QADQ,EACIxB,OADtB,CAEA,GAAIyB,YAAa,OAAOxB,OAAP,mCAAOA,MAAP,IAAiB,QAAjB,EAA6BA,MAA7B,EAChB,CAACA,OAAOuB,QADQ,EACIvB,MADrB,CAEA,GAAIyB,YAAa,OAAOvB,OAAP,mCAAOA,MAAP,IAAiB,QAAjB,EAA6BA,MAA9C,CACA,GACCuB,WAAWvB,MAAX,GAAsBuB,UAAtB,EACAA,WAAWvC,MAAX,GAAsBuC,UADtB,EAEAA,WAAWtB,IAAX,GAAoBsB,UAHrB,CAIE,CACDJ,KAAOI,UAAP,CACA,CAED;;;;KAKA,GAAIC,SAAJ,CAEA,iDACAC,OAAS,UAHT,CAGqB;AAErB,6BACAC,KAAO,EANP,CAOAC,KAAO,CAPP,CAQAC,KAAO,EARP,CASAC,KAAO,EATP,CAUAC,KAAO,GAVP,CAWAC,YAAc,EAXd,CAYAC,SAAW,GAZX,CAYgB;AAChBC,WAAY,GAbZ,CAaiB;AAEjB,2BACAC,cAAgB,OAhBhB,CAiBAC,cAAgB,cAjBhB,CAiBgC;AAChCC,iBAAkB,2BAlBlB,CAkB+C;AAE/C,sBACAC,OAAS,CACR,WAAY,iDADJ,CAER,YAAa,gDAFL,CAGR,gBAAiB,eAHT,CArBT,CA2BA,4BACAC,cAAgBZ,KAAOC,IA5BvB,CA6BAY,MAAQC,KAAKD,KA7Bb,CA8BAE,mBAAqBC,OAAOC,YA9B5B,CAgCA,yBACA9H,GAjCA,CAmCA,8EAEA;;;;;KAMA,QAAS+H,MAAT,CAAeC,IAAf,CAAqB,CACpB,KAAM,IAAIC,WAAJ,CAAeT,OAAOQ,IAAP,CAAf,CAAN,CACA,CAED;;;;;;;KAQA,QAASE,IAAT,CAAaC,KAAb,CAAoBC,EAApB,CAAwB,CACvB,GAAIhC,QAAS+B,MAAM/B,MAAnB,CACA,GAAIiC,QAAS,EAAb,CACA,MAAOjC,QAAP,CAAiB,CAChBiC,OAAOjC,MAAP,EAAiBgC,GAAGD,MAAM/B,MAAN,CAAH,CAAjB,CACA,CACD,MAAOiC,OAAP,CACA,CAED;;;;;;;;;KAUA,QAASC,UAAT,CAAmBC,MAAnB,CAA2BH,EAA3B,CAA+B,CAC9B,GAAII,OAAQD,OAAOE,KAAP,CAAa,GAAb,CAAZ,CACA,GAAIJ,QAAS,EAAb,CACA,GAAIG,MAAMpC,MAAN,CAAe,CAAnB,CAAsB,CACrB;AACA;AACAiC,QAASG,MAAM,CAAN,EAAW,GAApB,CACAD,OAASC,MAAM,CAAN,CAAT,CACA,CACD;AACAD,QAASA,OAAOG,OAAP,CAAenB,eAAf,CAAgC,MAAhC,CAAT,CACA,GAAIoB,QAASJ,OAAOE,KAAP,CAAa,GAAb,CAAb,CACA,GAAIG,SAAUV,IAAIS,MAAJ,CAAYP,EAAZ,EAAgBS,IAAhB,CAAqB,GAArB,CAAd,CACA,MAAOR,QAASO,OAAhB,CACA,CAED;;;;;;;;;;;;KAaA,QAASE,WAAT,CAAoBP,MAApB,CAA4B,CAC3B,GAAIQ,QAAS,EAAb,CACIC,QAAU,CADd,CAEI5C,OAASmC,OAAOnC,MAFpB,CAGI6C,KAHJ,CAIIC,KAJJ,CAKA,MAAOF,QAAU5C,MAAjB,CAAyB,CACxB6C,MAAQV,OAAOY,UAAP,CAAkBH,SAAlB,CAAR,CACA,GAAIC,OAAS,MAAT,EAAmBA,OAAS,MAA5B,EAAsCD,QAAU5C,MAApD,CAA4D,CAC3D;AACA8C,OAAQX,OAAOY,UAAP,CAAkBH,SAAlB,CAAR,CACA,GAAI,CAACE,MAAQ,MAAT,GAAoB,MAAxB,CAAgC,CAAE;AACjCH,QAAOK,IAAP,CAAY,CAAC,CAACH,MAAQ,KAAT,GAAmB,EAApB,GAA2BC,MAAQ,KAAnC,EAA4C,OAAxD,EACA,CAFD,IAEO,CACN;AACA;AACAH,QAAOK,IAAP,CAAYH,KAAZ,EACAD,UACA,CACD,CAXD,IAWO,CACND,OAAOK,IAAP,CAAYH,KAAZ,EACA,CACD,CACD,MAAOF,OAAP,CACA,CAED;;;;;;;KAQA,QAASM,WAAT,CAAoBlB,KAApB,CAA2B,CAC1B,MAAOD,KAAIC,KAAJ,CAAW,SAASc,KAAT,CAAgB,CACjC,GAAIF,QAAS,EAAb,CACA,GAAIE,MAAQ,MAAZ,CAAoB,CACnBA,OAAS,OAAT,CACAF,QAAUnB,mBAAmBqB,QAAU,EAAV,CAAe,KAAf,CAAuB,MAA1C,CAAV,CACAA,MAAQ,OAASA,MAAQ,KAAzB,CACA,CACDF,QAAUnB,mBAAmBqB,KAAnB,CAAV,CACA,MAAOF,OAAP,CACA,CATM,EASJF,IATI,CASC,EATD,CAAP,CAUA,CAED;;;;;;;;KASA,QAASS,aAAT,CAAsBC,SAAtB,CAAiC,CAChC,GAAIA,UAAY,EAAZ,CAAiB,EAArB,CAAyB,CACxB,MAAOA,WAAY,EAAnB,CACA,CACD,GAAIA,UAAY,EAAZ,CAAiB,EAArB,CAAyB,CACxB,MAAOA,WAAY,EAAnB,CACA,CACD,GAAIA,UAAY,EAAZ,CAAiB,EAArB,CAAyB,CACxB,MAAOA,WAAY,EAAnB,CACA,CACD,MAAO1C,KAAP,CACA,CAED;;;;;;;;;;KAWA,QAAS2C,aAAT,CAAsBC,KAAtB,CAA6BC,IAA7B,CAAmC,CAClC;AACA;AACA,OAAOD,OAAQ,EAAR,CAAa,IAAMA,MAAQ,EAAd,CAAb,EAAkC,CAACC,MAAQ,CAAT,GAAe,CAAjD,CAAP,CACA,CAED;;;;KAKA,QAASC,MAAT,CAAeC,KAAf,CAAsBC,SAAtB,CAAiCC,SAAjC,CAA4C,CAC3C,GAAIC,GAAI,CAAR,CACAH,MAAQE,UAAYpC,MAAMkC,MAAQ3C,IAAd,CAAZ,CAAkC2C,OAAS,CAAnD,CACAA,OAASlC,MAAMkC,MAAQC,SAAd,CAAT,CACA,KAAK,uBAAyBD,MAAQnC,cAAgBV,IAAhB,EAAwB,CAA9D,CAAiEgD,GAAKlD,IAAtE,CAA4E,CAC3E+C,MAAQlC,MAAMkC,MAAQnC,aAAd,CAAR,CACA,CACD,MAAOC,OAAMqC,EAAI,CAACtC,cAAgB,CAAjB,EAAsBmC,KAAtB,EAA+BA,MAAQ5C,IAAvC,CAAV,CAAP,CACA,CAED;;;;;;KAOA,QAASgD,OAAT,CAAgBC,KAAhB,CAAuB,CACtB;AACA,IAAIlB,QAAS,EAAb,CACImB,YAAcD,MAAM7D,MADxB,CAEI+D,GAFJ,CAGIpE,EAAI,CAHR,CAIIP,EAAI2B,QAJR,CAKIiD,KAAOlD,WALX,CAMImD,KANJ,CAOIC,CAPJ,CAQIC,KARJ,CASIC,IATJ,CAUI7G,CAVJ,CAWIoG,CAXJ,CAYIN,KAZJ,CAaIlE,CAbJ,CAcI,iCACAkF,UAfJ,CAiBA;AACA;AACA;AAEAJ,OAAQJ,MAAMS,WAAN,CAAkBtD,SAAlB,CAAR,CACA,GAAIiD,MAAQ,CAAZ,CAAe,CACdA,MAAQ,CAAR,CACA,CAED,IAAKC,EAAI,CAAT,CAAYA,EAAID,KAAhB,CAAuB,EAAEC,CAAzB,CAA4B,CAC3B;AACA,IAAIL,MAAMd,UAAN,CAAiBmB,CAAjB,GAAuB,IAA3B,CAAiC,CAChCvC,MAAM,WAAN,EACA,CACDgB,OAAOK,IAAP,CAAYa,MAAMd,UAAN,CAAiBmB,CAAjB,CAAZ,EACA,CAED;AACA;AAEA,KAAKC,MAAQF,MAAQ,CAAR,CAAYA,MAAQ,CAApB,CAAwB,CAArC,CAAwCE,MAAQL,WAAhD,EAA6D,yBAA2B,CAEvF;AACA;AACA;AACA;AACA;AACA,KAAKM,KAAOzE,CAAP,CAAUpC,EAAI,CAAd,CAAiBoG,EAAIlD,IAA1B,EAAgC,kBAAoBkD,GAAKlD,IAAzD,CAA+D,CAE9D,GAAI0D,OAASL,WAAb,CAA0B,CACzBnC,MAAM,eAAN,EACA,CAED0B,MAAQH,aAAaW,MAAMd,UAAN,CAAiBoB,OAAjB,CAAb,CAAR,CAEA,GAAId,OAAS5C,IAAT,EAAiB4C,MAAQ/B,MAAM,CAACd,OAASb,CAAV,EAAepC,CAArB,CAA7B,CAAsD,CACrDoE,MAAM,UAAN,EACA,CAEDhC,GAAK0D,MAAQ9F,CAAb,CACA4B,EAAIwE,GAAKK,IAAL,CAAYtD,IAAZ,CAAoBiD,GAAKK,KAAOrD,IAAZ,CAAmBA,IAAnB,CAA0BgD,EAAIK,IAAtD,CAEA,GAAIX,MAAQlE,CAAZ,CAAe,CACd,MACA,CAEDkF,WAAa5D,KAAOtB,CAApB,CACA,GAAI5B,EAAI+D,MAAMd,OAAS6D,UAAf,CAAR,CAAoC,CACnC1C,MAAM,UAAN,EACA,CAEDpE,GAAK8G,UAAL,CAEA,CAEDN,IAAMpB,OAAO3C,MAAP,CAAgB,CAAtB,CACAgE,KAAOT,MAAM5D,EAAIyE,IAAV,CAAgBL,GAAhB,CAAqBK,MAAQ,CAA7B,CAAP,CAEA;AACA;AACA,IAAI9C,MAAM3B,EAAIoE,GAAV,EAAiBvD,OAASpB,CAA9B,CAAiC,CAChCuC,MAAM,UAAN,EACA,CAEDvC,GAAKkC,MAAM3B,EAAIoE,GAAV,CAAL,CACApE,GAAKoE,GAAL,CAEA;AACApB,QAAO4B,MAAP,CAAc5E,GAAd,CAAmB,CAAnB,CAAsBP,CAAtB,EAEA,CAED,MAAO6D,YAAWN,MAAX,CAAP,CACA,CAED;;;;;;KAOA,QAAS6B,OAAT,CAAgBX,KAAhB,CAAuB,CACtB,GAAIzE,EAAJ,CACIoE,KADJ,CAEIiB,cAFJ,CAGIC,WAHJ,CAIIV,IAJJ,CAKIE,CALJ,CAMIS,CANJ,CAOIC,CAPJ,CAQIjB,CARJ,CASIxE,CATJ,CAUI0F,YAVJ,CAWIlC,OAAS,EAXb,CAYI,oEACAmB,WAbJ,CAcI,iCACAgB,qBAfJ,CAgBIT,UAhBJ,CAiBIU,OAjBJ,CAmBA;AACAlB,OAAQnB,WAAWmB,KAAX,CAAR,CAEA;AACAC,aAAcD,MAAM7D,MAApB,CAEA;AACAZ,GAAI2B,QAAJ,CACAyC,MAAQ,CAAR,CACAQ,KAAOlD,WAAP,CAEA;AACA,KAAKoD,EAAI,CAAT,CAAYA,EAAIJ,WAAhB,CAA6B,EAAEI,CAA/B,CAAkC,CACjCW,aAAehB,MAAMK,CAAN,CAAf,CACA,GAAIW,aAAe,IAAnB,CAAyB,CACxBlC,OAAOK,IAAP,CAAYxB,mBAAmBqD,YAAnB,CAAZ,EACA,CACD,CAEDJ,eAAiBC,YAAc/B,OAAO3C,MAAtC,CAEA;AACA;AAEA;AACA,IAAI0E,WAAJ,CAAiB,CAChB/B,OAAOK,IAAP,CAAYhC,SAAZ,EACA,CAED;AACA,OAAOyD,eAAiBX,WAAxB,CAAqC,CAEpC;AACA;AACA,KAAKa,EAAInE,MAAJ,CAAY0D,EAAI,CAArB,CAAwBA,EAAIJ,WAA5B,CAAyC,EAAEI,CAA3C,CAA8C,CAC7CW,aAAehB,MAAMK,CAAN,CAAf,CACA,GAAIW,cAAgBzF,CAAhB,EAAqByF,aAAeF,CAAxC,CAA2C,CAC1CA,EAAIE,YAAJ,CACA,CACD,CAED;AACA;AACAC,uBAAwBL,eAAiB,CAAzC,CACA,GAAIE,EAAIvF,CAAJ,CAAQkC,MAAM,CAACd,OAASgD,KAAV,EAAmBsB,qBAAzB,CAAZ,CAA6D,CAC5DnD,MAAM,UAAN,EACA,CAED6B,OAAS,CAACmB,EAAIvF,CAAL,EAAU0F,qBAAnB,CACA1F,EAAIuF,CAAJ,CAEA,IAAKT,EAAI,CAAT,CAAYA,EAAIJ,WAAhB,CAA6B,EAAEI,CAA/B,CAAkC,CACjCW,aAAehB,MAAMK,CAAN,CAAf,CAEA,GAAIW,aAAezF,CAAf,EAAoB,EAAEoE,KAAF,CAAUhD,MAAlC,CAA0C,CACzCmB,MAAM,UAAN,EACA,CAED,GAAIkD,cAAgBzF,CAApB,CAAuB,CACtB;AACA,KAAKwF,EAAIpB,KAAJ,CAAWG,EAAIlD,IAApB,EAA0B,kBAAoBkD,GAAKlD,IAAnD,CAAyD,CACxDtB,EAAIwE,GAAKK,IAAL,CAAYtD,IAAZ,CAAoBiD,GAAKK,KAAOrD,IAAZ,CAAmBA,IAAnB,CAA0BgD,EAAIK,IAAtD,CACA,GAAIY,EAAIzF,CAAR,CAAW,CACV,MACA,CACD4F,QAAUH,EAAIzF,CAAd,CACAkF,WAAa5D,KAAOtB,CAApB,CACAwD,OAAOK,IAAP,CACCxB,mBAAmB4B,aAAajE,EAAI4F,QAAUV,UAA3B,CAAuC,CAAvC,CAAnB,CADD,EAGAO,EAAItD,MAAMyD,QAAUV,UAAhB,CAAJ,CACA,CAED1B,OAAOK,IAAP,CAAYxB,mBAAmB4B,aAAawB,CAAb,CAAgB,CAAhB,CAAnB,CAAZ,EACAZ,KAAOT,MAAMC,KAAN,CAAasB,qBAAb,CAAoCL,gBAAkBC,WAAtD,CAAP,CACAlB,MAAQ,CAAR,CACA,EAAEiB,cAAF,CACA,CACD,CAED,EAAEjB,KAAF,CACA,EAAEpE,CAAF,CAEA,CACD,MAAOuD,QAAOF,IAAP,CAAY,EAAZ,CAAP,CACA,CAED;;;;;;;;;;KAWA,QAASuC,UAAT,CAAmBnB,KAAnB,CAA0B,CACzB,MAAO3B,WAAU2B,KAAV,CAAiB,SAAS1B,MAAT,CAAiB,CACxC,MAAOlB,eAAcgE,IAAd,CAAmB9C,MAAnB,EACJyB,OAAOzB,OAAO+C,KAAP,CAAa,CAAb,EAAgBC,WAAhB,EAAP,CADI,CAEJhD,MAFH,CAGA,CAJM,CAAP,CAKA,CAED;;;;;;;;;;KAWA,QAASiD,QAAT,CAAiBvB,KAAjB,CAAwB,CACvB,MAAO3B,WAAU2B,KAAV,CAAiB,SAAS1B,MAAT,CAAiB,CACxC,MAAOjB,eAAc+D,IAAd,CAAmB9C,MAAnB,EACJ,OAASqC,OAAOrC,MAAP,CADL,CAEJA,MAFH,CAGA,CAJM,CAAP,CAKA,CAED,8EAEA,4BACA5B,SAAW,CACV;;;;MAKA,UAAW,OAND,CAOV;;;;;;MAOA,OAAQ,CACP,SAAUmC,UADH,CAEP,SAAUO,UAFH,CAdE,CAkBV,SAAUW,MAlBA,CAmBV,SAAUY,MAnBA,CAoBV,UAAWY,OApBD,CAqBV,YAAaJ,SArBH,CAAX,CAwBA,wBACA;AACA;AACA,IACC,MAAO9F,OAAP,EAAiB,UAAjB,EACA,QAAOA,OAAOmG,GAAd,GAAqB,QADrB,EAEAnG,OAAOmG,GAHR,CAIE,CACDnG,OAAO,UAAP,CAAmB,UAAW,CAC7B,MAAOqB,SAAP,CACA,CAFD,EAGA,CARD,IAQO,IAAIJ,aAAeE,UAAnB,CAA+B,CACrC,GAAIxB,OAAOD,OAAP,EAAkBuB,WAAtB,CAAmC,CAClC;AACAE,YAAWzB,OAAX,CAAqB2B,QAArB,CACA,CAHD,IAGO,CACN;AACA,KAAK3G,GAAL,GAAY2G,SAAZ,CAAsB,CACrBA,SAAS+E,cAAT,CAAwB1L,GAAxB,IAAiCuG,YAAYvG,GAAZ,EAAmB2G,SAAS3G,GAAT,CAApD,EACA,CACD,CACD,CAVM,IAUA,CACN;AACAsG,MAAKK,QAAL,CAAgBA,QAAhB,CACA,CAED,CAnhBC,EAmhBA,IAnhBA,CAAD,CAqhBA,CAvhBD,EAuhBGR,IAvhBH,CAuhBQ,IAvhBR,CAuhBa,MAAOhB,OAAP,GAAkB,WAAlB,CAAgCA,MAAhC,CAAyC,MAAOC,KAAP,GAAgB,WAAhB,CAA8BA,IAA9B,CAAqC,MAAOjB,OAAP,GAAkB,WAAlB,CAAgCA,MAAhC,CAAyC,EAvhBpI,EAwhBC,CAzhBgzB,CAyhB/yB,EAzhB+yB,CAAH,CAyhBxyB,EAAE,CAAC,SAASkC,OAAT,CAAiBpB,MAAjB,CAAwBD,OAAxB,CAAgC,CACzC,GAAIpE,KAAMyF,QAAQ,OAAR,CAAV,CAEA,QAASsF,mBAAT,CAA4BC,aAA5B,CAA2CnI,CAA3C,CAA8CC,CAA9C,CAAiD,CAC7C,GAAIkI,cAAcC,WAAd,GAA8BpI,IAAMmI,cAAcC,WAAd,CAA0BC,WAAhC,EAA+CpI,IAAMkI,cAAcC,WAAd,CAA0BE,WAA7G,CAAJ,CAA+H,CAC3HH,cAAcC,WAAd,CAA0BG,QAA1B,CAAmCvI,CAAnC,CAAsCC,CAAtC,EACH,CACJ,CAED,QAASuI,oBAAT,CAA6B5K,MAA7B,CAAqC6K,YAArC,CAAmD,CAC/C,GAAI,CACA,GAAIA,YAAJ,CAAkB,CACdA,aAAaxK,KAAb,CAAqBL,OAAOK,KAA5B,CACAwK,aAAavK,MAAb,CAAsBN,OAAOM,MAA7B,CACAuK,aAAa9I,UAAb,CAAwB,IAAxB,EAA8BW,YAA9B,CAA2C1C,OAAO+B,UAAP,CAAkB,IAAlB,EAAwBI,YAAxB,CAAqC,CAArC,CAAwC,CAAxC,CAA2CnC,OAAOK,KAAlD,CAAyDL,OAAOM,MAAhE,CAA3C,CAAoH,CAApH,CAAuH,CAAvH,EACH,CACJ,CAAC,MAAM4C,CAAN,CAAS,CACP3D,IAAI,oCAAJ,CAA0CS,MAA1C,CAAkDkD,CAAlD,EACH,CACJ,CAED,QAAS4H,UAAT,CAAmBC,IAAnB,CAAyBC,iBAAzB,CAA4C,CACxC,GAAIC,OAAQF,KAAK5F,QAAL,GAAkB,CAAlB,CAAsB+F,SAAS7J,cAAT,CAAwB0J,KAAKI,SAA7B,CAAtB,CAAgEJ,KAAKD,SAAL,CAAe,KAAf,CAA5E,CAEA,GAAIM,OAAQL,KAAKM,UAAjB,CACA,MAAMD,KAAN,CAAa,CACT,GAAIJ,oBAAsB,IAAtB,EAA8BI,MAAMjG,QAAN,GAAmB,CAAjD,EAAsDiG,MAAME,QAAN,GAAmB,QAA7E,CAAuF,CACnFL,MAAMrK,WAAN,CAAkBkK,UAAUM,KAAV,CAAiBJ,iBAAjB,CAAlB,EACH,CACDI,MAAQA,MAAMG,WAAd,CACH,CAED,GAAIR,KAAK5F,QAAL,GAAkB,CAAtB,CAAyB,CACrB8F,MAAMO,UAAN,CAAmBT,KAAKU,SAAxB,CACAR,MAAMS,WAAN,CAAoBX,KAAKY,UAAzB,CACA,GAAIZ,KAAKO,QAAL,GAAkB,QAAtB,CAAgC,CAC5BV,oBAAoBG,IAApB,CAA0BE,KAA1B,EACH,CAFD,IAEO,IAAIF,KAAKO,QAAL,GAAkB,UAAlB,EAAgCP,KAAKO,QAAL,GAAkB,QAAtD,CAAgE,CACnEL,MAAMrD,KAAN,CAAcmD,KAAKnD,KAAnB,CACH,CACJ,CAED,MAAOqD,MAAP,CACH,CAED,QAASW,SAAT,CAAkBb,IAAlB,CAAwB,CACpB,GAAIA,KAAK5F,QAAL,GAAkB,CAAtB,CAAyB,CACrB4F,KAAKU,SAAL,CAAiBV,KAAKS,UAAtB,CACAT,KAAKY,UAAL,CAAkBZ,KAAKW,WAAvB,CAEA,GAAIN,OAAQL,KAAKM,UAAjB,CACA,MAAMD,KAAN,CAAa,CACTQ,SAASR,KAAT,EACAA,MAAQA,MAAMG,WAAd,CACH,CACJ,CACJ,CAED3H,OAAOD,OAAP,CAAiB,SAAS4G,aAAT,CAAwBsB,iBAAxB,CAA2CxL,KAA3C,CAAkDC,MAAlD,CAA0DpB,OAA1D,CAAmEkD,CAAnE,CAAsEC,CAAtE,CAAyE,CACtF,GAAIyJ,iBAAkBhB,UAAUP,cAAcuB,eAAxB,CAAyC5M,QAAQ8L,iBAAjD,CAAtB,CACA,GAAIe,WAAYF,kBAAkB1L,aAAlB,CAAgC,QAAhC,CAAhB,CAEA4L,UAAUC,SAAV,CAAsB,uBAAtB,CACAD,UAAUxL,KAAV,CAAgB0L,UAAhB,CAA6B,QAA7B,CACAF,UAAUxL,KAAV,CAAgBC,QAAhB,CAA2B,OAA3B,CACAuL,UAAUxL,KAAV,CAAgBE,IAAhB,CAAuB,UAAvB,CACAsL,UAAUxL,KAAV,CAAgBG,GAAhB,CAAsB,KAAtB,CACAqL,UAAUxL,KAAV,CAAgB2L,MAAhB,CAAyB,GAAzB,CACAH,UAAU1L,KAAV,CAAkBA,KAAlB,CACA0L,UAAUzL,MAAV,CAAmBA,MAAnB,CACAyL,UAAUI,SAAV,CAAsB,IAAtB,CAA4B;AAC5BN,mBAAkBlL,IAAlB,CAAuBC,WAAvB,CAAmCmL,SAAnC,EAEA,MAAO,IAAIK,QAAJ,CAAY,SAASC,OAAT,CAAkB,CACjC,GAAIC,eAAgBP,UAAUQ,aAAV,CAAwBrB,QAA5C,CAEA;;YAGAa,UAAUQ,aAAV,CAAwBC,MAAxB,CAAiCT,UAAUS,MAAV,CAAmB,UAAW,CAC3D,GAAIC,UAAWC,YAAY,UAAW,CAClC,GAAIJ,cAAc3L,IAAd,CAAmBgM,UAAnB,CAA8B5H,MAA9B,CAAuC,CAA3C,CAA8C,CAC1C6G,SAASU,cAAcR,eAAvB,EACAc,cAAcH,QAAd,EACA,GAAIvN,QAAQyH,IAAR,GAAiB,MAArB,CAA6B,CACzBoF,UAAUQ,aAAV,CAAwB5B,QAAxB,CAAiCvI,CAAjC,CAAoCC,CAApC,EACA,GAAK,qBAAD,CAAwB2H,IAAxB,CAA6B6C,UAAUC,SAAvC,IAAsDf,UAAUQ,aAAV,CAAwBQ,OAAxB,GAAoC1K,CAApC,EAAyC0J,UAAUQ,aAAV,CAAwBS,OAAxB,GAAoC5K,CAAnI,CAAJ,CAA2I,CACvIkK,cAAcR,eAAd,CAA8BvL,KAA9B,CAAoCG,GAApC,CAA2C,CAAC2B,CAAF,CAAO,IAAjD,CACAiK,cAAcR,eAAd,CAA8BvL,KAA9B,CAAoCE,IAApC,CAA4C,CAAC2B,CAAF,CAAO,IAAlD,CACAkK,cAAcR,eAAd,CAA8BvL,KAA9B,CAAoCC,QAApC,CAA+C,UAA/C,CACH,CACJ,CACD6L,QAAQN,SAAR,EACH,CACJ,CAdc,CAcZ,EAdY,CAAf,CAeH,CAhBD,CAkBAO,cAAcW,IAAd,GACAX,cAAcY,KAAd,CAAoB,8BAApB,EACA;AACA5C,oBAAmBC,aAAnB,CAAkCnI,CAAlC,CAAqCC,CAArC,EACAiK,cAAca,YAAd,CAA2Bb,cAAcc,SAAd,CAAwBtB,eAAxB,CAA3B,CAAqEQ,cAAcR,eAAnF,EACAQ,cAAce,KAAd,GACH,CA9BM,CAAP,CA+BH,CA9CD,CAgDC,CA1GO,CA0GN,CAAC,QAAQ,EAAT,CA1GM,CAzhBsyB,CAmoB9xB,EAAE,CAAC,SAASrI,OAAT,CAAiBpB,MAAjB,CAAwBD,OAAxB,CAAgC,CACnD;AAEA,SAAS2J,MAAT,CAAe1F,KAAf,CAAsB,CAClB,KAAKxD,CAAL,CAAS,CAAT,CACA,KAAKP,CAAL,CAAS,CAAT,CACA,KAAK0J,CAAL,CAAS,CAAT,CACA,KAAK/I,CAAL,CAAS,IAAT,CACA,GAAIwC,QAAS,KAAKwG,SAAL,CAAe5F,KAAf,GACT,KAAK6F,UAAL,CAAgB7F,KAAhB,CADS,EAET,KAAK8F,GAAL,CAAS9F,KAAT,CAFS,EAGT,KAAK+F,IAAL,CAAU/F,KAAV,CAHS,EAIT,KAAKgG,IAAL,CAAUhG,KAAV,CAJS,EAKT,KAAKiG,IAAL,CAAUjG,KAAV,CALJ,CAMH,CAED0F,MAAMQ,SAAN,CAAgBC,MAAhB,CAAyB,SAASC,MAAT,CAAiB,CACtC,GAAIxJ,GAAI,EAAIwJ,MAAZ,CACA,MAAQ,IAAIV,MAAJ,CAAU,CACdhH,KAAK2H,KAAL,CAAW,KAAK7J,CAAL,CAASI,CAApB,CADc,CAEd8B,KAAK2H,KAAL,CAAW,KAAKpK,CAAL,CAASW,CAApB,CAFc,CAGd8B,KAAK2H,KAAL,CAAW,KAAKV,CAAL,CAAS/I,CAApB,CAHc,CAId,KAAKA,CAJS,CAAV,CAAR,CAMH,CARD,CAUA8I,MAAMQ,SAAN,CAAgBI,aAAhB,CAAgC,UAAW,CACvC,MAAO,MAAK1J,CAAL,GAAW,CAAlB,CACH,CAFD,CAIA8I,MAAMQ,SAAN,CAAgBK,OAAhB,CAA0B,UAAW,CACjC,MAAO,MAAK/J,CAAL,GAAW,CAAX,EAAgB,KAAKP,CAAL,GAAW,CAA3B,EAAgC,KAAK0J,CAAL,GAAW,CAAlD,CACH,CAFD,CAIAD,MAAMQ,SAAN,CAAgBN,SAAhB,CAA4B,SAAS1G,KAAT,CAAgB,CACxC,GAAIsH,MAAMC,OAAN,CAAcvH,KAAd,CAAJ,CAA0B,CACtB,KAAK1C,CAAL,CAASkC,KAAKgI,GAAL,CAASxH,MAAM,CAAN,CAAT,CAAmB,GAAnB,CAAT,CACA,KAAKjD,CAAL,CAASyC,KAAKgI,GAAL,CAASxH,MAAM,CAAN,CAAT,CAAmB,GAAnB,CAAT,CACA,KAAKyG,CAAL,CAASjH,KAAKgI,GAAL,CAASxH,MAAM,CAAN,CAAT,CAAmB,GAAnB,CAAT,CACA,GAAIA,MAAM/B,MAAN,CAAe,CAAnB,CAAsB,CAClB,KAAKP,CAAL,CAASsC,MAAM,CAAN,CAAT,CACH,CACJ,CAED,MAAQsH,OAAMC,OAAN,CAAcvH,KAAd,CAAR,CACH,CAXD,CAaA,GAAIyH,OAAQ,mBAAZ,CAEAjB,MAAMQ,SAAN,CAAgBD,IAAhB,CAAuB,SAASjG,KAAT,CAAgB,CACnC,GAAI4G,OAAQ,IAAZ,CACA,GAAI,CAACA,MAAQ5G,MAAM4G,KAAN,CAAYD,KAAZ,CAAT,IAAiC,IAArC,CAA2C,CACvC,KAAKnK,CAAL,CAASqK,SAASD,MAAM,CAAN,EAAS,CAAT,EAAcA,MAAM,CAAN,EAAS,CAAT,CAAvB,CAAoC,EAApC,CAAT,CACA,KAAK3K,CAAL,CAAS4K,SAASD,MAAM,CAAN,EAAS,CAAT,EAAcA,MAAM,CAAN,EAAS,CAAT,CAAvB,CAAoC,EAApC,CAAT,CACA,KAAKjB,CAAL,CAASkB,SAASD,MAAM,CAAN,EAAS,CAAT,EAAcA,MAAM,CAAN,EAAS,CAAT,CAAvB,CAAoC,EAApC,CAAT,CACH,CACD,MAAOA,SAAU,IAAjB,CACH,CARD,CAUA,GAAIE,OAAQ,mBAAZ,CAEApB,MAAMQ,SAAN,CAAgBF,IAAhB,CAAuB,SAAShG,KAAT,CAAgB,CACnC,GAAI4G,OAAQ,IAAZ,CACA,GAAI,CAACA,MAAQ5G,MAAM4G,KAAN,CAAYE,KAAZ,CAAT,IAAiC,IAArC,CAA2C,CACvC,KAAKtK,CAAL,CAASqK,SAASD,MAAM,CAAN,EAASG,SAAT,CAAmB,CAAnB,CAAsB,CAAtB,CAAT,CAAmC,EAAnC,CAAT,CACA,KAAK9K,CAAL,CAAS4K,SAASD,MAAM,CAAN,EAASG,SAAT,CAAmB,CAAnB,CAAsB,CAAtB,CAAT,CAAmC,EAAnC,CAAT,CACA,KAAKpB,CAAL,CAASkB,SAASD,MAAM,CAAN,EAASG,SAAT,CAAmB,CAAnB,CAAsB,CAAtB,CAAT,CAAmC,EAAnC,CAAT,CACH,CACD,MAAOH,SAAU,IAAjB,CACH,CARD,CAWA,GAAII,MAAO,0DAAX,CAEAtB,MAAMQ,SAAN,CAAgBJ,GAAhB,CAAsB,SAAS9F,KAAT,CAAgB,CAClC,GAAI4G,OAAQ,IAAZ,CACA,GAAI,CAACA,MAAQ5G,MAAM4G,KAAN,CAAYI,IAAZ,CAAT,IAAgC,IAApC,CAA0C,CACtC,KAAKxK,CAAL,CAASyK,OAAOL,MAAM,CAAN,CAAP,CAAT,CACA,KAAK3K,CAAL,CAASgL,OAAOL,MAAM,CAAN,CAAP,CAAT,CACA,KAAKjB,CAAL,CAASsB,OAAOL,MAAM,CAAN,CAAP,CAAT,CACH,CACD,MAAOA,SAAU,IAAjB,CACH,CARD,CAUA,GAAIM,OAAQ,6EAAZ,CAEAxB,MAAMQ,SAAN,CAAgBH,IAAhB,CAAuB,SAAS/F,KAAT,CAAgB,CACnC,GAAI4G,OAAQ,IAAZ,CACA,GAAI,CAACA,MAAQ5G,MAAM4G,KAAN,CAAYM,KAAZ,CAAT,IAAiC,IAArC,CAA2C,CACvC,KAAK1K,CAAL,CAASyK,OAAOL,MAAM,CAAN,CAAP,CAAT,CACA,KAAK3K,CAAL,CAASgL,OAAOL,MAAM,CAAN,CAAP,CAAT,CACA,KAAKjB,CAAL,CAASsB,OAAOL,MAAM,CAAN,CAAP,CAAT,CACA,KAAKhK,CAAL,CAASqK,OAAOL,MAAM,CAAN,CAAP,CAAT,CACH,CACD,MAAOA,SAAU,IAAjB,CACH,CATD,CAWAlB,MAAMQ,SAAN,CAAgBiB,QAAhB,CAA2B,UAAW,CAClC,MAAO,MAAKvK,CAAL,GAAW,IAAX,EAAmB,KAAKA,CAAL,GAAW,CAA9B,CACP,QAAU,CAAC,KAAKJ,CAAN,CAAS,KAAKP,CAAd,CAAiB,KAAK0J,CAAtB,CAAyB,KAAK/I,CAA9B,EAAiCgD,IAAjC,CAAsC,GAAtC,CAAV,CAAuD,GADhD,CAEP,OAAS,CAAC,KAAKpD,CAAN,CAAS,KAAKP,CAAd,CAAiB,KAAK0J,CAAtB,EAAyB/F,IAAzB,CAA8B,GAA9B,CAAT,CAA8C,GAF9C,CAGH,CAJD,CAMA8F,MAAMQ,SAAN,CAAgBL,UAAhB,CAA6B,SAAS7F,KAAT,CAAgB,CACzCA,MAAQA,MAAMsC,WAAN,EAAR,CACA,GAAI8E,OAAQC,OAAOrH,KAAP,CAAZ,CACA,GAAIoH,KAAJ,CAAW,CACP,KAAK5K,CAAL,CAAS4K,MAAM,CAAN,CAAT,CACA,KAAKnL,CAAL,CAASmL,MAAM,CAAN,CAAT,CACA,KAAKzB,CAAL,CAASyB,MAAM,CAAN,CAAT,CACH,CAJD,IAIO,IAAIpH,QAAU,aAAd,CAA6B,CAChC,KAAKxD,CAAL,CAAS,KAAKP,CAAL,CAAS,KAAK0J,CAAL,CAAS,KAAK/I,CAAL,CAAS,CAApC,CACA,MAAO,KAAP,CACH,CAED,MAAO,CAAC,CAACwK,KAAT,CACH,CAbD,CAeA1B,MAAMQ,SAAN,CAAgBoB,OAAhB,CAA0B,IAA1B,CAEA;AACA,IAAID,QAAS,CACT,YAAa,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CADJ,CAET,eAAgB,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CAFP,CAGT,OAAQ,CAAC,CAAD,CAAI,GAAJ,CAAS,GAAT,CAHC,CAIT,aAAc,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CAJL,CAKT,QAAS,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CALA,CAMT,QAAS,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CANA,CAOT,SAAU,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CAPD,CAQT,QAAS,CAAC,CAAD,CAAI,CAAJ,CAAO,CAAP,CARA,CAST,iBAAkB,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CATT,CAUT,OAAQ,CAAC,CAAD,CAAI,CAAJ,CAAO,GAAP,CAVC,CAWT,aAAc,CAAC,GAAD,CAAM,EAAN,CAAU,GAAV,CAXL,CAYT,QAAS,CAAC,GAAD,CAAM,EAAN,CAAU,EAAV,CAZA,CAaT,YAAa,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CAbJ,CAcT,YAAa,CAAC,EAAD,CAAK,GAAL,CAAU,GAAV,CAdJ,CAeT,aAAc,CAAC,GAAD,CAAM,GAAN,CAAW,CAAX,CAfL,CAgBT,YAAa,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CAhBJ,CAiBT,QAAS,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CAjBA,CAkBT,iBAAkB,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CAlBT,CAmBT,WAAY,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CAnBH,CAoBT,UAAW,CAAC,GAAD,CAAM,EAAN,CAAU,EAAV,CApBF,CAqBT,OAAQ,CAAC,CAAD,CAAI,GAAJ,CAAS,GAAT,CArBC,CAsBT,WAAY,CAAC,CAAD,CAAI,CAAJ,CAAO,GAAP,CAtBH,CAuBT,WAAY,CAAC,CAAD,CAAI,GAAJ,CAAS,GAAT,CAvBH,CAwBT,gBAAiB,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CAxBR,CAyBT,WAAY,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CAzBH,CA0BT,YAAa,CAAC,CAAD,CAAI,GAAJ,CAAS,CAAT,CA1BJ,CA2BT,WAAY,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CA3BH,CA4BT,YAAa,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CA5BJ,CA6BT,cAAe,CAAC,GAAD,CAAM,CAAN,CAAS,GAAT,CA7BN,CA8BT,iBAAkB,CAAC,EAAD,CAAK,GAAL,CAAU,EAAV,CA9BT,CA+BT,aAAc,CAAC,GAAD,CAAM,GAAN,CAAW,CAAX,CA/BL,CAgCT,aAAc,CAAC,GAAD,CAAM,EAAN,CAAU,GAAV,CAhCL,CAiCT,UAAW,CAAC,GAAD,CAAM,CAAN,CAAS,CAAT,CAjCF,CAkCT,aAAc,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CAlCL,CAmCT,eAAgB,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CAnCP,CAoCT,gBAAiB,CAAC,EAAD,CAAK,EAAL,CAAS,GAAT,CApCR,CAqCT,gBAAiB,CAAC,EAAD,CAAK,EAAL,CAAS,EAAT,CArCR,CAsCT,gBAAiB,CAAC,EAAD,CAAK,EAAL,CAAS,EAAT,CAtCR,CAuCT,gBAAiB,CAAC,CAAD,CAAI,GAAJ,CAAS,GAAT,CAvCR,CAwCT,aAAc,CAAC,GAAD,CAAM,CAAN,CAAS,GAAT,CAxCL,CAyCT,WAAY,CAAC,GAAD,CAAM,EAAN,CAAU,GAAV,CAzCH,CA0CT,cAAe,CAAC,CAAD,CAAI,GAAJ,CAAS,GAAT,CA1CN,CA2CT,UAAW,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CA3CF,CA4CT,UAAW,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CA5CF,CA6CT,aAAc,CAAC,EAAD,CAAK,GAAL,CAAU,GAAV,CA7CL,CA8CT,YAAa,CAAC,GAAD,CAAM,EAAN,CAAU,EAAV,CA9CJ,CA+CT,cAAe,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CA/CN,CAgDT,cAAe,CAAC,EAAD,CAAK,GAAL,CAAU,EAAV,CAhDN,CAiDT,UAAW,CAAC,GAAD,CAAM,CAAN,CAAS,GAAT,CAjDF,CAkDT,YAAa,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CAlDJ,CAmDT,aAAc,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CAnDL,CAoDT,OAAQ,CAAC,GAAD,CAAM,GAAN,CAAW,CAAX,CApDC,CAqDT,YAAa,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CArDJ,CAsDT,OAAQ,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CAtDC,CAuDT,QAAS,CAAC,CAAD,CAAI,GAAJ,CAAS,CAAT,CAvDA,CAwDT,cAAe,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CAxDN,CAyDT,OAAQ,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CAzDC,CA0DT,WAAY,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CA1DH,CA2DT,UAAW,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CA3DF,CA4DT,YAAa,CAAC,GAAD,CAAM,EAAN,CAAU,EAAV,CA5DJ,CA6DT,SAAU,CAAC,EAAD,CAAK,CAAL,CAAQ,GAAR,CA7DD,CA8DT,QAAS,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CA9DA,CA+DT,QAAS,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CA/DA,CAgET,WAAY,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CAhEH,CAiET,gBAAiB,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CAjER,CAkET,YAAa,CAAC,GAAD,CAAM,GAAN,CAAW,CAAX,CAlEJ,CAmET,eAAgB,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CAnEP,CAoET,YAAa,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CApEJ,CAqET,aAAc,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CArEL,CAsET,YAAa,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CAtEJ,CAuET,uBAAwB,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CAvEf,CAwET,YAAa,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CAxEJ,CAyET,aAAc,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CAzEL,CA0ET,YAAa,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CA1EJ,CA2ET,YAAa,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CA3EJ,CA4ET,cAAe,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CA5EN,CA6ET,gBAAiB,CAAC,EAAD,CAAK,GAAL,CAAU,GAAV,CA7ER,CA8ET,eAAgB,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CA9EP,CA+ET,iBAAkB,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CA/ET,CAgFT,iBAAkB,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CAhFT,CAiFT,iBAAkB,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CAjFT,CAkFT,cAAe,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CAlFN,CAmFT,OAAQ,CAAC,CAAD,CAAI,GAAJ,CAAS,CAAT,CAnFC,CAoFT,YAAa,CAAC,EAAD,CAAK,GAAL,CAAU,EAAV,CApFJ,CAqFT,QAAS,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CArFA,CAsFT,UAAW,CAAC,GAAD,CAAM,CAAN,CAAS,GAAT,CAtFF,CAuFT,SAAU,CAAC,GAAD,CAAM,CAAN,CAAS,CAAT,CAvFD,CAwFT,mBAAoB,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CAxFX,CAyFT,aAAc,CAAC,CAAD,CAAI,CAAJ,CAAO,GAAP,CAzFL,CA0FT,eAAgB,CAAC,GAAD,CAAM,EAAN,CAAU,GAAV,CA1FP,CA2FT,eAAgB,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CA3FP,CA4FT,iBAAkB,CAAC,EAAD,CAAK,GAAL,CAAU,GAAV,CA5FT,CA6FT,kBAAmB,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CA7FV,CA8FT,oBAAqB,CAAC,CAAD,CAAI,GAAJ,CAAS,GAAT,CA9FZ,CA+FT,kBAAmB,CAAC,EAAD,CAAK,GAAL,CAAU,GAAV,CA/FV,CAgGT,kBAAmB,CAAC,GAAD,CAAM,EAAN,CAAU,GAAV,CAhGV,CAiGT,eAAgB,CAAC,EAAD,CAAK,EAAL,CAAS,GAAT,CAjGP,CAkGT,YAAa,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CAlGJ,CAmGT,YAAa,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CAnGJ,CAoGT,WAAY,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CApGH,CAqGT,cAAe,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CArGN,CAsGT,OAAQ,CAAC,CAAD,CAAI,CAAJ,CAAO,GAAP,CAtGC,CAuGT,UAAW,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CAvGF,CAwGT,QAAS,CAAC,GAAD,CAAM,GAAN,CAAW,CAAX,CAxGA,CAyGT,YAAa,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CAzGJ,CA0GT,SAAU,CAAC,GAAD,CAAM,GAAN,CAAW,CAAX,CA1GD,CA2GT,YAAa,CAAC,GAAD,CAAM,EAAN,CAAU,CAAV,CA3GJ,CA4GT,SAAU,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CA5GD,CA6GT,gBAAiB,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CA7GR,CA8GT,YAAa,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CA9GJ,CA+GT,gBAAiB,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CA/GR,CAgHT,gBAAiB,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CAhHR,CAiHT,aAAc,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CAjHL,CAkHT,YAAa,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CAlHJ,CAmHT,OAAQ,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CAnHC,CAoHT,OAAQ,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CApHC,CAqHT,OAAQ,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CArHC,CAsHT,aAAc,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CAtHL,CAuHT,SAAU,CAAC,GAAD,CAAM,CAAN,CAAS,GAAT,CAvHD,CAwHT,gBAAiB,CAAC,GAAD,CAAM,EAAN,CAAU,GAAV,CAxHR,CAyHT,MAAO,CAAC,GAAD,CAAM,CAAN,CAAS,CAAT,CAzHE,CA0HT,YAAa,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CA1HJ,CA2HT,YAAa,CAAC,EAAD,CAAK,GAAL,CAAU,GAAV,CA3HJ,CA4HT,cAAe,CAAC,GAAD,CAAM,EAAN,CAAU,EAAV,CA5HN,CA6HT,SAAU,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CA7HD,CA8HT,aAAc,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CA9HL,CA+HT,WAAY,CAAC,EAAD,CAAK,GAAL,CAAU,EAAV,CA/HH,CAgIT,WAAY,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CAhIH,CAiIT,SAAU,CAAC,GAAD,CAAM,EAAN,CAAU,EAAV,CAjID,CAkIT,SAAU,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CAlID,CAmIT,UAAW,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CAnIF,CAoIT,YAAa,CAAC,GAAD,CAAM,EAAN,CAAU,GAAV,CApIJ,CAqIT,YAAa,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CArIJ,CAsIT,YAAa,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CAtIJ,CAuIT,OAAQ,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CAvIC,CAwIT,cAAe,CAAC,CAAD,CAAI,GAAJ,CAAS,GAAT,CAxIN,CAyIT,YAAa,CAAC,EAAD,CAAK,GAAL,CAAU,GAAV,CAzIJ,CA0IT,MAAO,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CA1IE,CA2IT,OAAQ,CAAC,CAAD,CAAI,GAAJ,CAAS,GAAT,CA3IC,CA4IT,UAAW,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CA5IF,CA6IT,SAAU,CAAC,GAAD,CAAM,EAAN,CAAU,EAAV,CA7ID,CA8IT,YAAa,CAAC,EAAD,CAAK,GAAL,CAAU,GAAV,CA9IJ,CA+IT,SAAU,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CA/ID,CAgJT,QAAS,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CAhJA,CAiJT,QAAS,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CAjJA,CAkJT,aAAc,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CAlJL,CAmJT,SAAU,CAAC,GAAD,CAAM,GAAN,CAAW,CAAX,CAnJD,CAoJT,cAAe,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CApJN,CAAb,CAuJArL,OAAOD,OAAP,CAAiB2J,KAAjB,CAEC,CAlRiB,CAkRhB,EAlRgB,CAnoB4xB,CAq5BxyB,EAAE,CAAC,SAAStI,OAAT,CAAiBpB,MAAjB,CAAwBD,OAAxB,CAAgC,CACzC,GAAIwL,SAAUnK,QAAQ,WAAR,CAAd,CACA,GAAIoK,gBAAiBpK,QAAQ,oBAAR,CAArB,CACA,GAAIqK,aAAcrK,QAAQ,eAAR,CAAlB,CACA,GAAIsK,YAAatK,QAAQ,cAAR,CAAjB,CACA,GAAIuK,eAAgBvK,QAAQ,iBAAR,CAApB,CACA,GAAIzF,KAAMyF,QAAQ,OAAR,CAAV,CACA,GAAIwK,OAAQxK,QAAQ,SAAR,CAAZ,CACA,GAAIyK,mBAAoBzK,QAAQ,SAAR,CAAxB,CACA,GAAI0K,iBAAkB1K,QAAQ,SAAR,EAAmB0K,eAAzC,CACA,GAAIC,WAAYH,MAAMG,SAAtB,CAEA,GAAIC,0BAA2B,uBAA/B,CACA,GAAIC,uBAAwB,CAA5B,CAEA,QAAS7L,YAAT,CAAqB8L,QAArB,CAA+B5Q,OAA/B,CAAwC,CACpC,GAAIgK,OAAQ2G,uBAAZ,CACA3Q,QAAUA,SAAW,EAArB,CACA,GAAIA,QAAQ6Q,OAAZ,CAAqB,CACjBxQ,IAAIL,OAAJ,CAAY6Q,OAAZ,CAAsB,IAAtB,CACAxQ,IAAIL,OAAJ,CAAY8Q,KAAZ,CAAoBC,KAAKC,GAAL,EAApB,CACH,CAEDhR,QAAQiR,KAAR,CAAgB,MAAOjR,SAAQiR,KAAf,GAA0B,WAA1B,CAAwC,IAAxC,CAA+CjR,QAAQiR,KAAvE,CACAjR,QAAQkR,UAAR,CAAqB,MAAOlR,SAAQkR,UAAf,GAA+B,WAA/B,CAA6C,KAA7C,CAAqDlR,QAAQkR,UAAlF,CACAlR,QAAQmR,eAAR,CAA0B,MAAOnR,SAAQmR,eAAf,GAAoC,WAApC,CAAkD,IAAlD,CAAyDnR,QAAQmR,eAA3F,CACAnR,QAAQ8L,iBAAR,CAA4B,MAAO9L,SAAQ8L,iBAAf,GAAsC,WAAtC,CAAoD,KAApD,CAA4D9L,QAAQ8L,iBAAhG,CACA9L,QAAQoR,YAAR,CAAuB,MAAOpR,SAAQoR,YAAf,GAAiC,WAAjC,CAA+C,KAA/C,CAAuDpR,QAAQoR,YAAtF,CACApR,QAAQqR,QAAR,CAAmB,MAAOrR,SAAQqR,QAAf,GAA6B,UAA7B,CAA0CrR,QAAQqR,QAAlD,CAA6DnB,cAAhF,CACAlQ,QAAQsR,MAAR,CAAiB,CAAC,CAACtR,QAAQsR,MAA3B,CAEA,GAAI,MAAOV,SAAP,GAAqB,QAAzB,CAAmC,CAC/B,GAAI,MAAO5Q,SAAQuR,KAAf,GAA0B,QAA9B,CAAwC,CACpC,MAAOrE,SAAQsE,MAAR,CAAe,uCAAf,CAAP,CACH,CACD,GAAIrQ,OAAQnB,QAAQmB,KAAR,EAAiB,IAAjB,CAAwBnB,QAAQmB,KAAhC,CAAwCyC,OAAO6N,UAA3D,CACA,GAAIrQ,QAASpB,QAAQoB,MAAR,EAAkB,IAAlB,CAAyBpB,QAAQoB,MAAjC,CAA0CwC,OAAO8N,WAA9D,CACA,MAAOlB,iBAAgBmB,YAAYf,QAAZ,CAAhB,CAAuC5Q,QAAQuR,KAA/C,CAAsDvF,QAAtD,CAAgE7K,KAAhE,CAAuEC,MAAvE,CAA+EpB,OAA/E,EAAwFa,IAAxF,CAA6F,SAASgM,SAAT,CAAoB,CACpH,MAAO+E,cAAa/E,UAAUQ,aAAV,CAAwBrB,QAAxB,CAAiCY,eAA9C,CAA+DC,SAA/D,CAA0E7M,OAA1E,CAAmFmB,KAAnF,CAA0FC,MAA1F,CAAP,CACH,CAFM,CAAP,CAGH,CAED,GAAIyK,MAAO,CAAE+E,WAAaiB,SAAd,CAA2B,CAAC7F,SAASY,eAAV,CAA3B,CAA0DgE,SAAS/K,MAAV,CAAoB+K,QAApB,CAA+B,CAACA,QAAD,CAAzF,EAAsG,CAAtG,CAAX,CACA/E,KAAKiG,YAAL,CAAkBpB,yBAA2B1G,KAA7C,CAAoDA,KAApD,EACA,MAAO+H,gBAAelG,KAAKR,aAApB,CAAmCrL,OAAnC,CAA4C6L,KAAKR,aAAL,CAAmBC,WAAnB,CAA+BmG,UAA3E,CAAuF5F,KAAKR,aAAL,CAAmBC,WAAnB,CAA+BoG,WAAtH,CAAmI1H,KAAnI,EAA0InJ,IAA1I,CAA+I,SAASC,MAAT,CAAiB,CACnK,GAAI,MAAOd,SAAQgS,UAAf,GAA+B,UAAnC,CAA+C,CAC3C3R,IAAI,uFAAJ,EACAL,QAAQgS,UAAR,CAAmBlR,MAAnB,EACH,CACD,MAAOA,OAAP,CACH,CANM,CAAP,CAOH,CAEDgE,YAAYoL,cAAZ,CAA6BA,cAA7B,CACApL,YAAYuL,aAAZ,CAA4BA,aAA5B,CACAvL,YAAYzE,GAAZ,CAAkBA,GAAlB,CACAyE,YAAYwL,KAAZ,CAAoBA,KAApB,CAEA,GAAI2B,mBAAqB,MAAOjG,SAAP,GAAqB,WAArB,EAAoC,MAAO9L,QAAOgS,MAAd,GAA0B,UAA9D,EAA4E,MAAOlG,UAAS/K,aAAT,CAAuB,QAAvB,EAAiC4B,UAAxC,GAAwD,UAArI,CAAmJ,UAAW,CAClL,MAAOqK,SAAQsE,MAAR,CAAe,mBAAf,CAAP,CACH,CAFuB,CAEpB1M,WAFJ,CAIAJ,OAAOD,OAAP,CAAiBwN,iBAAjB,CAEA,GAAI,MAAOlN,OAAP,GAAmB,UAAnB,EAAiCA,OAAOmG,GAA5C,CAAiD,CAC7CnG,OAAO,aAAP,CAAsB,EAAtB,CAA0B,UAAW,CACjC,MAAOkN,kBAAP,CACH,CAFD,EAGH,CAED,QAASF,eAAT,CAAwB/F,QAAxB,CAAkChM,OAAlC,CAA2CmS,WAA3C,CAAwDC,YAAxD,CAAsEC,gBAAtE,CAAwF,CACpF,MAAO9B,mBAAkBvE,QAAlB,CAA4BA,QAA5B,CAAsCmG,WAAtC,CAAmDC,YAAnD,CAAiEpS,OAAjE,CAA0EgM,SAASV,WAAT,CAAqBC,WAA/F,CAA4GS,SAASV,WAAT,CAAqBE,WAAjI,EAA8I3K,IAA9I,CAAmJ,SAASgM,SAAT,CAAoB,CAC1KxM,IAAI,iBAAJ,EACA,GAAIiS,eAAgB5B,yBAA2B2B,gBAA/C,CACA,GAAIE,UAAW,IAAMD,aAAN,CAAsB,IAAtB,CAA6BD,gBAA7B,CAAgD,IAA/D,CACArG,SAASwG,aAAT,CAAuBD,QAAvB,EAAiCE,eAAjC,CAAiDH,aAAjD,EACA,GAAII,cAAe7F,UAAUQ,aAA7B,CACA,GAAIxB,MAAO6G,aAAa1G,QAAb,CAAsBwG,aAAtB,CAAoCD,QAApC,CAAX,CACA,GAAII,gBAAkB,MAAO3S,SAAQ4S,OAAf,GAA4B,UAA7B,CAA2C1F,QAAQC,OAAR,CAAgBnN,QAAQ4S,OAAR,CAAgBF,aAAa1G,QAA7B,CAAhB,CAA3C,CAAqGkB,QAAQC,OAAR,CAAgB,IAAhB,CAA1H,CACA,MAAOwF,gBAAe9R,IAAf,CAAoB,UAAW,CAClC,MAAO+Q,cAAa/F,IAAb,CAAmBgB,SAAnB,CAA8B7M,OAA9B,CAAuCmS,WAAvC,CAAoDC,YAApD,CAAP,CACH,CAFM,CAAP,CAGH,CAXM,CAAP,CAYH,CAED,QAASR,aAAT,CAAsB/F,IAAtB,CAA4BgB,SAA5B,CAAuC7M,OAAvC,CAAgDmS,WAAhD,CAA6DC,YAA7D,CAA2E,CACvE,GAAIM,cAAe7F,UAAUQ,aAA7B,CACA,GAAIwF,SAAU,GAAI5C,QAAJ,CAAYyC,aAAa1G,QAAzB,CAAd,CACA,GAAI8G,aAAc,GAAI3C,YAAJ,CAAgBnQ,OAAhB,CAAyB6S,OAAzB,CAAlB,CACA,GAAIE,QAAStC,UAAU5E,IAAV,CAAb,CACA,GAAI1K,OAAQnB,QAAQyH,IAAR,GAAiB,MAAjB,CAA0B0K,WAA1B,CAAwCa,cAAcN,aAAa1G,QAA3B,CAApD,CACA,GAAI5K,QAASpB,QAAQyH,IAAR,GAAiB,MAAjB,CAA0B2K,YAA1B,CAAyCa,eAAeP,aAAa1G,QAA5B,CAAtD,CACA,GAAIqF,UAAW,GAAIrR,SAAQqR,QAAZ,CAAqBlQ,KAArB,CAA4BC,MAA5B,CAAoC0R,WAApC,CAAiD9S,OAAjD,CAA0DgM,QAA1D,CAAf,CACA,GAAIkH,QAAS,GAAI9C,WAAJ,CAAevE,IAAf,CAAqBwF,QAArB,CAA+BwB,OAA/B,CAAwCC,WAAxC,CAAqD9S,OAArD,CAAb,CACA,MAAOkT,QAAOC,KAAP,CAAatS,IAAb,CAAkB,UAAW,CAChCR,IAAI,oBAAJ,EACA,GAAIS,OAAJ,CAEA,GAAId,QAAQyH,IAAR,GAAiB,MAArB,CAA6B,CACzB3G,OAASsS,KAAK/B,SAASvQ,MAAd,CAAsB,CAACK,MAAOkQ,SAASvQ,MAAT,CAAgBK,KAAxB,CAA+BC,OAAQiQ,SAASvQ,MAAT,CAAgBM,MAAvD,CAA+DI,IAAK,CAApE,CAAuED,KAAM,CAA7E,CAAgF2B,EAAG,CAAnF,CAAsFC,EAAG,CAAzF,CAAtB,CAAT,CACH,CAFD,IAEO,IAAI0I,OAAS6G,aAAa1G,QAAb,CAAsBvK,IAA/B,EAAuCoK,OAAS6G,aAAa1G,QAAb,CAAsBY,eAAtE,EAAyF5M,QAAQc,MAAR,EAAkB,IAA/G,CAAqH,CACxHA,OAASuQ,SAASvQ,MAAlB,CACH,CAFM,IAEA,CACHA,OAASsS,KAAK/B,SAASvQ,MAAd,CAAsB,CAACK,MAAQnB,QAAQmB,KAAR,EAAiB,IAAjB,CAAwBnB,QAAQmB,KAAhC,CAAwC4R,OAAO5R,KAAxD,CAA+DC,OAAQpB,QAAQoB,MAAR,EAAkB,IAAlB,CAAyBpB,QAAQoB,MAAjC,CAA0C2R,OAAO3R,MAAxH,CAAgII,IAAKuR,OAAOvR,GAA5I,CAAiJD,KAAMwR,OAAOxR,IAA9J,CAAoK2B,EAAG,CAAvK,CAA0KC,EAAG,CAA7K,CAAtB,CAAT,CACH,CAEDkQ,iBAAiBxG,SAAjB,CAA4B7M,OAA5B,EACA,MAAOc,OAAP,CACH,CAdM,CAAP,CAeH,CAED,QAASuS,iBAAT,CAA0BxG,SAA1B,CAAqC7M,OAArC,CAA8C,CAC1C,GAAIA,QAAQmR,eAAZ,CAA6B,CACzBtE,UAAUyG,UAAV,CAAqBzR,WAArB,CAAiCgL,SAAjC,EACAxM,IAAI,sBAAJ,EACH,CACJ,CAED,QAAS+S,KAAT,CAActS,MAAd,CAAsBiS,MAAtB,CAA8B,CAC1B,GAAIQ,eAAgBvH,SAAS/K,aAAT,CAAuB,QAAvB,CAApB,CACA,GAAIuS,IAAKpM,KAAKgI,GAAL,CAAStO,OAAOK,KAAP,CAAe,CAAxB,CAA2BiG,KAAKqM,GAAL,CAAS,CAAT,CAAYV,OAAOxR,IAAnB,CAA3B,CAAT,CACA,GAAImS,IAAKtM,KAAKgI,GAAL,CAAStO,OAAOK,KAAhB,CAAuBiG,KAAKqM,GAAL,CAAS,CAAT,CAAYV,OAAOxR,IAAP,CAAcwR,OAAO5R,KAAjC,CAAvB,CAAT,CACA,GAAIwS,IAAKvM,KAAKgI,GAAL,CAAStO,OAAOM,MAAP,CAAgB,CAAzB,CAA4BgG,KAAKqM,GAAL,CAAS,CAAT,CAAYV,OAAOvR,GAAnB,CAA5B,CAAT,CACA,GAAIoS,IAAKxM,KAAKgI,GAAL,CAAStO,OAAOM,MAAhB,CAAwBgG,KAAKqM,GAAL,CAAS,CAAT,CAAYV,OAAOvR,GAAP,CAAauR,OAAO3R,MAAhC,CAAxB,CAAT,CACAmS,cAAcpS,KAAd,CAAsB4R,OAAO5R,KAA7B,CACAoS,cAAcnS,MAAd,CAAwB2R,OAAO3R,MAA/B,CACA,GAAID,OAAQuS,GAAGF,EAAf,CACA,GAAIpS,QAASwS,GAAGD,EAAhB,CACAtT,IAAI,qBAAJ,CAA2B,OAA3B,CAAoC0S,OAAOxR,IAA3C,CAAiD,MAAjD,CAAyDwR,OAAOvR,GAAhE,CAAqE,QAArE,CAA+EL,KAA/E,CAAsF,SAAtF,CAAiGC,MAAjG,EACAf,IAAI,2BAAJ,CAAiC0S,OAAO5R,KAAxC,CAA+C,YAA/C,CAA6D4R,OAAO3R,MAApE,CAA4E,QAA5E,CAAsFoS,EAAtF,CAA0F,OAA1F,CAAmGG,EAAnG,EACAJ,cAAc1Q,UAAd,CAAyB,IAAzB,EAA+BgR,SAA/B,CAAyC/S,MAAzC,CAAiD0S,EAAjD,CAAqDG,EAArD,CAAyDxS,KAAzD,CAAgEC,MAAhE,CAAwE2R,OAAO7P,CAA/E,CAAkF6P,OAAO5P,CAAzF,CAA4FhC,KAA5F,CAAmGC,MAAnG,EACA,MAAOmS,cAAP,CACH,CAED,QAASP,cAAT,CAAwBjT,GAAxB,CAA6B,CACzB,MAAOqH,MAAKqM,GAAL,CACHrM,KAAKqM,GAAL,CAAS1T,IAAI0B,IAAJ,CAASqS,WAAlB,CAA+B/T,IAAI6M,eAAJ,CAAoBkH,WAAnD,CADG,CAEH1M,KAAKqM,GAAL,CAAS1T,IAAI0B,IAAJ,CAASsS,WAAlB,CAA+BhU,IAAI6M,eAAJ,CAAoBmH,WAAnD,CAFG,CAGH3M,KAAKqM,GAAL,CAAS1T,IAAI0B,IAAJ,CAASuS,WAAlB,CAA+BjU,IAAI6M,eAAJ,CAAoBoH,WAAnD,CAHG,CAAP,CAKH,CAED,QAASf,eAAT,CAAyBlT,GAAzB,CAA8B,CAC1B,MAAOqH,MAAKqM,GAAL,CACHrM,KAAKqM,GAAL,CAAS1T,IAAI0B,IAAJ,CAASwS,YAAlB,CAAgClU,IAAI6M,eAAJ,CAAoBqH,YAApD,CADG,CAEH7M,KAAKqM,GAAL,CAAS1T,IAAI0B,IAAJ,CAASyS,YAAlB,CAAgCnU,IAAI6M,eAAJ,CAAoBsH,YAApD,CAFG,CAGH9M,KAAKqM,GAAL,CAAS1T,IAAI0B,IAAJ,CAAS0S,YAAlB,CAAgCpU,IAAI6M,eAAJ,CAAoBuH,YAApD,CAHG,CAAP,CAKH,CAED,QAASxC,YAAT,CAAqByC,GAArB,CAA0B,CACtB,GAAIC,MAAOrI,SAAS/K,aAAT,CAAuB,GAAvB,CAAX,CACAoT,KAAKvQ,IAAL,CAAYsQ,GAAZ,CACAC,KAAKvQ,IAAL,CAAYuQ,KAAKvQ,IAAjB,CACA,MAAOuQ,KAAP,CACH,CAEA,CA7JO,CA6JN,CAAC,UAAU,CAAX,CAAa,gBAAgB,EAA7B,CAAgC,QAAQ,EAAxC,CAA2C,kBAAkB,EAA7D,CAAgE,eAAe,EAA/E,CAAkF,UAAU,EAA5F,CAA+F,qBAAqB,EAApH,CAAuH,YAAY,EAAnI,CAAsI,UAAU,EAAhJ,CA7JM,CAr5BsyB,CAkjCvpB,EAAE,CAAC,SAASvO,OAAT,CAAiBpB,MAAjB,CAAwBD,OAAxB,CAAgC,CAC1L,GAAIpE,KAAMyF,QAAQ,OAAR,CAAV,CACA,GAAIwO,YAAaxO,QAAQ,SAAR,EAAmBwO,UAApC,CAEA,QAASC,oBAAT,CAA6BC,GAA7B,CAAkC,CAC9B,KAAKA,GAAL,CAAWA,GAAX,CACAnU,IAAI,yBAAJ,CAA+BmU,GAA/B,EACA,GAAI,CAAC,KAAKC,OAAN,EAAiB,CAAC,KAAKC,KAA3B,CAAkC,CAC9BrU,IAAI,gCAAJ,EACAkU,oBAAoB3F,SAApB,CAA8B8F,KAA9B,CAAsC,GAAIC,MAAJ,EAAtC,CACA,GAAID,OAAQ,KAAKA,KAAjB,CACAH,oBAAoB3F,SAApB,CAA8B6F,OAA9B,CAAwC,GAAIvH,QAAJ,CAAY,SAASC,OAAT,CAAkBqE,MAAlB,CAA0B,CAC1EkD,MAAMpH,MAAN,CAAeH,OAAf,CACAuH,MAAME,OAAN,CAAgBpD,MAAhB,CACAkD,MAAMF,GAAN,CAAYF,YAAZ,CACA,GAAII,MAAMG,QAAN,GAAmB,IAAvB,CAA6B,CACzB1H,QAAQuH,KAAR,EACH,CACJ,CAPuC,CAAxC,CAQH,CACJ,CAEDhQ,OAAOD,OAAP,CAAiB8P,mBAAjB,CAEC,CAxBwJ,CAwBvJ,CAAC,QAAQ,EAAT,CAAY,UAAU,EAAtB,CAxBuJ,CAljCqpB,CA0kCjxB,EAAE,CAAC,SAASzO,OAAT,CAAiBpB,MAAjB,CAAwBD,OAAxB,CAAgC,CAChE,GAAI6P,YAAaxO,QAAQ,SAAR,EAAmBwO,UAApC,CAEA,QAASQ,KAAT,CAAcC,MAAd,CAAsBC,IAAtB,CAA4B,CACxB,GAAInI,WAAYb,SAAS/K,aAAT,CAAuB,KAAvB,CAAhB,CACIgU,IAAMjJ,SAAS/K,aAAT,CAAuB,KAAvB,CADV,CAEIiU,KAAOlJ,SAAS/K,aAAT,CAAuB,MAAvB,CAFX,CAGIkU,WAAa,aAHjB,CAIIC,QAJJ,CAKIC,MALJ,CAOAxI,UAAUxL,KAAV,CAAgB0L,UAAhB,CAA6B,QAA7B,CACAF,UAAUxL,KAAV,CAAgBiU,UAAhB,CAA6BP,MAA7B,CACAlI,UAAUxL,KAAV,CAAgBkU,QAAhB,CAA2BP,IAA3B,CACAnI,UAAUxL,KAAV,CAAgBmU,MAAhB,CAAyB,CAAzB,CACA3I,UAAUxL,KAAV,CAAgBoU,OAAhB,CAA0B,CAA1B,CAEAzJ,SAASvK,IAAT,CAAcC,WAAd,CAA0BmL,SAA1B,EAEAoI,IAAIT,GAAJ,CAAUF,YAAV,CACAW,IAAI9T,KAAJ,CAAY,CAAZ,CACA8T,IAAI7T,MAAJ,CAAa,CAAb,CAEA6T,IAAI5T,KAAJ,CAAUmU,MAAV,CAAmB,CAAnB,CACAP,IAAI5T,KAAJ,CAAUoU,OAAV,CAAoB,CAApB,CACAR,IAAI5T,KAAJ,CAAUqU,aAAV,CAA0B,UAA1B,CAEAR,KAAK7T,KAAL,CAAWiU,UAAX,CAAwBP,MAAxB,CACAG,KAAK7T,KAAL,CAAWkU,QAAX,CAAsBP,IAAtB,CACAE,KAAK7T,KAAL,CAAWmU,MAAX,CAAoB,CAApB,CACAN,KAAK7T,KAAL,CAAWoU,OAAX,CAAqB,CAArB,CAEAP,KAAKxT,WAAL,CAAiBsK,SAAS7J,cAAT,CAAwBgT,UAAxB,CAAjB,EACAtI,UAAUnL,WAAV,CAAsBwT,IAAtB,EACArI,UAAUnL,WAAV,CAAsBuT,GAAtB,EACAG,SAAYH,IAAIU,SAAJ,CAAgBT,KAAKS,SAAtB,CAAmC,CAA9C,CAEA9I,UAAUhL,WAAV,CAAsBqT,IAAtB,EACArI,UAAUnL,WAAV,CAAsBsK,SAAS7J,cAAT,CAAwBgT,UAAxB,CAAtB,EAEAtI,UAAUxL,KAAV,CAAgBuU,UAAhB,CAA6B,QAA7B,CACAX,IAAI5T,KAAJ,CAAUqU,aAAV,CAA0B,OAA1B,CAEAL,OAAUJ,IAAIU,SAAJ,CAAc9I,UAAU8I,SAAzB,CAAsC,CAA/C,CAEA3J,SAASvK,IAAT,CAAcI,WAAd,CAA0BgL,SAA1B,EAEA,KAAKuI,QAAL,CAAgBA,QAAhB,CACA,KAAKS,SAAL,CAAiB,CAAjB,CACA,KAAKR,MAAL,CAAcA,MAAd,CACH,CAED3Q,OAAOD,OAAP,CAAiBqQ,IAAjB,CAEC,CAtD8B,CAsD7B,CAAC,UAAU,EAAX,CAtD6B,CA1kC+wB,CAgoC5xB,EAAE,CAAC,SAAShP,OAAT,CAAiBpB,MAAjB,CAAwBD,OAAxB,CAAgC,CACrD,GAAIqQ,MAAOhP,QAAQ,QAAR,CAAX,CAEA,QAASgQ,YAAT,EAAuB,CACnB,KAAKC,IAAL,CAAY,EAAZ,CACH,CAEDD,YAAYlH,SAAZ,CAAsBoH,UAAtB,CAAmC,SAASjB,MAAT,CAAiBC,IAAjB,CAAuB,CACtD,GAAI,KAAKe,IAAL,CAAUhB,OAAS,GAAT,CAAeC,IAAzB,IAAmCnD,SAAvC,CAAkD,CAC9C,KAAKkE,IAAL,CAAUhB,OAAS,GAAT,CAAeC,IAAzB,EAAiC,GAAIF,KAAJ,CAASC,MAAT,CAAiBC,IAAjB,CAAjC,CACH,CACD,MAAO,MAAKe,IAAL,CAAUhB,OAAS,GAAT,CAAeC,IAAzB,CAAP,CACH,CALD,CAOAtQ,OAAOD,OAAP,CAAiBqR,WAAjB,CAEC,CAhBmB,CAgBlB,CAAC,SAAS,CAAV,CAhBkB,CAhoC0xB,CAgpC9xB,EAAE,CAAC,SAAShQ,OAAT,CAAiBpB,MAAjB,CAAwBD,OAAxB,CAAgC,CACnD,GAAI6L,OAAQxK,QAAQ,SAAR,CAAZ,CACA,GAAI2K,WAAYH,MAAMG,SAAtB,CACA,GAAID,iBAAkB1K,QAAQ,SAAR,EAAmB0K,eAAzC,CAEA,QAASyF,eAAT,CAAwBpJ,SAAxB,CAAmCqJ,UAAnC,CAA+ClW,OAA/C,CAAwD,CACpD,KAAK0U,KAAL,CAAa,IAAb,CACA,KAAKF,GAAL,CAAW3H,SAAX,CACA,GAAIhI,MAAO,IAAX,CACA,GAAIkO,QAAStC,UAAU5D,SAAV,CAAb,CACA,KAAK4H,OAAL,CAAe,CAAC,CAACyB,UAAD,CAAc,KAAKC,SAAL,CAAenW,QAAQuR,KAAvB,CAA8BwB,MAA9B,CAAsC/S,OAAtC,CAAd,CAA+D,GAAIkN,QAAJ,CAAY,SAASC,OAAT,CAAkB,CACzG,GAAIN,UAAUQ,aAAV,CAAwBrB,QAAxB,CAAiCoK,GAAjC,GAAyC,aAAzC,EAA0DvJ,UAAUQ,aAAV,CAAwBrB,QAAxB,CAAiCY,eAAjC,EAAoD,IAAlH,CAAwH,CACpHC,UAAUQ,aAAV,CAAwBC,MAAxB,CAAiCT,UAAUS,MAAV,CAAmB,UAAW,CAC3DH,QAAQN,SAAR,EACH,CAFD,CAGH,CAJD,IAIO,CACHM,QAAQN,SAAR,EACH,CACJ,CAR8E,CAAhE,EAQXhM,IARW,CAQN,SAASgM,SAAT,CAAoB,CACzB,GAAI/H,aAAcgB,QAAQ,QAAR,CAAlB,CACA,MAAOhB,aAAY+H,UAAUQ,aAAV,CAAwBrB,QAAxB,CAAiCY,eAA7C,CAA8D,CAACnF,KAAM,MAAP,CAAetG,MAAO0L,UAAU1L,KAAhC,CAAuCC,OAAQyL,UAAUzL,MAAzD,CAAiEmQ,MAAOvR,QAAQuR,KAAhF,CAAuFzF,kBAAmB9L,QAAQ8L,iBAAlH,CAAqIqF,gBAAiBnR,QAAQmR,eAA9J,CAA+KD,WAAYlR,QAAQkR,UAAnM,CAA+ME,aAAcpR,QAAQoR,YAAR,CAAuB,CAApP,CAA9D,CAAP,CACH,CAXc,EAWZvQ,IAXY,CAWP,SAASC,MAAT,CAAiB,CACrB,MAAO+D,MAAK6P,KAAL,CAAa5T,MAApB,CACH,CAbc,CAAf,CAcH,CAEDmV,eAAerH,SAAf,CAAyBuH,SAAzB,CAAqC,SAAS5E,KAAT,CAAgBwB,MAAhB,CAAwB/S,OAAxB,CAAiC,CAClE,GAAI6M,WAAY,KAAK2H,GAArB,CACA,MAAOhE,iBAAgB3D,UAAU2H,GAA1B,CAA+BjD,KAA/B,CAAsC1E,UAAUxB,aAAhD,CAA+D0H,OAAO5R,KAAtE,CAA6E4R,OAAO3R,MAApF,CAA4FpB,OAA5F,CAAP,CACH,CAHD,CAKA0E,OAAOD,OAAP,CAAiBwR,cAAjB,CAEC,CAjCiB,CAiChB,CAAC,SAAS,CAAV,CAAY,UAAU,EAAtB,CAAyB,UAAU,EAAnC,CAjCgB,CAhpC4xB,CAirCpwB,EAAE,CAAC,SAASnQ,OAAT,CAAiBpB,MAAjB,CAAwBD,OAAxB,CAAgC,CAC7E,QAAS4R,kBAAT,CAA2BC,SAA3B,CAAsC,CAClC,KAAK9B,GAAL,CAAW8B,UAAU5N,KAArB,CACA,KAAK6N,UAAL,CAAkB,EAAlB,CACA,KAAK9O,IAAL,CAAY,IAAZ,CACA,KAAK+O,EAAL,CAAU,GAAV,CACA,KAAKC,EAAL,CAAU,GAAV,CACA,KAAKjD,EAAL,CAAU,GAAV,CACA,KAAKG,EAAL,CAAU,GAAV,CACA,KAAKc,OAAL,CAAevH,QAAQC,OAAR,CAAgB,IAAhB,CAAf,CACH,CAEDkJ,kBAAkBK,KAAlB,CAA0B,CACtBC,OAAQ,CADc,CAEtBC,OAAQ,CAFc,CAA1B,CAKA;AACA;AACAP,mBAAkBQ,gBAAlB,CAAqC,2IAArC,CAEAnS,OAAOD,OAAP,CAAiB4R,iBAAjB,CAEC,CAvB2C,CAuB1C,EAvB0C,CAjrCkwB,CAwsCxyB,GAAG,CAAC,SAASvQ,OAAT,CAAiBpB,MAAjB,CAAwBD,OAAxB,CAAgC,CAC1C,QAASqS,eAAT,CAAwBtC,GAAxB,CAA6BuC,IAA7B,CAAmC,CAC/B,KAAKvC,GAAL,CAAWA,GAAX,CACA,KAAKE,KAAL,CAAa,GAAIC,MAAJ,EAAb,CACA,GAAI9P,MAAO,IAAX,CACA,KAAKmS,OAAL,CAAe,IAAf,CACA,KAAKvC,OAAL,CAAe,GAAIvH,QAAJ,CAAY,SAASC,OAAT,CAAkBqE,MAAlB,CAA0B,CACjD3M,KAAK6P,KAAL,CAAWpH,MAAX,CAAoBH,OAApB,CACAtI,KAAK6P,KAAL,CAAWE,OAAX,CAAqBpD,MAArB,CACA,GAAIuF,IAAJ,CAAU,CACNlS,KAAK6P,KAAL,CAAWuC,WAAX,CAAyB,WAAzB,CACH,CACDpS,KAAK6P,KAAL,CAAWF,GAAX,CAAiBA,GAAjB,CACA,GAAI3P,KAAK6P,KAAL,CAAWG,QAAX,GAAwB,IAA5B,CAAkC,CAC9B1H,QAAQtI,KAAK6P,KAAb,EACH,CACJ,CAVc,CAAf,CAWH,CAEDhQ,OAAOD,OAAP,CAAiBqS,cAAjB,CAEC,CArBQ,CAqBP,EArBO,CAxsCqyB,CA6tCxyB,GAAG,CAAC,SAAShR,OAAT,CAAiBpB,MAAjB,CAAwBD,OAAxB,CAAgC,CAC1C,GAAIpE,KAAMyF,QAAQ,OAAR,CAAV,CACA,GAAIgR,gBAAiBhR,QAAQ,kBAAR,CAArB,CACA,GAAIyO,qBAAsBzO,QAAQ,uBAAR,CAA1B,CACA,GAAIoR,qBAAsBpR,QAAQ,uBAAR,CAA1B,CACA,GAAImQ,gBAAiBnQ,QAAQ,kBAAR,CAArB,CACA,GAAIqR,cAAerR,QAAQ,gBAAR,CAAnB,CACA,GAAIsR,kBAAmBtR,QAAQ,oBAAR,CAAvB,CACA,GAAIuR,yBAA0BvR,QAAQ,2BAAR,CAA9B,CACA,GAAIwR,yBAA0BxR,QAAQ,2BAAR,CAA9B,CACA,GAAIvF,MAAOuF,QAAQ,SAAR,EAAmBvF,IAA9B,CAEA,QAAS4P,YAAT,CAAqBnQ,OAArB,CAA8B6S,OAA9B,CAAuC,CACnC,KAAKwB,IAAL,CAAY,IAAZ,CACA,KAAKrU,OAAL,CAAeA,OAAf,CACA,KAAK6S,OAAL,CAAeA,OAAf,CACA,KAAK0E,MAAL,CAAc,KAAKC,SAAL,CAAe5T,OAAOC,QAAP,CAAgBC,IAA/B,CAAd,CACH,CAEDqM,YAAYvB,SAAZ,CAAsB6I,UAAtB,CAAmC,SAASC,KAAT,CAAgB,CAC/C,GAAIC,QAAS,EAAb,CACAD,MAAME,MAAN,CAAa,SAASC,UAAT,CAAqBhL,SAArB,CAAgC,CACzC,OAAOA,UAAUhB,IAAV,CAAeO,QAAtB,EACA,IAAK,KAAL,CACI,MAAOyL,YAAWC,MAAX,CAAkB,CAAC,CACtBC,KAAM,CAAClL,UAAUhB,IAAV,CAAe2I,GAAhB,CADgB,CAEtBwD,OAAQ,KAFc,CAAD,CAAlB,CAAP,CAIJ,IAAK,KAAL,CACA,IAAK,QAAL,CACI,MAAOH,YAAWC,MAAX,CAAkB,CAAC,CACtBC,KAAM,CAAClL,UAAUhB,IAAX,CADgB,CAEtBmM,OAAQnL,UAAUhB,IAAV,CAAeO,QAFD,CAAD,CAAlB,CAAP,CARJ,CAaA,MAAOyL,WAAP,CACH,CAfD,CAeG,EAfH,EAeOI,OAfP,CAee,KAAKC,QAAL,CAAcP,MAAd,CAAsB,KAAKQ,SAA3B,CAff,CAesD,IAftD,EAgBA,MAAOR,OAAP,CACH,CAnBD,CAqBAxH,YAAYvB,SAAZ,CAAsBwJ,mBAAtB,CAA4C,SAAST,MAAT,CAAiB9K,SAAjB,CAA4B,CACpEA,UAAUwL,qBAAV,GAAkCC,MAAlC,CAAyC,KAAKC,kBAA9C,EAAkEN,OAAlE,CAA0E,KAAKC,QAAL,CAAcP,MAAd,CAAsB,KAAKQ,SAA3B,CAA1E,CAAiH,IAAjH,EACA,MAAOR,OAAP,CACH,CAHD,CAKAxH,YAAYvB,SAAZ,CAAsBsJ,QAAtB,CAAiC,SAASP,MAAT,CAAiBa,QAAjB,CAA2B,CACxD,MAAO,UAASC,QAAT,CAAmB,CACtBA,SAASV,IAAT,CAAcE,OAAd,CAAsB,SAASvD,KAAT,CAAgB,CAClC,GAAI,CAAC,KAAKgE,WAAL,CAAiBf,MAAjB,CAAyBjD,KAAzB,CAAL,CAAsC,CAClCiD,OAAOvN,MAAP,CAAc,CAAd,CAAiB,CAAjB,CAAoBoO,SAAS5S,IAAT,CAAc,IAAd,CAAoB6S,QAApB,CAApB,EACApY,IAAI,gBAAmBsX,OAAO9R,MAA9B,CAAuC,MAAO6O,MAAP,GAAkB,QAAlB,CAA6BA,MAAMjF,SAAN,CAAgB,CAAhB,CAAmB,GAAnB,CAA7B,CAAuDiF,KAA9F,EACH,CACJ,CALD,CAKG,IALH,EAMH,CAPD,CAQH,CATD,CAWAvE,YAAYvB,SAAZ,CAAsB2J,kBAAtB,CAA2C,SAASjC,SAAT,CAAoB,CAC3D,MAAOA,WAAU0B,MAAV,GAAqB,MAA5B,CACH,CAFD,CAIA7H,YAAYvB,SAAZ,CAAsBuJ,SAAtB,CAAkC,SAAS7B,SAAT,CAAoB,CAClD,GAAIA,UAAU0B,MAAV,GAAqB,KAAzB,CAAgC,CAC5B,GAAIxD,KAAM8B,UAAUyB,IAAV,CAAe,CAAf,CAAV,CACA,GAAI,KAAKY,KAAL,CAAWnE,GAAX,GAAmB,CAAC,KAAK3B,OAAL,CAAa+F,GAAjC,EAAwC,CAAC,KAAK5Y,OAAL,CAAakR,UAA1D,CAAsE,CAClE,MAAO,IAAIiG,aAAJ,CAAiB3C,GAAjB,CAAP,CACH,CAFD,IAEO,IAAIA,IAAIlF,KAAJ,CAAU,yBAAV,CAAJ,CAA0C,CAC7C,MAAO,IAAIwH,eAAJ,CAAmBtC,IAAIrM,OAAJ,CAAY,6BAAZ,CAA2C,EAA3C,CAAnB,CAAmE,KAAnE,CAAP,CACH,CAFM,IAEA,IAAI,KAAK0Q,YAAL,CAAkBrE,GAAlB,GAA0B,KAAKxU,OAAL,CAAakR,UAAb,GAA4B,IAAtD,EAA8D,KAAKyH,KAAL,CAAWnE,GAAX,CAAlE,CAAmF,CACtF,MAAO,IAAIsC,eAAJ,CAAmBtC,GAAnB,CAAwB,KAAxB,CAAP,CACH,CAFM,IAEA,IAAI,KAAK3B,OAAL,CAAakE,IAAb,EAAqB,CAAC,KAAK/W,OAAL,CAAakR,UAAnC,EAAiD,KAAKlR,OAAL,CAAa8Y,OAAlE,CAA2E,CAC9E,MAAO,IAAIhC,eAAJ,CAAmBtC,GAAnB,CAAwB,IAAxB,CAAP,CACH,CAFM,IAEA,IAAI,KAAKxU,OAAL,CAAauR,KAAjB,CAAwB,CAC3B,MAAO,IAAI2F,oBAAJ,CAAwB1C,GAAxB,CAA6B,KAAKxU,OAAL,CAAauR,KAA1C,CAAP,CACH,CAFM,IAEA,CACH,MAAO,IAAIgD,oBAAJ,CAAwBC,GAAxB,CAAP,CACH,CACJ,CAfD,IAeO,IAAI8B,UAAU0B,MAAV,GAAqB,iBAAzB,CAA4C,CAC/C,MAAO,IAAIX,wBAAJ,CAA4Bf,SAA5B,CAAP,CACH,CAFM,IAEA,IAAIA,UAAU0B,MAAV,GAAqB,UAAzB,CAAqC,CACxC,MAAO,IAAIV,wBAAJ,CAA4BhB,SAA5B,CAAP,CACH,CAFM,IAEA,IAAIA,UAAU0B,MAAV,GAAqB,KAAzB,CAAgC,CACnC,MAAO,IAAIZ,iBAAJ,CAAqBd,UAAUyB,IAAV,CAAe,CAAf,CAArB,CAAwC,KAAKlF,OAAL,CAAa+F,GAArD,CAAP,CACH,CAFM,IAEA,IAAItC,UAAU0B,MAAV,GAAqB,QAAzB,CAAmC,CACtC,MAAO,IAAI/B,eAAJ,CAAmBK,UAAUyB,IAAV,CAAe,CAAf,CAAnB,CAAsC,KAAKc,YAAL,CAAkBvC,UAAUyB,IAAV,CAAe,CAAf,EAAkBvD,GAApC,CAAtC,CAAgF,KAAKxU,OAArF,CAAP,CACH,CAFM,IAEA,CACH,MAAO,IAAIuU,oBAAJ,CAAwB+B,SAAxB,CAAP,CACH,CACJ,CA3BD,CA6BAnG,YAAYvB,SAAZ,CAAsB+J,KAAtB,CAA8B,SAASnE,GAAT,CAAc,CACxC,MAAOA,KAAI/E,SAAJ,CAAc+E,IAAI3O,MAAJ,CAAa,CAA3B,EAA8BmF,WAA9B,KAAgD,KAAhD,EAAyDmM,aAAavI,SAAb,CAAuBmK,QAAvB,CAAgCvE,GAAhC,CAAhE,CACH,CAFD,CAIArE,YAAYvB,SAAZ,CAAsB8J,WAAtB,CAAoC,SAASf,MAAT,CAAiBnD,GAAjB,CAAsB,CACtD,MAAOmD,QAAOqB,IAAP,CAAY,SAAStE,KAAT,CAAgB,CAC/B,MAAOA,OAAMF,GAAN,GAAcA,GAArB,CACH,CAFM,CAAP,CAGH,CAJD,CAMArE,YAAYvB,SAAZ,CAAsBiK,YAAtB,CAAqC,SAASzE,GAAT,CAAc,CAC/C,MAAQ,MAAKoD,SAAL,CAAepD,GAAf,IAAwB,KAAKmD,MAArC,CACH,CAFD,CAIApH,YAAYvB,SAAZ,CAAsB4I,SAAtB,CAAkC,SAASpD,GAAT,CAAc,CAC5C,GAAIC,MAAO,KAAKA,IAAL,GAAc,KAAKA,IAAL,CAAYrI,SAAS/K,aAAT,CAAuB,GAAvB,CAA1B,CAAX,CACAoT,KAAKvQ,IAAL,CAAYsQ,GAAZ,CACAC,KAAKvQ,IAAL,CAAYuQ,KAAKvQ,IAAjB,CAAuB;AACvB,OAAOuQ,MAAK4E,QAAL,CAAgB5E,KAAK6E,QAArB,CAAgC7E,KAAK8E,IAA5C,CACH,CALD,CAOAhJ,YAAYvB,SAAZ,CAAsBwK,UAAtB,CAAmC,SAASvM,SAAT,CAAoB,CACnD,MAAO,MAAKwM,OAAL,CAAaxM,SAAb,CAAwB,KAAK7M,OAAL,CAAaoR,YAArC,EAAmD,OAAnD,EAA4D,UAAW,CAC1E,GAAIkI,OAAQ,GAAI/E,oBAAJ,CAAwB1H,UAAU2H,GAAlC,CAAZ,CACA,MAAO8E,OAAM7E,OAAN,CAAc5T,IAAd,CAAmB,SAAS6T,KAAT,CAAgB,CACtC7H,UAAU6H,KAAV,CAAkBA,KAAlB,CACH,CAFM,CAAP,CAGH,CALM,CAAP,CAMH,CAPD,CASAvE,YAAYvB,SAAZ,CAAsB2K,GAAtB,CAA4B,SAAS/E,GAAT,CAAc,CACtC,GAAIgF,OAAQ,IAAZ,CACA,MAAO,MAAK7B,MAAL,CAAYqB,IAAZ,CAAiB,SAAS/D,GAAT,CAAc,CAClC,MAAO,CAACuE,MAAQvE,GAAT,EAAcT,GAAd,GAAsBA,GAA7B,CACH,CAFM,EAEFgF,KAFE,CAEM,IAFb,CAGH,CALD,CAOArJ,YAAYvB,SAAZ,CAAsB6K,KAAtB,CAA8B,SAAS/B,KAAT,CAAgB,CAC1C,KAAKC,MAAL,CAAcD,MAAME,MAAN,CAAarX,KAAK,KAAK6X,mBAAV,CAA+B,IAA/B,CAAb,CAAmD,KAAKX,UAAL,CAAgBC,KAAhB,CAAnD,CAAd,CACA,KAAKC,MAAL,CAAYM,OAAZ,CAAoB,SAASvD,KAAT,CAAgB1K,KAAhB,CAAuB,CACvC0K,MAAMD,OAAN,CAAc5T,IAAd,CAAmB,UAAW,CAC1BR,IAAI,8BAA+B2J,MAAM,CAArC,CAAJ,CAA6C0K,KAA7C,EACH,CAFD,CAEG,SAAS1Q,CAAT,CAAY,CACX3D,IAAI,0BAA2B2J,MAAM,CAAjC,CAAJ,CAAyC0K,KAAzC,CAAgD1Q,CAAhD,EACH,CAJD,EAKH,CAND,EAOA,KAAKmP,KAAL,CAAajG,QAAQwM,GAAR,CAAY,KAAK/B,MAAL,CAAYhQ,GAAZ,CAAgB,KAAKyR,UAArB,CAAiC,IAAjC,CAAZ,CAAb,CACA/Y,IAAI,2BAAJ,EACA,MAAO,KAAP,CACH,CAZD,CAcA8P,YAAYvB,SAAZ,CAAsByK,OAAtB,CAAgC,SAASxM,SAAT,CAAoBwM,OAApB,CAA6B,CACzD,GAAIM,MAAJ,CACA,GAAIlF,SAAUvH,QAAQ0M,IAAR,CAAa,CAAC/M,UAAU4H,OAAX,CAAoB,GAAIvH,QAAJ,CAAY,SAAS2M,GAAT,CAAcrI,MAAd,CAAsB,CAC7EmI,MAAQG,WAAW,UAAW,CAC1BzZ,IAAI,yBAAJ,CAA+BwM,SAA/B,EACA2E,OAAO3E,SAAP,EACH,CAHO,CAGLwM,OAHK,CAAR,CAIH,CAL8C,CAApB,CAAb,EAKTxY,IALS,CAKJ,SAASgM,SAAT,CAAoB,CAC1BkN,aAAaJ,KAAb,EACA,MAAO9M,UAAP,CACH,CARa,CAAd,CASA4H,QAAQ,OAAR,EAAiB,UAAW,CACxBsF,aAAaJ,KAAb,EACH,CAFD,EAGA,MAAOlF,QAAP,CACH,CAfD,CAiBA/P,OAAOD,OAAP,CAAiB0L,WAAjB,CAEC,CA/JQ,CA+JP,CAAC,wBAAwB,CAAzB,CAA2B,mBAAmB,CAA9C,CAAgD,mBAAmB,EAAnE,CAAsE,4BAA4B,EAAlG,CAAqG,QAAQ,EAA7G,CAAgH,wBAAwB,EAAxI,CAA2I,iBAAiB,EAA5J,CAA+J,qBAAqB,EAApL,CAAuL,UAAU,EAAjM,CAAoM,4BAA4B,EAAhO,CA/JO,CA7tCqyB,CA43CvkB,GAAG,CAAC,SAASrK,OAAT,CAAiBpB,MAAjB,CAAwBD,OAAxB,CAAgC,CAC3Q,GAAI4R,mBAAoBvQ,QAAQ,qBAAR,CAAxB,CACA,GAAIsI,OAAQtI,QAAQ,SAAR,CAAZ,CAEA,QAASuR,wBAAT,CAAiCf,SAAjC,CAA4C,CACxCD,kBAAkB2D,KAAlB,CAAwB,IAAxB,CAA8BC,SAA9B,EACA,KAAKxS,IAAL,CAAY4O,kBAAkBK,KAAlB,CAAwBC,MAApC,CAEA,GAAIuD,cAAe7C,wBAAwB8C,gBAAxB,CAAyCrP,IAAzC,CAA+CwL,UAAUyB,IAAV,CAAe,CAAf,CAA/C,GACf,CAAC1B,kBAAkBQ,gBAAlB,CAAmC/L,IAAnC,CAAyCwL,UAAUyB,IAAV,CAAe,CAAf,CAAzC,CADL,CAGA,GAAImC,YAAJ,CAAkB,CACd5D,UAAUyB,IAAV,CAAe,CAAf,EAAkB7P,KAAlB,CAAwB,KAAxB,EAA+BkS,OAA/B,GAAyCnC,OAAzC,CAAiD,SAAS3W,QAAT,CAAmB0I,KAAnB,CAA0B,CACvE,OAAO1I,QAAP,EACA,IAAK,MAAL,CACI,KAAKkV,EAAL,CAAU,CAAV,CACA,KAAKhD,EAAL,CAAU,CAAV,CACA,MACJ,IAAK,KAAL,CACI,KAAKiD,EAAL,CAAU,CAAV,CACA,KAAK9C,EAAL,CAAU,CAAV,CACA,MACJ,IAAK,OAAL,CACI,KAAK6C,EAAL,CAAU,CAAV,CACA,KAAKhD,EAAL,CAAU,CAAV,CACA,MACJ,IAAK,QAAL,CACI,KAAKiD,EAAL,CAAU,CAAV,CACA,KAAK9C,EAAL,CAAU,CAAV,CACA,MACJ,IAAK,IAAL,CACI,GAAI8C,IAAK,KAAKA,EAAd,CACA,GAAID,IAAK,KAAKA,EAAd,CACA,KAAKC,EAAL,CAAU,KAAK9C,EAAf,CACA,KAAK6C,EAAL,CAAU,KAAKhD,EAAf,CACA,KAAKA,EAAL,CAAUgD,EAAV,CACA,KAAK7C,EAAL,CAAU8C,EAAV,CACA,MACJ,IAAK,QAAL,CACI,MAAO;AACX;AACA;AACA,SAAS;AACL;AACA,IAAI4D,OAAQC,WAAWhZ,QAAX,CAAqB,EAArB,EAA2B,IAAvC,CACA,GAAIiZ,MAAMF,KAAN,CAAJ,CAAkB,CAAE;AAChB,OACH,CACD,GAAIrQ,QAAU,CAAd,CAAiB,CACb,KAAKyM,EAAL,CAAU4D,KAAV,CACA,KAAK1G,EAAL,CAAU,EAAI,KAAK8C,EAAnB,CACH,CAHD,IAGO,CACH,KAAKD,EAAL,CAAU6D,KAAV,CACA,KAAK7G,EAAL,CAAU,EAAI,KAAKgD,EAAnB,CACH,CACD,MA1CJ,CA4CH,CA7CD,CA6CG,IA7CH,EA8CH,CA/CD,IA+CO,CACH,KAAKC,EAAL,CAAU,CAAV,CACA,KAAK9C,EAAL,CAAU,CAAV,CACH,CAED,KAAK4C,UAAL,CAAkBD,UAAUyB,IAAV,CAAehN,KAAf,CAAqBmP,aAAe,CAAf,CAAmB,CAAxC,EAA2CvS,GAA3C,CAA+C,SAAS6S,SAAT,CAAoB,CACjF,GAAIC,gBAAiBD,UAAUlL,KAAV,CAAgB+G,kBAAkBQ,gBAAlC,CAArB,CACA,GAAInO,OAAQ,CAAC+R,eAAe,CAAf,CAAb,CACA,GAAIC,MAAOhS,QAAU,CAAV,CAAc,GAAd,CAAoB+R,eAAe,CAAf,CAA/B,CAAkD;AAClD,OAAO,CACH3K,MAAO,GAAI1B,MAAJ,CAAUqM,eAAe,CAAf,CAAV,CADJ,CAEH;AACAE,MAAMD,OAAS,GAAT,CAAehS,MAAQ,GAAvB,CAA6B,IAHhC,CAAP,CAKH,CATiB,CAAlB,CAWA,GAAI,KAAK6N,UAAL,CAAgB,CAAhB,EAAmBoE,IAAnB,GAA4B,IAAhC,CAAsC,CAClC,KAAKpE,UAAL,CAAgB,CAAhB,EAAmBoE,IAAnB,CAA0B,CAA1B,CACH,CAED,GAAI,KAAKpE,UAAL,CAAgB,KAAKA,UAAL,CAAgB1Q,MAAhB,CAAyB,CAAzC,EAA4C8U,IAA5C,GAAqD,IAAzD,CAA+D,CAC3D,KAAKpE,UAAL,CAAgB,KAAKA,UAAL,CAAgB1Q,MAAhB,CAAyB,CAAzC,EAA4C8U,IAA5C,CAAmD,CAAnD,CACH,CAED;AACA,MAAKpE,UAAL,CAAgB0B,OAAhB,CAAwB,SAASuC,SAAT,CAAoBxQ,KAApB,CAA2B,CAC/C,GAAIwQ,UAAUG,IAAV,GAAmB,IAAvB,CAA6B,CACzB,KAAKpE,UAAL,CAAgBxL,KAAhB,CAAsBf,KAAtB,EAA6BgP,IAA7B,CAAkC,SAAS4B,IAAT,CAAeC,KAAf,CAAsB,CACpD,GAAID,KAAKD,IAAL,GAAc,IAAlB,CAAwB,CACpBH,UAAUG,IAAV,CAAkB,CAACC,KAAKD,IAAL,CAAY,KAAKpE,UAAL,CAAgBvM,MAAQ,CAAxB,EAA2B2Q,IAAxC,GAAiDE,MAAQ,CAAzD,CAAD,CAAgE,KAAKtE,UAAL,CAAgBvM,MAAQ,CAAxB,EAA2B2Q,IAA5G,CACA,MAAO,KAAP,CACH,CAHD,IAGO,CACH,MAAO,MAAP,CACH,CACJ,CAPD,CAOG,IAPH,EAQH,CACJ,CAXD,CAWG,IAXH,EAYH,CAEDtD,wBAAwBzI,SAAxB,CAAoC1O,OAAOgS,MAAP,CAAcmE,kBAAkBzH,SAAhC,CAApC,CAEA;AACAyI,yBAAwB8C,gBAAxB,CAA2C,sEAA3C,CAEAzV,OAAOD,OAAP,CAAiB4S,uBAAjB,CAEC,CAxGyO,CAwGxO,CAAC,UAAU,CAAX,CAAa,sBAAsB,CAAnC,CAxGwO,CA53CokB,CAo+CrwB,GAAG,CAAC,SAASvR,OAAT,CAAiBpB,MAAjB,CAAwBD,OAAxB,CAAgC,CAC7E,GAAIqW,QAAS,QAATA,OAAS,EAAW,CACpB,GAAIA,OAAO9a,OAAP,CAAe6Q,OAAf,EAA0BjN,OAAOmX,OAAjC,EAA4CnX,OAAOmX,OAAP,CAAe1a,GAA/D,CAAoE,CAChE2a,SAASpM,SAAT,CAAmBrO,IAAnB,CAAwBqF,IAAxB,CAA6BhC,OAAOmX,OAAP,CAAe1a,GAA5C,CAAkDuD,OAAOmX,OAAzD,EAAmEf,KAAnE,CAAyEpW,OAAOmX,OAAhF,CAAyF,CAAEhK,KAAKC,GAAL,GAAa8J,OAAO9a,OAAP,CAAe8Q,KAA7B,CAAsC,IAAvC,CAA6C,cAA7C,EAA6DgH,MAA7D,CAAoE,GAAG/M,KAAH,CAASnF,IAAT,CAAcqU,SAAd,CAAyB,CAAzB,CAApE,CAAzF,EACH,CACJ,CAJD,CAMAa,OAAO9a,OAAP,CAAiB,CAAC6Q,QAAS,KAAV,CAAjB,CACAnM,OAAOD,OAAP,CAAiBqW,MAAjB,CAEC,CAV2C,CAU1C,EAV0C,CAp+CkwB,CA8+CxyB,GAAG,CAAC,SAAShV,OAAT,CAAiBpB,MAAjB,CAAwBD,OAAxB,CAAgC,CAC1C,GAAI2J,OAAQtI,QAAQ,SAAR,CAAZ,CACA,GAAIwK,OAAQxK,QAAQ,SAAR,CAAZ,CACA,GAAI2K,WAAYH,MAAMG,SAAtB,CACA,GAAIwK,kBAAmB3K,MAAM2K,gBAA7B,CACA,GAAIC,cAAe5K,MAAM4K,YAAzB,CAEA,QAAS7K,cAAT,CAAuBxE,IAAvB,CAA6BsP,MAA7B,CAAqC,CACjC,KAAKtP,IAAL,CAAYA,IAAZ,CACA,KAAKsP,MAAL,CAAcA,MAAd,CACA,KAAKC,KAAL,CAAa,IAAb,CACA,KAAKrI,MAAL,CAAc,IAAd,CACA,KAAKsI,OAAL,CAAe,IAAf,CACA,KAAKC,IAAL,CAAY,EAAZ,CACA,KAAKC,cAAL,CAAsB,EAAtB,CACA,KAAKL,YAAL,CAAoB,IAApB,CACA,KAAKM,OAAL,CAAe,IAAf,CACA,KAAKC,cAAL,CAAsB,IAAtB,CACA,KAAK1L,MAAL,CAAc,EAAd,CACA,KAAK2L,MAAL,CAAc,EAAd,CACA,KAAKC,gBAAL,CAAwB,IAAxB,CACA,KAAKC,aAAL,CAAqB,IAArB,CACA,KAAKC,eAAL,CAAuB,IAAvB,CACA,KAAKC,eAAL,CAAuB,KAAvB,CACA,KAAKC,OAAL,CAAe,IAAf,CACH,CAED1L,cAAczB,SAAd,CAAwBoN,OAAxB,CAAkC,SAASZ,KAAT,CAAgB,CAC9CA,MAAMI,OAAN,CAAgB,KAAKA,OAArB,CACAJ,MAAMC,OAAN,CAAgB,KAAKA,OAArB,CACAD,MAAMrI,MAAN,CAAe,KAAKA,MAApB,CACAqI,MAAME,IAAN,CAAa,KAAKA,IAAlB,CACAF,MAAMG,cAAN,CAAuB,KAAKA,cAA5B,CACAH,MAAMK,cAAN,CAAuB,KAAKA,cAA5B,CACAL,MAAMM,MAAN,CAAe,KAAKA,MAApB,CACAN,MAAMO,gBAAN,CAAyB,KAAKA,gBAA9B,CACAP,MAAMW,OAAN,CAAgB,KAAKA,OAArB,CACH,CAVD,CAYA1L,cAAczB,SAAd,CAAwBqN,UAAxB,CAAqC,UAAW,CAC5C,MAAO,MAAKF,OAAL,GAAiB,IAAjB,CAAyB,KAAKA,OAAL,CAAe,KAAKG,QAAL,CAAc,SAAd,CAAxC,CAAoE,KAAKH,OAAhF,CACH,CAFD,CAIA1L,cAAczB,SAAd,CAAwBuN,WAAxB,CAAsC,SAASf,KAAT,CAAgB,CAClD,KAAKA,KAAL,CAAaA,KAAb,CACAA,MAAMgB,QAAN,CAAevT,IAAf,CAAoB,IAApB,EACH,CAHD,CAKAwH,cAAczB,SAAd,CAAwByN,gBAAxB,CAA2C,UAAW,CAClD,MAAO,MAAKxQ,IAAL,CAAU5F,QAAV,GAAuBqW,KAAKC,SAA5B,CAAwC,KAAKpB,MAAL,CAAYK,OAApD,CACH,KAAKgB,GAAL,CAAS,SAAT,IAAwB,MAAxB,EACA,KAAKA,GAAL,CAAS,YAAT,IAA2B,QAD3B,EAEA,CAAC,KAAK3Q,IAAL,CAAU4Q,YAAV,CAAuB,yBAAvB,CAFD,GAGC,KAAK5Q,IAAL,CAAUO,QAAV,GAAuB,OAAvB,EAAkC,KAAKP,IAAL,CAAU6Q,YAAV,CAAuB,MAAvB,IAAmC,QAHtE,CADJ,CAMH,CAPD,CASArM,cAAczB,SAAd,CAAwB4N,GAAxB,CAA8B,SAASG,SAAT,CAAoB,CAC9C,GAAI,CAAC,KAAKlB,cAAV,CAA0B,CACtB,KAAKA,cAAL,CAAsB,KAAKK,eAAL,CAAuB,KAAKX,MAAL,CAAYyB,aAAZ,CAA0B,KAAKC,MAAL,CAAc,SAAd,CAA0B,QAApD,CAAvB,CAAuF,KAAKD,aAAL,CAAmB,IAAnB,CAA7G,CACH,CAED,MAAO,MAAKlB,MAAL,CAAYiB,SAAZ,IAA2B,KAAKjB,MAAL,CAAYiB,SAAZ,EAAyB,KAAKlB,cAAL,CAAoBkB,SAApB,CAApD,CAAP,CACH,CAND,CAQAtM,cAAczB,SAAd,CAAwBkO,WAAxB,CAAsC,SAASH,SAAT,CAAoB,CACtD,GAAII,UAAW,CAAC,QAAD,CAAW,KAAX,CAAkB,IAAlB,CAAwB,GAAxB,CAAf,CACA,GAAIrU,OAAQ,KAAK8T,GAAL,CAASG,SAAT,CAAZ,CACA,GAAIjU,QAAUmJ,SAAd,CAAyB,CACrBkL,SAAS/D,IAAT,CAAc,SAASgE,MAAT,CAAiB,CAC3BtU,MAAQ,KAAK8T,GAAL,CAASQ,OAASL,UAAUM,MAAV,CAAiB,CAAjB,CAAoB,CAApB,EAAuBC,WAAvB,EAAT,CAAgDP,UAAUM,MAAV,CAAiB,CAAjB,CAAzD,CAAR,CACA,MAAOvU,SAAUmJ,SAAjB,CACH,CAHD,CAGG,IAHH,EAIH,CACD,MAAOnJ,SAAUmJ,SAAV,CAAsB,IAAtB,CAA6BnJ,KAApC,CACH,CAVD,CAYA2H,cAAczB,SAAd,CAAwBgO,aAAxB,CAAwC,SAASnV,IAAT,CAAe,CACnD,MAAO,MAAKoE,IAAL,CAAUR,aAAV,CAAwBC,WAAxB,CAAoC6R,gBAApC,CAAqD,KAAKtR,IAA1D,CAAgEpE,IAAhE,CAAP,CACH,CAFD,CAIA4I,cAAczB,SAAd,CAAwBwO,MAAxB,CAAiC,SAAST,SAAT,CAAoB,CACjD,GAAIjU,OAAQ6G,SAAS,KAAKiN,GAAL,CAASG,SAAT,CAAT,CAA8B,EAA9B,CAAZ,CACA,MAAQpC,OAAM7R,KAAN,CAAD,CAAiB,CAAjB,CAAqBA,KAA5B,CAAmC;AACtC,EAHD,CAKA2H,cAAczB,SAAd,CAAwBkB,KAAxB,CAAgC,SAAS6M,SAAT,CAAoB,CAChD,MAAO,MAAK5M,MAAL,CAAY4M,SAAZ,IAA2B,KAAK5M,MAAL,CAAY4M,SAAZ,EAAyB,GAAIvO,MAAJ,CAAU,KAAKoO,GAAL,CAASG,SAAT,CAAV,CAApD,CAAP,CACH,CAFD,CAIAtM,cAAczB,SAAd,CAAwBsN,QAAxB,CAAmC,SAASS,SAAT,CAAoB,CACnD,GAAIjU,OAAQ4R,WAAW,KAAKkC,GAAL,CAASG,SAAT,CAAX,CAAZ,CACA,MAAQpC,OAAM7R,KAAN,CAAD,CAAiB,CAAjB,CAAqBA,KAA5B,CACH,CAHD,CAKA2H,cAAczB,SAAd,CAAwByO,UAAxB,CAAqC,UAAW,CAC5C,GAAIC,QAAS,KAAKd,GAAL,CAAS,YAAT,CAAb,CACA,OAAOjN,SAAS+N,MAAT,CAAiB,EAAjB,CAAP,EACA,IAAK,IAAL,CACIA,OAAS,MAAT,CACA,MACJ,IAAK,IAAL,CACIA,OAAS,QAAT,CACA,MANJ,CAQA,MAAOA,OAAP,CACH,CAXD,CAaAjN,cAAczB,SAAd,CAAwB2O,SAAxB,CAAoC,UAAW,CAC3C,GAAIC,SAAU,KAAKhB,GAAL,CAAS,MAAT,EAAiBlN,KAAjB,CAAuB,KAAKmO,IAA5B,CAAd,CACA,GAAID,OAAJ,CAAa,CACT,MAAO,CACHhc,IAAK+N,SAASiO,QAAQ,CAAR,CAAT,CAAqB,EAArB,CADF,CAEHpb,MAAOmN,SAASiO,QAAQ,CAAR,CAAT,CAAqB,EAArB,CAFJ,CAGHnb,OAAQkN,SAASiO,QAAQ,CAAR,CAAT,CAAqB,EAArB,CAHL,CAIHjc,KAAMgO,SAASiO,QAAQ,CAAR,CAAT,CAAqB,EAArB,CAJH,CAAP,CAMH,CACD,MAAO,KAAP,CACH,CAXD,CAaAnN,cAAczB,SAAd,CAAwByJ,qBAAxB,CAAgD,UAAW,CACvD,MAAO,MAAKsD,gBAAL,GAA0B,KAAKA,gBAAL,CAAwBV,iBAAiB,KAAKuB,GAAL,CAAS,iBAAT,CAAjB,CAAlD,CAAP,CACH,CAFD,CAIAnM,cAAczB,SAAd,CAAwB8O,OAAxB,CAAkC,SAASC,QAAT,CAAmB3T,KAAnB,CAA0B,CACxD,GAAItB,OAAQ,CAAC,KAAK8T,GAAL,CAASmB,QAAT,GAAsB,EAAvB,EAA2BzV,KAA3B,CAAiC,GAAjC,CAAZ,CACAQ,MAAQA,MAAMsB,OAAS,CAAf,GAAqBtB,MAAM,CAAN,CAArB,EAAiC,MAAzC,CACAA,MAAQA,MAAMkV,IAAN,GAAa1V,KAAb,CAAmB,GAAnB,CAAR,CACA,GAAIQ,MAAM7C,MAAN,GAAiB,CAArB,CAAwB,CACpB6C,MAAQ,CAACA,MAAM,CAAN,CAAD,CAAWmV,aAAanV,MAAM,CAAN,CAAb,EAAyB,MAAzB,CAAkCA,MAAM,CAAN,CAA7C,CAAR,CACH,CACD,MAAOA,MAAP,CACH,CARD,CAUA2H,cAAczB,SAAd,CAAwBkP,mBAAxB,CAA8C,SAAS/K,MAAT,CAAiB2B,KAAjB,CAAwB1K,KAAxB,CAA+B,CACzE,GAAIgL,MAAO,KAAK0I,OAAL,CAAa,gBAAb,CAA+B1T,KAA/B,CAAX,CACA,GAAI7I,MAAJ,CAAWC,MAAX,CAEA,GAAIyc,aAAa7I,KAAK,CAAL,CAAb,CAAJ,CAA2B,CACvB7T,MAAQ4R,OAAO5R,KAAP,CAAemZ,WAAWtF,KAAK,CAAL,CAAX,CAAf,CAAqC,GAA7C,CACH,CAFD,IAEO,IAAI,gBAAgBlK,IAAhB,CAAqBkK,KAAK,CAAL,CAArB,CAAJ,CAAmC,CACtC,GAAI+I,aAAchL,OAAO5R,KAAP,CAAe4R,OAAO3R,MAAxC,CAAgD4c,aAAetJ,MAAMvT,KAAN,CAAcuT,MAAMtT,MAAnF,CACA,MAAQ2c,aAAcC,YAAd,CAA6BhJ,KAAK,CAAL,IAAY,SAA1C,CAAwD,CAAC7T,MAAO4R,OAAO3R,MAAP,CAAgB4c,YAAxB,CAAsC5c,OAAQ2R,OAAO3R,MAArD,CAAxD,CAAuH,CAACD,MAAO4R,OAAO5R,KAAf,CAAsBC,OAAQ2R,OAAO5R,KAAP,CAAe6c,YAA7C,CAA9H,CACH,CAHM,IAGA,CACH7c,MAAQoO,SAASyF,KAAK,CAAL,CAAT,CAAkB,EAAlB,CAAR,CACH,CAED,GAAIA,KAAK,CAAL,IAAY,MAAZ,EAAsBA,KAAK,CAAL,IAAY,MAAtC,CAA8C,CAC1C5T,OAASsT,MAAMtT,MAAf,CACH,CAFD,IAEO,IAAI4T,KAAK,CAAL,IAAY,MAAhB,CAAwB,CAC3B5T,OAASD,MAAQuT,MAAMvT,KAAd,CAAsBuT,MAAMtT,MAArC,CACH,CAFM,IAEA,IAAIyc,aAAa7I,KAAK,CAAL,CAAb,CAAJ,CAA2B,CAC9B5T,OAAU2R,OAAO3R,MAAP,CAAgBkZ,WAAWtF,KAAK,CAAL,CAAX,CAAhB,CAAsC,GAAhD,CACH,CAFM,IAEA,CACH5T,OAASmO,SAASyF,KAAK,CAAL,CAAT,CAAkB,EAAlB,CAAT,CACH,CAED,GAAIA,KAAK,CAAL,IAAY,MAAhB,CAAwB,CACpB7T,MAAQC,OAASsT,MAAMtT,MAAf,CAAwBsT,MAAMvT,KAAtC,CACH,CAED,MAAO,CAACA,MAAOA,KAAR,CAAeC,OAAQA,MAAvB,CAAP,CACH,CA5BD,CA8BAiP,cAAczB,SAAd,CAAwBqP,uBAAxB,CAAkD,SAASlL,MAAT,CAAiB2B,KAAjB,CAAwB1K,KAAxB,CAA+BkU,cAA/B,CAA+C,CAC7F,GAAI5c,UAAW,KAAKoc,OAAL,CAAa,oBAAb,CAAmC1T,KAAnC,CAAf,CACA,GAAIzI,KAAJ,CAAUC,GAAV,CAEA,GAAIqc,aAAavc,SAAS,CAAT,CAAb,CAAJ,CAA8B,CAC1BC,KAAO,CAACwR,OAAO5R,KAAP,CAAe,CAAC+c,gBAAkBxJ,KAAnB,EAA0BvT,KAA1C,GAAoDmZ,WAAWhZ,SAAS,CAAT,CAAX,EAA0B,GAA9E,CAAP,CACH,CAFD,IAEO,CACHC,KAAOgO,SAASjO,SAAS,CAAT,CAAT,CAAsB,EAAtB,CAAP,CACH,CAED,GAAIA,SAAS,CAAT,IAAgB,MAApB,CAA4B,CACxBE,IAAMD,KAAOmT,MAAMvT,KAAb,CAAqBuT,MAAMtT,MAAjC,CACH,CAFD,IAEO,IAAIyc,aAAavc,SAAS,CAAT,CAAb,CAAJ,CAA8B,CACjCE,IAAO,CAACuR,OAAO3R,MAAP,CAAgB,CAAC8c,gBAAkBxJ,KAAnB,EAA0BtT,MAA3C,EAAqDkZ,WAAWhZ,SAAS,CAAT,CAAX,CAArD,CAA+E,GAAtF,CACH,CAFM,IAEA,CACHE,IAAM+N,SAASjO,SAAS,CAAT,CAAT,CAAsB,EAAtB,CAAN,CACH,CAED,GAAIA,SAAS,CAAT,IAAgB,MAApB,CAA4B,CACxBC,KAAOC,IAAMkT,MAAMtT,MAAZ,CAAqBsT,MAAMvT,KAAlC,CACH,CAED,MAAO,CAACI,KAAMA,IAAP,CAAaC,IAAKA,GAAlB,CAAP,CACH,CAvBD,CAyBA6O,cAAczB,SAAd,CAAwBuP,qBAAxB,CAAgD,SAASnU,KAAT,CAAgB,CAC5D,MAAO,MAAK0T,OAAL,CAAa,kBAAb,CAAiC1T,KAAjC,EAAwC,CAAxC,CAAP,CACH,CAFD,CAIAqG,cAAczB,SAAd,CAAwBwP,gBAAxB,CAA2C,UAAW,CAClD,GAAIC,YAAa,KAAK7B,GAAL,CAAS,YAAT,CAAjB,CACA,GAAI8B,SAAU,EAAd,CAEA,GAAID,YAAcA,aAAe,MAAjC,CAAyC,CACrC,GAAIE,SAAUF,WAAW/O,KAAX,CAAiB,KAAKkP,oBAAtB,CAAd,CACA,IAAK,GAAIhZ,GAAI,CAAb,CAAgB+Y,SAAY/Y,EAAI+Y,QAAQ1Y,MAAxC,CAAiDL,GAAjD,CAAsD,CAClD,GAAIL,GAAIoZ,QAAQ/Y,CAAR,EAAW8J,KAAX,CAAiB,KAAKmP,kBAAtB,CAAR,CACAH,QAAQzV,IAAR,CAAa,CACTiH,MAAO,GAAI1B,MAAJ,CAAUjJ,EAAE,CAAF,CAAV,CADE,CAETuZ,QAASvZ,EAAE,CAAF,EAAOmV,WAAWnV,EAAE,CAAF,EAAKgD,OAAL,CAAa,IAAb,CAAmB,EAAnB,CAAX,CAAP,CAA4C,CAF5C,CAGTwW,QAASxZ,EAAE,CAAF,EAAOmV,WAAWnV,EAAE,CAAF,EAAKgD,OAAL,CAAa,IAAb,CAAmB,EAAnB,CAAX,CAAP,CAA4C,CAH5C,CAITyW,KAAMzZ,EAAE,CAAF,EAAOA,EAAE,CAAF,EAAKgD,OAAL,CAAa,IAAb,CAAmB,EAAnB,CAAP,CAAgC,CAJ7B,CAAb,EAMH,CACJ,CACD,MAAOmW,QAAP,CACH,CAjBD,CAmBAjO,cAAczB,SAAd,CAAwBiQ,cAAxB,CAAyC,UAAW,CAChD,GAAI,CAAC,KAAKjD,aAAV,CAAyB,CACrB,GAAI,KAAKkD,YAAL,EAAJ,CAAyB,CACrB,GAAIC,QAAS,KAAKC,WAAL,EAAb,CACA,GAAIzH,QAAS,KAAKuF,WAAL,CAAiB,iBAAjB,EAAoC5U,KAApC,CAA0C,GAA1C,EAA+CP,GAA/C,CAAmDsX,QAAnD,EAA6DtX,GAA7D,CAAiEuX,OAAjE,CAAb,CACA3H,OAAO,CAAP,GAAawH,OAAOxd,IAApB,CACAgW,OAAO,CAAP,GAAawH,OAAOvd,GAApB,CACA,KAAKoa,aAAL,CAAqB,CACjBrE,OAAQA,MADS,CAEjB4H,OAAQ,KAAKC,oBAAL,EAFS,CAArB,CAIH,CATD,IASO,CACH,KAAKxD,aAAL,CAAqB,CACjBrE,OAAQ,CAAC,CAAD,CAAI,CAAJ,CADS,CAEjB4H,OAAQ,CAAC,CAAD,CAAI,CAAJ,CAAO,CAAP,CAAU,CAAV,CAAa,CAAb,CAAgB,CAAhB,CAFS,CAArB,CAIH,CACJ,CACD,MAAO,MAAKvD,aAAZ,CACH,CAnBD,CAqBAvL,cAAczB,SAAd,CAAwBwQ,oBAAxB,CAA+C,UAAW,CACtD,GAAI,CAAC,KAAKvD,eAAV,CAA2B,CACvB,GAAIwD,WAAY,KAAKvC,WAAL,CAAiB,WAAjB,CAAhB,CACA,GAAIqC,QAASE,UAAYC,YAAYD,UAAU/P,KAAV,CAAgB,KAAKiQ,eAArB,CAAZ,CAAZ,CAAiE,IAA9E,CACA,KAAK1D,eAAL,CAAuBsD,OAASA,MAAT,CAAkB,CAAC,CAAD,CAAI,CAAJ,CAAO,CAAP,CAAU,CAAV,CAAa,CAAb,CAAgB,CAAhB,CAAzC,CACH,CACD,MAAO,MAAKtD,eAAZ,CACH,CAPD,CASAxL,cAAczB,SAAd,CAAwBoQ,WAAxB,CAAsC,UAAW,CAC7C,MAAO,MAAKjM,MAAL,GAAgB,KAAKA,MAAL,CAAc,KAAK+L,YAAL,GAAsB5D,aAAa,KAAKrP,IAAlB,CAAtB,CAAgD4E,UAAU,KAAK5E,IAAf,CAA9E,CAAP,CACH,CAFD,CAIAwE,cAAczB,SAAd,CAAwBkQ,YAAxB,CAAuC,UAAW,CAC9C,MAAO,MAAKM,oBAAL,GAA4B9W,IAA5B,CAAiC,GAAjC,IAA0C,aAA1C,EAA4D,KAAK6S,MAAL,EAAe,KAAKA,MAAL,CAAY2D,YAAZ,EAAlF,CACH,CAFD,CAIAzO,cAAczB,SAAd,CAAwB4Q,QAAxB,CAAmC,UAAW,CAC1C,GAAI9W,OAAQ,KAAKmD,IAAL,CAAUnD,KAAV,EAAmB,EAA/B,CACA,GAAI,KAAKmD,IAAL,CAAU4T,OAAV,GAAsB,QAA1B,CAAoC,CAChC/W,MAAQgX,eAAe,KAAK7T,IAApB,CAAR,CACH,CAFD,IAEO,IAAI,KAAKA,IAAL,CAAUpE,IAAV,GAAmB,UAAvB,CAAmC,CACtCiB,MAAQwG,MAAMxG,MAAM7C,MAAN,CAAe,CAArB,EAAwByC,IAAxB,CAA6B,GAA7B,CAAR,CAAgD;AACnD,EACD,MAAOI,OAAM7C,MAAN,GAAiB,CAAjB,CAAsB,KAAKgG,IAAL,CAAU8T,WAAV,EAAyB,EAA/C,CAAqDjX,KAA5D,CACH,CARD,CAUA2H,cAAczB,SAAd,CAAwB2Q,eAAxB,CAA0C,2BAA1C,CACAlP,cAAczB,SAAd,CAAwB4P,oBAAxB,CAA+C,wCAA/C,CACAnO,cAAczB,SAAd,CAAwB6P,kBAAxB,CAA6C,2CAA7C,CACApO,cAAczB,SAAd,CAAwB6O,IAAxB,CAA+B,iDAA/B,CAEA,QAASiC,eAAT,CAAwB7T,IAAxB,CAA8B,CAC1B,GAAI+T,QAAS/T,KAAK7L,OAAL,CAAa6L,KAAKgU,aAAL,EAAsB,CAAnC,CAAb,CACA,MAAOD,QAAUA,OAAOE,IAAP,EAAe,EAAzB,CAA+B,EAAtC,CACH,CAED,QAASR,YAAT,CAAqBhQ,KAArB,CAA4B,CACxB,GAAIA,OAASA,MAAM,CAAN,IAAa,QAA1B,CAAoC,CAChC,MAAOA,OAAM,CAAN,EAASpH,KAAT,CAAe,GAAf,EAAoBP,GAApB,CAAwB,SAASxC,CAAT,CAAY,CACvC,MAAOmV,YAAWnV,EAAEyY,IAAF,EAAX,CAAP,CACH,CAFM,CAAP,CAGH,CAJD,IAIO,IAAItO,OAASA,MAAM,CAAN,IAAa,UAA1B,CAAsC,CACzC,GAAIyQ,UAAWzQ,MAAM,CAAN,EAASpH,KAAT,CAAe,GAAf,EAAoBP,GAApB,CAAwB,SAASxC,CAAT,CAAY,CACjD,MAAOmV,YAAWnV,EAAEyY,IAAF,EAAX,CAAP,CACD,CAFc,CAAf,CAGA,MAAO,CAACmC,SAAS,CAAT,CAAD,CAAcA,SAAS,CAAT,CAAd,CAA2BA,SAAS,CAAT,CAA3B,CAAwCA,SAAS,CAAT,CAAxC,CAAqDA,SAAS,EAAT,CAArD,CAAmEA,SAAS,EAAT,CAAnE,CAAP,CACH,CACJ,CAED,QAASlC,aAAT,CAAsBnV,KAAtB,CAA6B,CACzB,MAAOA,OAAMmH,QAAN,GAAiBzL,OAAjB,CAAyB,GAAzB,IAAkC,CAAC,CAA1C,CACH,CAED,QAAS6a,SAAT,CAAkBe,GAAlB,CAAuB,CACnB,MAAOA,KAAI7X,OAAJ,CAAY,IAAZ,CAAkB,EAAlB,CAAP,CACH,CAED,QAAS+W,QAAT,CAAiBc,GAAjB,CAAsB,CAClB,MAAO1F,YAAW0F,GAAX,CAAP,CACH,CAEDtb,OAAOD,OAAP,CAAiB4L,aAAjB,CAEC,CA1SQ,CA0SP,CAAC,UAAU,CAAX,CAAa,UAAU,EAAvB,CA1SO,CA9+CqyB,CAwxDhxB,GAAG,CAAC,SAASvK,OAAT,CAAiBpB,MAAjB,CAAwBD,OAAxB,CAAgC,CAClE,GAAIpE,KAAMyF,QAAQ,OAAR,CAAV,CACA,GAAIM,UAAWN,QAAQ,UAAR,CAAf,CACA,GAAIuK,eAAgBvK,QAAQ,iBAAR,CAApB,CACA,GAAIma,eAAgBna,QAAQ,iBAAR,CAApB,CACA,GAAIoa,wBAAyBpa,QAAQ,0BAAR,CAA7B,CACA,GAAIgQ,aAAchQ,QAAQ,eAAR,CAAlB,CACA,GAAIsI,OAAQtI,QAAQ,SAAR,CAAZ,CACA,GAAIqa,iBAAkBra,QAAQ,mBAAR,CAAtB,CACA,GAAIwK,OAAQxK,QAAQ,SAAR,CAAZ,CACA,GAAIvF,MAAO+P,MAAM/P,IAAjB,CACA,GAAIkQ,WAAYH,MAAMG,SAAtB,CACA,GAAIwK,kBAAmB3K,MAAM2K,gBAA7B,CACA,GAAIC,cAAe5K,MAAM4K,YAAzB,CAEA,QAAS9K,WAAT,CAAoBgQ,OAApB,CAA6B/O,QAA7B,CAAuCwB,OAAvC,CAAgDC,WAAhD,CAA6D9S,OAA7D,CAAsE,CAClEK,IAAI,qBAAJ,EACA,KAAKgR,QAAL,CAAgBA,QAAhB,CACA,KAAKrR,OAAL,CAAeA,OAAf,CACA,KAAKqgB,KAAL,CAAa,IAAb,CACA,KAAKxN,OAAL,CAAeA,OAAf,CACA,KAAKyN,WAAL,CAAmB,EAAnB,CACA,KAAKlF,KAAL,CAAa,GAAI+E,gBAAJ,CAAoB,IAApB,CAA0B,CAA1B,CAA6BC,QAAQ/U,aAArC,CAAoD,IAApD,CAAb,CACA,GAAI8P,QAAS,GAAI9K,cAAJ,CAAkB+P,OAAlB,CAA2B,IAA3B,CAAb,CACA,GAAIpgB,QAAQugB,UAAZ,CAAwB,CACpBlP,SAASmP,SAAT,CAAmB,CAAnB,CAAsB,CAAtB,CAAyBnP,SAASlQ,KAAlC,CAAyCkQ,SAASjQ,MAAlD,CAA0D,GAAIgN,MAAJ,CAAUpO,QAAQugB,UAAlB,CAA1D,EACH,CACD,GAAIH,UAAYA,QAAQ/U,aAAR,CAAsBuB,eAAtC,CAAuD,CACnD;AACA,IAAI6T,kBAAmB,GAAIpQ,cAAJ,CAAkB8K,OAAOrL,KAAP,CAAa,iBAAb,EAAgCd,aAAhC,GAAkDoR,QAAQ/U,aAAR,CAAsB5J,IAAxE,CAA+E2e,QAAQ/U,aAAR,CAAsBuB,eAAvH,CAAwI,IAAxI,CAAvB,CACAyE,SAASmP,SAAT,CAAmB,CAAnB,CAAsB,CAAtB,CAAyBnP,SAASlQ,KAAlC,CAAyCkQ,SAASjQ,MAAlD,CAA0Dqf,iBAAiB3Q,KAAjB,CAAuB,iBAAvB,CAA1D,EACH,CACDqL,OAAOuF,QAAP,CAAkBvF,OAAOkB,gBAAP,EAAlB,CACA,KAAKsE,sBAAL,CAA4BP,QAAQ/U,aAApC,EACA,KAAKuV,iBAAL,CAAuBR,QAAQ/U,aAA/B,EACA,KAAKqM,KAAL,CAAamJ,QAAQ,CAAC1F,MAAD,EAASrD,MAAT,CAAgB,KAAKgJ,WAAL,CAAiB3F,MAAjB,CAAhB,EAA0C7C,MAA1C,CAAiD,SAASzL,SAAT,CAAoB,CACtF,MAAOA,WAAU2O,OAAV,CAAoB3O,UAAUwP,gBAAV,EAA3B,CACH,CAFoB,EAElB1U,GAFkB,CAEd,KAAKoZ,iBAFS,CAEU,IAFV,CAAR,CAAb,CAGA,KAAKC,WAAL,CAAmB,GAAIlL,YAAJ,EAAnB,CACAzV,IAAI,uBAAJ,CAA6B,KAAKqX,KAAL,CAAW7R,MAAxC,EACAxF,IAAI,0BAAJ,EACA,KAAK4gB,sBAAL,GACA5gB,IAAI,uBAAJ,EACA,KAAKsX,MAAL,CAAc7E,YAAY2G,KAAZ,CAAkB,KAAK/B,KAAL,CAAWY,MAAX,CAAkB4I,SAAlB,CAAlB,CAAd,CACA,KAAK/N,KAAL,CAAa,KAAKwE,MAAL,CAAYxE,KAAZ,CAAkBtS,IAAlB,CAAuBN,KAAK,UAAW,CAChDF,IAAI,iCAAJ,EACAA,IAAI,4BAAJ,EACA,KAAK8gB,sBAAL,GACA9gB,IAAI,2BAAJ,EACA,KAAK+gB,oBAAL,CAA0B,KAAKhG,KAA/B,EACA,KAAKiG,KAAL,CAAW,KAAKjG,KAAhB,EACA/a,IAAI,6BAA+B,KAAKigB,WAAL,CAAiBza,MAAhD,CAAyD,QAA7D,EACA,MAAO,IAAIqH,QAAJ,CAAY3M,KAAK,SAAS4M,OAAT,CAAkB,CACtC,GAAI,CAACnN,QAAQiR,KAAb,CAAoB,CAChB,KAAKqP,WAAL,CAAiBrI,OAAjB,CAAyB,KAAKqJ,KAA9B,CAAqC,IAArC,EACAnU,UACH,CAHD,IAGO,IAAI,MAAOnN,SAAQiR,KAAf,GAA0B,UAA9B,CAA0C,CAC7CjR,QAAQiR,KAAR,CAAcrL,IAAd,CAAmB,IAAnB,CAAyB,KAAK0a,WAA9B,CAA2CnT,OAA3C,EACH,CAFM,IAEA,IAAI,KAAKmT,WAAL,CAAiBza,MAAjB,CAA0B,CAA9B,CAAgC,CACnC,KAAK0b,WAAL,CAAmB,CAAnB,CACA,KAAKC,aAAL,CAAmB,KAAKlB,WAAxB,CAAqCnT,OAArC,EACH,CAHM,IAGA,CACHA,UACH,CACJ,CAZkB,CAYhB,IAZgB,CAAZ,CAAP,CAaH,CArBmC,CAqBjC,IArBiC,CAAvB,CAAb,CAsBH,CAEDiD,WAAWxB,SAAX,CAAqBqS,sBAArB,CAA8C,UAAW,CACrD,KAAKvJ,KAAL,CAAWO,OAAX,CAAmB,SAASpL,SAAT,CAAoB,CACnC,GAAIqU,UAAUrU,SAAV,CAAJ,CAA0B,CACtB,GAAIiP,gBAAgBjP,SAAhB,CAAJ,CAAgC,CAC5BA,UAAU4U,WAAV,GACH,CACD5U,UAAUwO,OAAV,CAAoB,KAAKqG,YAAL,CAAkB7U,SAAlB,CAApB,CACA,GAAIyO,MAAQzO,UAAU2P,GAAV,CAAc,UAAd,IAA8B,QAA/B,CAA2C,CAAC3P,UAAUwO,OAAV,CAAkBC,IAAnB,CAA3C,CAAsE,EAAjF,CACA,GAAIqG,SAAU9U,UAAU0Q,SAAV,EAAd,CACA,GAAIoE,SAAW,CAAC,UAAD,CAAa,OAAb,EAAsBvd,OAAtB,CAA8ByI,UAAU2P,GAAV,CAAc,UAAd,CAA9B,IAA6D,CAAC,CAA7E,CAAgF,CAC5ElB,KAAKzS,IAAL,CAAU,CAAC,CAAC,MAAD,CACHgE,UAAUkG,MAAV,CAAiBxR,IAAjB,CAAwBogB,QAAQpgB,IAD7B,CAEHsL,UAAUkG,MAAV,CAAiBvR,GAAjB,CAAuBmgB,QAAQngB,GAF5B,CAGHmgB,QAAQvf,KAAR,CAAgBuf,QAAQpgB,IAHrB,CAIHogB,QAAQtf,MAAR,CAAiBsf,QAAQngB,GAJtB,CAAD,CAAV,EAMH,CACDqL,UAAUyO,IAAV,CAAiBsG,cAAc/U,SAAd,EAA2BA,UAAUsO,MAAV,CAAiBG,IAAjB,CAAsBxD,MAAtB,CAA6BwD,IAA7B,CAA3B,CAAgEA,IAAjF,CACAzO,UAAU0O,cAAV,CAA4B1O,UAAU2P,GAAV,CAAc,UAAd,IAA8B,QAA/B,CAA2C3P,UAAUyO,IAAV,CAAexD,MAAf,CAAsB,CAACjL,UAAUwO,OAAV,CAAkBC,IAAnB,CAAtB,CAA3C,CAA6FzO,UAAUyO,IAAlI,CACA,GAAIQ,gBAAgBjP,SAAhB,CAAJ,CAAgC,CAC5BA,UAAUgV,QAAV,GACH,CACJ,CApBD,IAoBO,IAAIC,WAAWjV,SAAX,CAAJ,CAA2B,CAC9BA,UAAUyO,IAAV,CAAiBsG,cAAc/U,SAAd,EAA2BA,UAAUsO,MAAV,CAAiBG,IAA5C,CAAmD,EAApE,CACH,CACD,GAAI,CAACQ,gBAAgBjP,SAAhB,CAAL,CAAiC,CAC7BA,UAAUkG,MAAV,CAAmB,IAAnB,CACH,CACJ,CA3BD,CA2BG,IA3BH,EA4BH,CA7BD,CA+BA,QAAS6O,cAAT,CAAuB/U,SAAvB,CAAkC,CAC9B,MAAOA,WAAUsO,MAAV,EAAoBtO,UAAUsO,MAAV,CAAiBG,IAAjB,CAAsBzV,MAAjD,CACH,CAEDuK,WAAWxB,SAAX,CAAqB4S,aAArB,CAAqC,SAASO,KAAT,CAAgB5U,OAAhB,CAAyB6U,UAAzB,CAAqC,CACtEA,WAAaA,YAAcjR,KAAKC,GAAL,EAA3B,CACA,KAAKsQ,KAAL,CAAWS,MAAM,KAAKR,WAAL,EAAN,CAAX,EACA,GAAIQ,MAAMlc,MAAN,GAAiB,KAAK0b,WAA1B,CAAuC,CACnCpU,UACH,CAFD,IAEO,IAAI6U,WAAa,EAAb,CAAkBjR,KAAKC,GAAL,EAAtB,CAAkC,CACrC,KAAKwQ,aAAL,CAAmBO,KAAnB,CAA0B5U,OAA1B,CAAmC6U,UAAnC,EACH,CAFM,IAEA,CACHlI,WAAWvZ,KAAK,UAAW,CACvB,KAAKihB,aAAL,CAAmBO,KAAnB,CAA0B5U,OAA1B,EACH,CAFU,CAER,IAFQ,CAAX,CAEU,CAFV,EAGH,CACJ,CAZD,CAcAiD,WAAWxB,SAAX,CAAqB+R,sBAArB,CAA8C,SAAS3U,QAAT,CAAmB,CAC7D,KAAKiW,YAAL,CAAkBjW,QAAlB,CAA4B,IAAMkU,uBAAuBtR,SAAvB,CAAiCsT,gCAAvC,CAA0E,+DAA1E,CACxB,GADwB,CAClBhC,uBAAuBtR,SAAvB,CAAiCuT,+BADf,CACiD,8DAD7E,EAEH,CAHD,CAKA/R,WAAWxB,SAAX,CAAqBgS,iBAArB,CAAyC,SAAS5U,QAAT,CAAmB,CACxD,KAAKiW,YAAL,CAAkBjW,QAAlB,CAA4B,uIACxB,sIADJ,EAEH,CAHD,CAKAoE,WAAWxB,SAAX,CAAqBqT,YAArB,CAAoC,SAASjW,QAAT,CAAmB0P,MAAnB,CAA2B,CAC3D,GAAI0G,oBAAqBpW,SAAS/K,aAAT,CAAuB,OAAvB,CAAzB,CACAmhB,mBAAmBC,SAAnB,CAA+B3G,MAA/B,CACA1P,SAASvK,IAAT,CAAcC,WAAd,CAA0B0gB,kBAA1B,EACH,CAJD,CAMAhS,WAAWxB,SAAX,CAAqBmS,iBAArB,CAAyC,SAASlU,SAAT,CAAoB,CACzD,GAAI6K,OAAQ,CAAC,CAAC7K,SAAD,CAAD,CAAZ,CACA,GAAIA,UAAUhB,IAAV,CAAe5F,QAAf,GAA4BqW,KAAKgG,YAArC,CAAmD,CAC/C,GAAIzF,QAAS,KAAK0F,gBAAL,CAAsB1V,SAAtB,CAAiC,SAAjC,CAAb,CACA,GAAI2V,OAAQ,KAAKD,gBAAL,CAAsB1V,SAAtB,CAAiC,QAAjC,CAAZ,CAEA,GAAIgQ,MAAJ,CAAY,CACRnF,MAAM7O,IAAN,CAAWgU,MAAX,EACH,CAED,GAAI2F,KAAJ,CAAW,CACP9K,MAAM7O,IAAN,CAAW2Z,KAAX,EACH,CACJ,CACD,MAAO3B,SAAQnJ,KAAR,CAAP,CACH,CAfD,CAiBA,QAAS+K,YAAT,CAAqBzC,GAArB,CAA0B,CACtB,MAAOA,KAAI7X,OAAJ,CAAY,YAAZ,CAA0B,SAASmH,KAAT,CAAe,CAC5C,MAAOA,OAAM4N,WAAN,GAAoB/U,OAApB,CAA4B,GAA5B,CAAgC,EAAhC,CAAP,CACH,CAFM,CAAP,CAGH,CAEDiI,WAAWxB,SAAX,CAAqB2T,gBAArB,CAAwC,SAAS1V,SAAT,CAAoBpF,IAApB,CAA0B,CAC9D,GAAIpG,OAAQwL,UAAU+P,aAAV,CAAwBnV,IAAxB,CAAZ,CACA,GAAG,CAACpG,KAAD,EAAU,CAACA,MAAMqhB,OAAjB,EAA4BrhB,MAAMqhB,OAAN,GAAkB,MAA9C,EAAwDrhB,MAAMqhB,OAAN,GAAkB,kBAA1E,EAAgGrhB,MAAMshB,OAAN,GAAkB,MAArH,CAA6H,CACzH,MAAO,KAAP,CACH,CAED,GAAID,SAAUE,YAAYvhB,MAAMqhB,OAAlB,CAAd,CACA,GAAIG,SAAUH,QAAQzF,MAAR,CAAe,CAAf,CAAkB,CAAlB,IAAyB,KAAvC,CACA,GAAI6F,YAAa9W,SAAS/K,aAAT,CAAuB4hB,QAAU,KAAV,CAAkB,0BAAzC,CAAjB,CACA,GAAIE,iBAAkB,GAAI7C,uBAAJ,CAA2B4C,UAA3B,CAAuCjW,SAAvC,CAAkDpF,IAAlD,CAAtB,CAEA,IAAK,GAAIjC,GAAInE,MAAMwE,MAAN,CAAa,CAA1B,CAA6BL,GAAK,CAAlC,CAAqCA,GAArC,CAA0C,CACtC,GAAImY,UAAW8E,YAAYphB,MAAM2hB,IAAN,CAAWxd,CAAX,CAAZ,CAAf,CACAsd,WAAWzhB,KAAX,CAAiBsc,QAAjB,EAA6Btc,MAAMsc,QAAN,CAA7B,CACH,CAEDmF,WAAWhW,SAAX,CAAuBoT,uBAAuBtR,SAAvB,CAAiCsT,gCAAjC,CAAoE,GAApE,CAA0EhC,uBAAuBtR,SAAvB,CAAiCuT,+BAAlI,CAEA,GAAIU,OAAJ,CAAa,CACTC,WAAWtO,GAAX,CAAiByG,iBAAiByH,OAAjB,EAA0B,CAA1B,EAA6B3K,IAA7B,CAAkC,CAAlC,CAAjB,CACA,MAAO,CAACgL,eAAD,CAAP,CACH,CAHD,IAGO,CACH,GAAIjD,MAAO9T,SAAS7J,cAAT,CAAwBugB,OAAxB,CAAX,CACAI,WAAWphB,WAAX,CAAuBoe,IAAvB,EACA,MAAO,CAACiD,eAAD,CAAkB,GAAI9C,cAAJ,CAAkBH,IAAlB,CAAwBiD,eAAxB,CAAlB,CAAP,CACH,CACJ,CA1BD,CA6BA3S,WAAWxB,SAAX,CAAqBkS,WAArB,CAAmC,SAASmC,eAAT,CAA0B,CACzD,MAAOpC,SAAQ,GAAGvI,MAAH,CAAU1S,IAAV,CAAeqd,gBAAgBpX,IAAhB,CAAqB4B,UAApC,CAAgDyV,cAAhD,EAAgEvb,GAAhE,CAAoE,SAASkE,IAAT,CAAe,CAC9F,GAAIgB,WAAY,CAAChB,KAAK5F,QAAL,GAAkBqW,KAAKC,SAAvB,CAAmC,GAAI0D,cAAJ,CAAkBpU,IAAlB,CAAwBoX,eAAxB,CAAnC,CAA8E,GAAI5S,cAAJ,CAAkBxE,IAAlB,CAAwBoX,eAAxB,CAA/E,EAAyH3K,MAAzH,CAAgI6K,iBAAhI,CAAhB,CACA,MAAOtX,MAAK5F,QAAL,GAAkBqW,KAAKgG,YAAvB,EAAuCzV,UAAUhH,MAAjD,EAA2DgG,KAAK4T,OAAL,GAAiB,UAA5E,CAA0F5S,UAAU,CAAV,EAAawP,gBAAb,GAAkCxP,UAAUiL,MAAV,CAAiB,KAAKgJ,WAAL,CAAiBjU,UAAU,CAAV,CAAjB,CAAjB,CAAlC,CAAqF,EAA/K,CAAqLA,SAA5L,CACH,CAHc,CAGZ,IAHY,CAAR,CAAP,CAIH,CALD,CAOAuD,WAAWxB,SAAX,CAAqBwU,kBAArB,CAA0C,SAASvW,SAAT,CAAoBwW,cAApB,CAAoC,CAC1E,GAAIjI,OAAQ,GAAI+E,gBAAJ,CAAoBkD,cAApB,CAAoCxW,UAAUoP,UAAV,EAApC,CAA4DpP,UAAUhB,IAAtE,CAA4EgB,UAAUsO,MAAtF,CAAZ,CACAtO,UAAUmP,OAAV,CAAkBZ,KAAlB,EACA,GAAIkI,aAAcD,eAAiBjI,MAAMmI,cAAN,CAAqB,IAArB,CAAjB,CAA8CnI,MAAMD,MAAN,CAAaC,KAA7E,CACAkI,YAAYE,QAAZ,CAAqB3a,IAArB,CAA0BuS,KAA1B,EACAvO,UAAUuO,KAAV,CAAkBA,KAAlB,CACH,CAND,CAQAhL,WAAWxB,SAAX,CAAqBuS,sBAArB,CAA8C,UAAW,CACrD,KAAKzJ,KAAL,CAAWO,OAAX,CAAmB,SAASpL,SAAT,CAAoB,CACnC,GAAIqU,UAAUrU,SAAV,IAAyB,KAAK4W,aAAL,CAAmB5W,SAAnB,GAAiC6W,WAAW7W,SAAX,CAAjC,EAA0D8W,wBAAwB9W,SAAxB,CAA1D,EAAgG,KAAK+W,yBAAL,CAA+B/W,SAA/B,CAAhG,EAA6IA,UAAUiS,YAAV,EAAtK,CAAJ,CAAqM,CACjM,KAAKsE,kBAAL,CAAwBvW,SAAxB,CAAmC,IAAnC,EACH,CAFD,IAEO,IAAIqU,UAAUrU,SAAV,IAA0BgX,aAAahX,SAAb,GAA2BiX,QAAQjX,SAAR,CAA5B,EAAmDkX,cAAclX,SAAd,CAAnD,EAA+EmX,WAAWnX,SAAX,CAAxG,CAAJ,CAAoI,CACvI,KAAKuW,kBAAL,CAAwBvW,SAAxB,CAAmC,KAAnC,EACH,CAFM,IAEA,CACHA,UAAUsP,WAAV,CAAsBtP,UAAUsO,MAAV,CAAiBC,KAAvC,EACH,CACJ,CARD,CAQG,IARH,EASH,CAVD,CAYAhL,WAAWxB,SAAX,CAAqBgV,yBAArB,CAAiD,SAAS/W,SAAT,CAAoB,CACjE,MAAOA,WAAUhB,IAAV,CAAeO,QAAf,GAA4B,MAA5B,EAAsCS,UAAUsO,MAAV,CAAiBrL,KAAjB,CAAuB,iBAAvB,EAA0Cd,aAA1C,EAA7C,CACH,CAFD,CAIAoB,WAAWxB,SAAX,CAAqB6U,aAArB,CAAqC,SAAS5W,SAAT,CAAoB,CACrD,MAAOA,WAAUsO,MAAV,GAAqB,IAA5B,CACH,CAFD,CAIA/K,WAAWxB,SAAX,CAAqBwS,oBAArB,CAA4C,SAAShG,KAAT,CAAgB,CACxDA,MAAMoI,QAAN,CAAeS,IAAf,CAAoBC,WAAW9I,MAAMoI,QAAN,CAAezY,KAAf,CAAqB,CAArB,CAAX,CAApB,EACAqQ,MAAMoI,QAAN,CAAevL,OAAf,CAAuB,KAAKmJ,oBAA5B,CAAkD,IAAlD,EACH,CAHD,CAKAhR,WAAWxB,SAAX,CAAqBuV,eAArB,CAAuC,SAAStX,SAAT,CAAoB,CACvD,MAAO,UAASiT,IAAT,CAAe9V,KAAf,CAAsBoa,QAAtB,CAAgC,CACnC,GAAIvX,UAAUsO,MAAV,CAAiBqB,GAAjB,CAAqB,gBAArB,EAAuCS,MAAvC,CAA8C,CAA9C,CAAiD,CAAjD,IAAwD,MAAxD,EAAkE6C,KAAKlC,IAAL,GAAY/X,MAAZ,GAAuB,CAA7F,CAAgG,CAC5F,GAAI,KAAKgN,OAAL,CAAawR,WAAb,EAA4B,CAACxX,UAAUsO,MAAV,CAAiB2D,YAAjB,EAAjC,CAAkE,CAC9D,GAAIC,QAASqF,SAASrZ,KAAT,CAAe,CAAf,CAAkBf,KAAlB,EAAyB1B,IAAzB,CAA8B,EAA9B,EAAkCzC,MAA/C,CACA,MAAO,MAAKye,cAAL,CAAoBzX,UAAUhB,IAA9B,CAAoCkT,MAApC,CAA4Ce,KAAKja,MAAjD,CAAP,CACH,CAHD,IAGO,IAAIgH,UAAUhB,IAAV,EAAkB,MAAOgB,WAAUhB,IAAV,CAAekK,IAAtB,GAAgC,QAAtD,CAAgE,CACnE,GAAIwO,iBAAkB1X,UAAUhB,IAAV,CAAe2Y,SAAf,CAAyB1E,KAAKja,MAA9B,CAAtB,CACA,GAAIkN,QAAS,KAAK0R,gBAAL,CAAsB5X,UAAUhB,IAAhC,CAAsCgB,UAAUsO,MAAV,CAAiB2D,YAAjB,EAAtC,CAAb,CACAjS,UAAUhB,IAAV,CAAiB0Y,eAAjB,CACA,MAAOxR,OAAP,CACH,CACJ,CAVD,IAUO,IAAG,CAAC,KAAKF,OAAL,CAAawR,WAAd,EAA6BxX,UAAUsO,MAAV,CAAiB2D,YAAjB,EAAhC,CAAgE,CACnEjS,UAAUhB,IAAV,CAAiBgB,UAAUhB,IAAV,CAAe2Y,SAAf,CAAyB1E,KAAKja,MAA9B,CAAjB,CACH,CACD,MAAO,EAAP,CACH,CAfD,CAgBH,CAjBD,CAmBAuK,WAAWxB,SAAX,CAAqB6V,gBAArB,CAAwC,SAAS5Y,IAAT,CAAewT,SAAf,CAA0B,CAC9D,GAAIqF,SAAU7Y,KAAKR,aAAL,CAAmBpK,aAAnB,CAAiC,oBAAjC,CAAd,CACA,GAAIka,QAAStP,KAAKyH,UAAlB,CACIqR,WAAa9Y,KAAKD,SAAL,CAAe,IAAf,CADjB,CAGA8Y,QAAQhjB,WAAR,CAAoBmK,KAAKD,SAAL,CAAe,IAAf,CAApB,EACAuP,OAAOlN,YAAP,CAAoByW,OAApB,CAA6B7Y,IAA7B,EACA,GAAIkH,QAASsM,UAAYnE,aAAawJ,OAAb,CAAZ,CAAoCjU,UAAUiU,OAAV,CAAjD,CACAvJ,OAAOlN,YAAP,CAAoB0W,UAApB,CAAgCD,OAAhC,EACA,MAAO3R,OAAP,CACH,CAVD,CAYA3C,WAAWxB,SAAX,CAAqB0V,cAArB,CAAsC,SAASzY,IAAT,CAAekT,MAAf,CAAuBlZ,MAAvB,CAA+B,CACjE,GAAIwa,OAAQ,KAAKA,KAAL,GAAe,KAAKA,KAAL,CAAaxU,KAAKR,aAAL,CAAmBuZ,WAAnB,EAA5B,CAAZ,CACAvE,MAAMwE,QAAN,CAAehZ,IAAf,CAAqBkT,MAArB,EACAsB,MAAMyE,MAAN,CAAajZ,IAAb,CAAmBkT,OAASlZ,MAA5B,EACA,MAAOwa,OAAM0E,qBAAN,EAAP,CACH,CALD,CAOA,QAASC,eAAT,EAA0B,CAAE,CAE5B5U,WAAWxB,SAAX,CAAqByS,KAArB,CAA6B,SAASjG,KAAT,CAAgB,CACzC;AACA,IAAI6J,gBAAiB7J,MAAMoI,QAAN,CAAelL,MAAf,CAAsB4M,cAAtB,CAArB,CAA4D;AAC5D,IAAIC,oBAAqB/J,MAAMgB,QAAN,CAAe9D,MAAf,CAAsB4I,SAAtB,CAAzB,CACA,GAAIkE,qBAAsBD,mBAAmB7M,MAAnB,CAA0B+M,IAAIrB,UAAJ,CAA1B,CAA1B,CACA,GAAIsB,mCAAoCF,oBAAoB9M,MAApB,CAA2B+M,IAAIxB,YAAJ,CAA3B,EAA8CvL,MAA9C,CAAqD+M,IAAIE,WAAJ,CAArD,CAAxC,CAAgH;AAChH,IAAIC,qBAAsBL,mBAAmB7M,MAAnB,CAA0B+M,IAAIxB,YAAJ,CAA1B,EAA6CvL,MAA7C,CAAoD0L,UAApD,CAA1B,CAA2F;AAC3F,IAAIyB,QAASL,oBAAoB9M,MAApB,CAA2B+M,IAAIxB,YAAJ,CAA3B,EAA8CvL,MAA9C,CAAqDiN,WAArD,CAAb,CAAgF;AAChF,IAAIG,aAActK,MAAMoI,QAAN,CAAe1L,MAAf,CAAsBsN,oBAAoB9M,MAApB,CAA2BuL,YAA3B,CAAtB,EAAgEvL,MAAhE,CAAuEwL,OAAvE,CAAlB,CAAmG;AACnG,IAAIhE,MAAO1E,MAAMgB,QAAN,CAAe9D,MAAf,CAAsBwJ,UAAtB,EAAkCxJ,MAAlC,CAAyCqN,OAAzC,CAAX,CACA,GAAIC,gBAAiBxK,MAAMoI,QAAN,CAAelL,MAAf,CAAsBuN,cAAtB,CAArB,CAA4D;AAC5DZ,gBAAenN,MAAf,CAAsBwN,iCAAtB,EAAyDxN,MAAzD,CAAgE0N,mBAAhE,EACK1N,MADL,CACY2N,MADZ,EACoB3N,MADpB,CAC2B4N,WAD3B,EACwC5N,MADxC,CAC+CgI,IAD/C,EACqDhI,MADrD,CAC4D8N,cAD5D,EAC4E3N,OAD5E,CACoF,SAASpL,SAAT,CAAoB,CAChG,KAAKyT,WAAL,CAAiBzX,IAAjB,CAAsBgE,SAAtB,EACA,GAAIiZ,kBAAkBjZ,SAAlB,CAAJ,CAAkC,CAC9B,KAAKwU,KAAL,CAAWxU,SAAX,EACA,KAAKyT,WAAL,CAAiBzX,IAAjB,CAAsB,GAAImc,eAAJ,EAAtB,EACH,CACJ,CAPL,CAOO,IAPP,EAQH,CAnBD,CAqBA5U,WAAWxB,SAAX,CAAqB0S,KAArB,CAA6B,SAASzU,SAAT,CAAoB,CAC7C,GAAI,CACA,GAAIA,oBAAqBmY,eAAzB,CAAyC,CACrC,KAAK3T,QAAL,CAAczO,GAAd,CAAkBmjB,OAAlB,GACH,CAFD,IAEO,IAAIjE,WAAWjV,SAAX,CAAJ,CAA2B,CAC9B,GAAIiP,gBAAgBjP,UAAUsO,MAA1B,CAAJ,CAAuC,CACnCtO,UAAUsO,MAAV,CAAiBsG,WAAjB,GACH,CACD,KAAKuE,SAAL,CAAenZ,SAAf,EACA,GAAIiP,gBAAgBjP,UAAUsO,MAA1B,CAAJ,CAAuC,CACnCtO,UAAUsO,MAAV,CAAiB0G,QAAjB,GACH,CACJ,CARM,IAQA,CACH,KAAKoE,SAAL,CAAepZ,SAAf,EACH,CACJ,CAAC,MAAM7I,CAAN,CAAS,CACP3D,IAAI2D,CAAJ,EACA,GAAI,KAAKhE,OAAL,CAAasR,MAAjB,CAAyB,CACrB,KAAMtN,EAAN,CACH,CACJ,CACJ,CArBD,CAuBAoM,WAAWxB,SAAX,CAAqBqX,SAArB,CAAiC,SAASpZ,SAAT,CAAoB,CACjD,GAAIiZ,kBAAkBjZ,SAAlB,CAAJ,CAAkC,CAC9B,KAAKwE,QAAL,CAAc6U,UAAd,CAAyBrZ,UAAUkP,OAAnC,EACA,KAAK1K,QAAL,CAAczO,GAAd,CAAkBujB,IAAlB,GACA,GAAItZ,UAAUiS,YAAV,EAAJ,CAA8B,CAC1B,KAAKzN,QAAL,CAAc+U,YAAd,CAA2BvZ,UAAUgS,cAAV,EAA3B,EACH,CACJ,CAED,GAAIhS,UAAUhB,IAAV,CAAeO,QAAf,GAA4B,OAA5B,EAAuCS,UAAUhB,IAAV,CAAepE,IAAf,GAAwB,UAAnE,CAA+E,CAC3E,KAAK4e,aAAL,CAAmBxZ,SAAnB,EACH,CAFD,IAEO,IAAIA,UAAUhB,IAAV,CAAeO,QAAf,GAA4B,OAA5B,EAAuCS,UAAUhB,IAAV,CAAepE,IAAf,GAAwB,OAAnE,CAA4E,CAC/E,KAAK6e,UAAL,CAAgBzZ,SAAhB,EACH,CAFM,IAEA,CACH,KAAK0Z,YAAL,CAAkB1Z,SAAlB,EACH,CACJ,CAhBD,CAkBAuD,WAAWxB,SAAX,CAAqB2X,YAArB,CAAoC,SAAS1Z,SAAT,CAAoB,CACpD,GAAIkG,QAASlG,UAAUmS,WAAV,EAAb,CACA,KAAK3N,QAAL,CAAciK,IAAd,CAAmBzO,UAAU0O,cAA7B,CAA6C,UAAW,CACpD,KAAKlK,QAAL,CAAcmV,gBAAd,CAA+B3Z,SAA/B,CAA0CkG,MAA1C,CAAkDlG,UAAUwO,OAAV,CAAkBA,OAAlB,CAA0B1T,GAA1B,CAA8B8e,QAA9B,CAAlD,EACH,CAFD,CAEG,IAFH,EAIA,KAAKpV,QAAL,CAAciK,IAAd,CAAmBzO,UAAUyO,IAA7B,CAAmC,UAAW,CAC1C,KAAKjK,QAAL,CAAcqV,aAAd,CAA4B7Z,UAAUwO,OAAV,CAAkBA,OAA9C,EACH,CAFD,CAEG,IAFH,EAIA,KAAKhK,QAAL,CAAciK,IAAd,CAAmBzO,UAAU0O,cAA7B,CAA6C,UAAW,CACpD,OAAQ1O,UAAUhB,IAAV,CAAeO,QAAvB,EACA,IAAK,KAAL,CACA,IAAK,QAAL,CACI,GAAIua,cAAe,KAAKhP,MAAL,CAAY4B,GAAZ,CAAgB1M,UAAUhB,IAA1B,CAAnB,CACA,GAAI8a,YAAJ,CAAkB,CACd,KAAKtV,QAAL,CAAcuV,WAAd,CAA0B/Z,SAA1B,CAAqCkG,MAArC,CAA6ClG,UAAUwO,OAAvD,CAAgEsL,YAAhE,EACH,CAFD,IAEO,CACHtmB,IAAI,kBAAoBwM,UAAUhB,IAAV,CAAeO,QAAnC,CAA8C,GAAlD,CAAuDS,UAAUhB,IAAjE,EACH,CACD,MACJ,IAAK,KAAL,CACI,GAAIgb,gBAAiB,KAAKlP,MAAL,CAAY4B,GAAZ,CAAgB1M,UAAUhB,IAAV,CAAe2I,GAA/B,CAArB,CACA,GAAIqS,cAAJ,CAAoB,CAChB,KAAKxV,QAAL,CAAcuV,WAAd,CAA0B/Z,SAA1B,CAAqCkG,MAArC,CAA6ClG,UAAUwO,OAAvD,CAAgEwL,cAAhE,EACH,CAFD,IAEO,CACHxmB,IAAI,qBAAJ,CAA2BwM,UAAUhB,IAAV,CAAe2I,GAA1C,EACH,CACD,MACJ,IAAK,QAAL,CACI,KAAKnD,QAAL,CAAcuV,WAAd,CAA0B/Z,SAA1B,CAAqCkG,MAArC,CAA6ClG,UAAUwO,OAAvD,CAAgE,CAAC3G,MAAO7H,UAAUhB,IAAlB,CAAhE,EACA,MACJ,IAAK,QAAL,CACA,IAAK,OAAL,CACA,IAAK,UAAL,CACI,KAAKib,cAAL,CAAoBja,SAApB,EACA,MAzBJ,CA2BH,CA5BD,CA4BG,IA5BH,EA6BH,CAvCD,CAyCAuD,WAAWxB,SAAX,CAAqByX,aAArB,CAAqC,SAASxZ,SAAT,CAAoB,CACrD,GAAIwB,GAAIxB,UAAUmS,WAAV,EAAR,CAEA,GAAIhK,MAAO5N,KAAKgI,GAAL,CAASf,EAAElN,KAAX,CAAkBkN,EAAEjN,MAApB,CAAX,CACA,GAAI2R,QAAS,CAAC5R,MAAO6T,KAAO,CAAf,CAAkB5T,OAAQ4T,KAAO,CAAjC,CAAoCxT,IAAK6M,EAAE7M,GAA3C,CAAgDD,KAAM8M,EAAE9M,IAAxD,CAAb,CACA,GAAI2D,GAAI,CAAC,CAAD,CAAI,CAAJ,CAAR,CACA,GAAI6hB,QAAS,CAAC7hB,CAAD,CAAIA,CAAJ,CAAOA,CAAP,CAAUA,CAAV,CAAb,CACA,GAAImW,SAAU,CAAC,CAAD,CAAG,CAAH,CAAK,CAAL,CAAO,CAAP,EAAU1T,GAAV,CAAc,SAASvE,CAAT,CAAY,CACpC,MAAO,CAAC0M,MAAO,GAAI1B,MAAJ,CAAU,SAAV,CAAR,CAA8BjN,MAAOiC,CAArC,CAAP,CACH,CAFa,CAAd,CAIA,GAAI4jB,cAAeC,qBAAqBlU,MAArB,CAA6BgU,MAA7B,CAAqC1L,OAArC,CAAnB,CAEA,KAAKhK,QAAL,CAAciK,IAAd,CAAmBzO,UAAU0O,cAA7B,CAA6C,UAAW,CACpD,KAAKlK,QAAL,CAAcmP,SAAd,CAAwBzN,OAAOxR,IAAP,CAAc,CAAtC,CAAyCwR,OAAOvR,GAAP,CAAa,CAAtD,CAAyDuR,OAAO5R,KAAP,CAAe,CAAxE,CAA2E4R,OAAO3R,MAAP,CAAgB,CAA3F,CAA8F,GAAIgN,MAAJ,CAAU,SAAV,CAA9F,EACA,KAAKiD,QAAL,CAAcqV,aAAd,CAA4BQ,iBAAiB7L,OAAjB,CAA0BtI,MAA1B,CAAkCiU,YAAlC,CAAgDD,MAAhD,CAA5B,EACA,GAAIla,UAAUhB,IAAV,CAAesb,OAAnB,CAA4B,CACxB,KAAK9V,QAAL,CAAc+V,IAAd,CAAmB,GAAIhZ,MAAJ,CAAU,SAAV,CAAnB,CAAyC,QAAzC,CAAmD,QAAnD,CAA6D,MAA7D,CAAsE4G,KAAO,CAAR,CAAa,IAAlF,CAAwF,OAAxF,EACA,KAAK3D,QAAL,CAAcyO,IAAd,CAAmB,GAAnB,CAA6B/M,OAAOxR,IAAP,CAAcyT,KAAO,CAAlD,CAAqDjC,OAAOvR,GAAP,CAAawT,IAAb,CAAoB,CAAzE,EACH,CACJ,CAPD,CAOG,IAPH,EAQH,CArBD,CAuBA5E,WAAWxB,SAAX,CAAqB0X,UAArB,CAAkC,SAASzZ,SAAT,CAAoB,CAClD,GAAIkG,QAASlG,UAAUmS,WAAV,EAAb,CAEA,GAAIhK,MAAO5N,KAAKgI,GAAL,CAAS2D,OAAO5R,KAAhB,CAAuB4R,OAAO3R,MAA9B,EAAwC,CAAnD,CAEA,KAAKiQ,QAAL,CAAciK,IAAd,CAAmBzO,UAAU0O,cAA7B,CAA6C,UAAW,CACpD,KAAKlK,QAAL,CAAcgW,YAAd,CAA2BtU,OAAOxR,IAAP,CAAc,CAAzC,CAA4CwR,OAAOvR,GAAP,CAAa,CAAzD,CAA4DwT,IAA5D,CAAkE,GAAI5G,MAAJ,CAAU,SAAV,CAAlE,CAAwF,CAAxF,CAA2F,GAAIA,MAAJ,CAAU,SAAV,CAA3F,EACA,GAAIvB,UAAUhB,IAAV,CAAesb,OAAnB,CAA4B,CACxB,KAAK9V,QAAL,CAAciW,MAAd,CAAqBlgB,KAAKmgB,IAAL,CAAUxU,OAAOxR,IAAP,CAAcyT,KAAO,CAA/B,EAAoC,CAAzD,CAA4D5N,KAAKmgB,IAAL,CAAUxU,OAAOvR,GAAP,CAAawT,KAAO,CAA9B,EAAmC,CAA/F,CAAkG5N,KAAKD,KAAL,CAAW6N,KAAO,CAAlB,CAAlG,CAAwH,GAAI5G,MAAJ,CAAU,SAAV,CAAxH,EACH,CACJ,CALD,CAKG,IALH,EAMH,CAXD,CAaAgC,WAAWxB,SAAX,CAAqBkY,cAArB,CAAsC,SAASja,SAAT,CAAoB,CACtD,GAAInE,OAAQmE,UAAU2S,QAAV,EAAZ,CACA,GAAI9W,MAAM7C,MAAN,CAAe,CAAnB,CAAsB,CAClB,GAAImG,UAAWa,UAAUhB,IAAV,CAAeR,aAA9B,CACA,GAAIqZ,SAAU1Y,SAAS/K,aAAT,CAAuB,oBAAvB,CAAd,CACA,GAAIumB,YAAa,CAAC,YAAD,CAAe,WAAf,CAA4B,YAA5B,CAA0C,YAA1C,CAAwD,UAAxD,CAAoE,OAApE,CACb,aADa,CACE,YADF,CACgB,cADhB,CACgC,eADhC,CAEb,OAFa,CAEJ,QAFI,CAEM,iBAFN,CAEyB,gBAFzB,CAE2C,iBAF3C,CAE8D,gBAF9D,CAGb,WAHa,CAGA,YAHA,CAGc,UAHd,CAAjB,CAKAA,WAAWvP,OAAX,CAAmB,SAAS0F,QAAT,CAAmB,CAClC,GAAI,CACA+G,QAAQrjB,KAAR,CAAcsc,QAAd,EAA0B9Q,UAAU2P,GAAV,CAAcmB,QAAd,CAA1B,CACH,CAAC,MAAM3Z,CAAN,CAAS,CACP;AACA3D,KAAI,4DAA8D2D,EAAEyjB,OAApE,EACH,CACJ,CAPD,EAQA,GAAI1U,QAASlG,UAAUmS,WAAV,EAAb,CACA0F,QAAQrjB,KAAR,CAAcC,QAAd,CAAyB,OAAzB,CACAojB,QAAQrjB,KAAR,CAAcE,IAAd,CAAqBwR,OAAOxR,IAAP,CAAc,IAAnC,CACAmjB,QAAQrjB,KAAR,CAAcG,GAAd,CAAoBuR,OAAOvR,GAAP,CAAa,IAAjC,CACAkjB,QAAQgD,WAAR,CAAsBhf,KAAtB,CACAsD,SAASvK,IAAT,CAAcC,WAAd,CAA0BgjB,OAA1B,EACA,KAAKsB,SAAL,CAAe,GAAI/F,cAAJ,CAAkByE,QAAQvY,UAA1B,CAAsCU,SAAtC,CAAf,EACAb,SAASvK,IAAT,CAAcI,WAAd,CAA0B6iB,OAA1B,EACH,CACJ,CA3BD,CA6BAtU,WAAWxB,SAAX,CAAqBoX,SAArB,CAAiC,SAASnZ,SAAT,CAAoB,CACjDA,UAAU8a,kBAAV,GACA,GAAIC,YAAaxhB,SAASyhB,IAAT,CAAcpe,MAAd,CAAqBoD,UAAUhB,IAAV,CAAekK,IAApC,CAAjB,CACA,GAAIqO,UAAW,CAAC,CAAC,KAAKpkB,OAAL,CAAa8nB,eAAd,EAAiCC,gBAAgBlb,SAAhB,CAAlC,GAAiE,CAACmb,WAAWnb,UAAUhB,IAAV,CAAekK,IAA1B,CAAlE,CAAoGkS,SAASL,UAAT,CAApG,CAA2HA,WAAWjgB,GAAX,CAAe,SAASugB,SAAT,CAAoB,CACzK,MAAO9hB,UAASyhB,IAAT,CAAcxd,MAAd,CAAqB,CAAC6d,SAAD,CAArB,CAAP,CACH,CAFyI,CAA1I,CAIA,GAAI5K,QAASzQ,UAAUsO,MAAV,CAAiBkC,UAAjB,EAAb,CACA,GAAIrI,MAAOnI,UAAUsO,MAAV,CAAiBqB,GAAjB,CAAqB,UAArB,CAAX,CACA,GAAIzH,QAASlI,UAAUsO,MAAV,CAAiBqB,GAAjB,CAAqB,YAArB,CAAb,CACA,GAAI+B,SAAU1R,UAAUsO,MAAV,CAAiBiD,gBAAjB,EAAd,CAEA,KAAK/M,QAAL,CAAc+V,IAAd,CAAmBva,UAAUsO,MAAV,CAAiBrL,KAAjB,CAAuB,OAAvB,CAAnB,CAAoDjD,UAAUsO,MAAV,CAAiBqB,GAAjB,CAAqB,WAArB,CAApD,CAAuF3P,UAAUsO,MAAV,CAAiBqB,GAAjB,CAAqB,aAArB,CAAvF,CAA4Hc,MAA5H,CAAoItI,IAApI,CAA0ID,MAA1I,EACA,GAAIwJ,QAAQ1Y,MAAZ,CAAoB,CAChB;AACA,MAAKwL,QAAL,CAAc8W,UAAd,CAAyB5J,QAAQ,CAAR,EAAWzO,KAApC,CAA2CyO,QAAQ,CAAR,EAAWG,OAAtD,CAA+DH,QAAQ,CAAR,EAAWI,OAA1E,CAAmFJ,QAAQ,CAAR,EAAWK,IAA9F,EACH,CAHD,IAGO,CACH,KAAKvN,QAAL,CAAc+W,WAAd,GACH,CAED,KAAK/W,QAAL,CAAciK,IAAd,CAAmBzO,UAAUsO,MAAV,CAAiBG,IAApC,CAA0C,UAAW,CACjD8I,SAASzc,GAAT,CAAa,KAAKwc,eAAL,CAAqBtX,SAArB,CAAb,CAA8C,IAA9C,EAAoDoL,OAApD,CAA4D,SAASlF,MAAT,CAAiB/I,KAAjB,CAAwB,CAChF,GAAI+I,MAAJ,CAAY,CACR,KAAK1B,QAAL,CAAcyO,IAAd,CAAmBsE,SAASpa,KAAT,CAAnB,CAAoC+I,OAAOxR,IAA3C,CAAiDwR,OAAO1Q,MAAxD,EACA,KAAKgmB,oBAAL,CAA0Bxb,UAAUsO,MAApC,CAA4CpI,MAA5C,CAAoD,KAAKiO,WAAL,CAAiBhL,UAAjB,CAA4BjB,MAA5B,CAAoCC,IAApC,CAApD,EACH,CACJ,CALD,CAKG,IALH,EAMH,CAPD,CAOG,IAPH,EAQH,CA5BD,CA8BA5E,WAAWxB,SAAX,CAAqByZ,oBAArB,CAA4C,SAASxb,SAAT,CAAoBkG,MAApB,CAA4BuV,OAA5B,CAAqC,CAC7E,OAAOzb,UAAU2P,GAAV,CAAc,gBAAd,EAAgCtU,KAAhC,CAAsC,GAAtC,EAA2C,CAA3C,CAAP,EACA,IAAK,WAAL,CACI;AACA;AACA,MAAKmJ,QAAL,CAAcmP,SAAd,CAAwBzN,OAAOxR,IAA/B,CAAqC6F,KAAK2H,KAAL,CAAWgE,OAAOvR,GAAP,CAAa8mB,QAAQlT,QAArB,CAAgCkT,QAAQzS,SAAnD,CAArC,CAAoG9C,OAAO5R,KAA3G,CAAkH,CAAlH,CAAqH0L,UAAUiD,KAAV,CAAgB,OAAhB,CAArH,EACA,MACJ,IAAK,UAAL,CACI,KAAKuB,QAAL,CAAcmP,SAAd,CAAwBzN,OAAOxR,IAA/B,CAAqC6F,KAAK2H,KAAL,CAAWgE,OAAOvR,GAAlB,CAArC,CAA6DuR,OAAO5R,KAApE,CAA2E,CAA3E,CAA8E0L,UAAUiD,KAAV,CAAgB,OAAhB,CAA9E,EACA,MACJ,IAAK,cAAL,CACI;AACA,MAAKuB,QAAL,CAAcmP,SAAd,CAAwBzN,OAAOxR,IAA/B,CAAqC6F,KAAKmgB,IAAL,CAAUxU,OAAOvR,GAAP,CAAa8mB,QAAQjT,MAArB,CAA8BiT,QAAQzS,SAAhD,CAArC,CAAiG9C,OAAO5R,KAAxG,CAA+G,CAA/G,CAAkH0L,UAAUiD,KAAV,CAAgB,OAAhB,CAAlH,EACA,MAZJ,CAcH,CAfD,CAiBA,GAAIyY,uBAAwB,CACxBC,MAAO,CACH,CAAC,QAAD,CAAW,IAAX,CADG,CAEH,CAAC,QAAD,CAAW,IAAX,CAFG,CAGH,CAAC,QAAD,CAAW,IAAX,CAHG,CAIH,CAAC,QAAD,CAAW,IAAX,CAJG,CADiB,CAA5B,CASApY,WAAWxB,SAAX,CAAqB8S,YAArB,CAAoC,SAAS7U,SAAT,CAAoB,CACpD,GAAI4b,YAAa5b,UAAUmS,WAAV,EAAjB,CACA,GAAI+H,QAAS2B,oBAAoB7b,SAApB,CAAb,CACA,GAAIwO,SAAU,CAAC,KAAD,CAAQ,OAAR,CAAiB,QAAjB,CAA2B,MAA3B,EAAmC1T,GAAnC,CAAuC,SAASghB,IAAT,CAAe3e,KAAf,CAAsB,CACvE,GAAI3I,OAAQwL,UAAU2P,GAAV,CAAc,SAAWmM,IAAX,CAAkB,OAAhC,CAAZ,CACA,GAAI7Y,OAAQjD,UAAUiD,KAAV,CAAgB,SAAW6Y,IAAX,CAAkB,OAAlC,CAAZ,CACA,GAAItnB,QAAU,OAAV,EAAqByO,MAAMb,OAAN,EAAzB,CAA0C,CACtCa,MAAQ,GAAI1B,MAAJ,CAAU,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CAAgB0B,MAAMxK,CAAtB,CAAV,CAAR,CAA6C;AAChD,EACD,GAAIsjB,gBAAiBL,sBAAsBlnB,KAAtB,EAA+BknB,sBAAsBlnB,KAAtB,EAA6B2I,KAA7B,CAA/B,CAAqE,IAA1F,CACA,MAAO,CACH7I,MAAO0L,UAAUuQ,MAAV,CAAiB,SAAWuL,IAAX,CAAkB,OAAnC,CADJ,CAEH7Y,MAAO8Y,eAAiB9Y,MAAM8Y,eAAe,CAAf,CAAN,EAAyBA,eAAe,CAAf,CAAzB,CAAjB,CAA+D9Y,KAFnE,CAGHiI,KAAM,IAHH,CAAP,CAKH,CAZa,CAAd,CAaA,GAAIiP,cAAeC,qBAAqBwB,UAArB,CAAiC1B,MAAjC,CAAyC1L,OAAzC,CAAnB,CAEA,MAAO,CACHC,KAAM,KAAKuN,mBAAL,CAAyBhc,SAAzB,CAAoCma,YAApC,CAAkD3L,OAAlD,CAA2D0L,MAA3D,CAAmE0B,UAAnE,CADH,CAEHpN,QAAS6L,iBAAiB7L,OAAjB,CAA0BoN,UAA1B,CAAsCzB,YAAtC,CAAoDD,MAApD,CAFN,CAAP,CAIH,CAtBD,CAwBA,QAASG,iBAAT,CAA0B7L,OAA1B,CAAmCoN,UAAnC,CAA+CzB,YAA/C,CAA6DD,MAA7D,CAAqE,CACjE,MAAO1L,SAAQ1T,GAAR,CAAY,SAASqF,MAAT,CAAiB8b,UAAjB,CAA6B,CAC5C,GAAI9b,OAAO7L,KAAP,CAAe,CAAnB,CAAsB,CAClB,GAAI4nB,IAAKN,WAAWlnB,IAApB,CACA,GAAIynB,IAAKP,WAAWjnB,GAApB,CACA,GAAIynB,IAAKR,WAAWtnB,KAApB,CACA,GAAI+nB,IAAKT,WAAWrnB,MAAX,CAAqBia,QAAQ,CAAR,EAAWla,KAAzC,CAEA,OAAO2nB,UAAP,EACA,IAAK,EAAL,CACI;AACAI,IAAK7N,QAAQ,CAAR,EAAWla,KAAhB,CACA6L,OAAO+K,IAAP,CAAcoR,SAAS,CACfC,GAAI,CAACL,EAAD,CAAKC,EAAL,CADW,CAEfK,GAAI,CAACN,GAAKE,EAAN,CAAUD,EAAV,CAFW,CAGfM,GAAI,CAACP,GAAKE,EAAL,CAAU5N,QAAQ,CAAR,EAAWla,KAAtB,CAA6B6nB,GAAKE,EAAlC,CAHW,CAIfK,GAAI,CAACR,GAAK1N,QAAQ,CAAR,EAAWla,KAAjB,CAAwB6nB,GAAKE,EAA7B,CAJW,CAAT,CAKPnC,OAAO,CAAP,CALO,CAKIA,OAAO,CAAP,CALJ,CAMVC,aAAawC,YANH,CAMiBxC,aAAayC,YAN9B,CAM4CzC,aAAa0C,aANzD,CAMwE1C,aAAa2C,aANrF,CAAd,CAOA,MACJ,IAAK,EAAL,CACI;AACAZ,IAAKN,WAAWlnB,IAAX,CAAkBknB,WAAWtnB,KAA7B,CAAsCka,QAAQ,CAAR,EAAWla,KAAtD,CACA8nB,GAAK5N,QAAQ,CAAR,EAAWla,KAAhB,CAEA6L,OAAO+K,IAAP,CAAcoR,SAAS,CACfC,GAAI,CAACL,GAAKE,EAAN,CAAUD,EAAV,CADW,CAEfK,GAAI,CAACN,GAAKE,EAAN,CAAUD,GAAKE,EAAL,CAAU7N,QAAQ,CAAR,EAAWla,KAA/B,CAFW,CAGfmoB,GAAI,CAACP,EAAD,CAAKC,GAAKE,EAAV,CAHW,CAIfK,GAAI,CAACR,EAAD,CAAKC,GAAK3N,QAAQ,CAAR,EAAWla,KAArB,CAJW,CAAT,CAKP4lB,OAAO,CAAP,CALO,CAKIA,OAAO,CAAP,CALJ,CAMVC,aAAa0C,aANH,CAMkB1C,aAAa2C,aAN/B,CAM8C3C,aAAa4C,gBAN3D,CAM6E5C,aAAa6C,gBAN1F,CAAd,CAOA,MACJ,IAAK,EAAL,CACI;AACAb,IAAMA,GAAKP,WAAWrnB,MAAjB,CAA4Bia,QAAQ,CAAR,EAAWla,KAA5C,CACA+nB,GAAK7N,QAAQ,CAAR,EAAWla,KAAhB,CACA6L,OAAO+K,IAAP,CAAcoR,SAAS,CACfC,GAAI,CAACL,GAAKE,EAAN,CAAUD,GAAKE,EAAf,CADW,CAEfG,GAAI,CAACN,EAAD,CAAKC,GAAKE,EAAV,CAFW,CAGfI,GAAI,CAACP,GAAK1N,QAAQ,CAAR,EAAWla,KAAjB,CAAwB6nB,EAAxB,CAHW,CAIfO,GAAI,CAACR,GAAKE,EAAL,CAAU5N,QAAQ,CAAR,EAAWla,KAAtB,CAA6B6nB,EAA7B,CAJW,CAAT,CAKPjC,OAAO,CAAP,CALO,CAKIA,OAAO,CAAP,CALJ,CAMVC,aAAa4C,gBANH,CAMqB5C,aAAa6C,gBANlC,CAMoD7C,aAAa8C,eANjE,CAMkF9C,aAAa+C,eAN/F,CAAd,CAOA,MACJ,IAAK,EAAL,CACI;AACAd,IAAK5N,QAAQ,CAAR,EAAWla,KAAhB,CACA6L,OAAO+K,IAAP,CAAcoR,SAAS,CACfC,GAAI,CAACL,EAAD,CAAKC,GAAKE,EAAL,CAAU7N,QAAQ,CAAR,EAAWla,KAA1B,CADW,CAEfkoB,GAAI,CAACN,EAAD,CAAKC,EAAL,CAFW,CAGfM,GAAI,CAACP,GAAKE,EAAN,CAAUD,GAAK3N,QAAQ,CAAR,EAAWla,KAA1B,CAHW,CAIfooB,GAAI,CAACR,GAAKE,EAAN,CAAUD,GAAKE,EAAf,CAJW,CAAT,CAKPnC,OAAO,CAAP,CALO,CAKIA,OAAO,CAAP,CALJ,CAMVC,aAAa8C,eANH,CAMoB9C,aAAa+C,eANjC,CAMkD/C,aAAawC,YAN/D,CAM6ExC,aAAayC,YAN1F,CAAd,CAOA,MA/CJ,CAiDH,CACD,MAAOzc,OAAP,CACH,CA1DM,CAAP,CA2DH,CAEDoD,WAAWxB,SAAX,CAAqBia,mBAArB,CAA2C,SAAShc,SAAT,CAAoBma,YAApB,CAAkC3L,OAAlC,CAA2C0L,MAA3C,CAAmDhU,MAAnD,CAA2D,CAClG,GAAIwI,gBAAiB1O,UAAU2P,GAAV,CAAc,gBAAd,CAArB,CACIwN,WAAa,EADjB,CAGA,OAAOzO,cAAP,EACA,IAAK,aAAL,CACA,IAAK,aAAL,CACI0O,YAAYD,UAAZ,CAAwBjD,OAAO,CAAP,CAAxB,CAAmCA,OAAO,CAAP,CAAnC,CAA8CC,aAAayC,YAA3D,CAAyEzC,aAAa2C,aAAtF,CAAqG5W,OAAOxR,IAAP,CAAc8Z,QAAQ,CAAR,EAAWla,KAA9H,CAAqI4R,OAAOvR,GAAP,CAAa6Z,QAAQ,CAAR,EAAWla,KAA7J,EACA8oB,YAAYD,UAAZ,CAAwBjD,OAAO,CAAP,CAAxB,CAAmCA,OAAO,CAAP,CAAnC,CAA8CC,aAAa2C,aAA3D,CAA0E3C,aAAa6C,gBAAvF,CAAyG9W,OAAOxR,IAAP,CAAcwR,OAAO5R,KAArB,CAA6Bka,QAAQ,CAAR,EAAWla,KAAjJ,CAAwJ4R,OAAOvR,GAAP,CAAa6Z,QAAQ,CAAR,EAAWla,KAAhL,EACA8oB,YAAYD,UAAZ,CAAwBjD,OAAO,CAAP,CAAxB,CAAmCA,OAAO,CAAP,CAAnC,CAA8CC,aAAa6C,gBAA3D,CAA6E7C,aAAa+C,eAA1F,CAA2GhX,OAAOxR,IAAP,CAAcwR,OAAO5R,KAArB,CAA6Bka,QAAQ,CAAR,EAAWla,KAAnJ,CAA0J4R,OAAOvR,GAAP,CAAauR,OAAO3R,MAApB,CAA6Bia,QAAQ,CAAR,EAAWla,KAAlM,EACA8oB,YAAYD,UAAZ,CAAwBjD,OAAO,CAAP,CAAxB,CAAmCA,OAAO,CAAP,CAAnC,CAA8CC,aAAa+C,eAA3D,CAA4E/C,aAAayC,YAAzF,CAAuG1W,OAAOxR,IAAP,CAAc8Z,QAAQ,CAAR,EAAWla,KAAhI,CAAuI4R,OAAOvR,GAAP,CAAauR,OAAO3R,MAApB,CAA6Bia,QAAQ,CAAR,EAAWla,KAA/K,EACA,MAEJ,QACI8oB,YAAYD,UAAZ,CAAwBjD,OAAO,CAAP,CAAxB,CAAmCA,OAAO,CAAP,CAAnC,CAA8CC,aAAawC,YAA3D,CAAyExC,aAAa0C,aAAtF,CAAqG3W,OAAOxR,IAA5G,CAAkHwR,OAAOvR,GAAzH,EACAyoB,YAAYD,UAAZ,CAAwBjD,OAAO,CAAP,CAAxB,CAAmCA,OAAO,CAAP,CAAnC,CAA8CC,aAAa0C,aAA3D,CAA0E1C,aAAa4C,gBAAvF,CAAyG7W,OAAOxR,IAAP,CAAcwR,OAAO5R,KAA9H,CAAqI4R,OAAOvR,GAA5I,EACAyoB,YAAYD,UAAZ,CAAwBjD,OAAO,CAAP,CAAxB,CAAmCA,OAAO,CAAP,CAAnC,CAA8CC,aAAa4C,gBAA3D,CAA6E5C,aAAa8C,eAA1F,CAA2G/W,OAAOxR,IAAP,CAAcwR,OAAO5R,KAAhI,CAAuI4R,OAAOvR,GAAP,CAAauR,OAAO3R,MAA3J,EACA6oB,YAAYD,UAAZ,CAAwBjD,OAAO,CAAP,CAAxB,CAAmCA,OAAO,CAAP,CAAnC,CAA8CC,aAAa8C,eAA3D,CAA4E9C,aAAawC,YAAzF,CAAuGzW,OAAOxR,IAA9G,CAAoHwR,OAAOvR,GAAP,CAAauR,OAAO3R,MAAxI,EACA,MAdJ,CAiBA,MAAO4oB,WAAP,CACH,CAtBD,CAwBA,QAASE,eAAT,CAAwBhnB,CAAxB,CAA2BC,CAA3B,CAA8BgnB,EAA9B,CAAkCC,EAAlC,CAAsC,CAClC,GAAIC,OAAQ,GAAK,CAACjjB,KAAKkjB,IAAL,CAAU,CAAV,EAAe,CAAhB,EAAqB,CAA1B,CAAZ,CACA,GAAIC,IAAMJ,EAAD,CAAOE,KAAhB,CAAuB;AACnBG,IAAMJ,EAAD,CAAOC,KADhB,CACuB;AACnBI,IAAKvnB,EAAIinB,EAFb,CAEiB;AACbO,IAAKvnB,EAAIinB,EAHb,CAGiB;AACjB,OAAO,CACHO,QAASC,YAAY,CAAC1nB,EAAGA,CAAJ,CAAOC,EAAGunB,EAAV,CAAZ,CAA2B,CAACxnB,EAAGA,CAAJ,CAAOC,EAAGunB,GAAKF,EAAf,CAA3B,CAA+C,CAACtnB,EAAGunB,GAAKF,EAAT,CAAapnB,EAAGA,CAAhB,CAA/C,CAAmE,CAACD,EAAGunB,EAAJ,CAAQtnB,EAAGA,CAAX,CAAnE,CADN,CAEH0nB,SAAUD,YAAY,CAAC1nB,EAAGA,CAAJ,CAAOC,EAAGA,CAAV,CAAZ,CAA0B,CAACD,EAAGA,EAAIqnB,EAAR,CAAWpnB,EAAGA,CAAd,CAA1B,CAA4C,CAACD,EAAGunB,EAAJ,CAAQtnB,EAAGunB,GAAKF,EAAhB,CAA5C,CAAiE,CAACtnB,EAAGunB,EAAJ,CAAQtnB,EAAGunB,EAAX,CAAjE,CAFP,CAGHI,YAAaF,YAAY,CAAC1nB,EAAGunB,EAAJ,CAAQtnB,EAAGA,CAAX,CAAZ,CAA2B,CAACD,EAAGunB,EAAJ,CAAQtnB,EAAGA,EAAIqnB,EAAf,CAA3B,CAA+C,CAACtnB,EAAGA,EAAIqnB,EAAR,CAAYpnB,EAAGunB,EAAf,CAA/C,CAAmE,CAACxnB,EAAGA,CAAJ,CAAOC,EAAGunB,EAAV,CAAnE,CAHV,CAIHK,WAAYH,YAAY,CAAC1nB,EAAGunB,EAAJ,CAAQtnB,EAAGunB,EAAX,CAAZ,CAA4B,CAACxnB,EAAGunB,GAAKF,EAAT,CAAapnB,EAAGunB,EAAhB,CAA5B,CAAiD,CAACxnB,EAAGA,CAAJ,CAAOC,EAAGA,EAAIqnB,EAAd,CAAjD,CAAoE,CAACtnB,EAAGA,CAAJ,CAAOC,EAAEA,CAAT,CAApE,CAJT,CAAP,CAMH,CAED,QAAS8jB,qBAAT,CAA8BlU,MAA9B,CAAsCiY,YAAtC,CAAoD3P,OAApD,CAA6D,CACzD,GAAInY,GAAI6P,OAAOxR,IAAf,CACI4B,EAAI4P,OAAOvR,GADf,CAEIL,MAAQ4R,OAAO5R,KAFnB,CAGIC,OAAS2R,OAAO3R,MAHpB,CAKI6pB,IAAMD,aAAa,CAAb,EAAgB,CAAhB,EAAqB7pB,MAAQ,CAA7B,CAAiC6pB,aAAa,CAAb,EAAgB,CAAhB,CAAjC,CAAsD7pB,MAAQ,CALxE,CAMI+pB,IAAMF,aAAa,CAAb,EAAgB,CAAhB,EAAqB5pB,OAAS,CAA9B,CAAkC4pB,aAAa,CAAb,EAAgB,CAAhB,CAAlC,CAAuD5pB,OAAS,CAN1E,CAOI+pB,IAAMH,aAAa,CAAb,EAAgB,CAAhB,EAAqB7pB,MAAQ,CAA7B,CAAiC6pB,aAAa,CAAb,EAAgB,CAAhB,CAAjC,CAAsD7pB,MAAQ,CAPxE,CAQIiqB,IAAMJ,aAAa,CAAb,EAAgB,CAAhB,EAAqB5pB,OAAS,CAA9B,CAAkC4pB,aAAa,CAAb,EAAgB,CAAhB,CAAlC,CAAuD5pB,OAAS,CAR1E,CASIiqB,IAAML,aAAa,CAAb,EAAgB,CAAhB,EAAqB7pB,MAAQ,CAA7B,CAAiC6pB,aAAa,CAAb,EAAgB,CAAhB,CAAjC,CAAsD7pB,MAAQ,CATxE,CAUImqB,IAAMN,aAAa,CAAb,EAAgB,CAAhB,EAAqB5pB,OAAS,CAA9B,CAAkC4pB,aAAa,CAAb,EAAgB,CAAhB,CAAlC,CAAuD5pB,OAAS,CAV1E,CAWImqB,IAAMP,aAAa,CAAb,EAAgB,CAAhB,EAAqB7pB,MAAQ,CAA7B,CAAiC6pB,aAAa,CAAb,EAAgB,CAAhB,CAAjC,CAAsD7pB,MAAQ,CAXxE,CAYIqqB,IAAMR,aAAa,CAAb,EAAgB,CAAhB,EAAqB5pB,OAAS,CAA9B,CAAkC4pB,aAAa,CAAb,EAAgB,CAAhB,CAAlC,CAAuD5pB,OAAS,CAZ1E,CAcA,GAAIqqB,UAAWtqB,MAAQgqB,GAAvB,CACIO,YAActqB,OAASkqB,GAD3B,CAEIK,YAAcxqB,MAAQkqB,GAF1B,CAGIO,WAAaxqB,OAASoqB,GAH1B,CAKA,MAAO,CACHhC,aAAcU,eAAehnB,CAAf,CAAkBC,CAAlB,CAAqB8nB,GAArB,CAA0BC,GAA1B,EAA+BP,OAA/B,CAAuCkB,SAAvC,CAAiD,GAAjD,CADX,CAEHpC,aAAcS,eAAehnB,EAAImY,QAAQ,CAAR,EAAWla,KAA9B,CAAqCgC,EAAIkY,QAAQ,CAAR,EAAWla,KAApD,CAA2DiG,KAAKqM,GAAL,CAAS,CAAT,CAAYwX,IAAM5P,QAAQ,CAAR,EAAWla,KAA7B,CAA3D,CAAgGiG,KAAKqM,GAAL,CAAS,CAAT,CAAYyX,IAAM7P,QAAQ,CAAR,EAAWla,KAA7B,CAAhG,EAAqIwpB,OAArI,CAA6IkB,SAA7I,CAAuJ,GAAvJ,CAFX,CAGHnC,cAAeQ,eAAehnB,EAAIuoB,QAAnB,CAA6BtoB,CAA7B,CAAgCgoB,GAAhC,CAAqCC,GAArC,EAA0CP,QAA1C,CAAmDgB,SAAnD,CAA6D,GAA7D,CAHZ,CAIHlC,cAAeO,eAAehnB,EAAIkE,KAAKgI,GAAL,CAASqc,QAAT,CAAmBtqB,MAAQka,QAAQ,CAAR,EAAWla,KAAtC,CAAnB,CAAiEgC,EAAIkY,QAAQ,CAAR,EAAWla,KAAhF,CAAwFsqB,SAAWtqB,MAAQka,QAAQ,CAAR,EAAWla,KAA/B,CAAwC,CAAxC,CAA2CgqB,IAAM9P,QAAQ,CAAR,EAAWla,KAAnJ,CAA0JiqB,IAAM/P,QAAQ,CAAR,EAAWla,KAA3K,EAAkL0pB,QAAlL,CAA2LgB,SAA3L,CAAqM,GAArM,CAJZ,CAKHjC,iBAAkBM,eAAehnB,EAAIyoB,WAAnB,CAAgCxoB,EAAIuoB,WAApC,CAAiDL,GAAjD,CAAsDC,GAAtD,EAA2DR,WAA3D,CAAuEe,SAAvE,CAAiF,GAAjF,CALf,CAMHhC,iBAAkBK,eAAehnB,EAAIkE,KAAKgI,GAAL,CAASuc,WAAT,CAAsBxqB,MAAQka,QAAQ,CAAR,EAAWla,KAAzC,CAAnB,CAAoEgC,EAAIiE,KAAKgI,GAAL,CAASsc,WAAT,CAAsBtqB,OAASia,QAAQ,CAAR,EAAWla,KAA1C,CAAxE,CAA0HiG,KAAKqM,GAAL,CAAS,CAAT,CAAY4X,IAAMhQ,QAAQ,CAAR,EAAWla,KAA7B,CAA1H,CAAgKmqB,IAAMjQ,QAAQ,CAAR,EAAWla,KAAjL,EAAwL2pB,WAAxL,CAAoMe,SAApM,CAA8M,GAA9M,CANf,CAOH/B,gBAAiBI,eAAehnB,CAAf,CAAkBC,EAAIyoB,UAAtB,CAAkCL,GAAlC,CAAuCC,GAAvC,EAA4CT,UAA5C,CAAuDc,SAAvD,CAAiE,GAAjE,CAPd,CAQH9B,gBAAiBG,eAAehnB,EAAImY,QAAQ,CAAR,EAAWla,KAA9B,CAAqCgC,EAAIyoB,UAAzC,CAAqDxkB,KAAKqM,GAAL,CAAS,CAAT,CAAY8X,IAAMlQ,QAAQ,CAAR,EAAWla,KAA7B,CAArD,CAA0FqqB,IAAMnQ,QAAQ,CAAR,EAAWla,KAA3G,EAAkH4pB,UAAlH,CAA6Hc,SAA7H,CAAuI,GAAvI,CARd,CAAP,CAUH,CAED,QAASjB,YAAT,CAAqB9Z,KAArB,CAA4Bgb,YAA5B,CAA0CC,UAA1C,CAAsDC,GAAtD,CAA2D,CACvD,GAAIC,MAAO,QAAPA,KAAO,CAAU3mB,CAAV,CAAa+I,CAAb,CAAgBrJ,CAAhB,CAAmB,CAC1B,MAAO,CACH9B,EAAGoC,EAAEpC,CAAF,CAAM,CAACmL,EAAEnL,CAAF,CAAMoC,EAAEpC,CAAT,EAAc8B,CADpB,CAEH7B,EAAGmC,EAAEnC,CAAF,CAAM,CAACkL,EAAElL,CAAF,CAAMmC,EAAEnC,CAAT,EAAc6B,CAFpB,CAAP,CAIH,CALD,CAOA,MAAO,CACH8L,MAAOA,KADJ,CAEHgb,aAAcA,YAFX,CAGHC,WAAYA,UAHT,CAIHC,IAAKA,GAJF,CAKHH,UAAW,mBAAS7mB,CAAT,CAAY,CACnB,GAAIknB,IAAKD,KAAKnb,KAAL,CAAYgb,YAAZ,CAA0B9mB,CAA1B,CAAT,CACImnB,GAAKF,KAAKH,YAAL,CAAmBC,UAAnB,CAA+B/mB,CAA/B,CADT,CAEIonB,GAAKH,KAAKF,UAAL,CAAiBC,GAAjB,CAAsBhnB,CAAtB,CAFT,CAGIqnB,KAAOJ,KAAKC,EAAL,CAASC,EAAT,CAAannB,CAAb,CAHX,CAIIsnB,KAAOL,KAAKE,EAAL,CAASC,EAAT,CAAapnB,CAAb,CAJX,CAKIunB,KAAON,KAAKI,IAAL,CAAWC,IAAX,CAAiBtnB,CAAjB,CALX,CAMA,MAAO,CAAC4lB,YAAY9Z,KAAZ,CAAmBob,EAAnB,CAAuBG,IAAvB,CAA6BE,IAA7B,CAAD,CAAqC3B,YAAY2B,IAAZ,CAAkBD,IAAlB,CAAwBF,EAAxB,CAA4BJ,GAA5B,CAArC,CAAP,CACH,CAbE,CAcHQ,QAAS,iBAASxC,UAAT,CAAqB,CAC1BA,WAAWnhB,IAAX,CAAgB,CAAC,aAAD,CAAgBijB,aAAa5oB,CAA7B,CAAgC4oB,aAAa3oB,CAA7C,CAAgD4oB,WAAW7oB,CAA3D,CAA8D6oB,WAAW5oB,CAAzE,CAA4E6oB,IAAI9oB,CAAhF,CAAmF8oB,IAAI7oB,CAAvF,CAAhB,EACH,CAhBE,CAiBHspB,gBAAiB,yBAASzC,UAAT,CAAqB,CAClCA,WAAWnhB,IAAX,CAAgB,CAAC,aAAD,CAAgBkjB,WAAW7oB,CAA3B,CAA8B6oB,WAAW5oB,CAAzC,CAA4C2oB,aAAa5oB,CAAzD,CAA4D4oB,aAAa3oB,CAAzE,CAA4E2N,MAAM5N,CAAlF,CAAqF4N,MAAM3N,CAA3F,CAAhB,EACH,CAnBE,CAAP,CAqBH,CAED,QAASgmB,SAAT,CAAkBuD,UAAlB,CAA8BC,OAA9B,CAAuCC,OAAvC,CAAgDC,MAAhD,CAAwDC,MAAxD,CAAgEC,MAAhE,CAAwEC,MAAxE,CAAgF,CAC5E,GAAIhD,YAAa,EAAjB,CAEA,GAAI2C,QAAQ,CAAR,EAAa,CAAb,EAAkBA,QAAQ,CAAR,EAAa,CAAnC,CAAsC,CAClC3C,WAAWnhB,IAAX,CAAgB,CAAC,MAAD,CAASgkB,OAAO,CAAP,EAAU/b,KAAV,CAAgB5N,CAAzB,CAA4B2pB,OAAO,CAAP,EAAU/b,KAAV,CAAgB3N,CAA5C,CAAhB,EACA0pB,OAAO,CAAP,EAAUL,OAAV,CAAkBxC,UAAlB,EACH,CAHD,IAGO,CACHA,WAAWnhB,IAAX,CAAgB,CAAE,MAAF,CAAU6jB,WAAWtD,EAAX,CAAc,CAAd,CAAV,CAA4BsD,WAAWtD,EAAX,CAAc,CAAd,CAA5B,CAAhB,EACH,CAED,GAAIwD,QAAQ,CAAR,EAAa,CAAb,EAAkBA,QAAQ,CAAR,EAAa,CAAnC,CAAsC,CAClC5C,WAAWnhB,IAAX,CAAgB,CAAC,MAAD,CAASkkB,OAAO,CAAP,EAAUjc,KAAV,CAAgB5N,CAAzB,CAA4B6pB,OAAO,CAAP,EAAUjc,KAAV,CAAgB3N,CAA5C,CAAhB,EACA4pB,OAAO,CAAP,EAAUP,OAAV,CAAkBxC,UAAlB,EACAA,WAAWnhB,IAAX,CAAgB,CAAC,MAAD,CAASmkB,OAAO,CAAP,EAAUhB,GAAV,CAAc9oB,CAAvB,CAA0B8pB,OAAO,CAAP,EAAUhB,GAAV,CAAc7oB,CAAxC,CAAhB,EACA6pB,OAAO,CAAP,EAAUP,eAAV,CAA0BzC,UAA1B,EACH,CALD,IAKO,CACHA,WAAWnhB,IAAX,CAAgB,CAAC,MAAD,CAAS6jB,WAAWrD,EAAX,CAAc,CAAd,CAAT,CAA2BqD,WAAWrD,EAAX,CAAc,CAAd,CAA3B,CAAhB,EACAW,WAAWnhB,IAAX,CAAgB,CAAC,MAAD,CAAS6jB,WAAWpD,EAAX,CAAc,CAAd,CAAT,CAA2BoD,WAAWpD,EAAX,CAAc,CAAd,CAA3B,CAAhB,EACH,CAED,GAAIqD,QAAQ,CAAR,EAAa,CAAb,EAAkBA,QAAQ,CAAR,EAAa,CAAnC,CAAsC,CAClC3C,WAAWnhB,IAAX,CAAgB,CAAC,MAAD,CAASikB,OAAO,CAAP,EAAUd,GAAV,CAAc9oB,CAAvB,CAA0B4pB,OAAO,CAAP,EAAUd,GAAV,CAAc7oB,CAAxC,CAAhB,EACA2pB,OAAO,CAAP,EAAUL,eAAV,CAA0BzC,UAA1B,EACH,CAHD,IAGO,CACHA,WAAWnhB,IAAX,CAAgB,CAAC,MAAD,CAAS6jB,WAAWnD,EAAX,CAAc,CAAd,CAAT,CAA2BmD,WAAWnD,EAAX,CAAc,CAAd,CAA3B,CAAhB,EACH,CAED,MAAOS,WAAP,CACH,CAED,QAASC,YAAT,CAAqBD,UAArB,CAAiC2C,OAAjC,CAA0CC,OAA1C,CAAmDK,OAAnD,CAA4DC,OAA5D,CAAqEhqB,CAArE,CAAwEC,CAAxE,CAA2E,CACvE,GAAIwpB,QAAQ,CAAR,EAAa,CAAb,EAAkBA,QAAQ,CAAR,EAAa,CAAnC,CAAsC,CAClC3C,WAAWnhB,IAAX,CAAgB,CAAC,MAAD,CAASokB,QAAQ,CAAR,EAAWnc,KAAX,CAAiB5N,CAA1B,CAA6B+pB,QAAQ,CAAR,EAAWnc,KAAX,CAAiB3N,CAA9C,CAAhB,EACA8pB,QAAQ,CAAR,EAAWT,OAAX,CAAmBxC,UAAnB,EACAiD,QAAQ,CAAR,EAAWT,OAAX,CAAmBxC,UAAnB,EACH,CAJD,IAIO,CACHA,WAAWnhB,IAAX,CAAgB,CAAC,MAAD,CAAS3F,CAAT,CAAYC,CAAZ,CAAhB,EACH,CAED,GAAIypB,QAAQ,CAAR,EAAa,CAAb,EAAkBA,QAAQ,CAAR,EAAa,CAAnC,CAAsC,CAClC5C,WAAWnhB,IAAX,CAAgB,CAAC,MAAD,CAASqkB,QAAQ,CAAR,EAAWpc,KAAX,CAAiB5N,CAA1B,CAA6BgqB,QAAQ,CAAR,EAAWpc,KAAX,CAAiB3N,CAA9C,CAAhB,EACH,CACJ,CAED,QAAS+hB,eAAT,CAAwBrY,SAAxB,CAAmC,CAC/B,MAAOA,WAAUuQ,MAAV,CAAiB,QAAjB,EAA6B,CAApC,CACH,CAED,QAASyI,eAAT,CAAwBhZ,SAAxB,CAAmC,CAC/B,MAAOA,WAAUuQ,MAAV,CAAiB,QAAjB,EAA6B,CAApC,CACH,CAED,QAAS0G,QAAT,CAAiBjX,SAAjB,CAA4B,CACxB,MAAOA,WAAUuQ,MAAV,CAAiB,QAAjB,IAA+B,CAAtC,CACH,CAED,QAASmI,YAAT,CAAqB1Y,SAArB,CAAgC,CAC5B,MAAO,CAAC,QAAD,CAAW,cAAX,CAA2B,cAA3B,EAA2CzI,OAA3C,CAAmDyI,UAAU2P,GAAV,CAAc,SAAd,CAAnD,IAAiF,CAAC,CAAzF,CACH,CAED,QAASsJ,kBAAT,CAA2BjZ,SAA3B,CAAsC,CAClC,MAAQA,qBAAqBsT,gBAA7B,CACH,CAED,QAASwF,QAAT,CAAiB9Y,SAAjB,CAA4B,CACxB,MAAOA,WAAUhB,IAAV,CAAekK,IAAf,CAAoB6H,IAApB,GAA2B/X,MAA3B,CAAoC,CAA3C,CACH,CAED,QAASkiB,gBAAT,CAAyBlb,SAAzB,CAAoC,CAChC,MAAQ,uBAAsB/B,IAAtB,CAA2B+B,UAAUsO,MAAV,CAAiBqB,GAAjB,CAAqB,eAArB,CAA3B,CAAR,CACH,CAED,QAASkM,oBAAT,CAA6B7b,SAA7B,CAAwC,CACpC,MAAO,CAAC,SAAD,CAAY,UAAZ,CAAwB,aAAxB,CAAuC,YAAvC,EAAqDlF,GAArD,CAAyD,SAASghB,IAAT,CAAe,CAC3E,GAAIjgB,OAAQmE,UAAU2P,GAAV,CAAc,SAAWmM,IAAX,CAAkB,QAAhC,CAAZ,CACA,GAAIwE,KAAMzkB,MAAMR,KAAN,CAAY,GAAZ,CAAV,CACA,GAAIilB,IAAItnB,MAAJ,EAAc,CAAlB,CAAqB,CACjBsnB,IAAI,CAAJ,EAASA,IAAI,CAAJ,CAAT,CACH,CACD,MAAOA,KAAIxlB,GAAJ,CAAQylB,KAAR,CAAP,CACH,CAPM,CAAP,CAQH,CAED,QAASlK,eAAT,CAAwBrX,IAAxB,CAA8B,CAC1B,MAAQA,MAAK5F,QAAL,GAAkBqW,KAAKC,SAAvB,EAAoC1Q,KAAK5F,QAAL,GAAkBqW,KAAKgG,YAAnE,CACH,CAED,QAASqB,wBAAT,CAAiC9W,SAAjC,CAA4C,CACxC,GAAIvL,UAAWuL,UAAU2P,GAAV,CAAc,UAAd,CAAf,CACA,GAAI6Q,QAAU,CAAC,UAAD,CAAa,UAAb,CAAyB,OAAzB,EAAkCjpB,OAAlC,CAA0C9C,QAA1C,IAAwD,CAAC,CAA1D,CAA+DuL,UAAU2P,GAAV,CAAc,QAAd,CAA/D,CAAyF,MAAtG,CACA,MAAO6Q,UAAW,MAAlB,CACH,CAED,QAASxJ,aAAT,CAAsBhX,SAAtB,CAAiC,CAC7B,MAAOA,WAAU2P,GAAV,CAAc,UAAd,IAA8B,QAArC,CACH,CAED,QAASwH,WAAT,CAAoBnX,SAApB,CAA+B,CAC3B,MAAOA,WAAU2P,GAAV,CAAc,OAAd,IAA2B,MAAlC,CACH,CAED,QAASuH,cAAT,CAAuBlX,SAAvB,CAAkC,CAC9B,MAAO,CAAC,cAAD,CAAiB,cAAjB,EAAiCzI,OAAjC,CAAyCyI,UAAU2P,GAAV,CAAc,SAAd,CAAzC,IAAuE,CAAC,CAA/E,CACH,CAED,QAAS6I,IAAT,CAAa7M,QAAb,CAAuB,CACnB,GAAI8U,SAAU,IAAd,CACA,MAAO,WAAW,CACd,MAAO,CAAC9U,SAASwB,KAAT,CAAesT,OAAf,CAAwBrT,SAAxB,CAAR,CACH,CAFD,CAGH,CAED,QAASiH,UAAT,CAAmBrU,SAAnB,CAA8B,CAC1B,MAAOA,WAAUhB,IAAV,CAAe5F,QAAf,GAA4BqW,KAAKgG,YAAxC,CACH,CAED,QAASxG,gBAAT,CAAyBjP,SAAzB,CAAoC,CAChC,MAAOA,WAAUiP,eAAV,GAA8B,IAArC,CACH,CAED,QAASgG,WAAT,CAAoBjV,SAApB,CAA+B,CAC3B,MAAOA,WAAUhB,IAAV,CAAe5F,QAAf,GAA4BqW,KAAKC,SAAxC,CACH,CAED,QAAS2H,WAAT,CAAoBV,QAApB,CAA8B,CAC1B,MAAO,UAASle,CAAT,CAAY+I,CAAZ,CAAe,CAClB,MAAQ/I,GAAE8X,MAAF,CAAS,QAAT,EAAsBoG,SAASpf,OAAT,CAAiBkB,CAAjB,EAAsBke,SAAS3d,MAAtD,EAAkEwI,EAAE+O,MAAF,CAAS,QAAT,EAAsBoG,SAASpf,OAAT,CAAiBiK,CAAjB,EAAsBmV,SAAS3d,MAAvH,CAAP,CACH,CAFD,CAGH,CAED,QAAS6d,WAAT,CAAoB7W,SAApB,CAA+B,CAC3B,MAAOA,WAAUoP,UAAV,GAAyB,CAAhC,CACH,CAED,QAASmR,MAAT,CAAe1kB,KAAf,CAAsB,CAClB,MAAO6G,UAAS7G,KAAT,CAAgB,EAAhB,CAAP,CACH,CAED,QAAS+d,SAAT,CAAkBzZ,MAAlB,CAA0B,CACtB,MAAOA,QAAO7L,KAAd,CACH,CAED,QAASgiB,kBAAT,CAA2BoK,aAA3B,CAA0C,CACtC,MAAQA,eAAc1hB,IAAd,CAAmB5F,QAAnB,GAAgCqW,KAAKgG,YAArC,EAAqD,CAAC,QAAD,CAAW,MAAX,CAAmB,OAAnB,CAA4B,QAA5B,CAAsC,IAAtC,CAA4C,QAA5C,EAAsDle,OAAtD,CAA8DmpB,cAAc1hB,IAAd,CAAmBO,QAAjF,IAA+F,CAAC,CAA7J,CACH,CAED,QAASyU,QAAT,CAAiB2M,MAAjB,CAAyB,CACrB,MAAO,GAAG1V,MAAH,CAAUkC,KAAV,CAAgB,EAAhB,CAAoBwT,MAApB,CAAP,CACH,CAED,QAAS5K,YAAT,CAAqBF,OAArB,CAA8B,CAC1B,GAAI+K,OAAQ/K,QAAQzF,MAAR,CAAe,CAAf,CAAkB,CAAlB,CAAZ,CACA,MAAQwQ,SAAU/K,QAAQzF,MAAR,CAAeyF,QAAQ7c,MAAR,CAAiB,CAAhC,CAAV,EAAgD4nB,MAAMne,KAAN,CAAY,KAAZ,CAAjD,CAAuEoT,QAAQzF,MAAR,CAAe,CAAf,CAAkByF,QAAQ7c,MAAR,CAAiB,CAAnC,CAAvE,CAA+G6c,OAAtH,CACH,CAED,QAASuF,SAAT,CAAkBL,UAAlB,CAA8B,CAC1B,GAAI8F,OAAQ,EAAZ,CAAgBloB,EAAI,CAApB,CAAuBmoB,eAAiB,KAAxC,CAA+CC,IAA/C,CACA,MAAMhG,WAAW/hB,MAAjB,CAAyB,CACrB,GAAIgoB,eAAejG,WAAWpiB,CAAX,CAAf,IAAkCmoB,cAAtC,CAAsD,CAClDC,KAAOhG,WAAWxd,MAAX,CAAkB,CAAlB,CAAqB5E,CAArB,CAAP,CACA,GAAIooB,KAAK/nB,MAAT,CAAiB,CACb6nB,MAAM7kB,IAAN,CAAWzC,SAASyhB,IAAT,CAAcxd,MAAd,CAAqBujB,IAArB,CAAX,EACH,CACDD,eAAgB,CAAEA,cAAlB,CACAnoB,EAAI,CAAJ,CACH,CAPD,IAOO,CACHA,IACH,CAED,GAAIA,GAAKoiB,WAAW/hB,MAApB,CAA4B,CACxB+nB,KAAOhG,WAAWxd,MAAX,CAAkB,CAAlB,CAAqB5E,CAArB,CAAP,CACA,GAAIooB,KAAK/nB,MAAT,CAAiB,CACb6nB,MAAM7kB,IAAN,CAAWzC,SAASyhB,IAAT,CAAcxd,MAAd,CAAqBujB,IAArB,CAAX,EACH,CACJ,CACJ,CACD,MAAOF,MAAP,CACH,CAED,QAASG,eAAT,CAAwBC,aAAxB,CAAuC,CACnC,MAAO,CACH,EADG,CACC;AACJ,GAFG,CAEC;AACJ,GAHG,CAGC;AACJ,EAJG,CAIA;AACH,GAAG;AALA,GAML1pB,OANK,CAMG0pB,aANH,IAMsB,CAAC,CAN9B,CAOH,CAED,QAAS9F,WAAT,CAAoBhgB,MAApB,CAA4B,CACxB,MAAQ,mBAAD,CAAqB8C,IAArB,CAA0B9C,MAA1B,CAAP,CACH,CAEDtD,OAAOD,OAAP,CAAiB2L,UAAjB,CAEC,CAv2BgC,CAu2B/B,CAAC,UAAU,CAAX,CAAa,gBAAgB,CAA7B,CAA+B,QAAQ,EAAvC,CAA0C,kBAAkB,EAA5D,CAA+D,2BAA2B,EAA1F,CAA6F,oBAAoB,EAAjH,CAAoH,kBAAkB,EAAtI,CAAyI,UAAU,EAAnJ,CAAsJ,WAAW,CAAjK,CAv2B+B,CAxxD6wB,CA+nFvoB,GAAG,CAAC,SAAStK,OAAT,CAAiBpB,MAAjB,CAAwBD,OAAxB,CAAgC,CAC3M,GAAIspB,KAAMjoB,QAAQ,OAAR,CAAV,CACA,GAAIwK,OAAQxK,QAAQ,SAAR,CAAZ,CACA,GAAIzF,KAAMyF,QAAQ,OAAR,CAAV,CACA,GAAIyK,mBAAoBzK,QAAQ,SAAR,CAAxB,CACA,GAAIkoB,UAAW1d,MAAM0d,QAArB,CAEA,QAASC,MAAT,CAAezZ,GAAf,CAAoB0Z,QAApB,CAA8BliB,QAA9B,CAAwC,CACpC,GAAImiB,cAAgB,mBAAqB,IAAIC,eAAJ,EAAzC,CACA,GAAI,CAACF,QAAL,CAAe,CACX,MAAOhhB,SAAQsE,MAAR,CAAe,qBAAf,CAAP,CACH,CACD,GAAIgH,UAAW6V,eAAeF,YAAf,CAAf,CACA,GAAI/Z,KAAMka,eAAeJ,QAAf,CAAyB1Z,GAAzB,CAA8BgE,QAA9B,CAAV,CAEA,MAAO2V,cAAeJ,IAAI3Z,GAAJ,CAAf,CAA2Bma,MAAMviB,QAAN,CAAgBoI,GAAhB,CAAqBoE,QAArB,EAA+B3X,IAA/B,CAAoC,SAAS2tB,QAAT,CAAmB,CACrF,MAAOR,UAASQ,SAAS9L,OAAlB,CAAP,CACH,CAFiC,CAAlC,CAGH,CACD,GAAI+L,YAAa,CAAjB,CAEA,QAASC,SAAT,CAAkBla,GAAlB,CAAuB0Z,QAAvB,CAAiCliB,QAAjC,CAA2C,CACvC,GAAI2iB,mBAAqB,eAAiB,IAAIha,MAAJ,EAA1C,CACA,GAAI6D,UAAW6V,eAAeM,iBAAf,CAAf,CACA,GAAIva,KAAMka,eAAeJ,QAAf,CAAyB1Z,GAAzB,CAA8BgE,QAA9B,CAAV,CACA,MAAQmW,mBAAoBzhB,QAAQC,OAAR,CAAgBiH,GAAhB,CAApB,CAA2Cma,MAAMviB,QAAN,CAAgBoI,GAAhB,CAAqBoE,QAArB,EAA+B3X,IAA/B,CAAoC,SAAS2tB,QAAT,CAAmB,CACtG,MAAO,QAAUA,SAAS/mB,IAAnB,CAA0B,UAA1B,CAAuC+mB,SAAS9L,OAAvD,CACH,CAFkD,CAAnD,CAGH,CAED,QAAS6L,MAAT,CAAeviB,QAAf,CAAyBoI,GAAzB,CAA8BoE,QAA9B,CAAwC,CACpC,MAAO,IAAItL,QAAJ,CAAY,SAASC,OAAT,CAAkBqE,MAAlB,CAA0B,CACzC,GAAIrM,GAAI6G,SAAS/K,aAAT,CAAuB,QAAvB,CAAR,CACA,GAAI2tB,SAAU,QAAVA,QAAU,EAAW,CACrB,MAAOhrB,QAAOkB,WAAP,CAAmByM,KAAnB,CAAyBiH,QAAzB,CAAP,CACAxM,SAASvK,IAAT,CAAcI,WAAd,CAA0BsD,CAA1B,EACH,CAHD,CAIAvB,OAAOkB,WAAP,CAAmByM,KAAnB,CAAyBiH,QAAzB,EAAqC,SAASgW,QAAT,CAAmB,CACpDI,UACAzhB,QAAQqhB,QAAR,EACH,CAHD,CAIArpB,EAAEqP,GAAF,CAAQJ,GAAR,CACAjP,EAAEyP,OAAF,CAAY,SAAS5Q,CAAT,CAAY,CACpB4qB,UACApd,OAAOxN,CAAP,EACH,CAHD,CAIAgI,SAASvK,IAAT,CAAcC,WAAd,CAA0ByD,CAA1B,EACH,CAhBM,CAAP,CAiBH,CAED,QAASkpB,eAAT,CAAwBvV,OAAxB,CAAiC,CAC7B,MAAO,CAACA,OAAD,CAAW,eAAiB/H,KAAKC,GAAL,EAAjB,CAA8B,GAA9B,CAAqC,GAAEyd,UAAvC,CAAqD,GAArD,CAA2DrnB,KAAK2H,KAAL,CAAW3H,KAAKynB,MAAL,GAAgB,MAA3B,CAAtE,CAA2G,EAAlH,CACH,CAED,QAASP,eAAT,CAAwBJ,QAAxB,CAAkC1Z,GAAlC,CAAuCgE,QAAvC,CAAiD,CAC7C,MAAO0V,UAAW,OAAX,CAAqBY,mBAAmBta,GAAnB,CAArB,EAAgDgE,SAAS3S,MAAT,CAAkB,+BAAiC2S,QAAnD,CAA8D,EAA9G,CAAP,CACH,CAED,QAASuW,iBAAT,CAA0Bva,GAA1B,CAA+B,CAC3B,MAAO,UAAS5T,IAAT,CAAe,CAClB,GAAIsS,QAAS,GAAI8b,UAAJ,EAAb,CAA8BjvB,GAA9B,CACA,GAAI,CACAA,IAAMmT,OAAO+b,eAAP,CAAuBruB,IAAvB,CAA6B,WAA7B,CAAN,CACH,CAAC,MAAMoD,CAAN,CAAS,CACP3D,IAAI,6DAAJ,EACAN,IAAMiM,SAASkjB,cAAT,CAAwBC,kBAAxB,CAA2C,EAA3C,CAAN,CACA,GAAI,CACApvB,IAAIgO,IAAJ,GACAhO,IAAIiO,KAAJ,CAAUpN,IAAV,EACAb,IAAIoO,KAAJ,GACH,CAAC,MAAMihB,EAAN,CAAU,CACR/uB,IAAI,iFAAJ,EACAN,IAAI0B,IAAJ,CAAS4gB,SAAT,CAAqBzhB,IAArB,CAA2B;AAC9B,EACJ,CAED,GAAIyN,GAAItO,IAAIyS,aAAJ,CAAkB,MAAlB,CAAR,CACA,GAAI,CAACnE,CAAD,EAAM,CAACA,EAAEvK,IAAF,CAAOurB,IAAlB,CAAwB,CACpB,GAAI/oB,MAAOvG,IAAIkB,aAAJ,CAAkB,MAAlB,CAAX,CACAqF,KAAKxC,IAAL,CAAY0Q,GAAZ,CACAzU,IAAIuvB,IAAJ,CAASC,YAAT,CAAsBjpB,IAAtB,CAA4BvG,IAAIuvB,IAAJ,CAASnjB,UAArC,EACH,CAED,MAAOpM,IAAP,CACH,CAzBD,CA0BH,CAED,QAASyQ,gBAAT,CAAyBgE,GAAzB,CAA8BjD,KAA9B,CAAqCvF,QAArC,CAA+C7K,KAA/C,CAAsDC,MAAtD,CAA8DpB,OAA9D,CAAuE,CACnE,MAAO,IAAIiuB,MAAJ,CAAUzZ,GAAV,CAAejD,KAAf,CAAsB3N,OAAOoI,QAA7B,EAAuCnL,IAAvC,CAA4CkuB,iBAAiBva,GAAjB,CAA5C,EAAmE3T,IAAnE,CAAwE,SAASd,GAAT,CAAc,CACzF,MAAOwQ,mBAAkBxQ,GAAlB,CAAuBiM,QAAvB,CAAiC7K,KAAjC,CAAwCC,MAAxC,CAAgDpB,OAAhD,CAAyD,CAAzD,CAA4D,CAA5D,CAAP,CACH,CAFM,CAAP,CAGH,CAEDyE,QAAQwpB,KAAR,CAAgBA,KAAhB,CACAxpB,QAAQiqB,QAAR,CAAmBA,QAAnB,CACAjqB,QAAQ+L,eAAR,CAA0BA,eAA1B,CAEC,CAjGyK,CAiGxK,CAAC,UAAU,CAAX,CAAa,QAAQ,EAArB,CAAwB,UAAU,EAAlC,CAAqC,QAAQ,EAA7C,CAjGwK,CA/nFooB,CAguF1vB,GAAG,CAAC,SAAS1K,OAAT,CAAiBpB,MAAjB,CAAwBD,OAAxB,CAAgC,CACxF,GAAIiqB,UAAW5oB,QAAQ,SAAR,EAAmB4oB,QAAlC,CAEA,QAASxX,oBAAT,CAA6B1C,GAA7B,CAAkCjD,KAAlC,CAAyC,CACrC,GAAI8C,MAAOrI,SAAS/K,aAAT,CAAuB,GAAvB,CAAX,CACAoT,KAAKvQ,IAAL,CAAY0Q,GAAZ,CACAA,IAAMH,KAAKvQ,IAAX,CACA,KAAK0Q,GAAL,CAAWA,GAAX,CACA,KAAKE,KAAL,CAAa,GAAIC,MAAJ,EAAb,CACA,GAAI9P,MAAO,IAAX,CACA,KAAK4P,OAAL,CAAe,GAAIvH,QAAJ,CAAY,SAASC,OAAT,CAAkBqE,MAAlB,CAA0B,CACjD3M,KAAK6P,KAAL,CAAWuC,WAAX,CAAyB,WAAzB,CACApS,KAAK6P,KAAL,CAAWpH,MAAX,CAAoBH,OAApB,CACAtI,KAAK6P,KAAL,CAAWE,OAAX,CAAqBpD,MAArB,CAEA,GAAIkd,SAAJ,CAAala,GAAb,CAAkBjD,KAAlB,CAAyBvF,QAAzB,EAAmCnL,IAAnC,CAAwC,SAASuT,GAAT,CAAc,CAClDvP,KAAK6P,KAAL,CAAWF,GAAX,CAAiBJ,GAAjB,CACH,CAFD,EAEG,OAFH,EAEY5C,MAFZ,EAGH,CARc,CAAf,CASH,CAED9M,OAAOD,OAAP,CAAiByS,mBAAjB,CAEC,CAvBsD,CAuBrD,CAAC,UAAU,EAAX,CAvBqD,CAhuFuvB,CAuvF5xB,GAAG,CAAC,SAASpR,OAAT,CAAiBpB,MAAjB,CAAwBD,OAAxB,CAAgC,CACtD,GAAI4L,eAAgBvK,QAAQ,iBAAR,CAApB,CAEA,QAASoa,uBAAT,CAAgCrU,IAAhC,CAAsCsP,MAAtC,CAA8C1T,IAA9C,CAAoD,CAChD4I,cAAczK,IAAd,CAAmB,IAAnB,CAAyBiG,IAAzB,CAA+BsP,MAA/B,EACA,KAAKW,eAAL,CAAuB,IAAvB,CACA,KAAKe,MAAL,CAAcpV,OAAS,SAAvB,CACH,CAEDyY,uBAAuBtR,SAAvB,CAAiCoN,OAAjC,CAA2C,SAASZ,KAAT,CAAgB,CACvD8E,uBAAuBtR,SAAvB,CAAiCoN,OAAjC,CAAyCpW,IAAzC,CAA8C,IAA9C,CAAoDwV,KAApD,EACAA,MAAMU,eAAN,CAAwB,IAAxB,CACAV,MAAMyB,MAAN,CAAe,KAAKA,MAApB,CACH,CAJD,CAMAqD,uBAAuBtR,SAAvB,CAAmC1O,OAAOgS,MAAP,CAAc7B,cAAczB,SAA5B,CAAnC,CAEAsR,uBAAuBtR,SAAvB,CAAiC6S,WAAjC,CAA+C,UAAW,CACtD,GAAI,KAAK5E,MAAT,CAAiB,CACb,KAAK1B,MAAL,CAAYtP,IAAZ,CAAiB0jB,YAAjB,CAA8B,KAAK1jB,IAAnC,CAAyC,KAAKsP,MAAL,CAAYtP,IAAZ,CAAiBM,UAA1D,EACH,CAFD,IAEO,CACH,KAAKgP,MAAL,CAAYtP,IAAZ,CAAiBnK,WAAjB,CAA6B,KAAKmK,IAAlC,EACH,CACD,KAAKsP,MAAL,CAAYtP,IAAZ,CAAiBiB,SAAjB,EAA8B,IAAM,KAAK0iB,YAAL,EAApC,CACH,CAPD,CASAtP,uBAAuBtR,SAAvB,CAAiCiT,QAAjC,CAA4C,UAAW,CACnD,KAAKhW,IAAL,CAAUyH,UAAV,CAAqBzR,WAArB,CAAiC,KAAKgK,IAAtC,EACA,KAAKsP,MAAL,CAAYtP,IAAZ,CAAiBiB,SAAjB,CAA6B,KAAKqO,MAAL,CAAYtP,IAAZ,CAAiBiB,SAAjB,CAA2B3E,OAA3B,CAAmC,KAAKqnB,YAAL,EAAnC,CAAwD,EAAxD,CAA7B,CACH,CAHD,CAKAtP,uBAAuBtR,SAAvB,CAAiC4gB,YAAjC,CAAgD,UAAW,CACvD,MAAO,MAAK,8BAAgC,KAAK3S,MAAL,CAAc,QAAd,CAAyB,OAAzD,CAAL,CAAP,CACH,CAFD,CAIAqD,uBAAuBtR,SAAvB,CAAiCsT,gCAAjC,CAAoE,uCAApE,CACAhC,uBAAuBtR,SAAvB,CAAiCuT,+BAAjC,CAAmE,sCAAnE,CAEAzd,OAAOD,OAAP,CAAiByb,sBAAjB,CAEC,CAxCoB,CAwCnB,CAAC,kBAAkB,EAAnB,CAxCmB,CAvvFyxB,CA+xFpxB,GAAG,CAAC,SAASpa,OAAT,CAAiBpB,MAAjB,CAAwBD,OAAxB,CAAgC,CAC9D,GAAIpE,KAAMyF,QAAQ,OAAR,CAAV,CAEA,QAAS2pB,SAAT,CAAkBtuB,KAAlB,CAAyBC,MAAzB,CAAiCuW,MAAjC,CAAyC3X,OAAzC,CAAkDgM,QAAlD,CAA4D,CACxD,KAAK7K,KAAL,CAAaA,KAAb,CACA,KAAKC,MAAL,CAAcA,MAAd,CACA,KAAKuW,MAAL,CAAcA,MAAd,CACA,KAAK3X,OAAL,CAAeA,OAAf,CACA,KAAKgM,QAAL,CAAgBA,QAAhB,CACH,CAEDyjB,SAAS7gB,SAAT,CAAmBgY,WAAnB,CAAiC,SAAS/Z,SAAT,CAAoBkG,MAApB,CAA4B2Z,UAA5B,CAAwC7F,cAAxC,CAAwD,CACrF,GAAI6I,aAAc7iB,UAAUuQ,MAAV,CAAiB,aAAjB,CAAlB,CACIuS,WAAa9iB,UAAUuQ,MAAV,CAAiB,YAAjB,CADjB,CAEIwS,aAAe/iB,UAAUuQ,MAAV,CAAiB,cAAjB,CAFnB,CAGIyS,cAAgBhjB,UAAUuQ,MAAV,CAAiB,eAAjB,CAHpB,CAII/B,QAAUqR,WAAWrR,OAJzB,CAMA,GAAIla,OAAQ4R,OAAO5R,KAAP,EAAgBka,QAAQ,CAAR,EAAWla,KAAX,CAAmBka,QAAQ,CAAR,EAAWla,KAA9B,CAAsCuuB,WAAtC,CAAoDE,YAApE,CAAZ,CACA,GAAIxuB,QAAS2R,OAAO3R,MAAP,EAAiBia,QAAQ,CAAR,EAAWla,KAAX,CAAmBka,QAAQ,CAAR,EAAWla,KAA9B,CAAsCwuB,UAAtC,CAAmDE,aAApE,CAAb,CACA,KAAKhc,SAAL,CACIgT,cADJ,CAEI,CAFJ,CAGI,CAHJ,CAIIA,eAAenS,KAAf,CAAqBvT,KAArB,EAA8BA,KAJlC,CAKI0lB,eAAenS,KAAf,CAAqBtT,MAArB,EAA+BA,MALnC,CAMI2R,OAAOxR,IAAP,CAAcmuB,WAAd,CAA4BrU,QAAQ,CAAR,EAAWla,KAN3C,CAOI4R,OAAOvR,GAAP,CAAamuB,UAAb,CAA0BtU,QAAQ,CAAR,EAAWla,KAPzC,CAQIA,KARJ,CASIC,MATJ,EAWH,CApBD,CAsBAquB,SAAS7gB,SAAT,CAAmB4X,gBAAnB,CAAsC,SAAS3Z,SAAT,CAAoBkG,MAApB,CAA4B2Z,UAA5B,CAAwC,CAC1E,GAAI3Z,OAAO3R,MAAP,CAAgB,CAAhB,EAAqB2R,OAAO5R,KAAP,CAAe,CAAxC,CAA2C,CACvC,KAAK2uB,qBAAL,CAA2BjjB,SAA3B,CAAsCkG,MAAtC,EACA,KAAKgd,qBAAL,CAA2BljB,SAA3B,CAAsCkG,MAAtC,CAA8C2Z,UAA9C,EACH,CACJ,CALD,CAOA+C,SAAS7gB,SAAT,CAAmBkhB,qBAAnB,CAA2C,SAASjjB,SAAT,CAAoBkG,MAApB,CAA4B,CACnE,GAAIjD,OAAQjD,UAAUiD,KAAV,CAAgB,iBAAhB,CAAZ,CACA,GAAI,CAACA,MAAMd,aAAN,EAAL,CAA4B,CACxB,KAAKwR,SAAL,CAAezN,OAAOxR,IAAtB,CAA4BwR,OAAOvR,GAAnC,CAAwCuR,OAAO5R,KAA/C,CAAsD4R,OAAO3R,MAA7D,CAAqE0O,KAArE,EACH,CACJ,CALD,CAOA2f,SAAS7gB,SAAT,CAAmB8X,aAAnB,CAAmC,SAASrL,OAAT,CAAkB,CACjDA,QAAQpD,OAAR,CAAgB,KAAK+X,YAArB,CAAmC,IAAnC,EACH,CAFD,CAIAP,SAAS7gB,SAAT,CAAmBohB,YAAnB,CAAkC,SAASja,IAAT,CAAe,CAC7C,GAAI,CAACA,KAAKjG,KAAL,CAAWd,aAAX,EAAD,EAA+B+G,KAAKgC,IAAL,GAAc,IAAjD,CAAuD,CACnD,KAAKkY,SAAL,CAAela,KAAKgC,IAApB,CAA0BhC,KAAKjG,KAA/B,EACH,CACJ,CAJD,CAMA2f,SAAS7gB,SAAT,CAAmBmhB,qBAAnB,CAA2C,SAASljB,SAAT,CAAoBkG,MAApB,CAA4B2Z,UAA5B,CAAwC,CAC/E,GAAI/Q,kBAAmB9O,UAAUwL,qBAAV,EAAvB,CACAsD,iBAAiBvB,OAAjB,GAA2BnC,OAA3B,CAAmC,SAASiY,eAAT,CAA0BlmB,KAA1B,CAAiCmjB,GAAjC,CAAsC,CACrE,OAAO+C,gBAAgBlY,MAAvB,EACA,IAAK,KAAL,CACI,GAAItD,OAAQ,KAAKiD,MAAL,CAAY4B,GAAZ,CAAgB2W,gBAAgBnY,IAAhB,CAAqB,CAArB,CAAhB,CAAZ,CACA,GAAIrD,KAAJ,CAAW,CACP,KAAKyb,yBAAL,CAA+BtjB,SAA/B,CAA0CkG,MAA1C,CAAkD2B,KAAlD,CAAyDyY,IAAItnB,MAAJ,EAAcmE,MAAM,CAApB,CAAzD,CAAiF0iB,UAAjF,EACH,CAFD,IAEO,CACHrsB,IAAI,gCAAJ,CAAsC6vB,gBAAgBnY,IAAhB,CAAqB,CAArB,CAAtC,EACH,CACD,MACJ,IAAK,iBAAL,CACA,IAAK,UAAL,CACI,GAAIqY,eAAgB,KAAKzY,MAAL,CAAY4B,GAAZ,CAAgB2W,gBAAgBxnB,KAAhC,CAApB,CACA,GAAI0nB,aAAJ,CAAmB,CACf,KAAKC,wBAAL,CAA8BD,aAA9B,CAA6Crd,MAA7C,CAAqD2Z,UAArD,EACH,CAFD,IAEO,CACHrsB,IAAI,gCAAJ,CAAsC6vB,gBAAgBnY,IAAhB,CAAqB,CAArB,CAAtC,EACH,CACD,MACJ,IAAK,MAAL,CACI,MACJ,QACI1X,IAAI,+BAAJ,CAAqC6vB,gBAAgBnY,IAAhB,CAAqB,CAArB,CAArC,EArBJ,CAuBH,CAxBD,CAwBG,IAxBH,EAyBH,CA3BD,CA6BA0X,SAAS7gB,SAAT,CAAmBuhB,yBAAnB,CAA+C,SAAStjB,SAAT,CAAoBkG,MAApB,CAA4B8T,cAA5B,CAA4C7c,KAA5C,CAAmD0iB,UAAnD,CAA+D,CAC1G,GAAI1X,MAAOnI,UAAUiR,mBAAV,CAA8B/K,MAA9B,CAAsC8T,eAAenS,KAArD,CAA4D1K,KAA5D,CAAX,CACA,GAAI1I,UAAWuL,UAAUoR,uBAAV,CAAkClL,MAAlC,CAA0C8T,eAAenS,KAAzD,CAAgE1K,KAAhE,CAAuEgL,IAAvE,CAAf,CACA,GAAIsb,QAASzjB,UAAUsR,qBAAV,CAAgCnU,KAAhC,CAAb,CACA,OAAQsmB,MAAR,EACA,IAAK,UAAL,CACA,IAAK,kBAAL,CACI,KAAKC,qBAAL,CAA2B1J,cAA3B,CAA2CvlB,QAA3C,CAAqD0T,IAArD,CAA2DjC,MAA3D,CAAmEA,OAAOxR,IAAP,CAAcmrB,WAAW,CAAX,CAAjF,CAAgG3Z,OAAOvR,GAAP,CAAaF,SAASE,GAAtB,CAA4BkrB,WAAW,CAAX,CAA5H,CAA2I,KAA3I,CAAkJ1X,KAAK5T,MAAvJ,CAA+JsrB,UAA/J,EACA,MACJ,IAAK,UAAL,CACA,IAAK,kBAAL,CACI,KAAK6D,qBAAL,CAA2B1J,cAA3B,CAA2CvlB,QAA3C,CAAqD0T,IAArD,CAA2DjC,MAA3D,CAAmEA,OAAOxR,IAAP,CAAcD,SAASC,IAAvB,CAA8BmrB,WAAW,CAAX,CAAjG,CAAgH3Z,OAAOvR,GAAP,CAAakrB,WAAW,CAAX,CAA7H,CAA4I1X,KAAK7T,KAAjJ,CAAwJ,KAAxJ,CAA+JurB,UAA/J,EACA,MACJ,IAAK,WAAL,CACI,KAAK6D,qBAAL,CAA2B1J,cAA3B,CAA2CvlB,QAA3C,CAAqD0T,IAArD,CAA2DjC,MAA3D,CAAmEA,OAAOxR,IAAP,CAAcD,SAASC,IAAvB,CAA8BmrB,WAAW,CAAX,CAAjG,CAAgH3Z,OAAOvR,GAAP,CAAaF,SAASE,GAAtB,CAA4BkrB,WAAW,CAAX,CAA5I,CAA2J1X,KAAK7T,KAAhK,CAAuK6T,KAAK5T,MAA5K,CAAoLsrB,UAApL,EACA,MACJ,QACI,KAAK8D,sBAAL,CAA4B3J,cAA5B,CAA4CvlB,QAA5C,CAAsD0T,IAAtD,CAA4D,CAACxT,IAAKuR,OAAOvR,GAAb,CAAkBD,KAAMwR,OAAOxR,IAA/B,CAA5D,CAAkGmrB,WAAW,CAAX,CAAlG,CAAiHA,WAAW,CAAX,CAAjH,EACA,MAdJ,CAgBH,CApBD,CAsBAhoB,OAAOD,OAAP,CAAiBgrB,QAAjB,CAEC,CA9G4B,CA8G3B,CAAC,QAAQ,EAAT,CA9G2B,CA/xFixB,CA64F9xB,GAAG,CAAC,SAAS3pB,OAAT,CAAiBpB,MAAjB,CAAwBD,OAAxB,CAAgC,CACpD,GAAIgrB,UAAW3pB,QAAQ,aAAR,CAAf,CACA,GAAIuR,yBAA0BvR,QAAQ,4BAAR,CAA9B,CACA,GAAIzF,KAAMyF,QAAQ,QAAR,CAAV,CAEA,QAASoK,eAAT,CAAwB/O,KAAxB,CAA+BC,MAA/B,CAAuC,CACnCquB,SAASzV,KAAT,CAAe,IAAf,CAAqBC,SAArB,EACA,KAAKnZ,MAAL,CAAc,KAAKd,OAAL,CAAac,MAAb,EAAuB,KAAKkL,QAAL,CAAc/K,aAAd,CAA4B,QAA5B,CAArC,CACA,GAAI,CAAC,KAAKjB,OAAL,CAAac,MAAlB,CAA0B,CACtB,KAAKA,MAAL,CAAYK,KAAZ,CAAoBA,KAApB,CACA,KAAKL,MAAL,CAAYM,MAAZ,CAAqBA,MAArB,CACH,CACD,KAAKwB,GAAL,CAAW,KAAK9B,MAAL,CAAY+B,UAAZ,CAAuB,IAAvB,CAAX,CACA,KAAK4tB,QAAL,CAAgB,KAAKzkB,QAAL,CAAc/K,aAAd,CAA4B,QAA5B,EAAsC4B,UAAtC,CAAiD,IAAjD,CAAhB,CACA,KAAKD,GAAL,CAAS8tB,YAAT,CAAwB,QAAxB,CACA,KAAKC,SAAL,CAAiB,EAAjB,CACAtwB,IAAI,sCAAJ,CAA4Cc,KAA5C,CAAmD,GAAnD,CAAwDC,MAAxD,EACH,CAED8O,eAAetB,SAAf,CAA2B1O,OAAOgS,MAAP,CAAcud,SAAS7gB,SAAvB,CAA3B,CAEAsB,eAAetB,SAAf,CAAyBgiB,YAAzB,CAAwC,SAASC,SAAT,CAAoB,CACxD,KAAKjuB,GAAL,CAASiuB,SAAT,CAAqB,OAAOA,UAAP,mCAAOA,SAAP,KAAsB,QAAtB,EAAkC,CAAC,CAACA,UAAU7gB,OAA9C,CAAwD6gB,UAAUhhB,QAAV,EAAxD,CAA+EghB,SAApG,CACA,MAAO,MAAKjuB,GAAZ,CACH,CAHD,CAKAsN,eAAetB,SAAf,CAAyB4R,SAAzB,CAAqC,SAASjf,IAAT,CAAeC,GAAf,CAAoBL,KAApB,CAA2BC,MAA3B,CAAmC0O,KAAnC,CAA0C,CAC3E,KAAK8gB,YAAL,CAAkB9gB,KAAlB,EAAyBghB,QAAzB,CAAkCvvB,IAAlC,CAAwCC,GAAxC,CAA6CL,KAA7C,CAAoDC,MAApD,EACH,CAFD,CAIA8O,eAAetB,SAAf,CAAyB0Y,MAAzB,CAAkC,SAAS/lB,IAAT,CAAeC,GAAf,CAAoBwT,IAApB,CAA0BlF,KAA1B,CAAiC,CAC/D,KAAK8gB,YAAL,CAAkB9gB,KAAlB,EACA,KAAKlN,GAAL,CAASmuB,SAAT,GACA,KAAKnuB,GAAL,CAASouB,GAAT,CAAazvB,KAAOyT,KAAO,CAA3B,CAA8BxT,IAAMwT,KAAO,CAA3C,CAA8CA,KAAO,CAArD,CAAwD,CAAxD,CAA2D5N,KAAK6pB,EAAL,CAAQ,CAAnE,CAAsE,IAAtE,EACA,KAAKruB,GAAL,CAASsuB,SAAT,GACA,KAAKtuB,GAAL,CAASuuB,IAAT,GACH,CAND,CAQAjhB,eAAetB,SAAf,CAAyByY,YAAzB,CAAwC,SAAS9lB,IAAT,CAAeC,GAAf,CAAoBwT,IAApB,CAA0BlF,KAA1B,CAAiCshB,MAAjC,CAAyCC,WAAzC,CAAsD,CAC1F,KAAK/J,MAAL,CAAY/lB,IAAZ,CAAkBC,GAAlB,CAAuBwT,IAAvB,CAA6BlF,KAA7B,EACA,KAAKlN,GAAL,CAAS0uB,WAAT,CAAuBD,YAAYxhB,QAAZ,EAAvB,CACA,KAAKjN,GAAL,CAASwuB,MAAT,GACH,CAJD,CAMAlhB,eAAetB,SAAf,CAAyBqhB,SAAzB,CAAqC,SAASsB,KAAT,CAAgBzhB,KAAhB,CAAuB,CACxD,KAAKyhB,KAAL,CAAWA,KAAX,EACA,KAAKX,YAAL,CAAkB9gB,KAAlB,EAAyBqhB,IAAzB,GACH,CAHD,CAKAjhB,eAAetB,SAAf,CAAyB4iB,MAAzB,CAAkC,SAAS3K,cAAT,CAAyB,CACvD,GAAIA,eAAe7P,OAAf,GAA2B,IAA/B,CAAqC,CACjC,KAAKyZ,QAAL,CAAc5c,SAAd,CAAwBgT,eAAenS,KAAvC,CAA8C,CAA9C,CAAiD,CAAjD,EACA,GAAI,CACA,KAAK+b,QAAL,CAAcxtB,YAAd,CAA2B,CAA3B,CAA8B,CAA9B,CAAiC,CAAjC,CAAoC,CAApC,EACA4jB,eAAe7P,OAAf,CAAyB,KAAzB,CACH,CAAC,MAAMhT,CAAN,CAAS,CACP,KAAKysB,QAAL,CAAgBzkB,SAAS/K,aAAT,CAAuB,QAAvB,EAAiC4B,UAAjC,CAA4C,IAA5C,CAAhB,CACAgkB,eAAe7P,OAAf,CAAyB,IAAzB,CACH,CACJ,CAED,MAAO6P,gBAAe7P,OAAtB,CACH,CAbD,CAeA9G,eAAetB,SAAf,CAAyBiF,SAAzB,CAAqC,SAASgT,cAAT,CAAyB4K,EAAzB,CAA6BC,EAA7B,CAAiCC,EAAjC,CAAqCC,EAArC,CAAyCC,EAAzC,CAA6CC,EAA7C,CAAiDC,EAAjD,CAAqDC,EAArD,CAAyD,CAC1F,GAAI,CAAC,KAAKR,MAAL,CAAY3K,cAAZ,CAAD,EAAgC,KAAK7mB,OAAL,CAAakR,UAAjD,CAA6D,CACzD,KAAKtO,GAAL,CAASiR,SAAT,CAAmBgT,eAAenS,KAAlC,CAAyC+c,EAAzC,CAA6CC,EAA7C,CAAiDC,EAAjD,CAAqDC,EAArD,CAAyDC,EAAzD,CAA6DC,EAA7D,CAAiEC,EAAjE,CAAqEC,EAArE,EACH,CACJ,CAJD,CAMA9hB,eAAetB,SAAf,CAAyB0M,IAAzB,CAAgC,SAAS2W,MAAT,CAAiBzZ,QAAjB,CAA2B8U,OAA3B,CAAoC,CAChE,KAAK1qB,GAAL,CAASujB,IAAT,GACA8L,OAAO3Z,MAAP,CAAc4Z,UAAd,EAA0Bja,OAA1B,CAAkC,SAASsZ,KAAT,CAAgB,CAC9C,KAAKA,KAAL,CAAWA,KAAX,EAAkBjW,IAAlB,GACH,CAFD,CAEG,IAFH,EAGA9C,SAAS5S,IAAT,CAAc0nB,OAAd,EACA,KAAK1qB,GAAL,CAASmjB,OAAT,GACH,CAPD,CASA7V,eAAetB,SAAf,CAAyB2iB,KAAzB,CAAiC,SAASA,KAAT,CAAgB,CAC7C,KAAK3uB,GAAL,CAASmuB,SAAT,GACAQ,MAAMtZ,OAAN,CAAc,SAASka,KAAT,CAAgBnoB,KAAhB,CAAuB,CACjC,GAAImoB,MAAM,CAAN,IAAa,MAAjB,CAAyB,CACrB,KAAKvvB,GAAL,CAASwvB,IAAT,CAAcpY,KAAd,CAAoB,KAAKpX,GAAzB,CAA8BuvB,MAAMpnB,KAAN,CAAY,CAAZ,CAA9B,EACH,CAFD,IAEO,CACH,KAAKnI,GAAL,CAAUoH,QAAU,CAAX,CAAgB,QAAhB,CAA2BmoB,MAAM,CAAN,EAAW,IAA/C,EAAsDnY,KAAtD,CAA4D,KAAKpX,GAAjE,CAAsEuvB,MAAMpnB,KAAN,CAAY,CAAZ,CAAtE,EACH,CACJ,CAND,CAMG,IANH,EAOA,KAAKnI,GAAL,CAASsuB,SAAT,GACA,MAAO,MAAKtuB,GAAZ,CACH,CAXD,CAaAsN,eAAetB,SAAf,CAAyBwY,IAAzB,CAAgC,SAAStX,KAAT,CAAgBzO,KAAhB,CAAuBgxB,OAAvB,CAAgC/U,MAAhC,CAAwCtI,IAAxC,CAA8CD,MAA9C,CAAsD,CAClF,KAAK6b,YAAL,CAAkB9gB,KAAlB,EAAyBsX,IAAzB,CAAgC,CAAC/lB,KAAD,CAAQgxB,OAAR,CAAiB/U,MAAjB,CAAyBtI,IAAzB,CAA+BD,MAA/B,EAAuCzM,IAAvC,CAA4C,GAA5C,EAAiDJ,KAAjD,CAAuD,GAAvD,EAA4D,CAA5D,CAAhC,CACH,CAFD,CAIAgI,eAAetB,SAAf,CAAyBuZ,UAAzB,CAAsC,SAASrY,KAAT,CAAgB4O,OAAhB,CAAyBC,OAAzB,CAAkCC,IAAlC,CAAwC,CAC1E,KAAK0T,WAAL,CAAiB,aAAjB,CAAgCxiB,MAAMD,QAAN,EAAhC,EACKyiB,WADL,CACiB,eADjB,CACkC5T,OADlC,EAEK4T,WAFL,CAEiB,eAFjB,CAEkC3T,OAFlC,EAGK2T,WAHL,CAGiB,YAHjB,CAG+B1T,IAH/B,EAIH,CALD,CAOA1O,eAAetB,SAAf,CAAyBwZ,WAAzB,CAAuC,UAAW,CAC9C,KAAKkK,WAAL,CAAiB,aAAjB,CAAgC,eAAhC,EACH,CAFD,CAIApiB,eAAetB,SAAf,CAAyBsX,UAAzB,CAAsC,SAASnK,OAAT,CAAkB,CACpD,KAAKnZ,GAAL,CAAS2vB,WAAT,CAAuBxW,OAAvB,CACH,CAFD,CAIA7L,eAAetB,SAAf,CAAyBwX,YAAzB,CAAwC,SAAS/G,SAAT,CAAoB,CACxD,KAAKzc,GAAL,CAAS4vB,SAAT,CAAmBnT,UAAU9H,MAAV,CAAiB,CAAjB,CAAnB,CAAwC8H,UAAU9H,MAAV,CAAiB,CAAjB,CAAxC,EACA,KAAK3U,GAAL,CAASyc,SAAT,CAAmBrF,KAAnB,CAAyB,KAAKpX,GAA9B,CAAmCyc,UAAUF,MAA7C,EACA,KAAKvc,GAAL,CAAS4vB,SAAT,CAAmB,CAACnT,UAAU9H,MAAV,CAAiB,CAAjB,CAApB,CAAyC,CAAC8H,UAAU9H,MAAV,CAAiB,CAAjB,CAA1C,EACH,CAJD,CAMArH,eAAetB,SAAf,CAAyB0jB,WAAzB,CAAuC,SAAS3U,QAAT,CAAmBjV,KAAnB,CAA0B,CAC7D,GAAI,KAAKioB,SAAL,CAAehT,QAAf,IAA6BjV,KAAjC,CAAwC,CACpC,KAAKioB,SAAL,CAAehT,QAAf,EAA2B,KAAK/a,GAAL,CAAS+a,QAAT,EAAqBjV,KAAhD,CACH,CAED,MAAO,KAAP,CACH,CAND,CAQAwH,eAAetB,SAAf,CAAyBkR,IAAzB,CAAgC,SAASA,IAAT,CAAeve,IAAf,CAAqBc,MAArB,CAA6B,CACzD,KAAKO,GAAL,CAAS6vB,QAAT,CAAkB3S,IAAlB,CAAwBve,IAAxB,CAA8Bc,MAA9B,EACH,CAFD,CAIA6N,eAAetB,SAAf,CAAyB2hB,qBAAzB,CAAiD,SAAS1J,cAAT,CAAyB6L,kBAAzB,CAA6C1d,IAA7C,CAAmDjC,MAAnD,CAA2DxR,IAA3D,CAAiEC,GAAjE,CAAsEL,KAAtE,CAA6EC,MAA7E,CAAqFsrB,UAArF,CAAiG,CAC9I,GAAI6E,OAAQ,CACR,CAAC,MAAD,CAASnqB,KAAK2H,KAAL,CAAWxN,IAAX,CAAT,CAA2B6F,KAAK2H,KAAL,CAAWvN,GAAX,CAA3B,CADQ,CAER,CAAC,MAAD,CAAS4F,KAAK2H,KAAL,CAAWxN,KAAOJ,KAAlB,CAAT,CAAmCiG,KAAK2H,KAAL,CAAWvN,GAAX,CAAnC,CAFQ,CAGR,CAAC,MAAD,CAAS4F,KAAK2H,KAAL,CAAWxN,KAAOJ,KAAlB,CAAT,CAAmCiG,KAAK2H,KAAL,CAAW3N,OAASI,GAApB,CAAnC,CAHQ,CAIR,CAAC,MAAD,CAAS4F,KAAK2H,KAAL,CAAWxN,IAAX,CAAT,CAA2B6F,KAAK2H,KAAL,CAAW3N,OAASI,GAApB,CAA3B,CAJQ,CAAZ,CAMA,KAAK8Z,IAAL,CAAU,CAACiW,KAAD,CAAV,CAAmB,UAAW,CAC1B,KAAKf,sBAAL,CAA4B3J,cAA5B,CAA4C6L,kBAA5C,CAAgE1d,IAAhE,CAAsEjC,MAAtE,CAA8E2Z,WAAW,CAAX,CAA9E,CAA6FA,WAAW,CAAX,CAA7F,EACH,CAFD,CAEG,IAFH,EAGH,CAVD,CAYAxc,eAAetB,SAAf,CAAyB4hB,sBAAzB,CAAkD,SAAS3J,cAAT,CAAyB6L,kBAAzB,CAA6C1d,IAA7C,CAAmDjC,MAAnD,CAA2D4f,UAA3D,CAAuEC,SAAvE,CAAkF,CAChI,GAAIlU,SAAUtX,KAAK2H,KAAL,CAAWgE,OAAOxR,IAAP,CAAcmxB,mBAAmBnxB,IAAjC,CAAwCoxB,UAAnD,CAAd,CAA8EhU,QAAUvX,KAAK2H,KAAL,CAAWgE,OAAOvR,GAAP,CAAakxB,mBAAmBlxB,GAAhC,CAAsCoxB,SAAjD,CAAxF,CACA,KAAKhC,YAAL,CAAkB,KAAKhuB,GAAL,CAASiwB,aAAT,CAAuB,KAAKC,WAAL,CAAiBjM,cAAjB,CAAiC7R,IAAjC,CAAvB,CAA+D,QAA/D,CAAlB,EACA,KAAKpS,GAAL,CAAS4vB,SAAT,CAAmB9T,OAAnB,CAA4BC,OAA5B,EACA,KAAK/b,GAAL,CAASuuB,IAAT,GACA,KAAKvuB,GAAL,CAAS4vB,SAAT,CAAmB,CAAC9T,OAApB,CAA6B,CAACC,OAA9B,EACH,CAND,CAQAzO,eAAetB,SAAf,CAAyByhB,wBAAzB,CAAoD,SAASD,aAAT,CAAwBrd,MAAxB,CAAgC,CAChF,GAAIqd,wBAAyB/Y,wBAA7B,CAAsD,CAClD,GAAI0b,UAAW,KAAKnwB,GAAL,CAASowB,oBAAT,CACXjgB,OAAOxR,IAAP,CAAcwR,OAAO5R,KAAP,CAAeivB,cAAc5Z,EADhC,CAEXzD,OAAOvR,GAAP,CAAauR,OAAO3R,MAAP,CAAgBgvB,cAAc3Z,EAFhC,CAGX1D,OAAOxR,IAAP,CAAewR,OAAO5R,KAAP,CAAeivB,cAAc5c,EAHjC,CAIXT,OAAOvR,GAAP,CAAcuR,OAAO3R,MAAP,CAAgBgvB,cAAczc,EAJjC,CAAf,CAKAyc,cAAc7Z,UAAd,CAAyB0B,OAAzB,CAAiC,SAASuC,SAAT,CAAoB,CACjDuY,SAASE,YAAT,CAAsBzY,UAAUG,IAAhC,CAAsCH,UAAU1K,KAAV,CAAgBD,QAAhB,EAAtC,EACH,CAFD,EAGA,KAAK2Q,SAAL,CAAezN,OAAOxR,IAAtB,CAA4BwR,OAAOvR,GAAnC,CAAwCuR,OAAO5R,KAA/C,CAAsD4R,OAAO3R,MAA7D,CAAqE2xB,QAArE,EACH,CACJ,CAZD,CAcA7iB,eAAetB,SAAf,CAAyBkkB,WAAzB,CAAuC,SAASjM,cAAT,CAAyB7R,IAAzB,CAA+B,CAClE,GAAIN,OAAQmS,eAAenS,KAA3B,CACA,GAAGA,MAAMvT,KAAN,GAAgB6T,KAAK7T,KAArB,EAA8BuT,MAAMtT,MAAN,GAAiB4T,KAAK5T,MAAvD,CAA+D,CAC3D,MAAOsT,MAAP,CACH,CAED,GAAI9R,IAAJ,CAAS9B,OAASkL,SAAS/K,aAAT,CAAuB,QAAvB,CAAlB,CACAH,OAAOK,KAAP,CAAe6T,KAAK7T,KAApB,CACAL,OAAOM,MAAP,CAAgB4T,KAAK5T,MAArB,CACAwB,IAAM9B,OAAO+B,UAAP,CAAkB,IAAlB,CAAN,CACAD,IAAIiR,SAAJ,CAAca,KAAd,CAAqB,CAArB,CAAwB,CAAxB,CAA2BA,MAAMvT,KAAjC,CAAwCuT,MAAMtT,MAA9C,CAAsD,CAAtD,CAAyD,CAAzD,CAA4D4T,KAAK7T,KAAjE,CAAwE6T,KAAK5T,MAA7E,EACA,MAAON,OAAP,CACH,CAZD,CAcA,QAASoxB,WAAT,CAAoBtqB,KAApB,CAA2B,CACvB,MAAOA,OAAM/B,MAAN,CAAe,CAAtB,CACH,CAEDnB,OAAOD,OAAP,CAAiByL,cAAjB,CAEC,CAvLkB,CAuLjB,CAAC,6BAA6B,EAA9B,CAAiC,SAAS,EAA1C,CAA6C,cAAc,EAA3D,CAvLiB,CA74F2xB,CAokG5uB,GAAG,CAAC,SAASpK,OAAT,CAAiBpB,MAAjB,CAAwBD,OAAxB,CAAgC,CACtG,GAAI4L,eAAgBvK,QAAQ,iBAAR,CAApB,CAEA,QAASqa,gBAAT,CAAyBkD,cAAzB,CAAyCtH,OAAzC,CAAkDqE,OAAlD,CAA2DjF,MAA3D,CAAmE,CAC/D9K,cAAczK,IAAd,CAAmB,IAAnB,CAAyBwa,OAAzB,CAAkCjF,MAAlC,EACA,KAAK+X,WAAL,CAAmB7P,cAAnB,CACA,KAAKG,QAAL,CAAgB,EAAhB,CACA,KAAKpH,QAAL,CAAgB,EAAhB,CACA,KAAKL,OAAL,CAAe,CAAC,KAAKZ,MAAL,CAAc,KAAKA,MAAL,CAAYC,KAAZ,CAAkBW,OAAhC,CAA0C,CAA3C,EAAgDA,OAA/D,CACH,CAEDoE,gBAAgBvR,SAAhB,CAA4B1O,OAAOgS,MAAP,CAAc7B,cAAczB,SAA5B,CAA5B,CAEAuR,gBAAgBvR,SAAhB,CAA0B2U,cAA1B,CAA2C,SAAS+J,OAAT,CAAkB,CACzD,GAAIhK,aAAe,KAAKnI,MAAN,CAAgB,KAAKA,MAAL,CAAYC,KAA5B,CAAoC,IAAtD,CACA,MAAOkI,aAAeA,YAAY4P,WAAZ,CAA0B5P,WAA1B,CAAwCA,YAAYC,cAAZ,CAA2B+J,OAA3B,CAAvD,CAA8FA,QAAQlS,KAA7G,CACH,CAHD,CAKA1W,OAAOD,OAAP,CAAiB0b,eAAjB,CAEC,CApBoE,CAoBnE,CAAC,kBAAkB,EAAnB,CApBmE,CApkGyuB,CAwlGpxB,GAAG,CAAC,SAASra,OAAT,CAAiBpB,MAAjB,CAAwBD,OAAxB,CAAgC,CAC9D,QAASwL,QAAT,CAAiBjE,QAAjB,CAA2B,CACvB,KAAKqY,WAAL,CAAmB,KAAK8O,eAAL,CAAqBnnB,QAArB,CAAnB,CACA,KAAK+K,IAAL,CAAY,KAAKqc,QAAL,EAAZ,CACA,KAAKxa,GAAL,CAAW,KAAKya,OAAL,EAAX,CACH,CAEDpjB,QAAQrB,SAAR,CAAkBukB,eAAlB,CAAoC,SAASnnB,QAAT,CAAmB,CACnD,GAAIqU,MAAJ,CAAWiT,WAAX,CAAwBjP,WAAxB,CAAqCkP,WAArC,CAAkD1gB,QAAU,KAA5D,CAEA,GAAI7G,SAAS4Y,WAAb,CAA0B,CACtBvE,MAAQrU,SAAS4Y,WAAT,EAAR,CACA,GAAIvE,MAAM0E,qBAAV,CAAiC,CAC7BuO,YAActnB,SAAS/K,aAAT,CAAuB,WAAvB,CAAd,CACAqyB,YAAYjyB,KAAZ,CAAkBD,MAAlB,CAA2B,OAA3B,CACAkyB,YAAYjyB,KAAZ,CAAkBshB,OAAlB,CAA4B,OAA5B,CACA3W,SAASvK,IAAT,CAAcC,WAAd,CAA0B4xB,WAA1B,EAEAjT,MAAMmT,UAAN,CAAiBF,WAAjB,EACAjP,YAAchE,MAAM0E,qBAAN,EAAd,CACAwO,YAAclP,YAAYjjB,MAA1B,CAEA,GAAImyB,cAAgB,GAApB,CAAyB,CACrB1gB,QAAU,IAAV,CACH,CACD7G,SAASvK,IAAT,CAAcI,WAAd,CAA0ByxB,WAA1B,EACH,CACJ,CAED,MAAOzgB,QAAP,CACH,CAvBD,CAyBA5C,QAAQrB,SAAR,CAAkBwkB,QAAlB,CAA6B,UAAW,CACpC,MAAO,OAAQ,IAAIze,MAAJ,EAAD,CAAcsC,WAArB,GAAsC,WAA7C,CACH,CAFD,CAIAhH,QAAQrB,SAAR,CAAkBykB,OAAlB,CAA4B,UAAW,CACnC,GAAIpe,KAAM,GAAIN,MAAJ,EAAV,CACA,GAAI7T,QAASkL,SAAS/K,aAAT,CAAuB,QAAvB,CAAb,CACA,GAAI2B,KAAO9B,OAAO+B,UAAP,CAAkB,IAAlB,CAAX,CACAoS,IAAIT,GAAJ,CAAU,mEAAV,CAEA,GAAI,CACA5R,IAAIiR,SAAJ,CAAcoB,GAAd,CAAmB,CAAnB,CAAsB,CAAtB,EACAnU,OAAO6C,SAAP,GACH,CAAC,MAAMK,CAAN,CAAS,CACP,MAAO,MAAP,CACH,CACD,MAAO,KAAP,CACH,CAbD,CAeAU,OAAOD,OAAP,CAAiBwL,OAAjB,CAEC,CArD4B,CAqD3B,EArD2B,CAxlGixB,CA6oGxyB,GAAG,CAAC,SAASnK,OAAT,CAAiBpB,MAAjB,CAAwBD,OAAxB,CAAgC,CAC1C,GAAIspB,KAAMjoB,QAAQ,OAAR,CAAV,CACA,GAAIkoB,UAAWloB,QAAQ,SAAR,EAAmBkoB,QAAlC,CAEA,QAAS7W,aAAT,CAAsB3C,GAAtB,CAA2B,CACvB,KAAKA,GAAL,CAAWA,GAAX,CACA,KAAKE,KAAL,CAAa,IAAb,CACA,GAAI7P,MAAO,IAAX,CAEA,KAAK4P,OAAL,CAAe,KAAKgf,SAAL,GAAiB5yB,IAAjB,CAAsB,UAAW,CAC5C,MAAQgE,MAAKkU,QAAL,CAAcvE,GAAd,EAAqBtH,QAAQC,OAAR,CAAgBtI,KAAK6uB,gBAAL,CAAsBlf,GAAtB,CAAhB,CAArB,CAAmEuZ,IAAIvZ,GAAJ,CAA3E,CACH,CAFc,EAEZ3T,IAFY,CAEP,SAAS+X,GAAT,CAAc,CAClB,MAAO,IAAI1L,QAAJ,CAAY,SAASC,OAAT,CAAkB,CACjCvJ,OAAOkB,WAAP,CAAmB8T,GAAnB,CAAuB+a,MAAvB,CAA8BC,iBAA9B,CAAgDhb,GAAhD,CAAqD/T,KAAKgvB,YAAL,CAAkBjuB,IAAlB,CAAuBf,IAAvB,CAA6BsI,OAA7B,CAArD,EACH,CAFM,CAAP,CAGH,CANc,CAAf,CAOH,CAEDgK,aAAavI,SAAb,CAAuB6kB,SAAvB,CAAmC,UAAW,CAC1C,MAAO,CAAC7vB,OAAOkB,WAAP,CAAmB8T,GAApB,EAA2B,CAAChV,OAAOkB,WAAP,CAAmB8T,GAAnB,CAAuB+a,MAAnD,CAA4DzmB,QAAQsE,MAAR,CAAe,GAAI/L,MAAJ,CAAU,qDAAV,CAAf,CAA5D,CAA+IyH,QAAQC,OAAR,EAAtJ,CACH,CAFD,CAIAgK,aAAavI,SAAb,CAAuB8kB,gBAAvB,CAA0C,SAASlf,GAAT,CAAc,CACpD,MAAQ,iCAAgC1J,IAAhC,CAAqC0J,GAArC,CAAD,CAA8C,KAAKwZ,QAAL,CAAc,KAAK8F,iBAAL,CAAuBtf,GAAvB,CAAd,CAA9C,CAA2F,KAAKsf,iBAAL,CAAuBtf,GAAvB,CAAlG,CACH,CAFD,CAIA2C,aAAavI,SAAb,CAAuBklB,iBAAvB,CAA2C,SAAStf,GAAT,CAAc,CACrD,MAAOA,KAAIrM,OAAJ,CAAY,kCAAZ,CAA+C,EAA/C,CAAP,CACH,CAFD,CAIAgP,aAAavI,SAAb,CAAuBmK,QAAvB,CAAkC,SAASvE,GAAT,CAAc,CAC5C,MAAQ,0BAAyB1J,IAAzB,CAA8B0J,GAA9B,CAAR,CACH,CAFD,CAIA2C,aAAavI,SAAb,CAAuBilB,YAAvB,CAAsC,SAAS1mB,OAAT,CAAkB,CACpD,GAAItI,MAAO,IAAX,CACA,MAAO,UAAUkvB,OAAV,CAAmB/zB,OAAnB,CAA4B,CAC/B,GAAIc,QAAS,GAAI8C,QAAOkB,WAAP,CAAmB8T,GAAnB,CAAuB+a,MAAvB,CAA8BK,YAAlC,CAA+C,GAA/C,CAAb,CACAnvB,KAAK6P,KAAL,CAAa5T,OAAOmzB,aAApB,CACAnzB,OACKozB,QADL,CACcl0B,QAAQmB,KADtB,EAEKgzB,SAFL,CAEen0B,QAAQoB,MAFvB,EAGKgzB,GAHL,CAGSxwB,OAAOkB,WAAP,CAAmB8T,GAAnB,CAAuB+a,MAAvB,CAA8BU,IAA9B,CAAmCC,gBAAnC,CAAoDP,OAApD,CAA6D/zB,OAA7D,CAHT,EAIKu0B,SAJL,GAKApnB,QAAQrM,OAAOmzB,aAAf,EACH,CATD,CAUH,CAZD,CAcA9c,aAAavI,SAAb,CAAuBof,QAAvB,CAAkC,SAAShO,GAAT,CAAc,CAC5C,MAAQ,OAAOpc,QAAO4wB,IAAd,GAAwB,UAAzB,CAAuC5wB,OAAO4wB,IAAP,CAAYxU,GAAZ,CAAvC,CAA0DgO,SAAShO,GAAT,CAAjE,CACH,CAFD,CAIAtb,OAAOD,OAAP,CAAiB0S,YAAjB,CAEC,CAtDQ,CAsDP,CAAC,UAAU,EAAX,CAAc,QAAQ,EAAtB,CAtDO,CA7oGqyB,CAmsGjxB,GAAG,CAAC,SAASrR,OAAT,CAAiBpB,MAAjB,CAAwBD,OAAxB,CAAgC,CACjE,GAAI0S,cAAerR,QAAQ,gBAAR,CAAnB,CAEA,QAASsR,iBAAT,CAA0BvL,IAA1B,CAAgC4oB,OAAhC,CAAyC,CACrC,KAAKjgB,GAAL,CAAW3I,IAAX,CACA,KAAK6I,KAAL,CAAa,IAAb,CACA,GAAI7P,MAAO,IAAX,CAEA,KAAK4P,OAAL,CAAeggB,QAAU,GAAIvnB,QAAJ,CAAY,SAASC,OAAT,CAAkBqE,MAAlB,CAA0B,CAC3D3M,KAAK6P,KAAL,CAAa,GAAIC,MAAJ,EAAb,CACA9P,KAAK6P,KAAL,CAAWpH,MAAX,CAAoBH,OAApB,CACAtI,KAAK6P,KAAL,CAAWE,OAAX,CAAqBpD,MAArB,CACA3M,KAAK6P,KAAL,CAAWF,GAAX,CAAiB,sBAAyB,GAAIkgB,cAAJ,EAAD,CAAsBC,iBAAtB,CAAwC9oB,IAAxC,CAAzC,CACA,GAAIhH,KAAK6P,KAAL,CAAWG,QAAX,GAAwB,IAA5B,CAAkC,CAC9B1H,QAAQtI,KAAK6P,KAAb,EACH,CACJ,CARwB,CAAV,CAQV,KAAK+e,SAAL,GAAiB5yB,IAAjB,CAAsB,UAAW,CAClC,MAAO,IAAIqM,QAAJ,CAAY,SAASC,OAAT,CAAkB,CACjCvJ,OAAOkB,WAAP,CAAmB8T,GAAnB,CAAuB+a,MAAvB,CAA8BiB,gBAA9B,CAA+C/oB,IAA/C,CAAqDhH,KAAKgvB,YAAL,CAAkBjuB,IAAlB,CAAuBf,IAAvB,CAA6BsI,OAA7B,CAArD,EACH,CAFM,CAAP,CAGH,CAJI,CARL,CAaH,CAEDiK,iBAAiBxI,SAAjB,CAA6B1O,OAAOgS,MAAP,CAAciF,aAAavI,SAA3B,CAA7B,CAEAlK,OAAOD,OAAP,CAAiB2S,gBAAjB,CAEC,CA3B+B,CA2B9B,CAAC,iBAAiB,EAAlB,CA3B8B,CAnsG8wB,CA8tGrxB,GAAG,CAAC,SAAStR,OAAT,CAAiBpB,MAAjB,CAAwBD,OAAxB,CAAgC,CAC7D,GAAI4L,eAAgBvK,QAAQ,iBAAR,CAApB,CAEA,QAASma,cAAT,CAAuBpU,IAAvB,CAA6BsP,MAA7B,CAAqC,CACjC9K,cAAczK,IAAd,CAAmB,IAAnB,CAAyBiG,IAAzB,CAA+BsP,MAA/B,EACH,CAED8E,cAAcrR,SAAd,CAA0B1O,OAAOgS,MAAP,CAAc7B,cAAczB,SAA5B,CAA1B,CAEAqR,cAAcrR,SAAd,CAAwB+Y,kBAAxB,CAA6C,UAAW,CACpD,KAAK9b,IAAL,CAAUkK,IAAV,CAAiB,KAAKsJ,SAAL,CAAe,KAAKlE,MAAL,CAAYqB,GAAZ,CAAgB,eAAhB,CAAf,CAAjB,CACH,CAFD,CAIAyD,cAAcrR,SAAd,CAAwByQ,SAAxB,CAAoC,SAASA,SAAT,CAAoB,CACpD,GAAIS,MAAO,KAAKjU,IAAL,CAAUkK,IAArB,CACA,OAAOsJ,SAAP,EACI,IAAK,WAAL,CACI,MAAOS,MAAK9U,WAAL,EAAP,CACJ,IAAK,YAAL,CACI,MAAO8U,MAAK3X,OAAL,CAAa,0BAAb,CAAyC0sB,UAAzC,CAAP,CACJ,IAAK,WAAL,CACI,MAAO/U,MAAK5C,WAAL,EAAP,CACJ,QACI,MAAO4C,KAAP,CARR,CAUH,CAZD,CAcA,QAAS+U,WAAT,CAAoBrqB,CAApB,CAAuBsqB,EAAvB,CAA2BC,EAA3B,CAA+B,CAC3B,GAAIvqB,EAAE3E,MAAF,CAAW,CAAf,CAAkB,CACd,MAAOivB,IAAKC,GAAG7X,WAAH,EAAZ,CACH,CACJ,CAEDxY,OAAOD,OAAP,CAAiBwb,aAAjB,CAEC,CAnC2B,CAmC1B,CAAC,kBAAkB,EAAnB,CAnC0B,CA9tGkxB,CAiwGpxB,GAAG,CAAC,SAASna,OAAT,CAAiBpB,MAAjB,CAAwBD,OAAxB,CAAgC,CAC9DA,QAAQ6P,UAAR,CAAqB,QAASA,WAAT,EAAsB,CACvC,MAAO,gFAAP,CACH,CAFD,CAIA7P,QAAQlE,IAAR,CAAe,SAASiY,QAAT,CAAmB8U,OAAnB,CAA4B,CACvC,MAAO,WAAW,CACd,MAAO9U,UAASwB,KAAT,CAAesT,OAAf,CAAwBrT,SAAxB,CAAP,CACH,CAFD,CAGH,CAJD,CAMA;;;;;;IAQAxV,QAAQupB,QAAR,CAAmB,SAASgH,MAAT,CAAiB,CAChC,GAAIC,OAAQ,kEAAZ,CACA,GAAIC,KAAMF,OAAOnvB,MAAjB,CAAyBL,CAAzB,CAA4B2vB,QAA5B,CAAsCC,QAAtC,CAAgDC,QAAhD,CAA0DC,QAA1D,CAAoEC,KAApE,CAA2EC,KAA3E,CAAkFC,KAAlF,CAEA,GAAIjtB,QAAS,EAAb,CAEA,IAAKhD,EAAI,CAAT,CAAYA,EAAI0vB,GAAhB,CAAqB1vB,GAAG,CAAxB,CAA2B,CACvB2vB,SAAWF,MAAM7wB,OAAN,CAAc4wB,OAAOxvB,CAAP,CAAd,CAAX,CACA4vB,SAAWH,MAAM7wB,OAAN,CAAc4wB,OAAOxvB,EAAE,CAAT,CAAd,CAAX,CACA6vB,SAAWJ,MAAM7wB,OAAN,CAAc4wB,OAAOxvB,EAAE,CAAT,CAAd,CAAX,CACA8vB,SAAWL,MAAM7wB,OAAN,CAAc4wB,OAAOxvB,EAAE,CAAT,CAAd,CAAX,CAEA+vB,MAASJ,UAAY,CAAb,CAAmBC,UAAY,CAAvC,CACAI,MAAS,CAACJ,SAAW,EAAZ,GAAmB,CAApB,CAA0BC,UAAY,CAA9C,CACAI,MAAS,CAACJ,SAAW,CAAZ,GAAkB,CAAnB,CAAwBC,QAAhC,CACA,GAAID,WAAa,EAAjB,CAAqB,CACjB7sB,QAAUlB,OAAOC,YAAP,CAAoBguB,KAApB,CAAV,CACH,CAFD,IAEO,IAAID,WAAa,EAAb,EAAmBA,WAAa,CAAC,CAArC,CAAwC,CAC3C9sB,QAAUlB,OAAOC,YAAP,CAAoBguB,KAApB,CAA2BC,KAA3B,CAAV,CACH,CAFM,IAED,CACFhtB,QAAUlB,OAAOC,YAAP,CAAoBguB,KAApB,CAA2BC,KAA3B,CAAkCC,KAAlC,CAAV,CACH,CACJ,CAED,MAAOjtB,OAAP,CACH,CAzBD,CA2BA/D,QAAQgM,SAAR,CAAoB,SAAS5E,IAAT,CAAe,CAC/B,GAAIA,KAAKkZ,qBAAT,CAAgC,CAC5B,GAAI2Q,YAAa7pB,KAAKkZ,qBAAL,EAAjB,CACA,GAAI5jB,OAAQ0K,KAAKkI,WAAL,EAAoB,IAApB,CAA2B2hB,WAAWv0B,KAAtC,CAA8C0K,KAAKkI,WAA/D,CACA,MAAO,CACHvS,IAAKk0B,WAAWl0B,GADb,CAEHa,OAAQqzB,WAAWrzB,MAAX,EAAsBqzB,WAAWl0B,GAAX,CAAiBk0B,WAAWt0B,MAFvD,CAGHgB,MAAOszB,WAAWn0B,IAAX,CAAkBJ,KAHtB,CAIHI,KAAMm0B,WAAWn0B,IAJd,CAKHJ,MAAQA,KALL,CAMHC,OAAQyK,KAAKqI,YAAL,EAAqB,IAArB,CAA4BwhB,WAAWt0B,MAAvC,CAAgDyK,KAAKqI,YAN1D,CAAP,CAQH,CACD,MAAO,EAAP,CACH,CAdD,CAgBAzP,QAAQyW,YAAR,CAAuB,SAASrP,IAAT,CAAe,CAClC,GAAIsP,QAAStP,KAAK8pB,YAAL,CAAoBlxB,QAAQyW,YAAR,CAAqBrP,KAAK8pB,YAA1B,CAApB,CAA8D,CAACn0B,IAAK,CAAN,CAASD,KAAM,CAAf,CAA3E,CAEA,MAAO,CACHC,IAAKqK,KAAK8J,SAAL,CAAiBwF,OAAO3Z,GAD1B,CAEHa,OAAQwJ,KAAK8J,SAAL,CAAiB9J,KAAKqI,YAAtB,CAAqCiH,OAAO3Z,GAFjD,CAGHY,MAAOyJ,KAAK+pB,UAAL,CAAkBza,OAAO5Z,IAAzB,CAAgCsK,KAAKkI,WAHzC,CAIHxS,KAAMsK,KAAK+pB,UAAL,CAAkBza,OAAO5Z,IAJ5B,CAKHJ,MAAO0K,KAAKkI,WALT,CAMH3S,OAAQyK,KAAKqI,YANV,CAAP,CAQH,CAXD,CAaAzP,QAAQwW,gBAAR,CAA2B,SAASiV,eAAT,CAA0B,CACjD,GAAI2F,YAAa,SAAjB,CACI7d,MADJ,CACY8d,UADZ,CACwB9Y,MADxB,CACgC+Y,QADhC,CAC0CC,KAD1C,CACiD1X,QAAU,EAD3D,CAEI2X,KAAO,CAFX,CAEcC,SAAW,CAFzB,CAE4BC,KAF5B,CAEmCpe,IAFnC,CAGA,GAAIqe,cAAe,QAAfA,aAAe,EAAW,CAC1B,GAAGpe,MAAH,CAAW,CACP,GAAI8d,WAAW7Y,MAAX,CAAkB,CAAlB,CAAqB,CAArB,IAA4B,GAAhC,CAAqC,CACjC6Y,WAAaA,WAAW7Y,MAAX,CAAkB,CAAlB,CAAqB6Y,WAAWjwB,MAAX,CAAoB,CAAzC,CAAb,CACH,CACD,GAAIiwB,UAAJ,CAAgB,CACZ/d,KAAKlP,IAAL,CAAUitB,UAAV,EACH,CACD,GAAI9d,OAAOiF,MAAP,CAAc,CAAd,CAAiB,CAAjB,IAAwB,GAAxB,EAA+B,CAAC8Y,SAAW/d,OAAO5T,OAAP,CAAe,GAAf,CAAoB,CAApB,EAA0B,CAAtC,EAA2C,CAA9E,CAAiF,CAC7E4Y,OAAShF,OAAOiF,MAAP,CAAc,CAAd,CAAiB8Y,QAAjB,CAAT,CACA/d,OAASA,OAAOiF,MAAP,CAAc8Y,QAAd,CAAT,CACH,CACDzX,QAAQzV,IAAR,CAAa,CACTmU,OAAQA,MADC,CAEThF,OAAQA,OAAOhN,WAAP,EAFC,CAGTtC,MAAOstB,KAHE,CAITje,KAAMA,IAJG,CAKTrD,MAAO,IALE,CAAb,EAOH,CACDqD,KAAO,EAAP,CACAC,OAASgF,OAAS8Y,WAAaE,MAAQ,EAAvC,CACH,CAtBD,CAuBAje,KAAO,EAAP,CACAC,OAASgF,OAAS8Y,WAAaE,MAAQ,EAAvC,CACA9F,gBAAgBhoB,KAAhB,CAAsB,EAAtB,EAA0B+P,OAA1B,CAAkC,SAASoe,CAAT,CAAY,CAC1C,GAAIJ,OAAS,CAAT,EAAcJ,WAAWzxB,OAAX,CAAmBiyB,CAAnB,EAAwB,CAAC,CAA3C,CAA8C,CAC1C,OACH,CACD,OAAOA,CAAP,EACA,IAAK,GAAL,CACI,GAAG,CAACF,KAAJ,CAAW,CACPA,MAAQE,CAAR,CACH,CAFD,IAEO,IAAGF,QAAUE,CAAb,CAAgB,CACnBF,MAAQ,IAAR,CACH,CACD,MACJ,IAAK,GAAL,CACI,GAAGA,KAAH,CAAU,CACN,MACH,CAFD,IAEO,IAAGF,OAAS,CAAZ,CAAe,CAClBA,KAAO,CAAP,CACAD,OAASK,CAAT,CACA,OACH,CAJM,IAIA,CACHH,WACH,CACD,MACJ,IAAK,GAAL,CACI,GAAIC,KAAJ,CAAW,CACP,MACH,CAFD,IAEO,IAAGF,OAAS,CAAZ,CAAe,CAClB,GAAGC,WAAa,CAAhB,CAAmB,CACfD,KAAO,CAAP,CACAD,OAASK,CAAT,CACAD,eACA,OACH,CALD,IAKO,CACHF,WACH,CACJ,CACD,MAEJ,IAAK,GAAL,CACI,GAAIC,KAAJ,CAAW,CACP,MACH,CAFD,IAEO,IAAGF,OAAS,CAAZ,CAAe,CAClBG,eACA,OACH,CAHM,IAGA,IAAIH,OAAS,CAAb,CAAgB,CACnB,GAAIC,WAAa,CAAb,EAAkB,CAACle,OAAO1I,KAAP,CAAa,QAAb,CAAvB,CAA+C,CAC3CyI,KAAKlP,IAAL,CAAUitB,UAAV,EACAA,WAAa,EAAb,CACAE,OAASK,CAAT,CACA,OACH,CACJ,CACD,MAhDJ,CAmDAL,OAASK,CAAT,CACA,GAAIJ,OAAS,CAAb,CAAgB,CACZje,QAAUqe,CAAV,CACH,CAFD,IAEO,CACHP,YAAcO,CAAd,CACH,CACJ,CA7DD,EA+DAD,eACA,MAAO9X,QAAP,CACH,CA9FD,CAgGC,CA3K4B,CA2K3B,EA3K2B,CAjwGixB,CA46GxyB,GAAG,CAAC,SAASxY,OAAT,CAAiBpB,MAAjB,CAAwBD,OAAxB,CAAgC,CAC1C,GAAI4R,mBAAoBvQ,QAAQ,qBAAR,CAAxB,CAEA,QAASwR,wBAAT,CAAiChB,SAAjC,CAA4C,CACxCD,kBAAkB2D,KAAlB,CAAwB,IAAxB,CAA8BC,SAA9B,EACA,KAAKxS,IAAL,CAAY6O,UAAUyB,IAAV,CAAe,CAAf,IAAsB,QAAtB,CAAiC1B,kBAAkBK,KAAlB,CAAwBC,MAAzD,CAAkEN,kBAAkBK,KAAlB,CAAwBE,MAAtG,CACH,CAEDU,wBAAwB1I,SAAxB,CAAoC1O,OAAOgS,MAAP,CAAcmE,kBAAkBzH,SAAhC,CAApC,CAEAlK,OAAOD,OAAP,CAAiB6S,uBAAjB,CAEC,CAZQ,CAYP,CAAC,sBAAsB,CAAvB,CAZO,CA56GqyB,CAw7GjxB,GAAG,CAAC,SAASxR,OAAT,CAAiBpB,MAAjB,CAAwBD,OAAxB,CAAgC,CACjE,QAASspB,IAAT,CAAa3Z,GAAb,CAAkB,CACd,MAAO,IAAIlH,QAAJ,CAAY,SAASC,OAAT,CAAkBqE,MAAlB,CAA0B,CACzC,GAAI8kB,KAAM,GAAIlI,eAAJ,EAAV,CACAkI,IAAIvoB,IAAJ,CAAS,KAAT,CAAgBqG,GAAhB,EAEAkiB,IAAIhpB,MAAJ,CAAa,UAAW,CACpB,GAAIgpB,IAAIC,MAAJ,GAAe,GAAnB,CAAwB,CACpBppB,QAAQmpB,IAAIE,YAAZ,EACH,CAFD,IAEO,CACHhlB,OAAO,GAAI/L,MAAJ,CAAU6wB,IAAIG,UAAd,CAAP,EACH,CACJ,CAND,CAQAH,IAAI1hB,OAAJ,CAAc,UAAW,CACrBpD,OAAO,GAAI/L,MAAJ,CAAU,eAAV,CAAP,EACH,CAFD,CAIA6wB,IAAII,IAAJ,GACH,CAjBM,CAAP,CAkBH,CAEDhyB,OAAOD,OAAP,CAAiBspB,GAAjB,CAEC,CAxB+B,CAwB9B,EAxB8B,CAx7G8wB,CAA3b,CAg9G5W,EAh9G4W,CAg9GzW,CAAC,CAAD,CAh9GyW,EAg9GpW,CAh9GoW,CAAP,CAi9G3W,CAj9GD,E;;;;;;;;;;;;;;;;;ACPA;;;;KAIqB4I,U;;;;;;;;AACnB;;;;+BAIU;AACR,cAAO,EAAP;AACD;;AAED;;;;;;;+BAIU;AACR,cAAO,KAAKv2B,UAAZ;AACD;;AAED;;;;;;;;yBAKIqnB,O,EAAkB;AAAA;;AACpB,WAAI,CAAC,KAAKmP,OAAL,EAAL,EAAqB;AACnB;AACD;;AAHmB,yCAAN7e,IAAM;AAANA,aAAM;AAAA;;AAKpB,4BAAQ1X,GAAR,kBAAe,KAAKw2B,OAAL,EAAf,UAAkCpP,OAAlC,SAAgD1P,IAAhD;AACD;;;;;;mBA5BkB4e,U;;;;;;;;;;;;;;;ACJrB;;;;AACA;;;;;;;;;;;;AAEA;;;;KAIqBG,W;;;AACnB;;;;;AAKA,wBAAY/2B,GAAZ,EAAiBe,MAAjB,EAA2C;AAAA,SAAlBi2B,SAAkB,yDAAN,IAAM;;AAAA;;AAAA;;AAGzC,WAAKC,YAAL,GAAoB,MAAKA,YAAL,CAAkBz2B,IAAlB,OAApB;AACA,WAAK02B,YAAL,GAAoB,MAAKA,YAAL,CAAkB12B,IAAlB,OAApB;AACA,WAAK22B,UAAL,GAAkB,MAAKA,UAAL,CAAgB32B,IAAhB,OAAlB;AACA,WAAK42B,QAAL,GAAgB,MAAKA,QAAL,CAAc52B,IAAd,OAAhB;;AAEA,WAAKN,SAAL,GAAiBF,GAAjB;AACA,WAAKgB,OAAL,GAAeD,MAAf;AACA,WAAKs2B,MAAL,GAAct2B,OAAOK,KAArB;AACA,WAAKk2B,OAAL,GAAev2B,OAAOM,MAAtB;AACA,WAAKk2B,IAAL,GAAYx2B,OAAO+B,UAAP,CAAkB,IAAlB,CAAZ;AACA,WAAKzC,UAAL,GAAkB22B,SAAlB;;AAEA,SAAMn2B,OAAO,MAAKX,SAAL,CAAewB,IAAf,CAAoB6R,UAAjC;;AAEA,WAAKikB,QAAL,GAAgB32B,KAAK+U,SAArB;AACA,WAAK6hB,SAAL,GAAiB52B,KAAKg1B,UAAtB;;AAEA,WAAK6B,MAAL,GAAc,KAAd,CApByC,CAoBpB;AACrB,WAAKC,MAAL,GAAc,IAAd,CArByC,CAqBpB;AACrB,WAAKC,SAAL,GAAiB,KAAjB,CAtByC,CAsBjB;AACxB,WAAKC,SAAL,GAAiB,CAAjB,CAvByC,CAuBrB;AACpB,WAAKC,SAAL,GAAiB,CAAjB;;AAEA,WAAKx3B,GAAL,CAAS,aAAT;;AAEA,WAAKy3B,SAAL;AACA,WAAKC,WAAL;;AAEA,WAAKC,SAAL,GAAiB,EAAjB;AACAxqB,iBAAY,YAAM;AAChB,aAAKyqB,IAAL;AACD,MAFD,EAEG,MAAKD,SAFR;AAhCyC;AAmC1C;;AAED;;;;;;;;+BAIU;AACR,cAAO,aAAP;AACD;;;kCAEYh0B,C,EAAG;AAAA,WACN0zB,MADM,GACK,IADL,CACNA,MADM;;AAEd,WAAMQ,QAAQ,KAAKC,QAAL,CAAcn0B,CAAd,CAAd;AACA,WAAMo0B,KAAKF,MAAMh1B,CAAjB;AACA,WAAMm1B,KAAKH,MAAM/0B,CAAjB;AACA,YAAKs0B,MAAL,GAAc,KAAd;AACA,WAAIC,OAAOY,QAAP,CAAgBF,EAAhB,EAAoBC,EAApB,CAAJ,EAA6B;AAC3B,cAAKT,SAAL,GAAiBQ,KAAKV,OAAOa,EAA7B;AACA,cAAKV,SAAL,GAAiBQ,KAAKX,OAAOc,EAA7B;AACA,cAAKb,SAAL,GAAiB,IAAjB;;AAEA,cAAKt3B,GAAL,CAAS,oCAAT,EAA+C+3B,EAA/C,EAAmDC,EAAnD;AACD;;AAED,YAAKI,cAAL,GAAsB,KAAKf,MAAL,CAAYgB,uBAAZ,CAAoCR,MAAMh1B,CAA1C,EAA6Cg1B,MAAM/0B,CAAnD,CAAtB;AACD;;;kCAEYa,C,EAAG;AAAA,WACN0zB,MADM,GACc,IADd,CACNA,MADM;AAAA,WACE32B,OADF,GACc,IADd,CACEA,OADF;;AAEd,WAAMm3B,QAAQ,KAAKC,QAAL,CAAcn0B,CAAd,CAAd;AACA,WAAM20B,OAAOjB,OAAOa,EAApB;AACA,WAAMK,OAAOlB,OAAOc,EAApB;AACA,WAAMJ,KAAKF,MAAMh1B,CAAjB;AACA,WAAMm1B,KAAKH,MAAM/0B,CAAjB;AACA,WAAM01B,cAAcnB,OAAOgB,uBAAP,CAA+BN,EAA/B,EAAmCC,EAAnC,CAApB;AACA,eAAQQ,WAAR;AACE,cAAK,CAAL;AACE93B,mBAAQM,KAAR,CAAcy3B,MAAd,GAAuB,WAAvB;AACA;AACF,cAAK,CAAL;AACE/3B,mBAAQM,KAAR,CAAcy3B,MAAd,GAAuB,UAAvB;AACA;AACF,cAAK,CAAL;AACE/3B,mBAAQM,KAAR,CAAcy3B,MAAd,GAAuB,WAAvB;AACA;AACF,cAAK,CAAL;AACE/3B,mBAAQM,KAAR,CAAcy3B,MAAd,GAAuB,UAAvB;AACA;AACF,cAAK,CAAL;AACE/3B,mBAAQM,KAAR,CAAcy3B,MAAd,GAAuB,UAAvB;AACA;AACF,cAAK,CAAL;AACE/3B,mBAAQM,KAAR,CAAcy3B,MAAd,GAAuB,WAAvB;AACA;AACF,cAAK,CAAL;AACE/3B,mBAAQM,KAAR,CAAcy3B,MAAd,GAAuB,UAAvB;AACA;AACF,cAAK,CAAL;AACE/3B,mBAAQM,KAAR,CAAcy3B,MAAd,GAAuB,WAAvB;AACA;AACF;AACE/3B,mBAAQM,KAAR,CAAcy3B,MAAd,GAAuB,MAAvB;AA1BJ;;AA6BA,WAAI,KAAKL,cAAL,KAAwB,KAA5B,EAAmC;AACjC;AACA,iBAAQ,KAAKA,cAAb;AACE,gBAAK,CAAL;AACEf,oBAAOa,EAAP,GAAYH,EAAZ;AACAV,oBAAOc,EAAP,GAAYH,EAAZ;AACAX,oBAAOqB,EAAP,IAAaJ,OAAOP,EAApB;AACAV,oBAAOsB,EAAP,IAAaJ,OAAOP,EAApB;AACA;AACF,gBAAK,CAAL;AACEX,oBAAOc,EAAP,GAAYH,EAAZ;AACAX,oBAAOsB,EAAP,IAAaJ,OAAOP,EAApB;AACA;AACF,gBAAK,CAAL;AACEX,oBAAOc,EAAP,GAAYH,EAAZ;AACAX,oBAAOqB,EAAP,GAAYX,KAAKO,IAAjB;AACAjB,oBAAOsB,EAAP,IAAaJ,OAAOP,EAApB;AACA;AACF,gBAAK,CAAL;AACEX,oBAAOa,EAAP,GAAYH,EAAZ;AACAV,oBAAOqB,EAAP,IAAaJ,OAAOP,EAApB;AACA;AACF,gBAAK,CAAL;AACEV,oBAAOqB,EAAP,GAAYX,KAAKO,IAAjB;AACA;AACF,gBAAK,CAAL;AACEjB,oBAAOa,EAAP,GAAYH,EAAZ;AACAV,oBAAOqB,EAAP,IAAaJ,OAAOP,EAApB;AACAV,oBAAOsB,EAAP,GAAYX,KAAKO,IAAjB;AACA;AACF,gBAAK,CAAL;AACElB,oBAAOsB,EAAP,GAAYX,KAAKO,IAAjB;AACA;AACF,gBAAK,CAAL;AACElB,oBAAOqB,EAAP,GAAYX,KAAKO,IAAjB;AACAjB,oBAAOsB,EAAP,GAAYX,KAAKO,IAAjB;AACA;AACF;AACE;AApCJ;AAsCA,cAAKnB,MAAL,GAAc,KAAd;AACD,QAzCD,MAyCO,IAAI,KAAKE,SAAT,EAAoB;AACzB;AACA;AACA,cAAKD,MAAL,CAAYa,EAAZ,GAAiBL,MAAMh1B,CAAN,GAAU,KAAK00B,SAAhC;AACA,cAAKF,MAAL,CAAYc,EAAZ,GAAiBN,MAAM/0B,CAAN,GAAU,KAAK00B,SAAhC;AACA,cAAKJ,MAAL,GAAc,KAAd,CALyB,CAKJ;;AAErB;AACD;AACF;;;kCAEY;AACX,WAAI,KAAKE,SAAT,EAAoB;AAClB,cAAKA,SAAL,GAAiB,KAAjB;AACA,cAAKc,cAAL,GAAsB,KAAtB;AACA,cAAKp4B,GAAL,CAAS,mBAAT;AACD;AACF;;AAED;;;;;;8BAGS44B,G,EAAK;AACZA,WAAIl1B,cAAJ,GADY,CACU;AACtB,WAAIk1B,IAAIC,OAAJ,CAAYrzB,MAAZ,GAAqB,CAArB,IAA2BozB,IAAIxxB,IAAJ,KAAa,UAAb,IAA2BwxB,IAAIC,OAAJ,CAAYrzB,MAAZ,GAAqB,CAA/E,EAAmF;AACjF;AACD;;AAED,WAAMszB,SAAS,KAAKl5B,SAAL,CAAem5B,WAAf,CAA2B,aAA3B,CAAf;AACA,WAAMC,SAASJ,IAAII,MAAJ,IAAcJ,IAAIK,UAAlB,IAAgCL,IAAIM,cAAnD;AACA,WAAI9xB,OAAO,IAAX;AACA,WAAI+xB,QAAQ,IAAZ;;AAEA,eAAQP,IAAIxxB,IAAZ;AACE,cAAK,YAAL;AACEA,kBAAO,WAAP;AACA+xB,mBAAQP,IAAIQ,cAAJ,CAAmB,CAAnB,CAAR;AACA;AACF,cAAK,WAAL;AACEhyB,kBAAO,WAAP;AACA+xB,mBAAQP,IAAIQ,cAAJ,CAAmB,CAAnB,CAAR;AACA;AACF,cAAK,UAAL;AACEhyB,kBAAO,SAAP;AACA+xB,mBAAQP,IAAIQ,cAAJ,CAAmB,CAAnB,CAAR;AACA;AACF;AACE;AAdJ;;AAiBA,WAAIhyB,SAAS,WAAT,IAAwB,CAAC,KAAKkwB,SAAlC,EAA6C;AAC3C;AACAwB,gBAAOO,cAAP,CAAsB,WAAtB,EAAmC,IAAnC,EAAyC,IAAzC,EAA+CL,OAAOhuB,aAAP,CAAqBC,WAApE,EAAiF,CAAjF,EACEkuB,MAAMG,OADR,EACiBH,MAAMI,OADvB,EACgCJ,MAAMK,OADtC,EAC+CL,MAAMM,OADrD,EAEEb,IAAIv5B,OAFN,EAEeu5B,IAAIc,MAFnB,EAE2Bd,IAAIt5B,QAF/B,EAEyCs5B,IAAIe,OAF7C,EAEsD,CAFtD,EAEyD,IAFzD;AAGAX,gBAAOY,aAAP,CAAqBd,MAArB;AACD;;AAEDA,cAAOO,cAAP,CAAsBjyB,IAAtB,EAA4B,IAA5B,EAAkC,IAAlC,EAAwC4xB,OAAOhuB,aAAP,CAAqBC,WAA7D,EAA0E,CAA1E,EACEkuB,MAAMG,OADR,EACiBH,MAAMI,OADvB,EACgCJ,MAAMK,OADtC,EAC+CL,MAAMM,OADrD,EAEEb,IAAIv5B,OAFN,EAEeu5B,IAAIc,MAFnB,EAE2Bd,IAAIt5B,QAF/B,EAEyCs5B,IAAIe,OAF7C,EAEsD,CAFtD,EAEyD,IAFzD;;AAIAX,cAAOY,aAAP,CAAqBd,MAArB;AACD;;AAED;;;;;;;mCAIc;AAAA,WACJp4B,OADI,GACQ,IADR,CACJA,OADI;AAEZ;;AACAA,eAAQiB,gBAAR,CAAyB,aAAzB,EAAwC,UAACgC,CAAD,EAAO;AAC7CA,WAAED,cAAF;AACA,gBAAO,KAAP;AACD,QAHD,EAGG,KAHH;;AAKA;AACAhD,eAAQiB,gBAAR,CAAyB,WAAzB,EAAsC,KAAKg1B,YAA3C,EAAyD,IAAzD;AACAj2B,eAAQiB,gBAAR,CAAyB,WAAzB,EAAsC,KAAKi1B,YAA3C,EAAyD,IAAzD;AACAl2B,eAAQiB,gBAAR,CAAyB,SAAzB,EAAoC,KAAKk1B,UAAzC,EAAqD,IAArD;;AAEAn2B,eAAQiB,gBAAR,CAAyB,UAAzB,EAAqC,KAAKm1B,QAA1C,EAAoD,IAApD;AACAp2B,eAAQiB,gBAAR,CAAyB,WAAzB,EAAsC,KAAKm1B,QAA3C,EAAqD,IAArD;AACAp2B,eAAQiB,gBAAR,CAAyB,UAAzB,EAAqC,KAAKm1B,QAA1C,EAAoD,IAApD;;AAEA,YAAK92B,GAAL,CAAS,oBAAT;AACD;;AAED;;;;;;;iCAIY;AACV,YAAKq3B,MAAL,GAAc,mBACZ,KAAKN,MAAL,GAAc,CADF,EAEZ,KAAKC,OAAL,GAAe,CAFH,EAGZ,KAAKD,MAAL,GAAc,CAHF,EAIZ,KAAKC,OAAL,GAAe,CAJH,EAKZ,sBALY,EAMZ,EANY,EAOZ,KAPY,CAON;AAPM,QAAd;AASA,YAAKI,MAAL,GAAc,KAAd;AACD;;AAED;;;;;;;oCAIe;AAAA,qBACc,KAAKC,MADnB;AAAA,WACLa,EADK,WACLA,EADK;AAAA,WACDC,EADC,WACDA,EADC;AAAA,WACGO,EADH,WACGA,EADH;AAAA,WACOC,EADP,WACOA,EADP;;;AAGb,cAAO,EAAE91B,GAAGq1B,EAAL,EAASp1B,GAAGq1B,EAAZ,EAAgBp1B,GAAG21B,EAAnB,EAAuB11B,GAAG21B,EAA1B,EAAP;AACD;;AAED;;;;;;6BAGQ;AACN,YAAK1B,IAAL,CAAU4C,SAAV,CAAoB,CAApB,EAAuB,CAAvB,EAA0B,KAAK9C,MAA/B,EAAuC,KAAKC,OAA5C;AACD;;AAED;;;;;;;4BAIO;AACL;AACA,WAAI,CAAC,KAAKI,MAAV,EAAkB;AAChB,cAAKp3B,GAAL,CAAS,eAAT;AADgB,aAERi3B,IAFQ,GAES,IAFT,CAERA,IAFQ;AAAA,aAEFI,MAFE,GAES,IAFT,CAEFA,MAFE;;AAGhB,cAAKyC,KAAL;;AAEA;AACA7C,cAAKzG,SAAL,GAAiB,gBAAjB;AACAyG,cAAKvG,SAAL;AACAuG,cAAKlF,IAAL,CAAUsF,OAAOa,EAAjB,EAAqBb,OAAOc,EAA5B,EAAgCd,OAAOqB,EAAvC,EAA2CrB,OAAOsB,EAAlD;AACA1B,cAAKlF,IAAL,CAAU,KAAKgF,MAAf,EAAuB,CAAvB,EAA0B,CAAC,KAAKA,MAAhC,EAAwC,KAAKC,OAA7C;AACAC,cAAKnG,IAAL;;AAEA;AACAuG,gBAAOO,IAAP,CAAYX,IAAZ;;AAEA,cAAKG,MAAL,GAAc,IAAd;;AAEA,cAAKp3B,GAAL,CAAS,YAAT,EAAuBq3B,OAAOa,EAA9B,EAAkCb,OAAOc,EAAzC,EAA6Cd,OAAOqB,EAApD,EAAwDrB,OAAOsB,EAA/D;AACD;AACF;;AAED;;;;;;;;+BAKU5Y,O,EAAS;AACjB,WAAIga,KAAKha,OAAT;AACA,WAAI1B,UAAU,CAAd;AACA,WAAIC,UAAU,CAAd;;AAEA;AACA,WAAIyb,GAAGzE,YAAH,KAAoB9jB,SAAxB,EAAmC;AACjC,YAAG;AACD6M,sBAAW0b,GAAGxE,UAAd;AACAjX,sBAAWyb,GAAGzkB,SAAd;AACAykB,gBAAKA,GAAGzE,YAAR;AACD,UAJD,QAISyE,EAJT;AAKD;;AAED;AACA1b,kBAAW,KAAK8Y,SAAhB;AACA7Y,kBAAW,KAAK4Y,QAAhB;;AAEA;AACA7Y,kBAAW,KAAKze,SAAL,CAAewB,IAAf,CAAoBgL,UAA/B;AACAkS,kBAAW,KAAK1e,SAAL,CAAewB,IAAf,CAAoB8K,SAA/B;;AAEA,cAAO;AACLrJ,YAAGwb,OADE;AAELvb,YAAGwb;AAFE,QAAP;AAID;;AAED;;;;;;;;;8BAMS3a,C,EAAG;AACV,WAAM+a,SAAS,KAAKsb,SAAL,CAAe,KAAKt5B,OAApB,CAAf;;AAEA,WAAMq3B,KAAKp0B,EAAEs2B,KAAF,GAAUvb,OAAO7b,CAA5B;AACA,WAAMm1B,KAAKr0B,EAAEu2B,KAAF,GAAUxb,OAAO5b,CAA5B;;AAEA,cAAO,EAAED,GAAGk1B,EAAL,EAASj1B,GAAGk1B,EAAZ,EAAP;AACD;;;;;;mBAtVkBvB,W;;;;;;;;;;;;;;;ACPrB;;;;;;;;;;;;AAEA;;;;KAIqB0D,I;;;AACnB;;;;;;;;;;AAUA,iBAAYt3B,CAAZ,EAAeC,CAAf,EAAkBC,CAAlB,EAAqBC,CAArB,EAAwB8tB,IAAxB,EAAsE;AAAA,SAAxCsJ,gBAAwC,yDAArB,CAAqB;AAAA,SAAlB1D,SAAkB,yDAAN,IAAM;;AAAA;;AAAA;;AAGpE,WAAK2D,iBAAL,GAAyB,EAAzB;AACA,WAAKC,iBAAL,GAAyBF,gBAAzB;AACA,UAAK,IAAIj1B,IAAI,CAAb,EAAgBA,IAAI,CAApB,EAAuBA,KAAK,CAA5B,EAA+B;AAC7B,aAAKk1B,iBAAL,CAAuB7xB,IAAvB,CAA4B,EAAE3F,GAAG,CAAL,EAAQC,GAAG,CAAX,EAA5B;AACD;;AAED,WAAKo1B,EAAL,GAAUr1B,KAAK,CAAf;AACA,WAAKs1B,EAAL,GAAUr1B,KAAK,CAAf;AACA,WAAK41B,EAAL,GAAU31B,KAAK,CAAf;AACA,WAAK41B,EAAL,GAAU31B,KAAK,CAAf;AACA,WAAKu3B,KAAL,GAAazJ,QAAQ,SAArB;AACA,WAAK/wB,UAAL,GAAkB22B,SAAlB;;AAEA,WAAK12B,GAAL,CAAS,aAAT;AAhBoE;AAiBrE;;AAED;;;;;;;;+BAIU;AACR,cAAO,MAAP;AACD;;AAED;;;;;;;0BAIKuC,G,EAAK;AAAA,WACA21B,EADA,GACgE,IADhE,CACAA,EADA;AAAA,WACIC,EADJ,GACgE,IADhE,CACIA,EADJ;AAAA,WACQO,EADR,GACgE,IADhE,CACQA,EADR;AAAA,WACYC,EADZ,GACgE,IADhE,CACYA,EADZ;AAAA,WACgB4B,KADhB,GACgE,IADhE,CACgBA,KADhB;AAAA,WACuBF,iBADvB,GACgE,IADhE,CACuBA,iBADvB;AAAA,WAC0CC,iBAD1C,GACgE,IADhE,CAC0CA,iBAD1C;;AAER/3B,WAAIiuB,SAAJ,GAAgB+J,KAAhB,CAFQ,CAEe;AACvBh4B,WAAI0uB,WAAJ,GAAkB,OAAlB,CAHQ,CAGmB;AAC3B1uB,WAAIiT,SAAJ,GAAgB,CAAhB,CAJQ,CAIW;AACnBjT,WAAIi4B,WAAJ,CAAgB,CAAC,CAAD,EAAI,CAAJ,CAAhB;AACAj4B,WAAIk4B,UAAJ,CAAevC,EAAf,EAAmBC,EAAnB,EAAuBO,EAAvB,EAA2BC,EAA3B;;AAEA,WAAM+B,OAAOJ,oBAAoB,CAAjC;;AAEA;AACAD,yBAAkB,CAAlB,EAAqBx3B,CAArB,GAAyBq1B,KAAKwC,IAA9B;AACAL,yBAAkB,CAAlB,EAAqBv3B,CAArB,GAAyBq1B,KAAKuC,IAA9B;;AAEAL,yBAAkB,CAAlB,EAAqBx3B,CAArB,GAAyBq1B,KAAKQ,KAAK,CAAV,GAAcgC,IAAvC;AACAL,yBAAkB,CAAlB,EAAqBv3B,CAArB,GAAyBq1B,KAAKuC,IAA9B;;AAEAL,yBAAkB,CAAlB,EAAqBx3B,CAArB,GAAyBq1B,KAAKQ,EAAL,GAAUgC,IAAnC;AACAL,yBAAkB,CAAlB,EAAqBv3B,CAArB,GAAyBq1B,KAAKuC,IAA9B;;AAEA;AACAL,yBAAkB,CAAlB,EAAqBx3B,CAArB,GAAyBq1B,KAAKwC,IAA9B;AACAL,yBAAkB,CAAlB,EAAqBv3B,CAArB,GAAyBq1B,KAAKQ,KAAK,CAAV,GAAc+B,IAAvC;;AAEA;AACAL,yBAAkB,CAAlB,EAAqBx3B,CAArB,GAAyBq1B,KAAKQ,EAAL,GAAUgC,IAAnC;AACAL,yBAAkB,CAAlB,EAAqBv3B,CAArB,GAAyBq1B,KAAKQ,KAAK,CAAV,GAAc+B,IAAvC;;AAEA;AACAL,yBAAkB,CAAlB,EAAqBx3B,CAArB,GAAyBq1B,KAAKQ,KAAK,CAAV,GAAcgC,IAAvC;AACAL,yBAAkB,CAAlB,EAAqBv3B,CAArB,GAAyBq1B,KAAKQ,EAAL,GAAU+B,IAAnC;;AAEAL,yBAAkB,CAAlB,EAAqBx3B,CAArB,GAAyBq1B,KAAKwC,IAA9B;AACAL,yBAAkB,CAAlB,EAAqBv3B,CAArB,GAAyBq1B,KAAKQ,EAAL,GAAU+B,IAAnC;;AAEAL,yBAAkB,CAAlB,EAAqBx3B,CAArB,GAAyBq1B,KAAKQ,EAAL,GAAUgC,IAAnC;AACAL,yBAAkB,CAAlB,EAAqBv3B,CAArB,GAAyBq1B,KAAKQ,EAAL,GAAU+B,IAAnC;;AAEA,YAAK16B,GAAL,CAAS,yBAAT;AACAuC,WAAIiuB,SAAJ,GAAgB,OAAhB,CAvCQ,CAuCiB;AACzB6J,yBAAkBziB,OAAlB,CAA0B,UAAC+iB,GAAD,EAAS;AACjCp4B,aAAIkuB,QAAJ,CAAakK,IAAI93B,CAAjB,EAAoB83B,IAAI73B,CAAxB,EAA2Bw3B,iBAA3B,EAA8CA,iBAA9C;AACD,QAFD;;AAIA,YAAKt6B,GAAL,CAAS,uBAAT,EAAkCk4B,EAAlC,EAAsCC,EAAtC,EAA0CO,EAA1C,EAA8CC,EAA9C;AACD;;AAED;;;;;;;;;8BAMSZ,E,EAAIC,E,EAAI;AAAA,WACPE,EADO,GACY,IADZ,CACPA,EADO;AAAA,WACHC,EADG,GACY,IADZ,CACHA,EADG;AAAA,WACCO,EADD,GACY,IADZ,CACCA,EADD;AAAA,WACKC,EADL,GACY,IADZ,CACKA,EADL;;AAEf,cAAQT,MAAMH,EAAP,IAAeG,KAAKQ,EAAL,IAAWX,EAA1B,IACJI,MAAMH,EADF,IACUG,KAAKQ,EAAL,IAAWX,EAD5B;AAED;;AAED;;;;;;;;;6CAMwBD,E,EAAIC,E,EAAI;AAAA,WACtBqC,iBADsB,GACmB,IADnB,CACtBA,iBADsB;AAAA,WACHC,iBADG,GACmB,IADnB,CACHA,iBADG;;AAE9B,YAAK,IAAIn1B,IAAI,CAAb,EAAgBA,IAAIk1B,kBAAkB70B,MAAtC,EAA8CL,KAAK,CAAnD,EAAsD;AACpD,aAAMy1B,SAASP,kBAAkBl1B,CAAlB,CAAf;AACA,aACGy1B,OAAO/3B,CAAP,IAAYk1B,EAAb,IACC6C,OAAO/3B,CAAP,GAAWy3B,iBAAX,IAAgCvC,EADjC,IAEC6C,OAAO93B,CAAP,IAAYk1B,EAFb,IAGC4C,OAAO93B,CAAP,GAAWw3B,iBAAX,IAAgCtC,EAJnC,EAKE;AACA,kBAAO7yB,CAAP;AACD;AACF;;AAED,cAAO,KAAP;AACD;;;;;;mBA1HkBg1B,I","file":"HtmlCrop.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"HtmlCrop\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"HtmlCrop\"] = factory();\n\telse\n\t\troot[\"HtmlCrop\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 75ec16eefa6b80588a47\n **/","import html2canvas from 'html2canvas';\nimport BaseObject from './base-object';\nimport CanvasState from './canvas-state';\n\nconst defaultOptions = {\n  key: {\n    ctrlKey: false,\n    shiftKey: true,\n    key: 'F7'\n  },\n  startButton: true,\n  debug: true\n};\n\nexport default class HtmlCrop extends BaseObject {\n  /**\n   * object constructor\n   * @param {HTMLDocument} doc\n   * @param {Object} options\n   */\n  constructor(doc, options = {}) {\n    super();\n\n    this._document = doc;\n    this.options = Object.assign({}, defaultOptions, options);\n    this._debugMode = options.debug;\n    this.log('initialized');\n\n    // bind this context into keydown event here\n    // because it needs to be removed later\n    this._onKeyDown = this._onKeyDown.bind(this);\n\n    this.reset();\n  }\n\n  /**\n   * resets to starting state\n   */\n  reset() {\n    this._listenHotKey();\n\n    if (this.options.startButton) {\n      this._attachStartButton();\n    }\n  }\n\n  /**\n   * starts cropping the page\n   */\n  startCropping() {\n    this._disableScroll();\n\n    html2canvas(this._document.html).then((canvas) => {\n      this._canvas = canvas;\n\n      const selectionCanvas = this._document.createElement('canvas');\n      this._selectionCanvas = selectionCanvas;\n      selectionCanvas.width = canvas.width;\n      selectionCanvas.height = canvas.height;\n      selectionCanvas.style.position = 'fixed';\n      selectionCanvas.style.left = '0';\n      selectionCanvas.style.top = '0';\n      selectionCanvas.style['z-index'] = 9999998;\n\n      this._document.body.appendChild(selectionCanvas);\n\n      // debug mode is set as false because of lots of logging\n      this._canvasState = new CanvasState(this._document, selectionCanvas, true);\n\n      // removes start button and event listener to avoid multiple cropping instances\n      if (this._startButton) {\n        this._document.body.removeChild(this._startButton);\n      }\n      this._document.removeEventListener('keydown', this._onKeyDown);\n      this._attachCaptureButton();\n    });\n  }\n\n  /**\n   * ends cropping\n   */\n  endCropping() {\n\n  }\n\n  /**\n   * returns class name\n   * @returns {string}\n   */\n  getName() {\n    return 'HtmlCrop';\n  }\n\n  /**\n   * attaches listener which triggers cropping\n   */\n  _listenHotKey() {\n    this._document.addEventListener('keydown', this._onKeyDown);\n  }\n\n  /**\n   * attaches start cropping button\n   */\n  _attachStartButton() {\n    const { _document } = this;\n    const button = _document.createElement('button');\n    const textNode = _document.createTextNode('Start Cropping');\n    button.appendChild(textNode);\n    button.style.position = 'fixed';\n    button.style.right = '30px';\n    button.style.bottom = '30px';\n    button.style['z-index'] = 9999998;\n    button.onclick = this.startCropping.bind(this);\n\n    this._startButton = button;\n    _document.body.appendChild(button);\n  }\n\n  /**\n   * attaches button to capture\n   * @private\n   */\n  _attachCaptureButton() {\n    const { _document } = this;\n    const button = _document.createElement('button');\n    const textNode = _document.createTextNode('Capture');\n    button.appendChild(textNode);\n    button.style.position = 'fixed';\n    button.style.right = '30px';\n    button.style.bottom = '30px';\n    button.style['z-index'] = 9999998;\n    button.onclick = this._onCapture.bind(this);\n\n    this._captureButton = button;\n    _document.body.appendChild(button);\n  }\n\n  /*\n   * handles key down for hot key capturing\n   * @param {KeyboardEvent} event\n   */\n  _onKeyDown(event) {\n    const {\n      key,\n      ctrlKey,\n      shiftKey\n    } = event;\n    const {\n      key: keyOptions\n    } = this.options;\n\n    this.log(`keydown detected: ctrl=${ctrlKey} shift=${shiftKey} key=${key}`);\n\n    if (key === keyOptions.key && ctrlKey === keyOptions.ctrlKey && keyOptions.shiftKey) {\n      this.log('key down matches with setting. starts cropping');\n      this.startCropping();\n    }\n  }\n\n  /**\n   * capture button click handler\n   * @private\n   */\n  _onCapture() {\n    const ctx = this._canvas.getContext('2d');\n    const selection = this._canvasState.getSelection();\n    const imgData = ctx.getImageData(selection.x, selection.y, selection.w, selection.h);\n\n    const newCanvas = this._document.createElement('canvas');\n    newCanvas.width = selection.w;\n    newCanvas.height = selection.h;\n    const newCtx = newCanvas.getContext('2d');\n    newCtx.putImageData(imgData, 0, 0);\n\n    this._enableScroll();\n\n    const dataURL = newCanvas.toDataURL('image/png');\n\n    // @TODO save dataURL to server\n    window.location.href = dataURL; // eslint-disable-line\n  }\n\n  /**\n   * disables scrolling temporaily\n   * @private\n   */\n  _disableScroll() {\n    const preventDefault = (e = {}) => {\n      if (e.preventDefault) {\n        e.preventDefault();\n      }\n      e.returnValue = false;\n    };\n\n    // disable scrolling with keys\n    // left: 37, up: 38, right: 39, down: 40,\n    // spacebar: 32, pageup: 33, pagedown: 34, end: 35, home: 36\n    const preventDefaultForScrollKeys = (e) => {\n      const keys = [32, 33, 34, 35, 36, 37, 38, 39, 40];\n      if (keys.indexOf(e.keyCode) !== -1) {\n        preventDefault(e);\n        return false;\n      }\n    };\n\n    this._document.onkeydown = preventDefaultForScrollKeys;\n    this._document.onmousewheel = preventDefault;\n  }\n\n  /**\n   * enables scrolling\n   * @private\n   */\n  _enableScroll() {\n    this._document.onkeydown = null;\n    this._document.onmousewheel = null;\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/index.js\n **/","/*\n  html2canvas 0.5.0-beta4 <http://html2canvas.hertzen.com>\n  Copyright (c) 2016 Niklas von Hertzen\n\n  Released under  License\n*/\n\n(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.html2canvas = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(_dereq_,module,exports){\n(function (global){\n/*! https://mths.be/punycode v1.4.0 by @mathias */\n;(function(root) {\n\n\t/** Detect free variables */\n\tvar freeExports = typeof exports == 'object' && exports &&\n\t\t!exports.nodeType && exports;\n\tvar freeModule = typeof module == 'object' && module &&\n\t\t!module.nodeType && module;\n\tvar freeGlobal = typeof global == 'object' && global;\n\tif (\n\t\tfreeGlobal.global === freeGlobal ||\n\t\tfreeGlobal.window === freeGlobal ||\n\t\tfreeGlobal.self === freeGlobal\n\t) {\n\t\troot = freeGlobal;\n\t}\n\n\t/**\n\t * The `punycode` object.\n\t * @name punycode\n\t * @type Object\n\t */\n\tvar punycode,\n\n\t/** Highest positive signed 32-bit float value */\n\tmaxInt = 2147483647, // aka. 0x7FFFFFFF or 2^31-1\n\n\t/** Bootstring parameters */\n\tbase = 36,\n\ttMin = 1,\n\ttMax = 26,\n\tskew = 38,\n\tdamp = 700,\n\tinitialBias = 72,\n\tinitialN = 128, // 0x80\n\tdelimiter = '-', // '\\x2D'\n\n\t/** Regular expressions */\n\tregexPunycode = /^xn--/,\n\tregexNonASCII = /[^\\x20-\\x7E]/, // unprintable ASCII chars + non-ASCII chars\n\tregexSeparators = /[\\x2E\\u3002\\uFF0E\\uFF61]/g, // RFC 3490 separators\n\n\t/** Error messages */\n\terrors = {\n\t\t'overflow': 'Overflow: input needs wider integers to process',\n\t\t'not-basic': 'Illegal input >= 0x80 (not a basic code point)',\n\t\t'invalid-input': 'Invalid input'\n\t},\n\n\t/** Convenience shortcuts */\n\tbaseMinusTMin = base - tMin,\n\tfloor = Math.floor,\n\tstringFromCharCode = String.fromCharCode,\n\n\t/** Temporary variable */\n\tkey;\n\n\t/*--------------------------------------------------------------------------*/\n\n\t/**\n\t * A generic error utility function.\n\t * @private\n\t * @param {String} type The error type.\n\t * @returns {Error} Throws a `RangeError` with the applicable error message.\n\t */\n\tfunction error(type) {\n\t\tthrow new RangeError(errors[type]);\n\t}\n\n\t/**\n\t * A generic `Array#map` utility function.\n\t * @private\n\t * @param {Array} array The array to iterate over.\n\t * @param {Function} callback The function that gets called for every array\n\t * item.\n\t * @returns {Array} A new array of values returned by the callback function.\n\t */\n\tfunction map(array, fn) {\n\t\tvar length = array.length;\n\t\tvar result = [];\n\t\twhile (length--) {\n\t\t\tresult[length] = fn(array[length]);\n\t\t}\n\t\treturn result;\n\t}\n\n\t/**\n\t * A simple `Array#map`-like wrapper to work with domain name strings or email\n\t * addresses.\n\t * @private\n\t * @param {String} domain The domain name or email address.\n\t * @param {Function} callback The function that gets called for every\n\t * character.\n\t * @returns {Array} A new string of characters returned by the callback\n\t * function.\n\t */\n\tfunction mapDomain(string, fn) {\n\t\tvar parts = string.split('@');\n\t\tvar result = '';\n\t\tif (parts.length > 1) {\n\t\t\t// In email addresses, only the domain name should be punycoded. Leave\n\t\t\t// the local part (i.e. everything up to `@`) intact.\n\t\t\tresult = parts[0] + '@';\n\t\t\tstring = parts[1];\n\t\t}\n\t\t// Avoid `split(regex)` for IE8 compatibility. See #17.\n\t\tstring = string.replace(regexSeparators, '\\x2E');\n\t\tvar labels = string.split('.');\n\t\tvar encoded = map(labels, fn).join('.');\n\t\treturn result + encoded;\n\t}\n\n\t/**\n\t * Creates an array containing the numeric code points of each Unicode\n\t * character in the string. While JavaScript uses UCS-2 internally,\n\t * this function will convert a pair of surrogate halves (each of which\n\t * UCS-2 exposes as separate characters) into a single code point,\n\t * matching UTF-16.\n\t * @see `punycode.ucs2.encode`\n\t * @see <https://mathiasbynens.be/notes/javascript-encoding>\n\t * @memberOf punycode.ucs2\n\t * @name decode\n\t * @param {String} string The Unicode input string (UCS-2).\n\t * @returns {Array} The new array of code points.\n\t */\n\tfunction ucs2decode(string) {\n\t\tvar output = [],\n\t\t    counter = 0,\n\t\t    length = string.length,\n\t\t    value,\n\t\t    extra;\n\t\twhile (counter < length) {\n\t\t\tvalue = string.charCodeAt(counter++);\n\t\t\tif (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n\t\t\t\t// high surrogate, and there is a next character\n\t\t\t\textra = string.charCodeAt(counter++);\n\t\t\t\tif ((extra & 0xFC00) == 0xDC00) { // low surrogate\n\t\t\t\t\toutput.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n\t\t\t\t} else {\n\t\t\t\t\t// unmatched surrogate; only append this code unit, in case the next\n\t\t\t\t\t// code unit is the high surrogate of a surrogate pair\n\t\t\t\t\toutput.push(value);\n\t\t\t\t\tcounter--;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\toutput.push(value);\n\t\t\t}\n\t\t}\n\t\treturn output;\n\t}\n\n\t/**\n\t * Creates a string based on an array of numeric code points.\n\t * @see `punycode.ucs2.decode`\n\t * @memberOf punycode.ucs2\n\t * @name encode\n\t * @param {Array} codePoints The array of numeric code points.\n\t * @returns {String} The new Unicode string (UCS-2).\n\t */\n\tfunction ucs2encode(array) {\n\t\treturn map(array, function(value) {\n\t\t\tvar output = '';\n\t\t\tif (value > 0xFFFF) {\n\t\t\t\tvalue -= 0x10000;\n\t\t\t\toutput += stringFromCharCode(value >>> 10 & 0x3FF | 0xD800);\n\t\t\t\tvalue = 0xDC00 | value & 0x3FF;\n\t\t\t}\n\t\t\toutput += stringFromCharCode(value);\n\t\t\treturn output;\n\t\t}).join('');\n\t}\n\n\t/**\n\t * Converts a basic code point into a digit/integer.\n\t * @see `digitToBasic()`\n\t * @private\n\t * @param {Number} codePoint The basic numeric code point value.\n\t * @returns {Number} The numeric value of a basic code point (for use in\n\t * representing integers) in the range `0` to `base - 1`, or `base` if\n\t * the code point does not represent a value.\n\t */\n\tfunction basicToDigit(codePoint) {\n\t\tif (codePoint - 48 < 10) {\n\t\t\treturn codePoint - 22;\n\t\t}\n\t\tif (codePoint - 65 < 26) {\n\t\t\treturn codePoint - 65;\n\t\t}\n\t\tif (codePoint - 97 < 26) {\n\t\t\treturn codePoint - 97;\n\t\t}\n\t\treturn base;\n\t}\n\n\t/**\n\t * Converts a digit/integer into a basic code point.\n\t * @see `basicToDigit()`\n\t * @private\n\t * @param {Number} digit The numeric value of a basic code point.\n\t * @returns {Number} The basic code point whose value (when used for\n\t * representing integers) is `digit`, which needs to be in the range\n\t * `0` to `base - 1`. If `flag` is non-zero, the uppercase form is\n\t * used; else, the lowercase form is used. The behavior is undefined\n\t * if `flag` is non-zero and `digit` has no uppercase form.\n\t */\n\tfunction digitToBasic(digit, flag) {\n\t\t//  0..25 map to ASCII a..z or A..Z\n\t\t// 26..35 map to ASCII 0..9\n\t\treturn digit + 22 + 75 * (digit < 26) - ((flag != 0) << 5);\n\t}\n\n\t/**\n\t * Bias adaptation function as per section 3.4 of RFC 3492.\n\t * https://tools.ietf.org/html/rfc3492#section-3.4\n\t * @private\n\t */\n\tfunction adapt(delta, numPoints, firstTime) {\n\t\tvar k = 0;\n\t\tdelta = firstTime ? floor(delta / damp) : delta >> 1;\n\t\tdelta += floor(delta / numPoints);\n\t\tfor (/* no initialization */; delta > baseMinusTMin * tMax >> 1; k += base) {\n\t\t\tdelta = floor(delta / baseMinusTMin);\n\t\t}\n\t\treturn floor(k + (baseMinusTMin + 1) * delta / (delta + skew));\n\t}\n\n\t/**\n\t * Converts a Punycode string of ASCII-only symbols to a string of Unicode\n\t * symbols.\n\t * @memberOf punycode\n\t * @param {String} input The Punycode string of ASCII-only symbols.\n\t * @returns {String} The resulting string of Unicode symbols.\n\t */\n\tfunction decode(input) {\n\t\t// Don't use UCS-2\n\t\tvar output = [],\n\t\t    inputLength = input.length,\n\t\t    out,\n\t\t    i = 0,\n\t\t    n = initialN,\n\t\t    bias = initialBias,\n\t\t    basic,\n\t\t    j,\n\t\t    index,\n\t\t    oldi,\n\t\t    w,\n\t\t    k,\n\t\t    digit,\n\t\t    t,\n\t\t    /** Cached calculation results */\n\t\t    baseMinusT;\n\n\t\t// Handle the basic code points: let `basic` be the number of input code\n\t\t// points before the last delimiter, or `0` if there is none, then copy\n\t\t// the first basic code points to the output.\n\n\t\tbasic = input.lastIndexOf(delimiter);\n\t\tif (basic < 0) {\n\t\t\tbasic = 0;\n\t\t}\n\n\t\tfor (j = 0; j < basic; ++j) {\n\t\t\t// if it's not a basic code point\n\t\t\tif (input.charCodeAt(j) >= 0x80) {\n\t\t\t\terror('not-basic');\n\t\t\t}\n\t\t\toutput.push(input.charCodeAt(j));\n\t\t}\n\n\t\t// Main decoding loop: start just after the last delimiter if any basic code\n\t\t// points were copied; start at the beginning otherwise.\n\n\t\tfor (index = basic > 0 ? basic + 1 : 0; index < inputLength; /* no final expression */) {\n\n\t\t\t// `index` is the index of the next character to be consumed.\n\t\t\t// Decode a generalized variable-length integer into `delta`,\n\t\t\t// which gets added to `i`. The overflow checking is easier\n\t\t\t// if we increase `i` as we go, then subtract off its starting\n\t\t\t// value at the end to obtain `delta`.\n\t\t\tfor (oldi = i, w = 1, k = base; /* no condition */; k += base) {\n\n\t\t\t\tif (index >= inputLength) {\n\t\t\t\t\terror('invalid-input');\n\t\t\t\t}\n\n\t\t\t\tdigit = basicToDigit(input.charCodeAt(index++));\n\n\t\t\t\tif (digit >= base || digit > floor((maxInt - i) / w)) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\ti += digit * w;\n\t\t\t\tt = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\n\t\t\t\tif (digit < t) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tbaseMinusT = base - t;\n\t\t\t\tif (w > floor(maxInt / baseMinusT)) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\tw *= baseMinusT;\n\n\t\t\t}\n\n\t\t\tout = output.length + 1;\n\t\t\tbias = adapt(i - oldi, out, oldi == 0);\n\n\t\t\t// `i` was supposed to wrap around from `out` to `0`,\n\t\t\t// incrementing `n` each time, so we'll fix that now:\n\t\t\tif (floor(i / out) > maxInt - n) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\tn += floor(i / out);\n\t\t\ti %= out;\n\n\t\t\t// Insert `n` at position `i` of the output\n\t\t\toutput.splice(i++, 0, n);\n\n\t\t}\n\n\t\treturn ucs2encode(output);\n\t}\n\n\t/**\n\t * Converts a string of Unicode symbols (e.g. a domain name label) to a\n\t * Punycode string of ASCII-only symbols.\n\t * @memberOf punycode\n\t * @param {String} input The string of Unicode symbols.\n\t * @returns {String} The resulting Punycode string of ASCII-only symbols.\n\t */\n\tfunction encode(input) {\n\t\tvar n,\n\t\t    delta,\n\t\t    handledCPCount,\n\t\t    basicLength,\n\t\t    bias,\n\t\t    j,\n\t\t    m,\n\t\t    q,\n\t\t    k,\n\t\t    t,\n\t\t    currentValue,\n\t\t    output = [],\n\t\t    /** `inputLength` will hold the number of code points in `input`. */\n\t\t    inputLength,\n\t\t    /** Cached calculation results */\n\t\t    handledCPCountPlusOne,\n\t\t    baseMinusT,\n\t\t    qMinusT;\n\n\t\t// Convert the input in UCS-2 to Unicode\n\t\tinput = ucs2decode(input);\n\n\t\t// Cache the length\n\t\tinputLength = input.length;\n\n\t\t// Initialize the state\n\t\tn = initialN;\n\t\tdelta = 0;\n\t\tbias = initialBias;\n\n\t\t// Handle the basic code points\n\t\tfor (j = 0; j < inputLength; ++j) {\n\t\t\tcurrentValue = input[j];\n\t\t\tif (currentValue < 0x80) {\n\t\t\t\toutput.push(stringFromCharCode(currentValue));\n\t\t\t}\n\t\t}\n\n\t\thandledCPCount = basicLength = output.length;\n\n\t\t// `handledCPCount` is the number of code points that have been handled;\n\t\t// `basicLength` is the number of basic code points.\n\n\t\t// Finish the basic string - if it is not empty - with a delimiter\n\t\tif (basicLength) {\n\t\t\toutput.push(delimiter);\n\t\t}\n\n\t\t// Main encoding loop:\n\t\twhile (handledCPCount < inputLength) {\n\n\t\t\t// All non-basic code points < n have been handled already. Find the next\n\t\t\t// larger one:\n\t\t\tfor (m = maxInt, j = 0; j < inputLength; ++j) {\n\t\t\t\tcurrentValue = input[j];\n\t\t\t\tif (currentValue >= n && currentValue < m) {\n\t\t\t\t\tm = currentValue;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Increase `delta` enough to advance the decoder's <n,i> state to <m,0>,\n\t\t\t// but guard against overflow\n\t\t\thandledCPCountPlusOne = handledCPCount + 1;\n\t\t\tif (m - n > floor((maxInt - delta) / handledCPCountPlusOne)) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\tdelta += (m - n) * handledCPCountPlusOne;\n\t\t\tn = m;\n\n\t\t\tfor (j = 0; j < inputLength; ++j) {\n\t\t\t\tcurrentValue = input[j];\n\n\t\t\t\tif (currentValue < n && ++delta > maxInt) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\tif (currentValue == n) {\n\t\t\t\t\t// Represent delta as a generalized variable-length integer\n\t\t\t\t\tfor (q = delta, k = base; /* no condition */; k += base) {\n\t\t\t\t\t\tt = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\t\t\t\t\t\tif (q < t) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tqMinusT = q - t;\n\t\t\t\t\t\tbaseMinusT = base - t;\n\t\t\t\t\t\toutput.push(\n\t\t\t\t\t\t\tstringFromCharCode(digitToBasic(t + qMinusT % baseMinusT, 0))\n\t\t\t\t\t\t);\n\t\t\t\t\t\tq = floor(qMinusT / baseMinusT);\n\t\t\t\t\t}\n\n\t\t\t\t\toutput.push(stringFromCharCode(digitToBasic(q, 0)));\n\t\t\t\t\tbias = adapt(delta, handledCPCountPlusOne, handledCPCount == basicLength);\n\t\t\t\t\tdelta = 0;\n\t\t\t\t\t++handledCPCount;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t++delta;\n\t\t\t++n;\n\n\t\t}\n\t\treturn output.join('');\n\t}\n\n\t/**\n\t * Converts a Punycode string representing a domain name or an email address\n\t * to Unicode. Only the Punycoded parts of the input will be converted, i.e.\n\t * it doesn't matter if you call it on a string that has already been\n\t * converted to Unicode.\n\t * @memberOf punycode\n\t * @param {String} input The Punycoded domain name or email address to\n\t * convert to Unicode.\n\t * @returns {String} The Unicode representation of the given Punycode\n\t * string.\n\t */\n\tfunction toUnicode(input) {\n\t\treturn mapDomain(input, function(string) {\n\t\t\treturn regexPunycode.test(string)\n\t\t\t\t? decode(string.slice(4).toLowerCase())\n\t\t\t\t: string;\n\t\t});\n\t}\n\n\t/**\n\t * Converts a Unicode string representing a domain name or an email address to\n\t * Punycode. Only the non-ASCII parts of the domain name will be converted,\n\t * i.e. it doesn't matter if you call it with a domain that's already in\n\t * ASCII.\n\t * @memberOf punycode\n\t * @param {String} input The domain name or email address to convert, as a\n\t * Unicode string.\n\t * @returns {String} The Punycode representation of the given domain name or\n\t * email address.\n\t */\n\tfunction toASCII(input) {\n\t\treturn mapDomain(input, function(string) {\n\t\t\treturn regexNonASCII.test(string)\n\t\t\t\t? 'xn--' + encode(string)\n\t\t\t\t: string;\n\t\t});\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\t/** Define the public API */\n\tpunycode = {\n\t\t/**\n\t\t * A string representing the current Punycode.js version number.\n\t\t * @memberOf punycode\n\t\t * @type String\n\t\t */\n\t\t'version': '1.3.2',\n\t\t/**\n\t\t * An object of methods to convert from JavaScript's internal character\n\t\t * representation (UCS-2) to Unicode code points, and back.\n\t\t * @see <https://mathiasbynens.be/notes/javascript-encoding>\n\t\t * @memberOf punycode\n\t\t * @type Object\n\t\t */\n\t\t'ucs2': {\n\t\t\t'decode': ucs2decode,\n\t\t\t'encode': ucs2encode\n\t\t},\n\t\t'decode': decode,\n\t\t'encode': encode,\n\t\t'toASCII': toASCII,\n\t\t'toUnicode': toUnicode\n\t};\n\n\t/** Expose `punycode` */\n\t// Some AMD build optimizers, like r.js, check for specific condition patterns\n\t// like the following:\n\tif (\n\t\ttypeof define == 'function' &&\n\t\ttypeof define.amd == 'object' &&\n\t\tdefine.amd\n\t) {\n\t\tdefine('punycode', function() {\n\t\t\treturn punycode;\n\t\t});\n\t} else if (freeExports && freeModule) {\n\t\tif (module.exports == freeExports) {\n\t\t\t// in Node.js, io.js, or RingoJS v0.8.0+\n\t\t\tfreeModule.exports = punycode;\n\t\t} else {\n\t\t\t// in Narwhal or RingoJS v0.7.0-\n\t\t\tfor (key in punycode) {\n\t\t\t\tpunycode.hasOwnProperty(key) && (freeExports[key] = punycode[key]);\n\t\t\t}\n\t\t}\n\t} else {\n\t\t// in Rhino or a web browser\n\t\troot.punycode = punycode;\n\t}\n\n}(this));\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{}],2:[function(_dereq_,module,exports){\nvar log = _dereq_('./log');\n\nfunction restoreOwnerScroll(ownerDocument, x, y) {\n    if (ownerDocument.defaultView && (x !== ownerDocument.defaultView.pageXOffset || y !== ownerDocument.defaultView.pageYOffset)) {\n        ownerDocument.defaultView.scrollTo(x, y);\n    }\n}\n\nfunction cloneCanvasContents(canvas, clonedCanvas) {\n    try {\n        if (clonedCanvas) {\n            clonedCanvas.width = canvas.width;\n            clonedCanvas.height = canvas.height;\n            clonedCanvas.getContext(\"2d\").putImageData(canvas.getContext(\"2d\").getImageData(0, 0, canvas.width, canvas.height), 0, 0);\n        }\n    } catch(e) {\n        log(\"Unable to copy canvas content from\", canvas, e);\n    }\n}\n\nfunction cloneNode(node, javascriptEnabled) {\n    var clone = node.nodeType === 3 ? document.createTextNode(node.nodeValue) : node.cloneNode(false);\n\n    var child = node.firstChild;\n    while(child) {\n        if (javascriptEnabled === true || child.nodeType !== 1 || child.nodeName !== 'SCRIPT') {\n            clone.appendChild(cloneNode(child, javascriptEnabled));\n        }\n        child = child.nextSibling;\n    }\n\n    if (node.nodeType === 1) {\n        clone._scrollTop = node.scrollTop;\n        clone._scrollLeft = node.scrollLeft;\n        if (node.nodeName === \"CANVAS\") {\n            cloneCanvasContents(node, clone);\n        } else if (node.nodeName === \"TEXTAREA\" || node.nodeName === \"SELECT\") {\n            clone.value = node.value;\n        }\n    }\n\n    return clone;\n}\n\nfunction initNode(node) {\n    if (node.nodeType === 1) {\n        node.scrollTop = node._scrollTop;\n        node.scrollLeft = node._scrollLeft;\n\n        var child = node.firstChild;\n        while(child) {\n            initNode(child);\n            child = child.nextSibling;\n        }\n    }\n}\n\nmodule.exports = function(ownerDocument, containerDocument, width, height, options, x ,y) {\n    var documentElement = cloneNode(ownerDocument.documentElement, options.javascriptEnabled);\n    var container = containerDocument.createElement(\"iframe\");\n\n    container.className = \"html2canvas-container\";\n    container.style.visibility = \"hidden\";\n    container.style.position = \"fixed\";\n    container.style.left = \"-10000px\";\n    container.style.top = \"0px\";\n    container.style.border = \"0\";\n    container.width = width;\n    container.height = height;\n    container.scrolling = \"no\"; // ios won't scroll without it\n    containerDocument.body.appendChild(container);\n\n    return new Promise(function(resolve) {\n        var documentClone = container.contentWindow.document;\n\n        /* Chrome doesn't detect relative background-images assigned in inline <style> sheets when fetched through getComputedStyle\n         if window url is about:blank, we can assign the url to current by writing onto the document\n         */\n        container.contentWindow.onload = container.onload = function() {\n            var interval = setInterval(function() {\n                if (documentClone.body.childNodes.length > 0) {\n                    initNode(documentClone.documentElement);\n                    clearInterval(interval);\n                    if (options.type === \"view\") {\n                        container.contentWindow.scrollTo(x, y);\n                        if ((/(iPad|iPhone|iPod)/g).test(navigator.userAgent) && (container.contentWindow.scrollY !== y || container.contentWindow.scrollX !== x)) {\n                            documentClone.documentElement.style.top = (-y) + \"px\";\n                            documentClone.documentElement.style.left = (-x) + \"px\";\n                            documentClone.documentElement.style.position = 'absolute';\n                        }\n                    }\n                    resolve(container);\n                }\n            }, 50);\n        };\n\n        documentClone.open();\n        documentClone.write(\"<!DOCTYPE html><html></html>\");\n        // Chrome scrolls the parent document for some reason after the write to the cloned window???\n        restoreOwnerScroll(ownerDocument, x, y);\n        documentClone.replaceChild(documentClone.adoptNode(documentElement), documentClone.documentElement);\n        documentClone.close();\n    });\n};\n\n},{\"./log\":13}],3:[function(_dereq_,module,exports){\n// http://dev.w3.org/csswg/css-color/\n\nfunction Color(value) {\n    this.r = 0;\n    this.g = 0;\n    this.b = 0;\n    this.a = null;\n    var result = this.fromArray(value) ||\n        this.namedColor(value) ||\n        this.rgb(value) ||\n        this.rgba(value) ||\n        this.hex6(value) ||\n        this.hex3(value);\n}\n\nColor.prototype.darken = function(amount) {\n    var a = 1 - amount;\n    return  new Color([\n        Math.round(this.r * a),\n        Math.round(this.g * a),\n        Math.round(this.b * a),\n        this.a\n    ]);\n};\n\nColor.prototype.isTransparent = function() {\n    return this.a === 0;\n};\n\nColor.prototype.isBlack = function() {\n    return this.r === 0 && this.g === 0 && this.b === 0;\n};\n\nColor.prototype.fromArray = function(array) {\n    if (Array.isArray(array)) {\n        this.r = Math.min(array[0], 255);\n        this.g = Math.min(array[1], 255);\n        this.b = Math.min(array[2], 255);\n        if (array.length > 3) {\n            this.a = array[3];\n        }\n    }\n\n    return (Array.isArray(array));\n};\n\nvar _hex3 = /^#([a-f0-9]{3})$/i;\n\nColor.prototype.hex3 = function(value) {\n    var match = null;\n    if ((match = value.match(_hex3)) !== null) {\n        this.r = parseInt(match[1][0] + match[1][0], 16);\n        this.g = parseInt(match[1][1] + match[1][1], 16);\n        this.b = parseInt(match[1][2] + match[1][2], 16);\n    }\n    return match !== null;\n};\n\nvar _hex6 = /^#([a-f0-9]{6})$/i;\n\nColor.prototype.hex6 = function(value) {\n    var match = null;\n    if ((match = value.match(_hex6)) !== null) {\n        this.r = parseInt(match[1].substring(0, 2), 16);\n        this.g = parseInt(match[1].substring(2, 4), 16);\n        this.b = parseInt(match[1].substring(4, 6), 16);\n    }\n    return match !== null;\n};\n\n\nvar _rgb = /^rgb\\(\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*\\)$/;\n\nColor.prototype.rgb = function(value) {\n    var match = null;\n    if ((match = value.match(_rgb)) !== null) {\n        this.r = Number(match[1]);\n        this.g = Number(match[2]);\n        this.b = Number(match[3]);\n    }\n    return match !== null;\n};\n\nvar _rgba = /^rgba\\(\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d?\\.?\\d+)\\s*\\)$/;\n\nColor.prototype.rgba = function(value) {\n    var match = null;\n    if ((match = value.match(_rgba)) !== null) {\n        this.r = Number(match[1]);\n        this.g = Number(match[2]);\n        this.b = Number(match[3]);\n        this.a = Number(match[4]);\n    }\n    return match !== null;\n};\n\nColor.prototype.toString = function() {\n    return this.a !== null && this.a !== 1 ?\n    \"rgba(\" + [this.r, this.g, this.b, this.a].join(\",\") + \")\" :\n    \"rgb(\" + [this.r, this.g, this.b].join(\",\") + \")\";\n};\n\nColor.prototype.namedColor = function(value) {\n    value = value.toLowerCase();\n    var color = colors[value];\n    if (color) {\n        this.r = color[0];\n        this.g = color[1];\n        this.b = color[2];\n    } else if (value === \"transparent\") {\n        this.r = this.g = this.b = this.a = 0;\n        return true;\n    }\n\n    return !!color;\n};\n\nColor.prototype.isColor = true;\n\n// JSON.stringify([].slice.call($$('.named-color-table tr'), 1).map(function(row) { return [row.childNodes[3].textContent, row.childNodes[5].textContent.trim().split(\",\").map(Number)] }).reduce(function(data, row) {data[row[0]] = row[1]; return data}, {}))\nvar colors = {\n    \"aliceblue\": [240, 248, 255],\n    \"antiquewhite\": [250, 235, 215],\n    \"aqua\": [0, 255, 255],\n    \"aquamarine\": [127, 255, 212],\n    \"azure\": [240, 255, 255],\n    \"beige\": [245, 245, 220],\n    \"bisque\": [255, 228, 196],\n    \"black\": [0, 0, 0],\n    \"blanchedalmond\": [255, 235, 205],\n    \"blue\": [0, 0, 255],\n    \"blueviolet\": [138, 43, 226],\n    \"brown\": [165, 42, 42],\n    \"burlywood\": [222, 184, 135],\n    \"cadetblue\": [95, 158, 160],\n    \"chartreuse\": [127, 255, 0],\n    \"chocolate\": [210, 105, 30],\n    \"coral\": [255, 127, 80],\n    \"cornflowerblue\": [100, 149, 237],\n    \"cornsilk\": [255, 248, 220],\n    \"crimson\": [220, 20, 60],\n    \"cyan\": [0, 255, 255],\n    \"darkblue\": [0, 0, 139],\n    \"darkcyan\": [0, 139, 139],\n    \"darkgoldenrod\": [184, 134, 11],\n    \"darkgray\": [169, 169, 169],\n    \"darkgreen\": [0, 100, 0],\n    \"darkgrey\": [169, 169, 169],\n    \"darkkhaki\": [189, 183, 107],\n    \"darkmagenta\": [139, 0, 139],\n    \"darkolivegreen\": [85, 107, 47],\n    \"darkorange\": [255, 140, 0],\n    \"darkorchid\": [153, 50, 204],\n    \"darkred\": [139, 0, 0],\n    \"darksalmon\": [233, 150, 122],\n    \"darkseagreen\": [143, 188, 143],\n    \"darkslateblue\": [72, 61, 139],\n    \"darkslategray\": [47, 79, 79],\n    \"darkslategrey\": [47, 79, 79],\n    \"darkturquoise\": [0, 206, 209],\n    \"darkviolet\": [148, 0, 211],\n    \"deeppink\": [255, 20, 147],\n    \"deepskyblue\": [0, 191, 255],\n    \"dimgray\": [105, 105, 105],\n    \"dimgrey\": [105, 105, 105],\n    \"dodgerblue\": [30, 144, 255],\n    \"firebrick\": [178, 34, 34],\n    \"floralwhite\": [255, 250, 240],\n    \"forestgreen\": [34, 139, 34],\n    \"fuchsia\": [255, 0, 255],\n    \"gainsboro\": [220, 220, 220],\n    \"ghostwhite\": [248, 248, 255],\n    \"gold\": [255, 215, 0],\n    \"goldenrod\": [218, 165, 32],\n    \"gray\": [128, 128, 128],\n    \"green\": [0, 128, 0],\n    \"greenyellow\": [173, 255, 47],\n    \"grey\": [128, 128, 128],\n    \"honeydew\": [240, 255, 240],\n    \"hotpink\": [255, 105, 180],\n    \"indianred\": [205, 92, 92],\n    \"indigo\": [75, 0, 130],\n    \"ivory\": [255, 255, 240],\n    \"khaki\": [240, 230, 140],\n    \"lavender\": [230, 230, 250],\n    \"lavenderblush\": [255, 240, 245],\n    \"lawngreen\": [124, 252, 0],\n    \"lemonchiffon\": [255, 250, 205],\n    \"lightblue\": [173, 216, 230],\n    \"lightcoral\": [240, 128, 128],\n    \"lightcyan\": [224, 255, 255],\n    \"lightgoldenrodyellow\": [250, 250, 210],\n    \"lightgray\": [211, 211, 211],\n    \"lightgreen\": [144, 238, 144],\n    \"lightgrey\": [211, 211, 211],\n    \"lightpink\": [255, 182, 193],\n    \"lightsalmon\": [255, 160, 122],\n    \"lightseagreen\": [32, 178, 170],\n    \"lightskyblue\": [135, 206, 250],\n    \"lightslategray\": [119, 136, 153],\n    \"lightslategrey\": [119, 136, 153],\n    \"lightsteelblue\": [176, 196, 222],\n    \"lightyellow\": [255, 255, 224],\n    \"lime\": [0, 255, 0],\n    \"limegreen\": [50, 205, 50],\n    \"linen\": [250, 240, 230],\n    \"magenta\": [255, 0, 255],\n    \"maroon\": [128, 0, 0],\n    \"mediumaquamarine\": [102, 205, 170],\n    \"mediumblue\": [0, 0, 205],\n    \"mediumorchid\": [186, 85, 211],\n    \"mediumpurple\": [147, 112, 219],\n    \"mediumseagreen\": [60, 179, 113],\n    \"mediumslateblue\": [123, 104, 238],\n    \"mediumspringgreen\": [0, 250, 154],\n    \"mediumturquoise\": [72, 209, 204],\n    \"mediumvioletred\": [199, 21, 133],\n    \"midnightblue\": [25, 25, 112],\n    \"mintcream\": [245, 255, 250],\n    \"mistyrose\": [255, 228, 225],\n    \"moccasin\": [255, 228, 181],\n    \"navajowhite\": [255, 222, 173],\n    \"navy\": [0, 0, 128],\n    \"oldlace\": [253, 245, 230],\n    \"olive\": [128, 128, 0],\n    \"olivedrab\": [107, 142, 35],\n    \"orange\": [255, 165, 0],\n    \"orangered\": [255, 69, 0],\n    \"orchid\": [218, 112, 214],\n    \"palegoldenrod\": [238, 232, 170],\n    \"palegreen\": [152, 251, 152],\n    \"paleturquoise\": [175, 238, 238],\n    \"palevioletred\": [219, 112, 147],\n    \"papayawhip\": [255, 239, 213],\n    \"peachpuff\": [255, 218, 185],\n    \"peru\": [205, 133, 63],\n    \"pink\": [255, 192, 203],\n    \"plum\": [221, 160, 221],\n    \"powderblue\": [176, 224, 230],\n    \"purple\": [128, 0, 128],\n    \"rebeccapurple\": [102, 51, 153],\n    \"red\": [255, 0, 0],\n    \"rosybrown\": [188, 143, 143],\n    \"royalblue\": [65, 105, 225],\n    \"saddlebrown\": [139, 69, 19],\n    \"salmon\": [250, 128, 114],\n    \"sandybrown\": [244, 164, 96],\n    \"seagreen\": [46, 139, 87],\n    \"seashell\": [255, 245, 238],\n    \"sienna\": [160, 82, 45],\n    \"silver\": [192, 192, 192],\n    \"skyblue\": [135, 206, 235],\n    \"slateblue\": [106, 90, 205],\n    \"slategray\": [112, 128, 144],\n    \"slategrey\": [112, 128, 144],\n    \"snow\": [255, 250, 250],\n    \"springgreen\": [0, 255, 127],\n    \"steelblue\": [70, 130, 180],\n    \"tan\": [210, 180, 140],\n    \"teal\": [0, 128, 128],\n    \"thistle\": [216, 191, 216],\n    \"tomato\": [255, 99, 71],\n    \"turquoise\": [64, 224, 208],\n    \"violet\": [238, 130, 238],\n    \"wheat\": [245, 222, 179],\n    \"white\": [255, 255, 255],\n    \"whitesmoke\": [245, 245, 245],\n    \"yellow\": [255, 255, 0],\n    \"yellowgreen\": [154, 205, 50]\n};\n\nmodule.exports = Color;\n\n},{}],4:[function(_dereq_,module,exports){\nvar Support = _dereq_('./support');\nvar CanvasRenderer = _dereq_('./renderers/canvas');\nvar ImageLoader = _dereq_('./imageloader');\nvar NodeParser = _dereq_('./nodeparser');\nvar NodeContainer = _dereq_('./nodecontainer');\nvar log = _dereq_('./log');\nvar utils = _dereq_('./utils');\nvar createWindowClone = _dereq_('./clone');\nvar loadUrlDocument = _dereq_('./proxy').loadUrlDocument;\nvar getBounds = utils.getBounds;\n\nvar html2canvasNodeAttribute = \"data-html2canvas-node\";\nvar html2canvasCloneIndex = 0;\n\nfunction html2canvas(nodeList, options) {\n    var index = html2canvasCloneIndex++;\n    options = options || {};\n    if (options.logging) {\n        log.options.logging = true;\n        log.options.start = Date.now();\n    }\n\n    options.async = typeof(options.async) === \"undefined\" ? true : options.async;\n    options.allowTaint = typeof(options.allowTaint) === \"undefined\" ? false : options.allowTaint;\n    options.removeContainer = typeof(options.removeContainer) === \"undefined\" ? true : options.removeContainer;\n    options.javascriptEnabled = typeof(options.javascriptEnabled) === \"undefined\" ? false : options.javascriptEnabled;\n    options.imageTimeout = typeof(options.imageTimeout) === \"undefined\" ? 10000 : options.imageTimeout;\n    options.renderer = typeof(options.renderer) === \"function\" ? options.renderer : CanvasRenderer;\n    options.strict = !!options.strict;\n\n    if (typeof(nodeList) === \"string\") {\n        if (typeof(options.proxy) !== \"string\") {\n            return Promise.reject(\"Proxy must be used when rendering url\");\n        }\n        var width = options.width != null ? options.width : window.innerWidth;\n        var height = options.height != null ? options.height : window.innerHeight;\n        return loadUrlDocument(absoluteUrl(nodeList), options.proxy, document, width, height, options).then(function(container) {\n            return renderWindow(container.contentWindow.document.documentElement, container, options, width, height);\n        });\n    }\n\n    var node = ((nodeList === undefined) ? [document.documentElement] : ((nodeList.length) ? nodeList : [nodeList]))[0];\n    node.setAttribute(html2canvasNodeAttribute + index, index);\n    return renderDocument(node.ownerDocument, options, node.ownerDocument.defaultView.innerWidth, node.ownerDocument.defaultView.innerHeight, index).then(function(canvas) {\n        if (typeof(options.onrendered) === \"function\") {\n            log(\"options.onrendered is deprecated, html2canvas returns a Promise containing the canvas\");\n            options.onrendered(canvas);\n        }\n        return canvas;\n    });\n}\n\nhtml2canvas.CanvasRenderer = CanvasRenderer;\nhtml2canvas.NodeContainer = NodeContainer;\nhtml2canvas.log = log;\nhtml2canvas.utils = utils;\n\nvar html2canvasExport = (typeof(document) === \"undefined\" || typeof(Object.create) !== \"function\" || typeof(document.createElement(\"canvas\").getContext) !== \"function\") ? function() {\n    return Promise.reject(\"No canvas support\");\n} : html2canvas;\n\nmodule.exports = html2canvasExport;\n\nif (typeof(define) === 'function' && define.amd) {\n    define('html2canvas', [], function() {\n        return html2canvasExport;\n    });\n}\n\nfunction renderDocument(document, options, windowWidth, windowHeight, html2canvasIndex) {\n    return createWindowClone(document, document, windowWidth, windowHeight, options, document.defaultView.pageXOffset, document.defaultView.pageYOffset).then(function(container) {\n        log(\"Document cloned\");\n        var attributeName = html2canvasNodeAttribute + html2canvasIndex;\n        var selector = \"[\" + attributeName + \"='\" + html2canvasIndex + \"']\";\n        document.querySelector(selector).removeAttribute(attributeName);\n        var clonedWindow = container.contentWindow;\n        var node = clonedWindow.document.querySelector(selector);\n        var oncloneHandler = (typeof(options.onclone) === \"function\") ? Promise.resolve(options.onclone(clonedWindow.document)) : Promise.resolve(true);\n        return oncloneHandler.then(function() {\n            return renderWindow(node, container, options, windowWidth, windowHeight);\n        });\n    });\n}\n\nfunction renderWindow(node, container, options, windowWidth, windowHeight) {\n    var clonedWindow = container.contentWindow;\n    var support = new Support(clonedWindow.document);\n    var imageLoader = new ImageLoader(options, support);\n    var bounds = getBounds(node);\n    var width = options.type === \"view\" ? windowWidth : documentWidth(clonedWindow.document);\n    var height = options.type === \"view\" ? windowHeight : documentHeight(clonedWindow.document);\n    var renderer = new options.renderer(width, height, imageLoader, options, document);\n    var parser = new NodeParser(node, renderer, support, imageLoader, options);\n    return parser.ready.then(function() {\n        log(\"Finished rendering\");\n        var canvas;\n\n        if (options.type === \"view\") {\n            canvas = crop(renderer.canvas, {width: renderer.canvas.width, height: renderer.canvas.height, top: 0, left: 0, x: 0, y: 0});\n        } else if (node === clonedWindow.document.body || node === clonedWindow.document.documentElement || options.canvas != null) {\n            canvas = renderer.canvas;\n        } else {\n            canvas = crop(renderer.canvas, {width:  options.width != null ? options.width : bounds.width, height: options.height != null ? options.height : bounds.height, top: bounds.top, left: bounds.left, x: 0, y: 0});\n        }\n\n        cleanupContainer(container, options);\n        return canvas;\n    });\n}\n\nfunction cleanupContainer(container, options) {\n    if (options.removeContainer) {\n        container.parentNode.removeChild(container);\n        log(\"Cleaned up container\");\n    }\n}\n\nfunction crop(canvas, bounds) {\n    var croppedCanvas = document.createElement(\"canvas\");\n    var x1 = Math.min(canvas.width - 1, Math.max(0, bounds.left));\n    var x2 = Math.min(canvas.width, Math.max(1, bounds.left + bounds.width));\n    var y1 = Math.min(canvas.height - 1, Math.max(0, bounds.top));\n    var y2 = Math.min(canvas.height, Math.max(1, bounds.top + bounds.height));\n    croppedCanvas.width = bounds.width;\n    croppedCanvas.height =  bounds.height;\n    var width = x2-x1;\n    var height = y2-y1;\n    log(\"Cropping canvas at:\", \"left:\", bounds.left, \"top:\", bounds.top, \"width:\", width, \"height:\", height);\n    log(\"Resulting crop with width\", bounds.width, \"and height\", bounds.height, \"with x\", x1, \"and y\", y1);\n    croppedCanvas.getContext(\"2d\").drawImage(canvas, x1, y1, width, height, bounds.x, bounds.y, width, height);\n    return croppedCanvas;\n}\n\nfunction documentWidth (doc) {\n    return Math.max(\n        Math.max(doc.body.scrollWidth, doc.documentElement.scrollWidth),\n        Math.max(doc.body.offsetWidth, doc.documentElement.offsetWidth),\n        Math.max(doc.body.clientWidth, doc.documentElement.clientWidth)\n    );\n}\n\nfunction documentHeight (doc) {\n    return Math.max(\n        Math.max(doc.body.scrollHeight, doc.documentElement.scrollHeight),\n        Math.max(doc.body.offsetHeight, doc.documentElement.offsetHeight),\n        Math.max(doc.body.clientHeight, doc.documentElement.clientHeight)\n    );\n}\n\nfunction absoluteUrl(url) {\n    var link = document.createElement(\"a\");\n    link.href = url;\n    link.href = link.href;\n    return link;\n}\n\n},{\"./clone\":2,\"./imageloader\":11,\"./log\":13,\"./nodecontainer\":14,\"./nodeparser\":15,\"./proxy\":16,\"./renderers/canvas\":20,\"./support\":22,\"./utils\":26}],5:[function(_dereq_,module,exports){\nvar log = _dereq_('./log');\nvar smallImage = _dereq_('./utils').smallImage;\n\nfunction DummyImageContainer(src) {\n    this.src = src;\n    log(\"DummyImageContainer for\", src);\n    if (!this.promise || !this.image) {\n        log(\"Initiating DummyImageContainer\");\n        DummyImageContainer.prototype.image = new Image();\n        var image = this.image;\n        DummyImageContainer.prototype.promise = new Promise(function(resolve, reject) {\n            image.onload = resolve;\n            image.onerror = reject;\n            image.src = smallImage();\n            if (image.complete === true) {\n                resolve(image);\n            }\n        });\n    }\n}\n\nmodule.exports = DummyImageContainer;\n\n},{\"./log\":13,\"./utils\":26}],6:[function(_dereq_,module,exports){\nvar smallImage = _dereq_('./utils').smallImage;\n\nfunction Font(family, size) {\n    var container = document.createElement('div'),\n        img = document.createElement('img'),\n        span = document.createElement('span'),\n        sampleText = 'Hidden Text',\n        baseline,\n        middle;\n\n    container.style.visibility = \"hidden\";\n    container.style.fontFamily = family;\n    container.style.fontSize = size;\n    container.style.margin = 0;\n    container.style.padding = 0;\n\n    document.body.appendChild(container);\n\n    img.src = smallImage();\n    img.width = 1;\n    img.height = 1;\n\n    img.style.margin = 0;\n    img.style.padding = 0;\n    img.style.verticalAlign = \"baseline\";\n\n    span.style.fontFamily = family;\n    span.style.fontSize = size;\n    span.style.margin = 0;\n    span.style.padding = 0;\n\n    span.appendChild(document.createTextNode(sampleText));\n    container.appendChild(span);\n    container.appendChild(img);\n    baseline = (img.offsetTop - span.offsetTop) + 1;\n\n    container.removeChild(span);\n    container.appendChild(document.createTextNode(sampleText));\n\n    container.style.lineHeight = \"normal\";\n    img.style.verticalAlign = \"super\";\n\n    middle = (img.offsetTop-container.offsetTop) + 1;\n\n    document.body.removeChild(container);\n\n    this.baseline = baseline;\n    this.lineWidth = 1;\n    this.middle = middle;\n}\n\nmodule.exports = Font;\n\n},{\"./utils\":26}],7:[function(_dereq_,module,exports){\nvar Font = _dereq_('./font');\n\nfunction FontMetrics() {\n    this.data = {};\n}\n\nFontMetrics.prototype.getMetrics = function(family, size) {\n    if (this.data[family + \"-\" + size] === undefined) {\n        this.data[family + \"-\" + size] = new Font(family, size);\n    }\n    return this.data[family + \"-\" + size];\n};\n\nmodule.exports = FontMetrics;\n\n},{\"./font\":6}],8:[function(_dereq_,module,exports){\nvar utils = _dereq_('./utils');\nvar getBounds = utils.getBounds;\nvar loadUrlDocument = _dereq_('./proxy').loadUrlDocument;\n\nfunction FrameContainer(container, sameOrigin, options) {\n    this.image = null;\n    this.src = container;\n    var self = this;\n    var bounds = getBounds(container);\n    this.promise = (!sameOrigin ? this.proxyLoad(options.proxy, bounds, options) : new Promise(function(resolve) {\n        if (container.contentWindow.document.URL === \"about:blank\" || container.contentWindow.document.documentElement == null) {\n            container.contentWindow.onload = container.onload = function() {\n                resolve(container);\n            };\n        } else {\n            resolve(container);\n        }\n    })).then(function(container) {\n        var html2canvas = _dereq_('./core');\n        return html2canvas(container.contentWindow.document.documentElement, {type: 'view', width: container.width, height: container.height, proxy: options.proxy, javascriptEnabled: options.javascriptEnabled, removeContainer: options.removeContainer, allowTaint: options.allowTaint, imageTimeout: options.imageTimeout / 2});\n    }).then(function(canvas) {\n        return self.image = canvas;\n    });\n}\n\nFrameContainer.prototype.proxyLoad = function(proxy, bounds, options) {\n    var container = this.src;\n    return loadUrlDocument(container.src, proxy, container.ownerDocument, bounds.width, bounds.height, options);\n};\n\nmodule.exports = FrameContainer;\n\n},{\"./core\":4,\"./proxy\":16,\"./utils\":26}],9:[function(_dereq_,module,exports){\nfunction GradientContainer(imageData) {\n    this.src = imageData.value;\n    this.colorStops = [];\n    this.type = null;\n    this.x0 = 0.5;\n    this.y0 = 0.5;\n    this.x1 = 0.5;\n    this.y1 = 0.5;\n    this.promise = Promise.resolve(true);\n}\n\nGradientContainer.TYPES = {\n    LINEAR: 1,\n    RADIAL: 2\n};\n\n// TODO: support hsl[a], negative %/length values\n// TODO: support <angle> (e.g. -?\\d{1,3}(?:\\.\\d+)deg, etc. : https://developer.mozilla.org/docs/Web/CSS/angle )\nGradientContainer.REGEXP_COLORSTOP = /^\\s*(rgba?\\(\\s*\\d{1,3},\\s*\\d{1,3},\\s*\\d{1,3}(?:,\\s*[0-9\\.]+)?\\s*\\)|[a-z]{3,20}|#[a-f0-9]{3,6})(?:\\s+(\\d{1,3}(?:\\.\\d+)?)(%|px)?)?(?:\\s|$)/i;\n\nmodule.exports = GradientContainer;\n\n},{}],10:[function(_dereq_,module,exports){\nfunction ImageContainer(src, cors) {\n    this.src = src;\n    this.image = new Image();\n    var self = this;\n    this.tainted = null;\n    this.promise = new Promise(function(resolve, reject) {\n        self.image.onload = resolve;\n        self.image.onerror = reject;\n        if (cors) {\n            self.image.crossOrigin = \"anonymous\";\n        }\n        self.image.src = src;\n        if (self.image.complete === true) {\n            resolve(self.image);\n        }\n    });\n}\n\nmodule.exports = ImageContainer;\n\n},{}],11:[function(_dereq_,module,exports){\nvar log = _dereq_('./log');\nvar ImageContainer = _dereq_('./imagecontainer');\nvar DummyImageContainer = _dereq_('./dummyimagecontainer');\nvar ProxyImageContainer = _dereq_('./proxyimagecontainer');\nvar FrameContainer = _dereq_('./framecontainer');\nvar SVGContainer = _dereq_('./svgcontainer');\nvar SVGNodeContainer = _dereq_('./svgnodecontainer');\nvar LinearGradientContainer = _dereq_('./lineargradientcontainer');\nvar WebkitGradientContainer = _dereq_('./webkitgradientcontainer');\nvar bind = _dereq_('./utils').bind;\n\nfunction ImageLoader(options, support) {\n    this.link = null;\n    this.options = options;\n    this.support = support;\n    this.origin = this.getOrigin(window.location.href);\n}\n\nImageLoader.prototype.findImages = function(nodes) {\n    var images = [];\n    nodes.reduce(function(imageNodes, container) {\n        switch(container.node.nodeName) {\n        case \"IMG\":\n            return imageNodes.concat([{\n                args: [container.node.src],\n                method: \"url\"\n            }]);\n        case \"svg\":\n        case \"IFRAME\":\n            return imageNodes.concat([{\n                args: [container.node],\n                method: container.node.nodeName\n            }]);\n        }\n        return imageNodes;\n    }, []).forEach(this.addImage(images, this.loadImage), this);\n    return images;\n};\n\nImageLoader.prototype.findBackgroundImage = function(images, container) {\n    container.parseBackgroundImages().filter(this.hasImageBackground).forEach(this.addImage(images, this.loadImage), this);\n    return images;\n};\n\nImageLoader.prototype.addImage = function(images, callback) {\n    return function(newImage) {\n        newImage.args.forEach(function(image) {\n            if (!this.imageExists(images, image)) {\n                images.splice(0, 0, callback.call(this, newImage));\n                log('Added image #' + (images.length), typeof(image) === \"string\" ? image.substring(0, 100) : image);\n            }\n        }, this);\n    };\n};\n\nImageLoader.prototype.hasImageBackground = function(imageData) {\n    return imageData.method !== \"none\";\n};\n\nImageLoader.prototype.loadImage = function(imageData) {\n    if (imageData.method === \"url\") {\n        var src = imageData.args[0];\n        if (this.isSVG(src) && !this.support.svg && !this.options.allowTaint) {\n            return new SVGContainer(src);\n        } else if (src.match(/data:image\\/.*;base64,/i)) {\n            return new ImageContainer(src.replace(/url\\(['\"]{0,}|['\"]{0,}\\)$/ig, ''), false);\n        } else if (this.isSameOrigin(src) || this.options.allowTaint === true || this.isSVG(src)) {\n            return new ImageContainer(src, false);\n        } else if (this.support.cors && !this.options.allowTaint && this.options.useCORS) {\n            return new ImageContainer(src, true);\n        } else if (this.options.proxy) {\n            return new ProxyImageContainer(src, this.options.proxy);\n        } else {\n            return new DummyImageContainer(src);\n        }\n    } else if (imageData.method === \"linear-gradient\") {\n        return new LinearGradientContainer(imageData);\n    } else if (imageData.method === \"gradient\") {\n        return new WebkitGradientContainer(imageData);\n    } else if (imageData.method === \"svg\") {\n        return new SVGNodeContainer(imageData.args[0], this.support.svg);\n    } else if (imageData.method === \"IFRAME\") {\n        return new FrameContainer(imageData.args[0], this.isSameOrigin(imageData.args[0].src), this.options);\n    } else {\n        return new DummyImageContainer(imageData);\n    }\n};\n\nImageLoader.prototype.isSVG = function(src) {\n    return src.substring(src.length - 3).toLowerCase() === \"svg\" || SVGContainer.prototype.isInline(src);\n};\n\nImageLoader.prototype.imageExists = function(images, src) {\n    return images.some(function(image) {\n        return image.src === src;\n    });\n};\n\nImageLoader.prototype.isSameOrigin = function(url) {\n    return (this.getOrigin(url) === this.origin);\n};\n\nImageLoader.prototype.getOrigin = function(url) {\n    var link = this.link || (this.link = document.createElement(\"a\"));\n    link.href = url;\n    link.href = link.href; // IE9, LOL! - http://jsfiddle.net/niklasvh/2e48b/\n    return link.protocol + link.hostname + link.port;\n};\n\nImageLoader.prototype.getPromise = function(container) {\n    return this.timeout(container, this.options.imageTimeout)['catch'](function() {\n        var dummy = new DummyImageContainer(container.src);\n        return dummy.promise.then(function(image) {\n            container.image = image;\n        });\n    });\n};\n\nImageLoader.prototype.get = function(src) {\n    var found = null;\n    return this.images.some(function(img) {\n        return (found = img).src === src;\n    }) ? found : null;\n};\n\nImageLoader.prototype.fetch = function(nodes) {\n    this.images = nodes.reduce(bind(this.findBackgroundImage, this), this.findImages(nodes));\n    this.images.forEach(function(image, index) {\n        image.promise.then(function() {\n            log(\"Succesfully loaded image #\"+ (index+1), image);\n        }, function(e) {\n            log(\"Failed loading image #\"+ (index+1), image, e);\n        });\n    });\n    this.ready = Promise.all(this.images.map(this.getPromise, this));\n    log(\"Finished searching images\");\n    return this;\n};\n\nImageLoader.prototype.timeout = function(container, timeout) {\n    var timer;\n    var promise = Promise.race([container.promise, new Promise(function(res, reject) {\n        timer = setTimeout(function() {\n            log(\"Timed out loading image\", container);\n            reject(container);\n        }, timeout);\n    })]).then(function(container) {\n        clearTimeout(timer);\n        return container;\n    });\n    promise['catch'](function() {\n        clearTimeout(timer);\n    });\n    return promise;\n};\n\nmodule.exports = ImageLoader;\n\n},{\"./dummyimagecontainer\":5,\"./framecontainer\":8,\"./imagecontainer\":10,\"./lineargradientcontainer\":12,\"./log\":13,\"./proxyimagecontainer\":17,\"./svgcontainer\":23,\"./svgnodecontainer\":24,\"./utils\":26,\"./webkitgradientcontainer\":27}],12:[function(_dereq_,module,exports){\nvar GradientContainer = _dereq_('./gradientcontainer');\nvar Color = _dereq_('./color');\n\nfunction LinearGradientContainer(imageData) {\n    GradientContainer.apply(this, arguments);\n    this.type = GradientContainer.TYPES.LINEAR;\n\n    var hasDirection = LinearGradientContainer.REGEXP_DIRECTION.test( imageData.args[0] ) ||\n        !GradientContainer.REGEXP_COLORSTOP.test( imageData.args[0] );\n\n    if (hasDirection) {\n        imageData.args[0].split(/\\s+/).reverse().forEach(function(position, index) {\n            switch(position) {\n            case \"left\":\n                this.x0 = 0;\n                this.x1 = 1;\n                break;\n            case \"top\":\n                this.y0 = 0;\n                this.y1 = 1;\n                break;\n            case \"right\":\n                this.x0 = 1;\n                this.x1 = 0;\n                break;\n            case \"bottom\":\n                this.y0 = 1;\n                this.y1 = 0;\n                break;\n            case \"to\":\n                var y0 = this.y0;\n                var x0 = this.x0;\n                this.y0 = this.y1;\n                this.x0 = this.x1;\n                this.x1 = x0;\n                this.y1 = y0;\n                break;\n            case \"center\":\n                break; // centered by default\n            // Firefox internally converts position keywords to percentages:\n            // http://www.w3.org/TR/2010/WD-CSS2-20101207/colors.html#propdef-background-position\n            default: // percentage or absolute length\n                // TODO: support absolute start point positions (e.g., use bounds to convert px to a ratio)\n                var ratio = parseFloat(position, 10) * 1e-2;\n                if (isNaN(ratio)) { // invalid or unhandled value\n                    break;\n                }\n                if (index === 0) {\n                    this.y0 = ratio;\n                    this.y1 = 1 - this.y0;\n                } else {\n                    this.x0 = ratio;\n                    this.x1 = 1 - this.x0;\n                }\n                break;\n            }\n        }, this);\n    } else {\n        this.y0 = 0;\n        this.y1 = 1;\n    }\n\n    this.colorStops = imageData.args.slice(hasDirection ? 1 : 0).map(function(colorStop) {\n        var colorStopMatch = colorStop.match(GradientContainer.REGEXP_COLORSTOP);\n        var value = +colorStopMatch[2];\n        var unit = value === 0 ? \"%\" : colorStopMatch[3]; // treat \"0\" as \"0%\"\n        return {\n            color: new Color(colorStopMatch[1]),\n            // TODO: support absolute stop positions (e.g., compute gradient line length & convert px to ratio)\n            stop: unit === \"%\" ? value / 100 : null\n        };\n    });\n\n    if (this.colorStops[0].stop === null) {\n        this.colorStops[0].stop = 0;\n    }\n\n    if (this.colorStops[this.colorStops.length - 1].stop === null) {\n        this.colorStops[this.colorStops.length - 1].stop = 1;\n    }\n\n    // calculates and fills-in explicit stop positions when omitted from rule\n    this.colorStops.forEach(function(colorStop, index) {\n        if (colorStop.stop === null) {\n            this.colorStops.slice(index).some(function(find, count) {\n                if (find.stop !== null) {\n                    colorStop.stop = ((find.stop - this.colorStops[index - 1].stop) / (count + 1)) + this.colorStops[index - 1].stop;\n                    return true;\n                } else {\n                    return false;\n                }\n            }, this);\n        }\n    }, this);\n}\n\nLinearGradientContainer.prototype = Object.create(GradientContainer.prototype);\n\n// TODO: support <angle> (e.g. -?\\d{1,3}(?:\\.\\d+)deg, etc. : https://developer.mozilla.org/docs/Web/CSS/angle )\nLinearGradientContainer.REGEXP_DIRECTION = /^\\s*(?:to|left|right|top|bottom|center|\\d{1,3}(?:\\.\\d+)?%?)(?:\\s|$)/i;\n\nmodule.exports = LinearGradientContainer;\n\n},{\"./color\":3,\"./gradientcontainer\":9}],13:[function(_dereq_,module,exports){\nvar logger = function() {\n    if (logger.options.logging && window.console && window.console.log) {\n        Function.prototype.bind.call(window.console.log, (window.console)).apply(window.console, [(Date.now() - logger.options.start) + \"ms\", \"html2canvas:\"].concat([].slice.call(arguments, 0)));\n    }\n};\n\nlogger.options = {logging: false};\nmodule.exports = logger;\n\n},{}],14:[function(_dereq_,module,exports){\nvar Color = _dereq_('./color');\nvar utils = _dereq_('./utils');\nvar getBounds = utils.getBounds;\nvar parseBackgrounds = utils.parseBackgrounds;\nvar offsetBounds = utils.offsetBounds;\n\nfunction NodeContainer(node, parent) {\n    this.node = node;\n    this.parent = parent;\n    this.stack = null;\n    this.bounds = null;\n    this.borders = null;\n    this.clip = [];\n    this.backgroundClip = [];\n    this.offsetBounds = null;\n    this.visible = null;\n    this.computedStyles = null;\n    this.colors = {};\n    this.styles = {};\n    this.backgroundImages = null;\n    this.transformData = null;\n    this.transformMatrix = null;\n    this.isPseudoElement = false;\n    this.opacity = null;\n}\n\nNodeContainer.prototype.cloneTo = function(stack) {\n    stack.visible = this.visible;\n    stack.borders = this.borders;\n    stack.bounds = this.bounds;\n    stack.clip = this.clip;\n    stack.backgroundClip = this.backgroundClip;\n    stack.computedStyles = this.computedStyles;\n    stack.styles = this.styles;\n    stack.backgroundImages = this.backgroundImages;\n    stack.opacity = this.opacity;\n};\n\nNodeContainer.prototype.getOpacity = function() {\n    return this.opacity === null ? (this.opacity = this.cssFloat('opacity')) : this.opacity;\n};\n\nNodeContainer.prototype.assignStack = function(stack) {\n    this.stack = stack;\n    stack.children.push(this);\n};\n\nNodeContainer.prototype.isElementVisible = function() {\n    return this.node.nodeType === Node.TEXT_NODE ? this.parent.visible : (\n        this.css('display') !== \"none\" &&\n        this.css('visibility') !== \"hidden\" &&\n        !this.node.hasAttribute(\"data-html2canvas-ignore\") &&\n        (this.node.nodeName !== \"INPUT\" || this.node.getAttribute(\"type\") !== \"hidden\")\n    );\n};\n\nNodeContainer.prototype.css = function(attribute) {\n    if (!this.computedStyles) {\n        this.computedStyles = this.isPseudoElement ? this.parent.computedStyle(this.before ? \":before\" : \":after\") : this.computedStyle(null);\n    }\n\n    return this.styles[attribute] || (this.styles[attribute] = this.computedStyles[attribute]);\n};\n\nNodeContainer.prototype.prefixedCss = function(attribute) {\n    var prefixes = [\"webkit\", \"moz\", \"ms\", \"o\"];\n    var value = this.css(attribute);\n    if (value === undefined) {\n        prefixes.some(function(prefix) {\n            value = this.css(prefix + attribute.substr(0, 1).toUpperCase() + attribute.substr(1));\n            return value !== undefined;\n        }, this);\n    }\n    return value === undefined ? null : value;\n};\n\nNodeContainer.prototype.computedStyle = function(type) {\n    return this.node.ownerDocument.defaultView.getComputedStyle(this.node, type);\n};\n\nNodeContainer.prototype.cssInt = function(attribute) {\n    var value = parseInt(this.css(attribute), 10);\n    return (isNaN(value)) ? 0 : value; // borders in old IE are throwing 'medium' for demo.html\n};\n\nNodeContainer.prototype.color = function(attribute) {\n    return this.colors[attribute] || (this.colors[attribute] = new Color(this.css(attribute)));\n};\n\nNodeContainer.prototype.cssFloat = function(attribute) {\n    var value = parseFloat(this.css(attribute));\n    return (isNaN(value)) ? 0 : value;\n};\n\nNodeContainer.prototype.fontWeight = function() {\n    var weight = this.css(\"fontWeight\");\n    switch(parseInt(weight, 10)){\n    case 401:\n        weight = \"bold\";\n        break;\n    case 400:\n        weight = \"normal\";\n        break;\n    }\n    return weight;\n};\n\nNodeContainer.prototype.parseClip = function() {\n    var matches = this.css('clip').match(this.CLIP);\n    if (matches) {\n        return {\n            top: parseInt(matches[1], 10),\n            right: parseInt(matches[2], 10),\n            bottom: parseInt(matches[3], 10),\n            left: parseInt(matches[4], 10)\n        };\n    }\n    return null;\n};\n\nNodeContainer.prototype.parseBackgroundImages = function() {\n    return this.backgroundImages || (this.backgroundImages = parseBackgrounds(this.css(\"backgroundImage\")));\n};\n\nNodeContainer.prototype.cssList = function(property, index) {\n    var value = (this.css(property) || '').split(',');\n    value = value[index || 0] || value[0] || 'auto';\n    value = value.trim().split(' ');\n    if (value.length === 1) {\n        value = [value[0], isPercentage(value[0]) ? 'auto' : value[0]];\n    }\n    return value;\n};\n\nNodeContainer.prototype.parseBackgroundSize = function(bounds, image, index) {\n    var size = this.cssList(\"backgroundSize\", index);\n    var width, height;\n\n    if (isPercentage(size[0])) {\n        width = bounds.width * parseFloat(size[0]) / 100;\n    } else if (/contain|cover/.test(size[0])) {\n        var targetRatio = bounds.width / bounds.height, currentRatio = image.width / image.height;\n        return (targetRatio < currentRatio ^ size[0] === 'contain') ?  {width: bounds.height * currentRatio, height: bounds.height} : {width: bounds.width, height: bounds.width / currentRatio};\n    } else {\n        width = parseInt(size[0], 10);\n    }\n\n    if (size[0] === 'auto' && size[1] === 'auto') {\n        height = image.height;\n    } else if (size[1] === 'auto') {\n        height = width / image.width * image.height;\n    } else if (isPercentage(size[1])) {\n        height =  bounds.height * parseFloat(size[1]) / 100;\n    } else {\n        height = parseInt(size[1], 10);\n    }\n\n    if (size[0] === 'auto') {\n        width = height / image.height * image.width;\n    }\n\n    return {width: width, height: height};\n};\n\nNodeContainer.prototype.parseBackgroundPosition = function(bounds, image, index, backgroundSize) {\n    var position = this.cssList('backgroundPosition', index);\n    var left, top;\n\n    if (isPercentage(position[0])){\n        left = (bounds.width - (backgroundSize || image).width) * (parseFloat(position[0]) / 100);\n    } else {\n        left = parseInt(position[0], 10);\n    }\n\n    if (position[1] === 'auto') {\n        top = left / image.width * image.height;\n    } else if (isPercentage(position[1])){\n        top =  (bounds.height - (backgroundSize || image).height) * parseFloat(position[1]) / 100;\n    } else {\n        top = parseInt(position[1], 10);\n    }\n\n    if (position[0] === 'auto') {\n        left = top / image.height * image.width;\n    }\n\n    return {left: left, top: top};\n};\n\nNodeContainer.prototype.parseBackgroundRepeat = function(index) {\n    return this.cssList(\"backgroundRepeat\", index)[0];\n};\n\nNodeContainer.prototype.parseTextShadows = function() {\n    var textShadow = this.css(\"textShadow\");\n    var results = [];\n\n    if (textShadow && textShadow !== 'none') {\n        var shadows = textShadow.match(this.TEXT_SHADOW_PROPERTY);\n        for (var i = 0; shadows && (i < shadows.length); i++) {\n            var s = shadows[i].match(this.TEXT_SHADOW_VALUES);\n            results.push({\n                color: new Color(s[0]),\n                offsetX: s[1] ? parseFloat(s[1].replace('px', '')) : 0,\n                offsetY: s[2] ? parseFloat(s[2].replace('px', '')) : 0,\n                blur: s[3] ? s[3].replace('px', '') : 0\n            });\n        }\n    }\n    return results;\n};\n\nNodeContainer.prototype.parseTransform = function() {\n    if (!this.transformData) {\n        if (this.hasTransform()) {\n            var offset = this.parseBounds();\n            var origin = this.prefixedCss(\"transformOrigin\").split(\" \").map(removePx).map(asFloat);\n            origin[0] += offset.left;\n            origin[1] += offset.top;\n            this.transformData = {\n                origin: origin,\n                matrix: this.parseTransformMatrix()\n            };\n        } else {\n            this.transformData = {\n                origin: [0, 0],\n                matrix: [1, 0, 0, 1, 0, 0]\n            };\n        }\n    }\n    return this.transformData;\n};\n\nNodeContainer.prototype.parseTransformMatrix = function() {\n    if (!this.transformMatrix) {\n        var transform = this.prefixedCss(\"transform\");\n        var matrix = transform ? parseMatrix(transform.match(this.MATRIX_PROPERTY)) : null;\n        this.transformMatrix = matrix ? matrix : [1, 0, 0, 1, 0, 0];\n    }\n    return this.transformMatrix;\n};\n\nNodeContainer.prototype.parseBounds = function() {\n    return this.bounds || (this.bounds = this.hasTransform() ? offsetBounds(this.node) : getBounds(this.node));\n};\n\nNodeContainer.prototype.hasTransform = function() {\n    return this.parseTransformMatrix().join(\",\") !== \"1,0,0,1,0,0\" || (this.parent && this.parent.hasTransform());\n};\n\nNodeContainer.prototype.getValue = function() {\n    var value = this.node.value || \"\";\n    if (this.node.tagName === \"SELECT\") {\n        value = selectionValue(this.node);\n    } else if (this.node.type === \"password\") {\n        value = Array(value.length + 1).join('\\u2022'); // jshint ignore:line\n    }\n    return value.length === 0 ? (this.node.placeholder || \"\") : value;\n};\n\nNodeContainer.prototype.MATRIX_PROPERTY = /(matrix|matrix3d)\\((.+)\\)/;\nNodeContainer.prototype.TEXT_SHADOW_PROPERTY = /((rgba|rgb)\\([^\\)]+\\)(\\s-?\\d+px){0,})/g;\nNodeContainer.prototype.TEXT_SHADOW_VALUES = /(-?\\d+px)|(#.+)|(rgb\\(.+\\))|(rgba\\(.+\\))/g;\nNodeContainer.prototype.CLIP = /^rect\\((\\d+)px,? (\\d+)px,? (\\d+)px,? (\\d+)px\\)$/;\n\nfunction selectionValue(node) {\n    var option = node.options[node.selectedIndex || 0];\n    return option ? (option.text || \"\") : \"\";\n}\n\nfunction parseMatrix(match) {\n    if (match && match[1] === \"matrix\") {\n        return match[2].split(\",\").map(function(s) {\n            return parseFloat(s.trim());\n        });\n    } else if (match && match[1] === \"matrix3d\") {\n        var matrix3d = match[2].split(\",\").map(function(s) {\n          return parseFloat(s.trim());\n        });\n        return [matrix3d[0], matrix3d[1], matrix3d[4], matrix3d[5], matrix3d[12], matrix3d[13]];\n    }\n}\n\nfunction isPercentage(value) {\n    return value.toString().indexOf(\"%\") !== -1;\n}\n\nfunction removePx(str) {\n    return str.replace(\"px\", \"\");\n}\n\nfunction asFloat(str) {\n    return parseFloat(str);\n}\n\nmodule.exports = NodeContainer;\n\n},{\"./color\":3,\"./utils\":26}],15:[function(_dereq_,module,exports){\nvar log = _dereq_('./log');\nvar punycode = _dereq_('punycode');\nvar NodeContainer = _dereq_('./nodecontainer');\nvar TextContainer = _dereq_('./textcontainer');\nvar PseudoElementContainer = _dereq_('./pseudoelementcontainer');\nvar FontMetrics = _dereq_('./fontmetrics');\nvar Color = _dereq_('./color');\nvar StackingContext = _dereq_('./stackingcontext');\nvar utils = _dereq_('./utils');\nvar bind = utils.bind;\nvar getBounds = utils.getBounds;\nvar parseBackgrounds = utils.parseBackgrounds;\nvar offsetBounds = utils.offsetBounds;\n\nfunction NodeParser(element, renderer, support, imageLoader, options) {\n    log(\"Starting NodeParser\");\n    this.renderer = renderer;\n    this.options = options;\n    this.range = null;\n    this.support = support;\n    this.renderQueue = [];\n    this.stack = new StackingContext(true, 1, element.ownerDocument, null);\n    var parent = new NodeContainer(element, null);\n    if (options.background) {\n        renderer.rectangle(0, 0, renderer.width, renderer.height, new Color(options.background));\n    }\n    if (element === element.ownerDocument.documentElement) {\n        // http://www.w3.org/TR/css3-background/#special-backgrounds\n        var canvasBackground = new NodeContainer(parent.color('backgroundColor').isTransparent() ? element.ownerDocument.body : element.ownerDocument.documentElement, null);\n        renderer.rectangle(0, 0, renderer.width, renderer.height, canvasBackground.color('backgroundColor'));\n    }\n    parent.visibile = parent.isElementVisible();\n    this.createPseudoHideStyles(element.ownerDocument);\n    this.disableAnimations(element.ownerDocument);\n    this.nodes = flatten([parent].concat(this.getChildren(parent)).filter(function(container) {\n        return container.visible = container.isElementVisible();\n    }).map(this.getPseudoElements, this));\n    this.fontMetrics = new FontMetrics();\n    log(\"Fetched nodes, total:\", this.nodes.length);\n    log(\"Calculate overflow clips\");\n    this.calculateOverflowClips();\n    log(\"Start fetching images\");\n    this.images = imageLoader.fetch(this.nodes.filter(isElement));\n    this.ready = this.images.ready.then(bind(function() {\n        log(\"Images loaded, starting parsing\");\n        log(\"Creating stacking contexts\");\n        this.createStackingContexts();\n        log(\"Sorting stacking contexts\");\n        this.sortStackingContexts(this.stack);\n        this.parse(this.stack);\n        log(\"Render queue created with \" + this.renderQueue.length + \" items\");\n        return new Promise(bind(function(resolve) {\n            if (!options.async) {\n                this.renderQueue.forEach(this.paint, this);\n                resolve();\n            } else if (typeof(options.async) === \"function\") {\n                options.async.call(this, this.renderQueue, resolve);\n            } else if (this.renderQueue.length > 0){\n                this.renderIndex = 0;\n                this.asyncRenderer(this.renderQueue, resolve);\n            } else {\n                resolve();\n            }\n        }, this));\n    }, this));\n}\n\nNodeParser.prototype.calculateOverflowClips = function() {\n    this.nodes.forEach(function(container) {\n        if (isElement(container)) {\n            if (isPseudoElement(container)) {\n                container.appendToDOM();\n            }\n            container.borders = this.parseBorders(container);\n            var clip = (container.css('overflow') === \"hidden\") ? [container.borders.clip] : [];\n            var cssClip = container.parseClip();\n            if (cssClip && [\"absolute\", \"fixed\"].indexOf(container.css('position')) !== -1) {\n                clip.push([[\"rect\",\n                        container.bounds.left + cssClip.left,\n                        container.bounds.top + cssClip.top,\n                        cssClip.right - cssClip.left,\n                        cssClip.bottom - cssClip.top\n                ]]);\n            }\n            container.clip = hasParentClip(container) ? container.parent.clip.concat(clip) : clip;\n            container.backgroundClip = (container.css('overflow') !== \"hidden\") ? container.clip.concat([container.borders.clip]) : container.clip;\n            if (isPseudoElement(container)) {\n                container.cleanDOM();\n            }\n        } else if (isTextNode(container)) {\n            container.clip = hasParentClip(container) ? container.parent.clip : [];\n        }\n        if (!isPseudoElement(container)) {\n            container.bounds = null;\n        }\n    }, this);\n};\n\nfunction hasParentClip(container) {\n    return container.parent && container.parent.clip.length;\n}\n\nNodeParser.prototype.asyncRenderer = function(queue, resolve, asyncTimer) {\n    asyncTimer = asyncTimer || Date.now();\n    this.paint(queue[this.renderIndex++]);\n    if (queue.length === this.renderIndex) {\n        resolve();\n    } else if (asyncTimer + 20 > Date.now()) {\n        this.asyncRenderer(queue, resolve, asyncTimer);\n    } else {\n        setTimeout(bind(function() {\n            this.asyncRenderer(queue, resolve);\n        }, this), 0);\n    }\n};\n\nNodeParser.prototype.createPseudoHideStyles = function(document) {\n    this.createStyles(document, '.' + PseudoElementContainer.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE + ':before { content: \"\" !important; display: none !important; }' +\n        '.' + PseudoElementContainer.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER + ':after { content: \"\" !important; display: none !important; }');\n};\n\nNodeParser.prototype.disableAnimations = function(document) {\n    this.createStyles(document, '* { -webkit-animation: none !important; -moz-animation: none !important; -o-animation: none !important; animation: none !important; ' +\n        '-webkit-transition: none !important; -moz-transition: none !important; -o-transition: none !important; transition: none !important;}');\n};\n\nNodeParser.prototype.createStyles = function(document, styles) {\n    var hidePseudoElements = document.createElement('style');\n    hidePseudoElements.innerHTML = styles;\n    document.body.appendChild(hidePseudoElements);\n};\n\nNodeParser.prototype.getPseudoElements = function(container) {\n    var nodes = [[container]];\n    if (container.node.nodeType === Node.ELEMENT_NODE) {\n        var before = this.getPseudoElement(container, \":before\");\n        var after = this.getPseudoElement(container, \":after\");\n\n        if (before) {\n            nodes.push(before);\n        }\n\n        if (after) {\n            nodes.push(after);\n        }\n    }\n    return flatten(nodes);\n};\n\nfunction toCamelCase(str) {\n    return str.replace(/(\\-[a-z])/g, function(match){\n        return match.toUpperCase().replace('-','');\n    });\n}\n\nNodeParser.prototype.getPseudoElement = function(container, type) {\n    var style = container.computedStyle(type);\n    if(!style || !style.content || style.content === \"none\" || style.content === \"-moz-alt-content\" || style.display === \"none\") {\n        return null;\n    }\n\n    var content = stripQuotes(style.content);\n    var isImage = content.substr(0, 3) === 'url';\n    var pseudoNode = document.createElement(isImage ? 'img' : 'html2canvaspseudoelement');\n    var pseudoContainer = new PseudoElementContainer(pseudoNode, container, type);\n\n    for (var i = style.length-1; i >= 0; i--) {\n        var property = toCamelCase(style.item(i));\n        pseudoNode.style[property] = style[property];\n    }\n\n    pseudoNode.className = PseudoElementContainer.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE + \" \" + PseudoElementContainer.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER;\n\n    if (isImage) {\n        pseudoNode.src = parseBackgrounds(content)[0].args[0];\n        return [pseudoContainer];\n    } else {\n        var text = document.createTextNode(content);\n        pseudoNode.appendChild(text);\n        return [pseudoContainer, new TextContainer(text, pseudoContainer)];\n    }\n};\n\n\nNodeParser.prototype.getChildren = function(parentContainer) {\n    return flatten([].filter.call(parentContainer.node.childNodes, renderableNode).map(function(node) {\n        var container = [node.nodeType === Node.TEXT_NODE ? new TextContainer(node, parentContainer) : new NodeContainer(node, parentContainer)].filter(nonIgnoredElement);\n        return node.nodeType === Node.ELEMENT_NODE && container.length && node.tagName !== \"TEXTAREA\" ? (container[0].isElementVisible() ? container.concat(this.getChildren(container[0])) : []) : container;\n    }, this));\n};\n\nNodeParser.prototype.newStackingContext = function(container, hasOwnStacking) {\n    var stack = new StackingContext(hasOwnStacking, container.getOpacity(), container.node, container.parent);\n    container.cloneTo(stack);\n    var parentStack = hasOwnStacking ? stack.getParentStack(this) : stack.parent.stack;\n    parentStack.contexts.push(stack);\n    container.stack = stack;\n};\n\nNodeParser.prototype.createStackingContexts = function() {\n    this.nodes.forEach(function(container) {\n        if (isElement(container) && (this.isRootElement(container) || hasOpacity(container) || isPositionedForStacking(container) || this.isBodyWithTransparentRoot(container) || container.hasTransform())) {\n            this.newStackingContext(container, true);\n        } else if (isElement(container) && ((isPositioned(container) && zIndex0(container)) || isInlineBlock(container) || isFloating(container))) {\n            this.newStackingContext(container, false);\n        } else {\n            container.assignStack(container.parent.stack);\n        }\n    }, this);\n};\n\nNodeParser.prototype.isBodyWithTransparentRoot = function(container) {\n    return container.node.nodeName === \"BODY\" && container.parent.color('backgroundColor').isTransparent();\n};\n\nNodeParser.prototype.isRootElement = function(container) {\n    return container.parent === null;\n};\n\nNodeParser.prototype.sortStackingContexts = function(stack) {\n    stack.contexts.sort(zIndexSort(stack.contexts.slice(0)));\n    stack.contexts.forEach(this.sortStackingContexts, this);\n};\n\nNodeParser.prototype.parseTextBounds = function(container) {\n    return function(text, index, textList) {\n        if (container.parent.css(\"textDecoration\").substr(0, 4) !== \"none\" || text.trim().length !== 0) {\n            if (this.support.rangeBounds && !container.parent.hasTransform()) {\n                var offset = textList.slice(0, index).join(\"\").length;\n                return this.getRangeBounds(container.node, offset, text.length);\n            } else if (container.node && typeof(container.node.data) === \"string\") {\n                var replacementNode = container.node.splitText(text.length);\n                var bounds = this.getWrapperBounds(container.node, container.parent.hasTransform());\n                container.node = replacementNode;\n                return bounds;\n            }\n        } else if(!this.support.rangeBounds || container.parent.hasTransform()){\n            container.node = container.node.splitText(text.length);\n        }\n        return {};\n    };\n};\n\nNodeParser.prototype.getWrapperBounds = function(node, transform) {\n    var wrapper = node.ownerDocument.createElement('html2canvaswrapper');\n    var parent = node.parentNode,\n        backupText = node.cloneNode(true);\n\n    wrapper.appendChild(node.cloneNode(true));\n    parent.replaceChild(wrapper, node);\n    var bounds = transform ? offsetBounds(wrapper) : getBounds(wrapper);\n    parent.replaceChild(backupText, wrapper);\n    return bounds;\n};\n\nNodeParser.prototype.getRangeBounds = function(node, offset, length) {\n    var range = this.range || (this.range = node.ownerDocument.createRange());\n    range.setStart(node, offset);\n    range.setEnd(node, offset + length);\n    return range.getBoundingClientRect();\n};\n\nfunction ClearTransform() {}\n\nNodeParser.prototype.parse = function(stack) {\n    // http://www.w3.org/TR/CSS21/visuren.html#z-index\n    var negativeZindex = stack.contexts.filter(negativeZIndex); // 2. the child stacking contexts with negative stack levels (most negative first).\n    var descendantElements = stack.children.filter(isElement);\n    var descendantNonFloats = descendantElements.filter(not(isFloating));\n    var nonInlineNonPositionedDescendants = descendantNonFloats.filter(not(isPositioned)).filter(not(inlineLevel)); // 3 the in-flow, non-inline-level, non-positioned descendants.\n    var nonPositionedFloats = descendantElements.filter(not(isPositioned)).filter(isFloating); // 4. the non-positioned floats.\n    var inFlow = descendantNonFloats.filter(not(isPositioned)).filter(inlineLevel); // 5. the in-flow, inline-level, non-positioned descendants, including inline tables and inline blocks.\n    var stackLevel0 = stack.contexts.concat(descendantNonFloats.filter(isPositioned)).filter(zIndex0); // 6. the child stacking contexts with stack level 0 and the positioned descendants with stack level 0.\n    var text = stack.children.filter(isTextNode).filter(hasText);\n    var positiveZindex = stack.contexts.filter(positiveZIndex); // 7. the child stacking contexts with positive stack levels (least positive first).\n    negativeZindex.concat(nonInlineNonPositionedDescendants).concat(nonPositionedFloats)\n        .concat(inFlow).concat(stackLevel0).concat(text).concat(positiveZindex).forEach(function(container) {\n            this.renderQueue.push(container);\n            if (isStackingContext(container)) {\n                this.parse(container);\n                this.renderQueue.push(new ClearTransform());\n            }\n        }, this);\n};\n\nNodeParser.prototype.paint = function(container) {\n    try {\n        if (container instanceof ClearTransform) {\n            this.renderer.ctx.restore();\n        } else if (isTextNode(container)) {\n            if (isPseudoElement(container.parent)) {\n                container.parent.appendToDOM();\n            }\n            this.paintText(container);\n            if (isPseudoElement(container.parent)) {\n                container.parent.cleanDOM();\n            }\n        } else {\n            this.paintNode(container);\n        }\n    } catch(e) {\n        log(e);\n        if (this.options.strict) {\n            throw e;\n        }\n    }\n};\n\nNodeParser.prototype.paintNode = function(container) {\n    if (isStackingContext(container)) {\n        this.renderer.setOpacity(container.opacity);\n        this.renderer.ctx.save();\n        if (container.hasTransform()) {\n            this.renderer.setTransform(container.parseTransform());\n        }\n    }\n\n    if (container.node.nodeName === \"INPUT\" && container.node.type === \"checkbox\") {\n        this.paintCheckbox(container);\n    } else if (container.node.nodeName === \"INPUT\" && container.node.type === \"radio\") {\n        this.paintRadio(container);\n    } else {\n        this.paintElement(container);\n    }\n};\n\nNodeParser.prototype.paintElement = function(container) {\n    var bounds = container.parseBounds();\n    this.renderer.clip(container.backgroundClip, function() {\n        this.renderer.renderBackground(container, bounds, container.borders.borders.map(getWidth));\n    }, this);\n\n    this.renderer.clip(container.clip, function() {\n        this.renderer.renderBorders(container.borders.borders);\n    }, this);\n\n    this.renderer.clip(container.backgroundClip, function() {\n        switch (container.node.nodeName) {\n        case \"svg\":\n        case \"IFRAME\":\n            var imgContainer = this.images.get(container.node);\n            if (imgContainer) {\n                this.renderer.renderImage(container, bounds, container.borders, imgContainer);\n            } else {\n                log(\"Error loading <\" + container.node.nodeName + \">\", container.node);\n            }\n            break;\n        case \"IMG\":\n            var imageContainer = this.images.get(container.node.src);\n            if (imageContainer) {\n                this.renderer.renderImage(container, bounds, container.borders, imageContainer);\n            } else {\n                log(\"Error loading <img>\", container.node.src);\n            }\n            break;\n        case \"CANVAS\":\n            this.renderer.renderImage(container, bounds, container.borders, {image: container.node});\n            break;\n        case \"SELECT\":\n        case \"INPUT\":\n        case \"TEXTAREA\":\n            this.paintFormValue(container);\n            break;\n        }\n    }, this);\n};\n\nNodeParser.prototype.paintCheckbox = function(container) {\n    var b = container.parseBounds();\n\n    var size = Math.min(b.width, b.height);\n    var bounds = {width: size - 1, height: size - 1, top: b.top, left: b.left};\n    var r = [3, 3];\n    var radius = [r, r, r, r];\n    var borders = [1,1,1,1].map(function(w) {\n        return {color: new Color('#A5A5A5'), width: w};\n    });\n\n    var borderPoints = calculateCurvePoints(bounds, radius, borders);\n\n    this.renderer.clip(container.backgroundClip, function() {\n        this.renderer.rectangle(bounds.left + 1, bounds.top + 1, bounds.width - 2, bounds.height - 2, new Color(\"#DEDEDE\"));\n        this.renderer.renderBorders(calculateBorders(borders, bounds, borderPoints, radius));\n        if (container.node.checked) {\n            this.renderer.font(new Color('#424242'), 'normal', 'normal', 'bold', (size - 3) + \"px\", 'arial');\n            this.renderer.text(\"\\u2714\", bounds.left + size / 6, bounds.top + size - 1);\n        }\n    }, this);\n};\n\nNodeParser.prototype.paintRadio = function(container) {\n    var bounds = container.parseBounds();\n\n    var size = Math.min(bounds.width, bounds.height) - 2;\n\n    this.renderer.clip(container.backgroundClip, function() {\n        this.renderer.circleStroke(bounds.left + 1, bounds.top + 1, size, new Color('#DEDEDE'), 1, new Color('#A5A5A5'));\n        if (container.node.checked) {\n            this.renderer.circle(Math.ceil(bounds.left + size / 4) + 1, Math.ceil(bounds.top + size / 4) + 1, Math.floor(size / 2), new Color('#424242'));\n        }\n    }, this);\n};\n\nNodeParser.prototype.paintFormValue = function(container) {\n    var value = container.getValue();\n    if (value.length > 0) {\n        var document = container.node.ownerDocument;\n        var wrapper = document.createElement('html2canvaswrapper');\n        var properties = ['lineHeight', 'textAlign', 'fontFamily', 'fontWeight', 'fontSize', 'color',\n            'paddingLeft', 'paddingTop', 'paddingRight', 'paddingBottom',\n            'width', 'height', 'borderLeftStyle', 'borderTopStyle', 'borderLeftWidth', 'borderTopWidth',\n            'boxSizing', 'whiteSpace', 'wordWrap'];\n\n        properties.forEach(function(property) {\n            try {\n                wrapper.style[property] = container.css(property);\n            } catch(e) {\n                // Older IE has issues with \"border\"\n                log(\"html2canvas: Parse: Exception caught in renderFormValue: \" + e.message);\n            }\n        });\n        var bounds = container.parseBounds();\n        wrapper.style.position = \"fixed\";\n        wrapper.style.left = bounds.left + \"px\";\n        wrapper.style.top = bounds.top + \"px\";\n        wrapper.textContent = value;\n        document.body.appendChild(wrapper);\n        this.paintText(new TextContainer(wrapper.firstChild, container));\n        document.body.removeChild(wrapper);\n    }\n};\n\nNodeParser.prototype.paintText = function(container) {\n    container.applyTextTransform();\n    var characters = punycode.ucs2.decode(container.node.data);\n    var textList = (!this.options.letterRendering || noLetterSpacing(container)) && !hasUnicode(container.node.data) ? getWords(characters) : characters.map(function(character) {\n        return punycode.ucs2.encode([character]);\n    });\n\n    var weight = container.parent.fontWeight();\n    var size = container.parent.css('fontSize');\n    var family = container.parent.css('fontFamily');\n    var shadows = container.parent.parseTextShadows();\n\n    this.renderer.font(container.parent.color('color'), container.parent.css('fontStyle'), container.parent.css('fontVariant'), weight, size, family);\n    if (shadows.length) {\n        // TODO: support multiple text shadows\n        this.renderer.fontShadow(shadows[0].color, shadows[0].offsetX, shadows[0].offsetY, shadows[0].blur);\n    } else {\n        this.renderer.clearShadow();\n    }\n\n    this.renderer.clip(container.parent.clip, function() {\n        textList.map(this.parseTextBounds(container), this).forEach(function(bounds, index) {\n            if (bounds) {\n                this.renderer.text(textList[index], bounds.left, bounds.bottom);\n                this.renderTextDecoration(container.parent, bounds, this.fontMetrics.getMetrics(family, size));\n            }\n        }, this);\n    }, this);\n};\n\nNodeParser.prototype.renderTextDecoration = function(container, bounds, metrics) {\n    switch(container.css(\"textDecoration\").split(\" \")[0]) {\n    case \"underline\":\n        // Draws a line at the baseline of the font\n        // TODO As some browsers display the line as more than 1px if the font-size is big, need to take that into account both in position and size\n        this.renderer.rectangle(bounds.left, Math.round(bounds.top + metrics.baseline + metrics.lineWidth), bounds.width, 1, container.color(\"color\"));\n        break;\n    case \"overline\":\n        this.renderer.rectangle(bounds.left, Math.round(bounds.top), bounds.width, 1, container.color(\"color\"));\n        break;\n    case \"line-through\":\n        // TODO try and find exact position for line-through\n        this.renderer.rectangle(bounds.left, Math.ceil(bounds.top + metrics.middle + metrics.lineWidth), bounds.width, 1, container.color(\"color\"));\n        break;\n    }\n};\n\nvar borderColorTransforms = {\n    inset: [\n        [\"darken\", 0.60],\n        [\"darken\", 0.10],\n        [\"darken\", 0.10],\n        [\"darken\", 0.60]\n    ]\n};\n\nNodeParser.prototype.parseBorders = function(container) {\n    var nodeBounds = container.parseBounds();\n    var radius = getBorderRadiusData(container);\n    var borders = [\"Top\", \"Right\", \"Bottom\", \"Left\"].map(function(side, index) {\n        var style = container.css('border' + side + 'Style');\n        var color = container.color('border' + side + 'Color');\n        if (style === \"inset\" && color.isBlack()) {\n            color = new Color([255, 255, 255, color.a]); // this is wrong, but\n        }\n        var colorTransform = borderColorTransforms[style] ? borderColorTransforms[style][index] : null;\n        return {\n            width: container.cssInt('border' + side + 'Width'),\n            color: colorTransform ? color[colorTransform[0]](colorTransform[1]) : color,\n            args: null\n        };\n    });\n    var borderPoints = calculateCurvePoints(nodeBounds, radius, borders);\n\n    return {\n        clip: this.parseBackgroundClip(container, borderPoints, borders, radius, nodeBounds),\n        borders: calculateBorders(borders, nodeBounds, borderPoints, radius)\n    };\n};\n\nfunction calculateBorders(borders, nodeBounds, borderPoints, radius) {\n    return borders.map(function(border, borderSide) {\n        if (border.width > 0) {\n            var bx = nodeBounds.left;\n            var by = nodeBounds.top;\n            var bw = nodeBounds.width;\n            var bh = nodeBounds.height - (borders[2].width);\n\n            switch(borderSide) {\n            case 0:\n                // top border\n                bh = borders[0].width;\n                border.args = drawSide({\n                        c1: [bx, by],\n                        c2: [bx + bw, by],\n                        c3: [bx + bw - borders[1].width, by + bh],\n                        c4: [bx + borders[3].width, by + bh]\n                    }, radius[0], radius[1],\n                    borderPoints.topLeftOuter, borderPoints.topLeftInner, borderPoints.topRightOuter, borderPoints.topRightInner);\n                break;\n            case 1:\n                // right border\n                bx = nodeBounds.left + nodeBounds.width - (borders[1].width);\n                bw = borders[1].width;\n\n                border.args = drawSide({\n                        c1: [bx + bw, by],\n                        c2: [bx + bw, by + bh + borders[2].width],\n                        c3: [bx, by + bh],\n                        c4: [bx, by + borders[0].width]\n                    }, radius[1], radius[2],\n                    borderPoints.topRightOuter, borderPoints.topRightInner, borderPoints.bottomRightOuter, borderPoints.bottomRightInner);\n                break;\n            case 2:\n                // bottom border\n                by = (by + nodeBounds.height) - (borders[2].width);\n                bh = borders[2].width;\n                border.args = drawSide({\n                        c1: [bx + bw, by + bh],\n                        c2: [bx, by + bh],\n                        c3: [bx + borders[3].width, by],\n                        c4: [bx + bw - borders[3].width, by]\n                    }, radius[2], radius[3],\n                    borderPoints.bottomRightOuter, borderPoints.bottomRightInner, borderPoints.bottomLeftOuter, borderPoints.bottomLeftInner);\n                break;\n            case 3:\n                // left border\n                bw = borders[3].width;\n                border.args = drawSide({\n                        c1: [bx, by + bh + borders[2].width],\n                        c2: [bx, by],\n                        c3: [bx + bw, by + borders[0].width],\n                        c4: [bx + bw, by + bh]\n                    }, radius[3], radius[0],\n                    borderPoints.bottomLeftOuter, borderPoints.bottomLeftInner, borderPoints.topLeftOuter, borderPoints.topLeftInner);\n                break;\n            }\n        }\n        return border;\n    });\n}\n\nNodeParser.prototype.parseBackgroundClip = function(container, borderPoints, borders, radius, bounds) {\n    var backgroundClip = container.css('backgroundClip'),\n        borderArgs = [];\n\n    switch(backgroundClip) {\n    case \"content-box\":\n    case \"padding-box\":\n        parseCorner(borderArgs, radius[0], radius[1], borderPoints.topLeftInner, borderPoints.topRightInner, bounds.left + borders[3].width, bounds.top + borders[0].width);\n        parseCorner(borderArgs, radius[1], radius[2], borderPoints.topRightInner, borderPoints.bottomRightInner, bounds.left + bounds.width - borders[1].width, bounds.top + borders[0].width);\n        parseCorner(borderArgs, radius[2], radius[3], borderPoints.bottomRightInner, borderPoints.bottomLeftInner, bounds.left + bounds.width - borders[1].width, bounds.top + bounds.height - borders[2].width);\n        parseCorner(borderArgs, radius[3], radius[0], borderPoints.bottomLeftInner, borderPoints.topLeftInner, bounds.left + borders[3].width, bounds.top + bounds.height - borders[2].width);\n        break;\n\n    default:\n        parseCorner(borderArgs, radius[0], radius[1], borderPoints.topLeftOuter, borderPoints.topRightOuter, bounds.left, bounds.top);\n        parseCorner(borderArgs, radius[1], radius[2], borderPoints.topRightOuter, borderPoints.bottomRightOuter, bounds.left + bounds.width, bounds.top);\n        parseCorner(borderArgs, radius[2], radius[3], borderPoints.bottomRightOuter, borderPoints.bottomLeftOuter, bounds.left + bounds.width, bounds.top + bounds.height);\n        parseCorner(borderArgs, radius[3], radius[0], borderPoints.bottomLeftOuter, borderPoints.topLeftOuter, bounds.left, bounds.top + bounds.height);\n        break;\n    }\n\n    return borderArgs;\n};\n\nfunction getCurvePoints(x, y, r1, r2) {\n    var kappa = 4 * ((Math.sqrt(2) - 1) / 3);\n    var ox = (r1) * kappa, // control point offset horizontal\n        oy = (r2) * kappa, // control point offset vertical\n        xm = x + r1, // x-middle\n        ym = y + r2; // y-middle\n    return {\n        topLeft: bezierCurve({x: x, y: ym}, {x: x, y: ym - oy}, {x: xm - ox, y: y}, {x: xm, y: y}),\n        topRight: bezierCurve({x: x, y: y}, {x: x + ox,y: y}, {x: xm, y: ym - oy}, {x: xm, y: ym}),\n        bottomRight: bezierCurve({x: xm, y: y}, {x: xm, y: y + oy}, {x: x + ox, y: ym}, {x: x, y: ym}),\n        bottomLeft: bezierCurve({x: xm, y: ym}, {x: xm - ox, y: ym}, {x: x, y: y + oy}, {x: x, y:y})\n    };\n}\n\nfunction calculateCurvePoints(bounds, borderRadius, borders) {\n    var x = bounds.left,\n        y = bounds.top,\n        width = bounds.width,\n        height = bounds.height,\n\n        tlh = borderRadius[0][0] < width / 2 ? borderRadius[0][0] : width / 2,\n        tlv = borderRadius[0][1] < height / 2 ? borderRadius[0][1] : height / 2,\n        trh = borderRadius[1][0] < width / 2 ? borderRadius[1][0] : width / 2,\n        trv = borderRadius[1][1] < height / 2 ? borderRadius[1][1] : height / 2,\n        brh = borderRadius[2][0] < width / 2 ? borderRadius[2][0] : width / 2,\n        brv = borderRadius[2][1] < height / 2 ? borderRadius[2][1] : height / 2,\n        blh = borderRadius[3][0] < width / 2 ? borderRadius[3][0] : width / 2,\n        blv = borderRadius[3][1] < height / 2 ? borderRadius[3][1] : height / 2;\n\n    var topWidth = width - trh,\n        rightHeight = height - brv,\n        bottomWidth = width - brh,\n        leftHeight = height - blv;\n\n    return {\n        topLeftOuter: getCurvePoints(x, y, tlh, tlv).topLeft.subdivide(0.5),\n        topLeftInner: getCurvePoints(x + borders[3].width, y + borders[0].width, Math.max(0, tlh - borders[3].width), Math.max(0, tlv - borders[0].width)).topLeft.subdivide(0.5),\n        topRightOuter: getCurvePoints(x + topWidth, y, trh, trv).topRight.subdivide(0.5),\n        topRightInner: getCurvePoints(x + Math.min(topWidth, width + borders[3].width), y + borders[0].width, (topWidth > width + borders[3].width) ? 0 :trh - borders[3].width, trv - borders[0].width).topRight.subdivide(0.5),\n        bottomRightOuter: getCurvePoints(x + bottomWidth, y + rightHeight, brh, brv).bottomRight.subdivide(0.5),\n        bottomRightInner: getCurvePoints(x + Math.min(bottomWidth, width - borders[3].width), y + Math.min(rightHeight, height + borders[0].width), Math.max(0, brh - borders[1].width),  brv - borders[2].width).bottomRight.subdivide(0.5),\n        bottomLeftOuter: getCurvePoints(x, y + leftHeight, blh, blv).bottomLeft.subdivide(0.5),\n        bottomLeftInner: getCurvePoints(x + borders[3].width, y + leftHeight, Math.max(0, blh - borders[3].width), blv - borders[2].width).bottomLeft.subdivide(0.5)\n    };\n}\n\nfunction bezierCurve(start, startControl, endControl, end) {\n    var lerp = function (a, b, t) {\n        return {\n            x: a.x + (b.x - a.x) * t,\n            y: a.y + (b.y - a.y) * t\n        };\n    };\n\n    return {\n        start: start,\n        startControl: startControl,\n        endControl: endControl,\n        end: end,\n        subdivide: function(t) {\n            var ab = lerp(start, startControl, t),\n                bc = lerp(startControl, endControl, t),\n                cd = lerp(endControl, end, t),\n                abbc = lerp(ab, bc, t),\n                bccd = lerp(bc, cd, t),\n                dest = lerp(abbc, bccd, t);\n            return [bezierCurve(start, ab, abbc, dest), bezierCurve(dest, bccd, cd, end)];\n        },\n        curveTo: function(borderArgs) {\n            borderArgs.push([\"bezierCurve\", startControl.x, startControl.y, endControl.x, endControl.y, end.x, end.y]);\n        },\n        curveToReversed: function(borderArgs) {\n            borderArgs.push([\"bezierCurve\", endControl.x, endControl.y, startControl.x, startControl.y, start.x, start.y]);\n        }\n    };\n}\n\nfunction drawSide(borderData, radius1, radius2, outer1, inner1, outer2, inner2) {\n    var borderArgs = [];\n\n    if (radius1[0] > 0 || radius1[1] > 0) {\n        borderArgs.push([\"line\", outer1[1].start.x, outer1[1].start.y]);\n        outer1[1].curveTo(borderArgs);\n    } else {\n        borderArgs.push([ \"line\", borderData.c1[0], borderData.c1[1]]);\n    }\n\n    if (radius2[0] > 0 || radius2[1] > 0) {\n        borderArgs.push([\"line\", outer2[0].start.x, outer2[0].start.y]);\n        outer2[0].curveTo(borderArgs);\n        borderArgs.push([\"line\", inner2[0].end.x, inner2[0].end.y]);\n        inner2[0].curveToReversed(borderArgs);\n    } else {\n        borderArgs.push([\"line\", borderData.c2[0], borderData.c2[1]]);\n        borderArgs.push([\"line\", borderData.c3[0], borderData.c3[1]]);\n    }\n\n    if (radius1[0] > 0 || radius1[1] > 0) {\n        borderArgs.push([\"line\", inner1[1].end.x, inner1[1].end.y]);\n        inner1[1].curveToReversed(borderArgs);\n    } else {\n        borderArgs.push([\"line\", borderData.c4[0], borderData.c4[1]]);\n    }\n\n    return borderArgs;\n}\n\nfunction parseCorner(borderArgs, radius1, radius2, corner1, corner2, x, y) {\n    if (radius1[0] > 0 || radius1[1] > 0) {\n        borderArgs.push([\"line\", corner1[0].start.x, corner1[0].start.y]);\n        corner1[0].curveTo(borderArgs);\n        corner1[1].curveTo(borderArgs);\n    } else {\n        borderArgs.push([\"line\", x, y]);\n    }\n\n    if (radius2[0] > 0 || radius2[1] > 0) {\n        borderArgs.push([\"line\", corner2[0].start.x, corner2[0].start.y]);\n    }\n}\n\nfunction negativeZIndex(container) {\n    return container.cssInt(\"zIndex\") < 0;\n}\n\nfunction positiveZIndex(container) {\n    return container.cssInt(\"zIndex\") > 0;\n}\n\nfunction zIndex0(container) {\n    return container.cssInt(\"zIndex\") === 0;\n}\n\nfunction inlineLevel(container) {\n    return [\"inline\", \"inline-block\", \"inline-table\"].indexOf(container.css(\"display\")) !== -1;\n}\n\nfunction isStackingContext(container) {\n    return (container instanceof StackingContext);\n}\n\nfunction hasText(container) {\n    return container.node.data.trim().length > 0;\n}\n\nfunction noLetterSpacing(container) {\n    return (/^(normal|none|0px)$/.test(container.parent.css(\"letterSpacing\")));\n}\n\nfunction getBorderRadiusData(container) {\n    return [\"TopLeft\", \"TopRight\", \"BottomRight\", \"BottomLeft\"].map(function(side) {\n        var value = container.css('border' + side + 'Radius');\n        var arr = value.split(\" \");\n        if (arr.length <= 1) {\n            arr[1] = arr[0];\n        }\n        return arr.map(asInt);\n    });\n}\n\nfunction renderableNode(node) {\n    return (node.nodeType === Node.TEXT_NODE || node.nodeType === Node.ELEMENT_NODE);\n}\n\nfunction isPositionedForStacking(container) {\n    var position = container.css(\"position\");\n    var zIndex = ([\"absolute\", \"relative\", \"fixed\"].indexOf(position) !== -1) ? container.css(\"zIndex\") : \"auto\";\n    return zIndex !== \"auto\";\n}\n\nfunction isPositioned(container) {\n    return container.css(\"position\") !== \"static\";\n}\n\nfunction isFloating(container) {\n    return container.css(\"float\") !== \"none\";\n}\n\nfunction isInlineBlock(container) {\n    return [\"inline-block\", \"inline-table\"].indexOf(container.css(\"display\")) !== -1;\n}\n\nfunction not(callback) {\n    var context = this;\n    return function() {\n        return !callback.apply(context, arguments);\n    };\n}\n\nfunction isElement(container) {\n    return container.node.nodeType === Node.ELEMENT_NODE;\n}\n\nfunction isPseudoElement(container) {\n    return container.isPseudoElement === true;\n}\n\nfunction isTextNode(container) {\n    return container.node.nodeType === Node.TEXT_NODE;\n}\n\nfunction zIndexSort(contexts) {\n    return function(a, b) {\n        return (a.cssInt(\"zIndex\") + (contexts.indexOf(a) / contexts.length)) - (b.cssInt(\"zIndex\") + (contexts.indexOf(b) / contexts.length));\n    };\n}\n\nfunction hasOpacity(container) {\n    return container.getOpacity() < 1;\n}\n\nfunction asInt(value) {\n    return parseInt(value, 10);\n}\n\nfunction getWidth(border) {\n    return border.width;\n}\n\nfunction nonIgnoredElement(nodeContainer) {\n    return (nodeContainer.node.nodeType !== Node.ELEMENT_NODE || [\"SCRIPT\", \"HEAD\", \"TITLE\", \"OBJECT\", \"BR\", \"OPTION\"].indexOf(nodeContainer.node.nodeName) === -1);\n}\n\nfunction flatten(arrays) {\n    return [].concat.apply([], arrays);\n}\n\nfunction stripQuotes(content) {\n    var first = content.substr(0, 1);\n    return (first === content.substr(content.length - 1) && first.match(/'|\"/)) ? content.substr(1, content.length - 2) : content;\n}\n\nfunction getWords(characters) {\n    var words = [], i = 0, onWordBoundary = false, word;\n    while(characters.length) {\n        if (isWordBoundary(characters[i]) === onWordBoundary) {\n            word = characters.splice(0, i);\n            if (word.length) {\n                words.push(punycode.ucs2.encode(word));\n            }\n            onWordBoundary =! onWordBoundary;\n            i = 0;\n        } else {\n            i++;\n        }\n\n        if (i >= characters.length) {\n            word = characters.splice(0, i);\n            if (word.length) {\n                words.push(punycode.ucs2.encode(word));\n            }\n        }\n    }\n    return words;\n}\n\nfunction isWordBoundary(characterCode) {\n    return [\n        32, // <space>\n        13, // \\r\n        10, // \\n\n        9, // \\t\n        45 // -\n    ].indexOf(characterCode) !== -1;\n}\n\nfunction hasUnicode(string) {\n    return (/[^\\u0000-\\u00ff]/).test(string);\n}\n\nmodule.exports = NodeParser;\n\n},{\"./color\":3,\"./fontmetrics\":7,\"./log\":13,\"./nodecontainer\":14,\"./pseudoelementcontainer\":18,\"./stackingcontext\":21,\"./textcontainer\":25,\"./utils\":26,\"punycode\":1}],16:[function(_dereq_,module,exports){\nvar XHR = _dereq_('./xhr');\nvar utils = _dereq_('./utils');\nvar log = _dereq_('./log');\nvar createWindowClone = _dereq_('./clone');\nvar decode64 = utils.decode64;\n\nfunction Proxy(src, proxyUrl, document) {\n    var supportsCORS = ('withCredentials' in new XMLHttpRequest());\n    if (!proxyUrl) {\n        return Promise.reject(\"No proxy configured\");\n    }\n    var callback = createCallback(supportsCORS);\n    var url = createProxyUrl(proxyUrl, src, callback);\n\n    return supportsCORS ? XHR(url) : (jsonp(document, url, callback).then(function(response) {\n        return decode64(response.content);\n    }));\n}\nvar proxyCount = 0;\n\nfunction ProxyURL(src, proxyUrl, document) {\n    var supportsCORSImage = ('crossOrigin' in new Image());\n    var callback = createCallback(supportsCORSImage);\n    var url = createProxyUrl(proxyUrl, src, callback);\n    return (supportsCORSImage ? Promise.resolve(url) : jsonp(document, url, callback).then(function(response) {\n        return \"data:\" + response.type + \";base64,\" + response.content;\n    }));\n}\n\nfunction jsonp(document, url, callback) {\n    return new Promise(function(resolve, reject) {\n        var s = document.createElement(\"script\");\n        var cleanup = function() {\n            delete window.html2canvas.proxy[callback];\n            document.body.removeChild(s);\n        };\n        window.html2canvas.proxy[callback] = function(response) {\n            cleanup();\n            resolve(response);\n        };\n        s.src = url;\n        s.onerror = function(e) {\n            cleanup();\n            reject(e);\n        };\n        document.body.appendChild(s);\n    });\n}\n\nfunction createCallback(useCORS) {\n    return !useCORS ? \"html2canvas_\" + Date.now() + \"_\" + (++proxyCount) + \"_\" + Math.round(Math.random() * 100000) : \"\";\n}\n\nfunction createProxyUrl(proxyUrl, src, callback) {\n    return proxyUrl + \"?url=\" + encodeURIComponent(src) + (callback.length ? \"&callback=html2canvas.proxy.\" + callback : \"\");\n}\n\nfunction documentFromHTML(src) {\n    return function(html) {\n        var parser = new DOMParser(), doc;\n        try {\n            doc = parser.parseFromString(html, \"text/html\");\n        } catch(e) {\n            log(\"DOMParser not supported, falling back to createHTMLDocument\");\n            doc = document.implementation.createHTMLDocument(\"\");\n            try {\n                doc.open();\n                doc.write(html);\n                doc.close();\n            } catch(ee) {\n                log(\"createHTMLDocument write not supported, falling back to document.body.innerHTML\");\n                doc.body.innerHTML = html; // ie9 doesnt support writing to documentElement\n            }\n        }\n\n        var b = doc.querySelector(\"base\");\n        if (!b || !b.href.host) {\n            var base = doc.createElement(\"base\");\n            base.href = src;\n            doc.head.insertBefore(base, doc.head.firstChild);\n        }\n\n        return doc;\n    };\n}\n\nfunction loadUrlDocument(src, proxy, document, width, height, options) {\n    return new Proxy(src, proxy, window.document).then(documentFromHTML(src)).then(function(doc) {\n        return createWindowClone(doc, document, width, height, options, 0, 0);\n    });\n}\n\nexports.Proxy = Proxy;\nexports.ProxyURL = ProxyURL;\nexports.loadUrlDocument = loadUrlDocument;\n\n},{\"./clone\":2,\"./log\":13,\"./utils\":26,\"./xhr\":28}],17:[function(_dereq_,module,exports){\nvar ProxyURL = _dereq_('./proxy').ProxyURL;\n\nfunction ProxyImageContainer(src, proxy) {\n    var link = document.createElement(\"a\");\n    link.href = src;\n    src = link.href;\n    this.src = src;\n    this.image = new Image();\n    var self = this;\n    this.promise = new Promise(function(resolve, reject) {\n        self.image.crossOrigin = \"Anonymous\";\n        self.image.onload = resolve;\n        self.image.onerror = reject;\n\n        new ProxyURL(src, proxy, document).then(function(url) {\n            self.image.src = url;\n        })['catch'](reject);\n    });\n}\n\nmodule.exports = ProxyImageContainer;\n\n},{\"./proxy\":16}],18:[function(_dereq_,module,exports){\nvar NodeContainer = _dereq_('./nodecontainer');\n\nfunction PseudoElementContainer(node, parent, type) {\n    NodeContainer.call(this, node, parent);\n    this.isPseudoElement = true;\n    this.before = type === \":before\";\n}\n\nPseudoElementContainer.prototype.cloneTo = function(stack) {\n    PseudoElementContainer.prototype.cloneTo.call(this, stack);\n    stack.isPseudoElement = true;\n    stack.before = this.before;\n};\n\nPseudoElementContainer.prototype = Object.create(NodeContainer.prototype);\n\nPseudoElementContainer.prototype.appendToDOM = function() {\n    if (this.before) {\n        this.parent.node.insertBefore(this.node, this.parent.node.firstChild);\n    } else {\n        this.parent.node.appendChild(this.node);\n    }\n    this.parent.node.className += \" \" + this.getHideClass();\n};\n\nPseudoElementContainer.prototype.cleanDOM = function() {\n    this.node.parentNode.removeChild(this.node);\n    this.parent.node.className = this.parent.node.className.replace(this.getHideClass(), \"\");\n};\n\nPseudoElementContainer.prototype.getHideClass = function() {\n    return this[\"PSEUDO_HIDE_ELEMENT_CLASS_\" + (this.before ? \"BEFORE\" : \"AFTER\")];\n};\n\nPseudoElementContainer.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE = \"___html2canvas___pseudoelement_before\";\nPseudoElementContainer.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER = \"___html2canvas___pseudoelement_after\";\n\nmodule.exports = PseudoElementContainer;\n\n},{\"./nodecontainer\":14}],19:[function(_dereq_,module,exports){\nvar log = _dereq_('./log');\n\nfunction Renderer(width, height, images, options, document) {\n    this.width = width;\n    this.height = height;\n    this.images = images;\n    this.options = options;\n    this.document = document;\n}\n\nRenderer.prototype.renderImage = function(container, bounds, borderData, imageContainer) {\n    var paddingLeft = container.cssInt('paddingLeft'),\n        paddingTop = container.cssInt('paddingTop'),\n        paddingRight = container.cssInt('paddingRight'),\n        paddingBottom = container.cssInt('paddingBottom'),\n        borders = borderData.borders;\n\n    var width = bounds.width - (borders[1].width + borders[3].width + paddingLeft + paddingRight);\n    var height = bounds.height - (borders[0].width + borders[2].width + paddingTop + paddingBottom);\n    this.drawImage(\n        imageContainer,\n        0,\n        0,\n        imageContainer.image.width || width,\n        imageContainer.image.height || height,\n        bounds.left + paddingLeft + borders[3].width,\n        bounds.top + paddingTop + borders[0].width,\n        width,\n        height\n    );\n};\n\nRenderer.prototype.renderBackground = function(container, bounds, borderData) {\n    if (bounds.height > 0 && bounds.width > 0) {\n        this.renderBackgroundColor(container, bounds);\n        this.renderBackgroundImage(container, bounds, borderData);\n    }\n};\n\nRenderer.prototype.renderBackgroundColor = function(container, bounds) {\n    var color = container.color(\"backgroundColor\");\n    if (!color.isTransparent()) {\n        this.rectangle(bounds.left, bounds.top, bounds.width, bounds.height, color);\n    }\n};\n\nRenderer.prototype.renderBorders = function(borders) {\n    borders.forEach(this.renderBorder, this);\n};\n\nRenderer.prototype.renderBorder = function(data) {\n    if (!data.color.isTransparent() && data.args !== null) {\n        this.drawShape(data.args, data.color);\n    }\n};\n\nRenderer.prototype.renderBackgroundImage = function(container, bounds, borderData) {\n    var backgroundImages = container.parseBackgroundImages();\n    backgroundImages.reverse().forEach(function(backgroundImage, index, arr) {\n        switch(backgroundImage.method) {\n        case \"url\":\n            var image = this.images.get(backgroundImage.args[0]);\n            if (image) {\n                this.renderBackgroundRepeating(container, bounds, image, arr.length - (index+1), borderData);\n            } else {\n                log(\"Error loading background-image\", backgroundImage.args[0]);\n            }\n            break;\n        case \"linear-gradient\":\n        case \"gradient\":\n            var gradientImage = this.images.get(backgroundImage.value);\n            if (gradientImage) {\n                this.renderBackgroundGradient(gradientImage, bounds, borderData);\n            } else {\n                log(\"Error loading background-image\", backgroundImage.args[0]);\n            }\n            break;\n        case \"none\":\n            break;\n        default:\n            log(\"Unknown background-image type\", backgroundImage.args[0]);\n        }\n    }, this);\n};\n\nRenderer.prototype.renderBackgroundRepeating = function(container, bounds, imageContainer, index, borderData) {\n    var size = container.parseBackgroundSize(bounds, imageContainer.image, index);\n    var position = container.parseBackgroundPosition(bounds, imageContainer.image, index, size);\n    var repeat = container.parseBackgroundRepeat(index);\n    switch (repeat) {\n    case \"repeat-x\":\n    case \"repeat no-repeat\":\n        this.backgroundRepeatShape(imageContainer, position, size, bounds, bounds.left + borderData[3], bounds.top + position.top + borderData[0], 99999, size.height, borderData);\n        break;\n    case \"repeat-y\":\n    case \"no-repeat repeat\":\n        this.backgroundRepeatShape(imageContainer, position, size, bounds, bounds.left + position.left + borderData[3], bounds.top + borderData[0], size.width, 99999, borderData);\n        break;\n    case \"no-repeat\":\n        this.backgroundRepeatShape(imageContainer, position, size, bounds, bounds.left + position.left + borderData[3], bounds.top + position.top + borderData[0], size.width, size.height, borderData);\n        break;\n    default:\n        this.renderBackgroundRepeat(imageContainer, position, size, {top: bounds.top, left: bounds.left}, borderData[3], borderData[0]);\n        break;\n    }\n};\n\nmodule.exports = Renderer;\n\n},{\"./log\":13}],20:[function(_dereq_,module,exports){\nvar Renderer = _dereq_('../renderer');\nvar LinearGradientContainer = _dereq_('../lineargradientcontainer');\nvar log = _dereq_('../log');\n\nfunction CanvasRenderer(width, height) {\n    Renderer.apply(this, arguments);\n    this.canvas = this.options.canvas || this.document.createElement(\"canvas\");\n    if (!this.options.canvas) {\n        this.canvas.width = width;\n        this.canvas.height = height;\n    }\n    this.ctx = this.canvas.getContext(\"2d\");\n    this.taintCtx = this.document.createElement(\"canvas\").getContext(\"2d\");\n    this.ctx.textBaseline = \"bottom\";\n    this.variables = {};\n    log(\"Initialized CanvasRenderer with size\", width, \"x\", height);\n}\n\nCanvasRenderer.prototype = Object.create(Renderer.prototype);\n\nCanvasRenderer.prototype.setFillStyle = function(fillStyle) {\n    this.ctx.fillStyle = typeof(fillStyle) === \"object\" && !!fillStyle.isColor ? fillStyle.toString() : fillStyle;\n    return this.ctx;\n};\n\nCanvasRenderer.prototype.rectangle = function(left, top, width, height, color) {\n    this.setFillStyle(color).fillRect(left, top, width, height);\n};\n\nCanvasRenderer.prototype.circle = function(left, top, size, color) {\n    this.setFillStyle(color);\n    this.ctx.beginPath();\n    this.ctx.arc(left + size / 2, top + size / 2, size / 2, 0, Math.PI*2, true);\n    this.ctx.closePath();\n    this.ctx.fill();\n};\n\nCanvasRenderer.prototype.circleStroke = function(left, top, size, color, stroke, strokeColor) {\n    this.circle(left, top, size, color);\n    this.ctx.strokeStyle = strokeColor.toString();\n    this.ctx.stroke();\n};\n\nCanvasRenderer.prototype.drawShape = function(shape, color) {\n    this.shape(shape);\n    this.setFillStyle(color).fill();\n};\n\nCanvasRenderer.prototype.taints = function(imageContainer) {\n    if (imageContainer.tainted === null) {\n        this.taintCtx.drawImage(imageContainer.image, 0, 0);\n        try {\n            this.taintCtx.getImageData(0, 0, 1, 1);\n            imageContainer.tainted = false;\n        } catch(e) {\n            this.taintCtx = document.createElement(\"canvas\").getContext(\"2d\");\n            imageContainer.tainted = true;\n        }\n    }\n\n    return imageContainer.tainted;\n};\n\nCanvasRenderer.prototype.drawImage = function(imageContainer, sx, sy, sw, sh, dx, dy, dw, dh) {\n    if (!this.taints(imageContainer) || this.options.allowTaint) {\n        this.ctx.drawImage(imageContainer.image, sx, sy, sw, sh, dx, dy, dw, dh);\n    }\n};\n\nCanvasRenderer.prototype.clip = function(shapes, callback, context) {\n    this.ctx.save();\n    shapes.filter(hasEntries).forEach(function(shape) {\n        this.shape(shape).clip();\n    }, this);\n    callback.call(context);\n    this.ctx.restore();\n};\n\nCanvasRenderer.prototype.shape = function(shape) {\n    this.ctx.beginPath();\n    shape.forEach(function(point, index) {\n        if (point[0] === \"rect\") {\n            this.ctx.rect.apply(this.ctx, point.slice(1));\n        } else {\n            this.ctx[(index === 0) ? \"moveTo\" : point[0] + \"To\" ].apply(this.ctx, point.slice(1));\n        }\n    }, this);\n    this.ctx.closePath();\n    return this.ctx;\n};\n\nCanvasRenderer.prototype.font = function(color, style, variant, weight, size, family) {\n    this.setFillStyle(color).font = [style, variant, weight, size, family].join(\" \").split(\",\")[0];\n};\n\nCanvasRenderer.prototype.fontShadow = function(color, offsetX, offsetY, blur) {\n    this.setVariable(\"shadowColor\", color.toString())\n        .setVariable(\"shadowOffsetY\", offsetX)\n        .setVariable(\"shadowOffsetX\", offsetY)\n        .setVariable(\"shadowBlur\", blur);\n};\n\nCanvasRenderer.prototype.clearShadow = function() {\n    this.setVariable(\"shadowColor\", \"rgba(0,0,0,0)\");\n};\n\nCanvasRenderer.prototype.setOpacity = function(opacity) {\n    this.ctx.globalAlpha = opacity;\n};\n\nCanvasRenderer.prototype.setTransform = function(transform) {\n    this.ctx.translate(transform.origin[0], transform.origin[1]);\n    this.ctx.transform.apply(this.ctx, transform.matrix);\n    this.ctx.translate(-transform.origin[0], -transform.origin[1]);\n};\n\nCanvasRenderer.prototype.setVariable = function(property, value) {\n    if (this.variables[property] !== value) {\n        this.variables[property] = this.ctx[property] = value;\n    }\n\n    return this;\n};\n\nCanvasRenderer.prototype.text = function(text, left, bottom) {\n    this.ctx.fillText(text, left, bottom);\n};\n\nCanvasRenderer.prototype.backgroundRepeatShape = function(imageContainer, backgroundPosition, size, bounds, left, top, width, height, borderData) {\n    var shape = [\n        [\"line\", Math.round(left), Math.round(top)],\n        [\"line\", Math.round(left + width), Math.round(top)],\n        [\"line\", Math.round(left + width), Math.round(height + top)],\n        [\"line\", Math.round(left), Math.round(height + top)]\n    ];\n    this.clip([shape], function() {\n        this.renderBackgroundRepeat(imageContainer, backgroundPosition, size, bounds, borderData[3], borderData[0]);\n    }, this);\n};\n\nCanvasRenderer.prototype.renderBackgroundRepeat = function(imageContainer, backgroundPosition, size, bounds, borderLeft, borderTop) {\n    var offsetX = Math.round(bounds.left + backgroundPosition.left + borderLeft), offsetY = Math.round(bounds.top + backgroundPosition.top + borderTop);\n    this.setFillStyle(this.ctx.createPattern(this.resizeImage(imageContainer, size), \"repeat\"));\n    this.ctx.translate(offsetX, offsetY);\n    this.ctx.fill();\n    this.ctx.translate(-offsetX, -offsetY);\n};\n\nCanvasRenderer.prototype.renderBackgroundGradient = function(gradientImage, bounds) {\n    if (gradientImage instanceof LinearGradientContainer) {\n        var gradient = this.ctx.createLinearGradient(\n            bounds.left + bounds.width * gradientImage.x0,\n            bounds.top + bounds.height * gradientImage.y0,\n            bounds.left +  bounds.width * gradientImage.x1,\n            bounds.top +  bounds.height * gradientImage.y1);\n        gradientImage.colorStops.forEach(function(colorStop) {\n            gradient.addColorStop(colorStop.stop, colorStop.color.toString());\n        });\n        this.rectangle(bounds.left, bounds.top, bounds.width, bounds.height, gradient);\n    }\n};\n\nCanvasRenderer.prototype.resizeImage = function(imageContainer, size) {\n    var image = imageContainer.image;\n    if(image.width === size.width && image.height === size.height) {\n        return image;\n    }\n\n    var ctx, canvas = document.createElement('canvas');\n    canvas.width = size.width;\n    canvas.height = size.height;\n    ctx = canvas.getContext(\"2d\");\n    ctx.drawImage(image, 0, 0, image.width, image.height, 0, 0, size.width, size.height );\n    return canvas;\n};\n\nfunction hasEntries(array) {\n    return array.length > 0;\n}\n\nmodule.exports = CanvasRenderer;\n\n},{\"../lineargradientcontainer\":12,\"../log\":13,\"../renderer\":19}],21:[function(_dereq_,module,exports){\nvar NodeContainer = _dereq_('./nodecontainer');\n\nfunction StackingContext(hasOwnStacking, opacity, element, parent) {\n    NodeContainer.call(this, element, parent);\n    this.ownStacking = hasOwnStacking;\n    this.contexts = [];\n    this.children = [];\n    this.opacity = (this.parent ? this.parent.stack.opacity : 1) * opacity;\n}\n\nStackingContext.prototype = Object.create(NodeContainer.prototype);\n\nStackingContext.prototype.getParentStack = function(context) {\n    var parentStack = (this.parent) ? this.parent.stack : null;\n    return parentStack ? (parentStack.ownStacking ? parentStack : parentStack.getParentStack(context)) : context.stack;\n};\n\nmodule.exports = StackingContext;\n\n},{\"./nodecontainer\":14}],22:[function(_dereq_,module,exports){\nfunction Support(document) {\n    this.rangeBounds = this.testRangeBounds(document);\n    this.cors = this.testCORS();\n    this.svg = this.testSVG();\n}\n\nSupport.prototype.testRangeBounds = function(document) {\n    var range, testElement, rangeBounds, rangeHeight, support = false;\n\n    if (document.createRange) {\n        range = document.createRange();\n        if (range.getBoundingClientRect) {\n            testElement = document.createElement('boundtest');\n            testElement.style.height = \"123px\";\n            testElement.style.display = \"block\";\n            document.body.appendChild(testElement);\n\n            range.selectNode(testElement);\n            rangeBounds = range.getBoundingClientRect();\n            rangeHeight = rangeBounds.height;\n\n            if (rangeHeight === 123) {\n                support = true;\n            }\n            document.body.removeChild(testElement);\n        }\n    }\n\n    return support;\n};\n\nSupport.prototype.testCORS = function() {\n    return typeof((new Image()).crossOrigin) !== \"undefined\";\n};\n\nSupport.prototype.testSVG = function() {\n    var img = new Image();\n    var canvas = document.createElement(\"canvas\");\n    var ctx =  canvas.getContext(\"2d\");\n    img.src = \"data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>\";\n\n    try {\n        ctx.drawImage(img, 0, 0);\n        canvas.toDataURL();\n    } catch(e) {\n        return false;\n    }\n    return true;\n};\n\nmodule.exports = Support;\n\n},{}],23:[function(_dereq_,module,exports){\nvar XHR = _dereq_('./xhr');\nvar decode64 = _dereq_('./utils').decode64;\n\nfunction SVGContainer(src) {\n    this.src = src;\n    this.image = null;\n    var self = this;\n\n    this.promise = this.hasFabric().then(function() {\n        return (self.isInline(src) ? Promise.resolve(self.inlineFormatting(src)) : XHR(src));\n    }).then(function(svg) {\n        return new Promise(function(resolve) {\n            window.html2canvas.svg.fabric.loadSVGFromString(svg, self.createCanvas.call(self, resolve));\n        });\n    });\n}\n\nSVGContainer.prototype.hasFabric = function() {\n    return !window.html2canvas.svg || !window.html2canvas.svg.fabric ? Promise.reject(new Error(\"html2canvas.svg.js is not loaded, cannot render svg\")) : Promise.resolve();\n};\n\nSVGContainer.prototype.inlineFormatting = function(src) {\n    return (/^data:image\\/svg\\+xml;base64,/.test(src)) ? this.decode64(this.removeContentType(src)) : this.removeContentType(src);\n};\n\nSVGContainer.prototype.removeContentType = function(src) {\n    return src.replace(/^data:image\\/svg\\+xml(;base64)?,/,'');\n};\n\nSVGContainer.prototype.isInline = function(src) {\n    return (/^data:image\\/svg\\+xml/i.test(src));\n};\n\nSVGContainer.prototype.createCanvas = function(resolve) {\n    var self = this;\n    return function (objects, options) {\n        var canvas = new window.html2canvas.svg.fabric.StaticCanvas('c');\n        self.image = canvas.lowerCanvasEl;\n        canvas\n            .setWidth(options.width)\n            .setHeight(options.height)\n            .add(window.html2canvas.svg.fabric.util.groupSVGElements(objects, options))\n            .renderAll();\n        resolve(canvas.lowerCanvasEl);\n    };\n};\n\nSVGContainer.prototype.decode64 = function(str) {\n    return (typeof(window.atob) === \"function\") ? window.atob(str) : decode64(str);\n};\n\nmodule.exports = SVGContainer;\n\n},{\"./utils\":26,\"./xhr\":28}],24:[function(_dereq_,module,exports){\nvar SVGContainer = _dereq_('./svgcontainer');\n\nfunction SVGNodeContainer(node, _native) {\n    this.src = node;\n    this.image = null;\n    var self = this;\n\n    this.promise = _native ? new Promise(function(resolve, reject) {\n        self.image = new Image();\n        self.image.onload = resolve;\n        self.image.onerror = reject;\n        self.image.src = \"data:image/svg+xml,\" + (new XMLSerializer()).serializeToString(node);\n        if (self.image.complete === true) {\n            resolve(self.image);\n        }\n    }) : this.hasFabric().then(function() {\n        return new Promise(function(resolve) {\n            window.html2canvas.svg.fabric.parseSVGDocument(node, self.createCanvas.call(self, resolve));\n        });\n    });\n}\n\nSVGNodeContainer.prototype = Object.create(SVGContainer.prototype);\n\nmodule.exports = SVGNodeContainer;\n\n},{\"./svgcontainer\":23}],25:[function(_dereq_,module,exports){\nvar NodeContainer = _dereq_('./nodecontainer');\n\nfunction TextContainer(node, parent) {\n    NodeContainer.call(this, node, parent);\n}\n\nTextContainer.prototype = Object.create(NodeContainer.prototype);\n\nTextContainer.prototype.applyTextTransform = function() {\n    this.node.data = this.transform(this.parent.css(\"textTransform\"));\n};\n\nTextContainer.prototype.transform = function(transform) {\n    var text = this.node.data;\n    switch(transform){\n        case \"lowercase\":\n            return text.toLowerCase();\n        case \"capitalize\":\n            return text.replace(/(^|\\s|:|-|\\(|\\))([a-z])/g, capitalize);\n        case \"uppercase\":\n            return text.toUpperCase();\n        default:\n            return text;\n    }\n};\n\nfunction capitalize(m, p1, p2) {\n    if (m.length > 0) {\n        return p1 + p2.toUpperCase();\n    }\n}\n\nmodule.exports = TextContainer;\n\n},{\"./nodecontainer\":14}],26:[function(_dereq_,module,exports){\nexports.smallImage = function smallImage() {\n    return \"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\";\n};\n\nexports.bind = function(callback, context) {\n    return function() {\n        return callback.apply(context, arguments);\n    };\n};\n\n/*\n * base64-arraybuffer\n * https://github.com/niklasvh/base64-arraybuffer\n *\n * Copyright (c) 2012 Niklas von Hertzen\n * Licensed under the MIT license.\n */\n\nexports.decode64 = function(base64) {\n    var chars = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";\n    var len = base64.length, i, encoded1, encoded2, encoded3, encoded4, byte1, byte2, byte3;\n\n    var output = \"\";\n\n    for (i = 0; i < len; i+=4) {\n        encoded1 = chars.indexOf(base64[i]);\n        encoded2 = chars.indexOf(base64[i+1]);\n        encoded3 = chars.indexOf(base64[i+2]);\n        encoded4 = chars.indexOf(base64[i+3]);\n\n        byte1 = (encoded1 << 2) | (encoded2 >> 4);\n        byte2 = ((encoded2 & 15) << 4) | (encoded3 >> 2);\n        byte3 = ((encoded3 & 3) << 6) | encoded4;\n        if (encoded3 === 64) {\n            output += String.fromCharCode(byte1);\n        } else if (encoded4 === 64 || encoded4 === -1) {\n            output += String.fromCharCode(byte1, byte2);\n        } else{\n            output += String.fromCharCode(byte1, byte2, byte3);\n        }\n    }\n\n    return output;\n};\n\nexports.getBounds = function(node) {\n    if (node.getBoundingClientRect) {\n        var clientRect = node.getBoundingClientRect();\n        var width = node.offsetWidth == null ? clientRect.width : node.offsetWidth;\n        return {\n            top: clientRect.top,\n            bottom: clientRect.bottom || (clientRect.top + clientRect.height),\n            right: clientRect.left + width,\n            left: clientRect.left,\n            width:  width,\n            height: node.offsetHeight == null ? clientRect.height : node.offsetHeight\n        };\n    }\n    return {};\n};\n\nexports.offsetBounds = function(node) {\n    var parent = node.offsetParent ? exports.offsetBounds(node.offsetParent) : {top: 0, left: 0};\n\n    return {\n        top: node.offsetTop + parent.top,\n        bottom: node.offsetTop + node.offsetHeight + parent.top,\n        right: node.offsetLeft + parent.left + node.offsetWidth,\n        left: node.offsetLeft + parent.left,\n        width: node.offsetWidth,\n        height: node.offsetHeight\n    };\n};\n\nexports.parseBackgrounds = function(backgroundImage) {\n    var whitespace = ' \\r\\n\\t',\n        method, definition, prefix, prefix_i, block, results = [],\n        mode = 0, numParen = 0, quote, args;\n    var appendResult = function() {\n        if(method) {\n            if (definition.substr(0, 1) === '\"') {\n                definition = definition.substr(1, definition.length - 2);\n            }\n            if (definition) {\n                args.push(definition);\n            }\n            if (method.substr(0, 1) === '-' && (prefix_i = method.indexOf('-', 1 ) + 1) > 0) {\n                prefix = method.substr(0, prefix_i);\n                method = method.substr(prefix_i);\n            }\n            results.push({\n                prefix: prefix,\n                method: method.toLowerCase(),\n                value: block,\n                args: args,\n                image: null\n            });\n        }\n        args = [];\n        method = prefix = definition = block = '';\n    };\n    args = [];\n    method = prefix = definition = block = '';\n    backgroundImage.split(\"\").forEach(function(c) {\n        if (mode === 0 && whitespace.indexOf(c) > -1) {\n            return;\n        }\n        switch(c) {\n        case '\"':\n            if(!quote) {\n                quote = c;\n            } else if(quote === c) {\n                quote = null;\n            }\n            break;\n        case '(':\n            if(quote) {\n                break;\n            } else if(mode === 0) {\n                mode = 1;\n                block += c;\n                return;\n            } else {\n                numParen++;\n            }\n            break;\n        case ')':\n            if (quote) {\n                break;\n            } else if(mode === 1) {\n                if(numParen === 0) {\n                    mode = 0;\n                    block += c;\n                    appendResult();\n                    return;\n                } else {\n                    numParen--;\n                }\n            }\n            break;\n\n        case ',':\n            if (quote) {\n                break;\n            } else if(mode === 0) {\n                appendResult();\n                return;\n            } else if (mode === 1) {\n                if (numParen === 0 && !method.match(/^url$/i)) {\n                    args.push(definition);\n                    definition = '';\n                    block += c;\n                    return;\n                }\n            }\n            break;\n        }\n\n        block += c;\n        if (mode === 0) {\n            method += c;\n        } else {\n            definition += c;\n        }\n    });\n\n    appendResult();\n    return results;\n};\n\n},{}],27:[function(_dereq_,module,exports){\nvar GradientContainer = _dereq_('./gradientcontainer');\n\nfunction WebkitGradientContainer(imageData) {\n    GradientContainer.apply(this, arguments);\n    this.type = imageData.args[0] === \"linear\" ? GradientContainer.TYPES.LINEAR : GradientContainer.TYPES.RADIAL;\n}\n\nWebkitGradientContainer.prototype = Object.create(GradientContainer.prototype);\n\nmodule.exports = WebkitGradientContainer;\n\n},{\"./gradientcontainer\":9}],28:[function(_dereq_,module,exports){\nfunction XHR(url) {\n    return new Promise(function(resolve, reject) {\n        var xhr = new XMLHttpRequest();\n        xhr.open('GET', url);\n\n        xhr.onload = function() {\n            if (xhr.status === 200) {\n                resolve(xhr.responseText);\n            } else {\n                reject(new Error(xhr.statusText));\n            }\n        };\n\n        xhr.onerror = function() {\n            reject(new Error(\"Network Error\"));\n        };\n\n        xhr.send();\n    });\n}\n\nmodule.exports = XHR;\n\n},{}]},{},[4])(4)\n});\n\n\n/** WEBPACK FOOTER **\n ** ./~/html2canvas/dist/html2canvas.js\n **/","/**\n * base class for all object in the library\n * @class Baseobject\n */\nexport default class BaseObject {\n  /**\n   * virtual function for returning class name\n   * @returns {string}\n   */\n  getName() {\n    return '';\n  }\n\n  /**\n   * returns if current mode is debugging mode\n   * @returns {bool}\n   */\n  isDebug() {\n    return this._debugMode;\n  }\n\n  /**\n   * logs message and object for debugging purpose\n   * @param {string} message\n   * @param {Array<any>} args\n   */\n  log(message, ...args) {\n    if (!this.isDebug()) {\n      return;\n    }\n\n    console.log(`${this.getName()}: ${message}`, ...args);\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/base-object.js\n **/","import BaseObject from './base-object';\nimport Rect from './rect';\n\n/**\n * State enabled class to manage grey canvas on top of html page for cropping\n * @class CanvasState\n */\nexport default class CanvasState extends BaseObject {\n  /**\n   * object constructor\n   * @param {HTMLDocument} doc\n   * @param {HTMLElement} canvas - canvas DOM element\n   */\n  constructor(doc, canvas, debugMode = true) {\n    super();\n\n    this._onMouseDown = this._onMouseDown.bind(this);\n    this._onMouseMove = this._onMouseMove.bind(this);\n    this._onMouseUp = this._onMouseUp.bind(this);\n    this._onTouch = this._onTouch.bind(this);\n\n    this._document = doc;\n    this._canvas = canvas;\n    this._width = canvas.width;\n    this._height = canvas.height;\n    this._ctx = canvas.getContext('2d');\n    this._debugMode = debugMode;\n\n    const html = this._document.body.parentNode;\n\n    this._htmlTop = html.offsetTop;\n    this._htmlLeft = html.offsetLeft;\n\n    this._valid = false; // when set to false, the canvas will redraw everything\n    this._shape = null;  // the rectangle shape\n    this._dragging = false; // Keep track of when we are dragging\n    this._dragoffx = 0; // See mousedown and mousemove events for explanation\n    this._dragoffy = 0;\n\n    this.log('initialized');\n\n    this._initRect();\n    this._initEvents();\n\n    this._interval = 30;\n    setInterval(() => {\n      this.draw();\n    }, this._interval);\n  }\n\n  /**\n   * returns class name\n   * @returns {string}\n   */\n  getName() {\n    return 'CanvasState';\n  }\n\n  _onMouseDown(e) {\n    const { _shape } = this;\n    const mouse = this.getMouse(e);\n    const mx = mouse.x;\n    const my = mouse.y;\n    this._valid = false;\n    if (_shape.contains(mx, my)) {\n      this._dragoffx = mx - _shape._x;\n      this._dragoffy = my - _shape._y;\n      this._dragging = true;\n\n      this.log('mouse down detected. starting drag', mx, my);\n    }\n\n    this._currentHandle = this._shape.getHoverSelectionHandle(mouse.x, mouse.y);\n  }\n\n  _onMouseMove(e) {\n    const { _shape, _canvas } = this;\n    const mouse = this.getMouse(e);\n    const oldx = _shape._x;\n    const oldy = _shape._y;\n    const mx = mouse.x;\n    const my = mouse.y;\n    const handleIndex = _shape.getHoverSelectionHandle(mx, my);\n    switch (handleIndex) {\n      case 0:\n        _canvas.style.cursor = 'nw-resize';\n        break;\n      case 1:\n        _canvas.style.cursor = 'n-resize';\n        break;\n      case 2:\n        _canvas.style.cursor = 'ne-resize';\n        break;\n      case 3:\n        _canvas.style.cursor = 'w-resize';\n        break;\n      case 4:\n        _canvas.style.cursor = 'e-resize';\n        break;\n      case 5:\n        _canvas.style.cursor = 'sw-resize';\n        break;\n      case 6:\n        _canvas.style.cursor = 's-resize';\n        break;\n      case 7:\n        _canvas.style.cursor = 'se-resize';\n        break;\n      default:\n        _canvas.style.cursor = 'auto';\n    }\n\n    if (this._currentHandle !== false) {\n      // Handles resizing\n      switch (this._currentHandle) {\n        case 0:\n          _shape._x = mx;\n          _shape._y = my;\n          _shape._w += oldx - mx;\n          _shape._h += oldy - my;\n          break;\n        case 1:\n          _shape._y = my;\n          _shape._h += oldy - my;\n          break;\n        case 2:\n          _shape._y = my;\n          _shape._w = mx - oldx;\n          _shape._h += oldy - my;\n          break;\n        case 3:\n          _shape._x = mx;\n          _shape._w += oldx - mx;\n          break;\n        case 4:\n          _shape._w = mx - oldx;\n          break;\n        case 5:\n          _shape._x = mx;\n          _shape._w += oldx - mx;\n          _shape._h = my - oldy;\n          break;\n        case 6:\n          _shape._h = my - oldy;\n          break;\n        case 7:\n          _shape._w = mx - oldx;\n          _shape._h = my - oldy;\n          break;\n        default:\n          break;\n      }\n      this._valid = false;\n    } else if (this._dragging) {\n      // We don't want to drag the object by its top-left corner, we want to drag it\n      // from where we clicked. Thats why we saved the offset and use it here\n      this._shape._x = mouse.x - this._dragoffx;\n      this._shape._y = mouse.y - this._dragoffy;\n      this._valid = false; // Something's dragging so we must redraw\n\n      // this.log('moving the rect', mouse.x, mouse.y);\n    }\n  }\n\n  _onMouseUp() {\n    if (this._dragging) {\n      this._dragging = false;\n      this._currentHandle = false;\n      this.log('dragging finished');\n    }\n  }\n\n  /**\n   * dispatches mouse events on touch\n   */\n  _onTouch(evt) {\n    evt.preventDefault(); // prevents touch event to disable scrolling on mobile devices\n    if (evt.touches.length > 1 || (evt.type === 'touchend' && evt.touches.length > 0)) {\n      return;\n    }\n\n    const newEvt = this._document.createEvent('MouseEvents');\n    const target = evt.target || evt.srcElement || evt.originalTarget;\n    let type = null;\n    let touch = null;\n\n    switch (evt.type) {\n      case 'touchstart':\n        type = 'mousedown';\n        touch = evt.changedTouches[0];\n        break;\n      case 'touchmove':\n        type = 'mousemove';\n        touch = evt.changedTouches[0];\n        break;\n      case 'touchend':\n        type = 'mouseup';\n        touch = evt.changedTouches[0];\n        break;\n      default:\n        break;\n    }\n\n    if (type === 'mousemove' && !this._dragging) {\n      // touchmove occurs without mouse down. thus dispatching mousedown is required.\n      newEvt.initMouseEvent('mousedown', true, true, target.ownerDocument.defaultView, 0,\n        touch.screenX, touch.screenY, touch.clientX, touch.clientY,\n        evt.ctrlKey, evt.altKey, evt.shiftKey, evt.metaKey, 0, null);\n      target.dispatchEvent(newEvt);\n    }\n\n    newEvt.initMouseEvent(type, true, true, target.ownerDocument.defaultView, 0,\n      touch.screenX, touch.screenY, touch.clientX, touch.clientY,\n      evt.ctrlKey, evt.altKey, evt.shiftKey, evt.metaKey, 0, null);\n\n    target.dispatchEvent(newEvt);\n  }\n\n  /**\n   * attaches event handlers to canvas\n   * @private\n   */\n  _initEvents() {\n    const { _canvas } = this;\n    // fixes a problem where double clicking causesShape text to get selected on the canvas\n    _canvas.addEventListener('selectstart', (e) => {\n      e.preventDefault();\n      return false;\n    }, false);\n\n    // up, down, and move are for dragging\n    _canvas.addEventListener('mousedown', this._onMouseDown, true);\n    _canvas.addEventListener('mousemove', this._onMouseMove, true);\n    _canvas.addEventListener('mouseup', this._onMouseUp, true);\n\n    _canvas.addEventListener('tapstart', this._onTouch, true);\n    _canvas.addEventListener('touchmove', this._onTouch, true);\n    _canvas.addEventListener('touchend', this._onTouch, true);\n\n    this.log('initialized events');\n  }\n\n  /**\n   * creates a movable rectangle and attach to canvas\n   * @private\n   */\n  _initRect() {\n    this._shape = new Rect(\n      this._width / 4,\n      this._height / 4,\n      this._width / 2,\n      this._height / 2,\n      'rgba(0, 200, 0, 0.5)',\n      20,\n      false // debug mode is set as false\n    );\n    this._valid = false;\n  }\n\n  /**\n   * Returns shape positions\n   * @returns {{x, y, w, h}}\n   */\n  getSelection() {\n    const { _x, _y, _w, _h } = this._shape;\n\n    return { x: _x, y: _y, w: _w, h: _h };\n  }\n\n  /**\n   * clears the canvas for next draw\n   */\n  clear() {\n    this._ctx.clearRect(0, 0, this._width, this._height);\n  }\n\n  /**\n   * while draw is called as often as the INTERVAL variable demands,\n   * it only ever does something if the canvas gets invalidated by our code\n   */\n  draw() {\n    // if our state is invalid, redraw and validate!\n    if (!this._valid) {\n      this.log('starting draw');\n      const { _ctx, _shape } = this;\n      this.clear();\n\n      // fill outside of the rectangle\n      _ctx.fillStyle = 'rgba(0,0,0,.8)';\n      _ctx.beginPath();\n      _ctx.rect(_shape._x, _shape._y, _shape._w, _shape._h);\n      _ctx.rect(this._width, 0, -this._width, this._height);\n      _ctx.fill();\n\n      // draw shape\n      _shape.draw(_ctx);\n\n      this._valid = true;\n\n      this.log('shape drew', _shape._x, _shape._y, _shape._w, _shape._h);\n    }\n  }\n\n  /**\n   * returns offset for the element\n   * @param {DOMElement} element\n   * @returns {{x: number, y: number}}\n   */\n  getOffset(element) {\n    let el = element;\n    let offsetX = 0;\n    let offsetY = 0;\n\n    // Compute the total offset\n    if (el.offsetParent !== undefined) {\n      do {\n        offsetX += el.offsetLeft;\n        offsetY += el.offsetTop;\n        el = el.offsetParent;\n      } while (el);\n    }\n\n    // Also add the <html> offsets in case there's a position:fixed bar\n    offsetX += this._htmlLeft;\n    offsetY += this._htmlTop;\n\n    // should handle scrolled position in offset\n    offsetX += this._document.body.scrollLeft;\n    offsetY += this._document.body.scrollTop;\n\n    return {\n      x: offsetX,\n      y: offsetY\n    };\n  }\n\n  /**\n   * creates an object with x and y defined, set to the mouse position relative to the state's canvas\n   * If you wanna be super-correct this can be tricky, we have to worry about padding and borders\n   * @param {Event} e\n   * @returns {{x: number, y: number}}\n   */\n  getMouse(e) {\n    const offset = this.getOffset(this._canvas);\n\n    const mx = e.pageX - offset.x;\n    const my = e.pageY - offset.y;\n\n    return { x: mx, y: my };\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/canvas-state.js\n **/","import BaseObject from './base-object';\n\n/**\n * Rectangle for highlighting the cropping area\n * @class Rect\n */\nexport default class Rect extends BaseObject {\n  /**\n   * object constructor\n   * @param {number} x - left position of shape\n   * @param {number} y - top position of shape\n   * @param {number} w - width\n   * @param {number} h - height\n   * @param {string} fill - background color of the shape\n   * @param {number} selectionBoxSize - width/height of selection handle\n   * @param {bool} debugMode\n   */\n  constructor(x, y, w, h, fill, selectionBoxSize = 6, debugMode = true) {\n    super();\n\n    this._selectionHandles = [];\n    this._selectionBoxSize = selectionBoxSize;\n    for (let i = 0; i < 8; i += 1) {\n      this._selectionHandles.push({ x: 0, y: 0 });\n    }\n\n    this._x = x || 0;\n    this._y = y || 0;\n    this._w = w || 1;\n    this._h = h || 1;\n    this._fill = fill || '#AAAAAA';\n    this._debugMode = debugMode;\n\n    this.log('initialized');\n  }\n\n  /**\n   * returns class name\n   * @returns {string}\n   */\n  getName() {\n    return 'Rect';\n  }\n\n  /**\n   * draws the shape\n   * @param {CanvasContext} ctx\n   */\n  draw(ctx) {\n    const { _x, _y, _w, _h, _fill, _selectionHandles, _selectionBoxSize } = this;\n    ctx.fillStyle = _fill; // eslint-disable-line\n    ctx.strokeStyle = 'white'; // eslint-disable-line\n    ctx.lineWidth = 1; // eslint-disable-line\n    ctx.setLineDash([7, 7]);\n    ctx.strokeRect(_x, _y, _w, _h);\n\n    const half = _selectionBoxSize / 2;\n\n    // top left, middle, right\n    _selectionHandles[0].x = _x - half;\n    _selectionHandles[0].y = _y - half;\n\n    _selectionHandles[1].x = _x + _w / 2 - half;\n    _selectionHandles[1].y = _y - half;\n\n    _selectionHandles[2].x = _x + _w - half;\n    _selectionHandles[2].y = _y - half;\n\n    // middle left\n    _selectionHandles[3].x = _x - half;\n    _selectionHandles[3].y = _y + _h / 2 - half;\n\n    // middle right\n    _selectionHandles[4].x = _x + _w - half;\n    _selectionHandles[4].y = _y + _h / 2 - half;\n\n    // bottom left, middle, right\n    _selectionHandles[6].x = _x + _w / 2 - half;\n    _selectionHandles[6].y = _y + _h - half;\n\n    _selectionHandles[5].x = _x - half;\n    _selectionHandles[5].y = _y + _h - half;\n\n    _selectionHandles[7].x = _x + _w - half;\n    _selectionHandles[7].y = _y + _h - half;\n\n    this.log('drawing selection boxes');\n    ctx.fillStyle = 'white'; // eslint-disable-line\n    _selectionHandles.forEach((cur) => {\n      ctx.fillRect(cur.x, cur.y, _selectionBoxSize, _selectionBoxSize);\n    });\n\n    this.log('filling the rectangle', _x, _y, _w, _h);\n  }\n\n  /**\n   * checks if point is inside the shape\n   * @param {number} mx\n   * @param {number} my\n   * @returns {bool}\n   */\n  contains(mx, my) {\n    const { _x, _y, _w, _h } = this;\n    return (_x <= mx) && (_x + _w >= mx) &&\n      (_y <= my) && (_y + _h >= my);\n  }\n\n  /**\n   * returns selection handle if point is inside\n   * @param {number} mx\n   * @param {number} my\n   * @returns {?number}\n   */\n  getHoverSelectionHandle(mx, my) {\n    const { _selectionHandles, _selectionBoxSize } = this;\n    for (let i = 0; i < _selectionHandles.length; i += 1) {\n      const handle = _selectionHandles[i];\n      if (\n        (handle.x <= mx) &&\n        (handle.x + _selectionBoxSize >= mx) &&\n        (handle.y <= my) &&\n        (handle.y + _selectionBoxSize >= my)\n      ) {\n        return i;\n      }\n    }\n\n    return false;\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/rect.js\n **/"],"sourceRoot":""}