{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 0f4e02eff9a4c6127880","webpack:///./src/index.js","webpack:///./~/html2canvas/dist/html2canvas.js","webpack:///./src/base-object.js","webpack:///./src/canvas-state.js","webpack:///./src/rect.js","webpack:///./src/preview-modal.js"],"names":["defaultOptions","key","ctrlKey","shiftKey","serverURL","startButton","debug","HtmlCrop","doc","options","_document","Object","assign","_debugMode","log","_onKeyDown","bind","reset","_listenHotKey","_attachStartButton","_started","_disableScroll","html","then","canvas","_canvas","selectionCanvas","createElement","_selectionCanvas","width","height","style","position","left","top","body","appendChild","_attachCaptureButton","_canvasState","_renderSelection","_startButton","removeChild","removeEventListener","_captureButton","_cancelButton","_infoDiv","addEventListener","button","textNode","createTextNode","right","bottom","onclick","startCropping","captureBtn","_onCapture","cancelBtn","endCropping","infoDiv","color","_previewModal","w","h","innerHTML","Math","round","event","keyOptions","ctx","getContext","selection","getSelection","imgData","getImageData","x","y","newCanvas","newCtx","putImageData","_enableScroll","_renderPreviewModal","preventDefault","e","returnValue","preventDefaultForScrollKeys","keys","indexOf","keyCode","onkeydown","onmousewheel","f","exports","module","g","window","global","self","html2canvas","define","t","n","r","s","o","u","a","require","i","Error","code","l","call","length","_dereq_","root","freeExports","nodeType","freeModule","freeGlobal","punycode","maxInt","base","tMin","tMax","skew","damp","initialBias","initialN","delimiter","regexPunycode","regexNonASCII","regexSeparators","errors","baseMinusTMin","floor","stringFromCharCode","String","fromCharCode","error","type","RangeError","map","array","fn","result","mapDomain","string","parts","split","replace","labels","encoded","join","ucs2decode","output","counter","value","extra","charCodeAt","push","ucs2encode","basicToDigit","codePoint","digitToBasic","digit","flag","adapt","delta","numPoints","firstTime","k","decode","input","inputLength","out","bias","basic","j","index","oldi","baseMinusT","lastIndexOf","splice","encode","handledCPCount","basicLength","m","q","currentValue","handledCPCountPlusOne","qMinusT","toUnicode","test","slice","toLowerCase","toASCII","amd","hasOwnProperty","restoreOwnerScroll","ownerDocument","defaultView","pageXOffset","pageYOffset","scrollTo","cloneCanvasContents","clonedCanvas","cloneNode","node","javascriptEnabled","clone","document","nodeValue","child","firstChild","nodeName","nextSibling","_scrollTop","scrollTop","_scrollLeft","scrollLeft","initNode","containerDocument","documentElement","container","className","visibility","border","scrolling","Promise","resolve","documentClone","contentWindow","onload","interval","setInterval","childNodes","clearInterval","navigator","userAgent","scrollY","scrollX","open","write","replaceChild","adoptNode","close","Color","b","fromArray","namedColor","rgb","rgba","hex6","hex3","prototype","darken","amount","isTransparent","isBlack","Array","isArray","min","_hex3","match","parseInt","_hex6","substring","_rgb","Number","_rgba","toString","colors","isColor","Support","CanvasRenderer","ImageLoader","NodeParser","NodeContainer","utils","createWindowClone","loadUrlDocument","getBounds","html2canvasNodeAttribute","html2canvasCloneIndex","nodeList","logging","start","Date","now","async","allowTaint","removeContainer","imageTimeout","renderer","strict","proxy","reject","innerWidth","innerHeight","absoluteUrl","renderWindow","undefined","setAttribute","renderDocument","onrendered","html2canvasExport","create","windowWidth","windowHeight","html2canvasIndex","attributeName","selector","querySelector","removeAttribute","clonedWindow","oncloneHandler","onclone","support","imageLoader","bounds","documentWidth","documentHeight","parser","ready","crop","cleanupContainer","parentNode","croppedCanvas","x1","max","x2","y1","y2","drawImage","scrollWidth","offsetWidth","clientWidth","scrollHeight","offsetHeight","clientHeight","url","link","href","smallImage","DummyImageContainer","src","promise","image","Image","onerror","complete","Font","family","size","img","span","sampleText","baseline","middle","fontFamily","fontSize","margin","padding","verticalAlign","offsetTop","lineHeight","lineWidth","FontMetrics","data","getMetrics","FrameContainer","sameOrigin","proxyLoad","URL","GradientContainer","imageData","colorStops","x0","y0","TYPES","LINEAR","RADIAL","REGEXP_COLORSTOP","ImageContainer","cors","tainted","crossOrigin","ProxyImageContainer","SVGContainer","SVGNodeContainer","LinearGradientContainer","WebkitGradientContainer","origin","getOrigin","location","findImages","nodes","images","reduce","imageNodes","concat","args","method","forEach","addImage","loadImage","findBackgroundImage","parseBackgroundImages","filter","hasImageBackground","callback","newImage","imageExists","isSVG","svg","isSameOrigin","useCORS","isInline","some","protocol","hostname","port","getPromise","timeout","dummy","get","found","fetch","all","timer","race","res","setTimeout","clearTimeout","apply","arguments","hasDirection","REGEXP_DIRECTION","reverse","ratio","parseFloat","isNaN","colorStop","colorStopMatch","unit","stop","find","count","logger","console","Function","parseBackgrounds","offsetBounds","parent","stack","borders","clip","backgroundClip","visible","computedStyles","styles","backgroundImages","transformData","transformMatrix","isPseudoElement","opacity","cloneTo","getOpacity","cssFloat","assignStack","children","isElementVisible","Node","TEXT_NODE","css","hasAttribute","getAttribute","attribute","computedStyle","before","prefixedCss","prefixes","prefix","substr","toUpperCase","getComputedStyle","cssInt","fontWeight","weight","parseClip","matches","CLIP","cssList","property","trim","isPercentage","parseBackgroundSize","targetRatio","currentRatio","parseBackgroundPosition","backgroundSize","parseBackgroundRepeat","parseTextShadows","textShadow","results","shadows","TEXT_SHADOW_PROPERTY","TEXT_SHADOW_VALUES","offsetX","offsetY","blur","parseTransform","hasTransform","offset","parseBounds","removePx","asFloat","matrix","parseTransformMatrix","transform","parseMatrix","MATRIX_PROPERTY","getValue","tagName","selectionValue","placeholder","option","selectedIndex","text","matrix3d","str","TextContainer","PseudoElementContainer","StackingContext","element","range","renderQueue","background","rectangle","canvasBackground","visibile","createPseudoHideStyles","disableAnimations","flatten","getChildren","getPseudoElements","fontMetrics","calculateOverflowClips","isElement","createStackingContexts","sortStackingContexts","parse","paint","renderIndex","asyncRenderer","appendToDOM","parseBorders","cssClip","hasParentClip","cleanDOM","isTextNode","queue","asyncTimer","createStyles","PSEUDO_HIDE_ELEMENT_CLASS_BEFORE","PSEUDO_HIDE_ELEMENT_CLASS_AFTER","hidePseudoElements","ELEMENT_NODE","getPseudoElement","after","toCamelCase","content","display","stripQuotes","isImage","pseudoNode","pseudoContainer","item","parentContainer","renderableNode","nonIgnoredElement","newStackingContext","hasOwnStacking","parentStack","getParentStack","contexts","isRootElement","hasOpacity","isPositionedForStacking","isBodyWithTransparentRoot","isPositioned","zIndex0","isInlineBlock","isFloating","sort","zIndexSort","parseTextBounds","textList","rangeBounds","getRangeBounds","replacementNode","splitText","getWrapperBounds","wrapper","backupText","createRange","setStart","setEnd","getBoundingClientRect","ClearTransform","negativeZindex","negativeZIndex","descendantElements","descendantNonFloats","not","nonInlineNonPositionedDescendants","inlineLevel","nonPositionedFloats","inFlow","stackLevel0","hasText","positiveZindex","positiveZIndex","isStackingContext","restore","paintText","paintNode","setOpacity","save","setTransform","paintCheckbox","paintRadio","paintElement","renderBackground","getWidth","renderBorders","imgContainer","renderImage","imageContainer","paintFormValue","radius","borderPoints","calculateCurvePoints","calculateBorders","checked","font","circleStroke","circle","ceil","properties","message","textContent","applyTextTransform","characters","ucs2","letterRendering","noLetterSpacing","hasUnicode","getWords","character","fontShadow","clearShadow","renderTextDecoration","metrics","borderColorTransforms","inset","nodeBounds","getBorderRadiusData","side","colorTransform","parseBackgroundClip","borderSide","bx","by","bw","bh","drawSide","c1","c2","c3","c4","topLeftOuter","topLeftInner","topRightOuter","topRightInner","bottomRightOuter","bottomRightInner","bottomLeftOuter","bottomLeftInner","borderArgs","parseCorner","getCurvePoints","r1","r2","kappa","sqrt","ox","oy","xm","ym","topLeft","bezierCurve","topRight","bottomRight","bottomLeft","borderRadius","tlh","tlv","trh","trv","brh","brv","blh","blv","topWidth","rightHeight","bottomWidth","leftHeight","subdivide","startControl","endControl","end","lerp","ab","bc","cd","abbc","bccd","dest","curveTo","curveToReversed","borderData","radius1","radius2","outer1","inner1","outer2","inner2","corner1","corner2","arr","asInt","zIndex","context","nodeContainer","arrays","first","words","onWordBoundary","word","isWordBoundary","characterCode","XHR","decode64","Proxy","proxyUrl","supportsCORS","XMLHttpRequest","createCallback","createProxyUrl","jsonp","response","proxyCount","ProxyURL","supportsCORSImage","cleanup","random","encodeURIComponent","documentFromHTML","DOMParser","parseFromString","implementation","createHTMLDocument","ee","host","head","insertBefore","getHideClass","Renderer","paddingLeft","paddingTop","paddingRight","paddingBottom","renderBackgroundColor","renderBackgroundImage","renderBorder","drawShape","backgroundImage","renderBackgroundRepeating","gradientImage","renderBackgroundGradient","repeat","backgroundRepeatShape","renderBackgroundRepeat","taintCtx","textBaseline","variables","setFillStyle","fillStyle","fillRect","beginPath","arc","PI","closePath","fill","stroke","strokeColor","strokeStyle","shape","taints","sx","sy","sw","sh","dx","dy","dw","dh","shapes","hasEntries","point","rect","variant","setVariable","globalAlpha","translate","fillText","backgroundPosition","borderLeft","borderTop","createPattern","resizeImage","gradient","createLinearGradient","addColorStop","ownStacking","testRangeBounds","testCORS","testSVG","testElement","rangeHeight","selectNode","toDataURL","hasFabric","inlineFormatting","fabric","loadSVGFromString","createCanvas","removeContentType","objects","StaticCanvas","lowerCanvasEl","setWidth","setHeight","add","util","groupSVGElements","renderAll","atob","_native","XMLSerializer","serializeToString","parseSVGDocument","capitalize","p1","p2","base64","chars","len","encoded1","encoded2","encoded3","encoded4","byte1","byte2","byte3","clientRect","offsetParent","offsetLeft","whitespace","definition","prefix_i","block","mode","numParen","quote","appendResult","c","xhr","status","responseText","statusText","send","BaseObject","isDebug","getName","CanvasState","onSelectionChange","debugMode","_onMouseDown","_onMouseMove","_onMouseUp","_onTouch","_onSelectionChange","_width","_height","_ctx","_htmlTop","_htmlLeft","_valid","_shape","_dragging","_dragoffx","_dragoffy","_initRect","_initEvents","_w","_h","_interval","draw","mouse","getMouse","mx","my","contains","_x","_y","_currentHandle","getHoverSelectionHandle","oldx","oldy","handleIndex","cursor","evt","touches","newEvt","createEvent","target","srcElement","originalTarget","touch","changedTouches","initMouseEvent","screenX","screenY","clientX","clientY","altKey","metaKey","dispatchEvent","clearRect","clear","el","getOffset","pageX","pageY","Rect","selectionBoxSize","_selectionHandles","_selectionBoxSize","_fill","setLineDash","strokeRect","half","cur","handle","overlayStyles","modalWindowStyles","infoDivStyles","actionDivStyles","sendBtnStyles","PreviewModal","_serverURL","overlayDiv","_overlayDiv","_applyStyles","modalWindow","_img","getImage","actionDiv","_actionDiv","sendBtn","_sendBtn","removeModal","formData","FormData","append","lengthComputable","percentage","loaded","total","fileFormat"],"mappings":"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","file":"HtmlCrop.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"HtmlCrop\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"HtmlCrop\"] = factory();\n\telse\n\t\troot[\"HtmlCrop\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 0f4e02eff9a4c6127880\n **/","import html2canvas from 'html2canvas';\nimport BaseObject from './base-object';\nimport CanvasState from './canvas-state';\nimport PreviewModal from './preview-modal';\n\nconst defaultOptions = {\n  key: {\n    ctrlKey: false,\n    shiftKey: true,\n    key: 'F7'\n  },\n  serverURL: '',\n  startButton: true,\n  debug: true\n};\n\nexport default class HtmlCrop extends BaseObject {\n  /**\n   * object constructor\n   * @param {HTMLDocument} doc\n   * @param {Object} options\n   */\n  constructor(doc, options = {}) {\n    super();\n\n    this._document = doc;\n    this.options = Object.assign({}, defaultOptions, options);\n    this._debugMode = options.debug;\n    this.log('initialized');\n\n    // bind this context into keydown event here\n    // because it needs to be removed later\n    this._onKeyDown = this._onKeyDown.bind(this);\n\n    this.reset();\n  }\n\n  /**\n   * resets to starting state\n   */\n  reset() {\n    this._listenHotKey();\n\n    if (this.options.startButton) {\n      this._attachStartButton();\n    }\n  }\n\n  /**\n   * starts cropping the page\n   */\n  startCropping() {\n    if (this._started) {\n      return;\n    }\n\n    this._started = true;\n    this._disableScroll();\n\n    html2canvas(this._document.html).then((canvas) => {\n      this._canvas = canvas;\n\n      const selectionCanvas = this._document.createElement('canvas');\n      this._selectionCanvas = selectionCanvas;\n      selectionCanvas.width = canvas.width;\n      selectionCanvas.height = canvas.height;\n      selectionCanvas.style.position = 'fixed';\n      selectionCanvas.style.left = '0';\n      selectionCanvas.style.top = '0';\n      selectionCanvas.style['z-index'] = 9999997;\n\n      this._document.body.appendChild(selectionCanvas);\n\n      // debug mode is set as false because of lots of logging\n      this._attachCaptureButton();\n      this._canvasState = new CanvasState(this._document, selectionCanvas, this._renderSelection.bind(this), true);\n\n      // removes start button and event listener to avoid multiple cropping instances\n      if (this._startButton) {\n        this._document.body.removeChild(this._startButton);\n      }\n      this._document.removeEventListener('keydown', this._onKeyDown);\n    });\n  }\n\n  /**\n   * ends cropping\n   */\n  endCropping() {\n    if (!this._started) {\n      return;\n    }\n\n    this._started = false;\n    if (this._captureButton) {\n      this._document.body.removeChild(this._captureButton);\n      this._document.body.removeChild(this._cancelButton);\n      this._document.body.removeChild(this._infoDiv);\n    }\n\n    if (this._selectionCanvas) {\n      this._document.body.removeChild(this._selectionCanvas);\n    }\n\n    this.reset();\n  }\n\n  /**\n   * returns class name\n   * @returns {string}\n   */\n  getName() {\n    return 'HtmlCrop';\n  }\n\n  /**\n   * attaches listener which triggers cropping\n   */\n  _listenHotKey() {\n    this._document.addEventListener('keydown', this._onKeyDown);\n  }\n\n  /**\n   * attaches start cropping button\n   */\n  _attachStartButton() {\n    const { _document } = this;\n    const button = _document.createElement('button');\n    const textNode = _document.createTextNode('Start Cropping');\n    button.appendChild(textNode);\n    button.style.position = 'fixed';\n    button.style.right = '30px';\n    button.style.bottom = '30px';\n    button.style['z-index'] = 9999997;\n    button.onclick = this.startCropping.bind(this);\n\n    this._startButton = button;\n    _document.body.appendChild(button);\n  }\n\n  /**\n   * attaches button to capture\n   * @private\n   */\n  _attachCaptureButton() {\n    const { _document } = this;\n    const captureBtn = _document.createElement('button');\n    let textNode = _document.createTextNode('Capture');\n    captureBtn.appendChild(textNode);\n    captureBtn.style.position = 'fixed';\n    captureBtn.style.right = '30px';\n    captureBtn.style.bottom = '30px';\n    captureBtn.style['z-index'] = 9999997;\n    captureBtn.onclick = this._onCapture.bind(this);\n\n    this._captureButton = captureBtn;\n    _document.body.appendChild(captureBtn);\n\n    // appends cancel button on the left side of capture button\n    const cancelBtn = _document.createElement('button');\n    textNode = _document.createTextNode('Cancel');\n    cancelBtn.appendChild(textNode);\n    cancelBtn.style.position = 'fixed';\n    cancelBtn.style.right = '100px';\n    cancelBtn.style.bottom = '30px';\n    cancelBtn.style['z-index'] = 9999997;\n    cancelBtn.onclick = this.endCropping.bind(this);\n\n    this._cancelButton = cancelBtn;\n    _document.body.appendChild(cancelBtn);\n\n    // appends div for width and height of selection here as well\n    const infoDiv = _document.createElement('div');\n    infoDiv.style.position = 'fixed';\n    infoDiv.style.right = '30px';\n    infoDiv.style.bottom = '60px';\n    infoDiv.style.color = 'white';\n    infoDiv.style['z-index'] = 9999997;\n    this._infoDiv = infoDiv;\n    _document.body.appendChild(infoDiv);\n  }\n\n  /**\n   * renders modal window for previewing and compressing\n   * @param {HTMLDOMElement} canvas canvas contains cropped image\n   * @private\n   */\n  _renderPreviewModal(canvas) {\n    this._previewModal = new PreviewModal(this._document, canvas, this.options.serverURL);\n  }\n\n  /**\n   * renders width and height of selection\n   */\n  _renderSelection(w, h) {\n    this._infoDiv.innerHTML = `w: ${Math.round(w)}, h: ${Math.round(h)}`;\n  }\n\n  /*\n   * handles key down for hot key capturing\n   * @param {KeyboardEvent} event\n   */\n  _onKeyDown(event) {\n    const {\n      key,\n      ctrlKey,\n      shiftKey\n    } = event;\n    const {\n      key: keyOptions\n    } = this.options;\n\n    this.log(`keydown detected: ctrl=${ctrlKey} shift=${shiftKey} key=${key}`);\n\n    if (key === keyOptions.key && ctrlKey === keyOptions.ctrlKey && keyOptions.shiftKey) {\n      this.log('key down matches with setting. starts cropping');\n      this.startCropping();\n    }\n  }\n\n  /**\n   * capture button click handler\n   * @private\n   */\n  _onCapture() {\n    const ctx = this._canvas.getContext('2d');\n    const selection = this._canvasState.getSelection();\n    const imgData = ctx.getImageData(selection.x, selection.y, selection.w, selection.h);\n\n    const newCanvas = this._document.createElement('canvas');\n    newCanvas.width = selection.w;\n    newCanvas.height = selection.h;\n    const newCtx = newCanvas.getContext('2d');\n    newCtx.putImageData(imgData, 0, 0);\n\n    this._enableScroll();\n\n    this._renderPreviewModal(newCanvas);\n    this.endCropping();\n  }\n\n  /**\n   * disables scrolling temporaily\n   * @private\n   */\n  _disableScroll() {\n    const preventDefault = (e = {}) => {\n      if (e.preventDefault) {\n        e.preventDefault();\n      }\n      e.returnValue = false; // eslint-disable-line\n    };\n\n    // disable scrolling with keys\n    // left: 37, up: 38, right: 39, down: 40,\n    // spacebar: 32, pageup: 33, pagedown: 34, end: 35, home: 36\n    const preventDefaultForScrollKeys = (e) => {\n      const keys = [32, 33, 34, 35, 36, 37, 38, 39, 40];\n      if (keys.indexOf(e.keyCode) !== -1) {\n        preventDefault(e);\n        return false;\n      }\n      return true;\n    };\n\n    this._document.onkeydown = preventDefaultForScrollKeys;\n    this._document.onmousewheel = preventDefault;\n  }\n\n  /**\n   * enables scrolling\n   * @private\n   */\n  _enableScroll() {\n    this._document.onkeydown = null;\n    this._document.onmousewheel = null;\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/index.js\n **/","/*\n  html2canvas 0.5.0-beta4 <http://html2canvas.hertzen.com>\n  Copyright (c) 2016 Niklas von Hertzen\n\n  Released under  License\n*/\n\n(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.html2canvas = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(_dereq_,module,exports){\n(function (global){\n/*! https://mths.be/punycode v1.4.0 by @mathias */\n;(function(root) {\n\n\t/** Detect free variables */\n\tvar freeExports = typeof exports == 'object' && exports &&\n\t\t!exports.nodeType && exports;\n\tvar freeModule = typeof module == 'object' && module &&\n\t\t!module.nodeType && module;\n\tvar freeGlobal = typeof global == 'object' && global;\n\tif (\n\t\tfreeGlobal.global === freeGlobal ||\n\t\tfreeGlobal.window === freeGlobal ||\n\t\tfreeGlobal.self === freeGlobal\n\t) {\n\t\troot = freeGlobal;\n\t}\n\n\t/**\n\t * The `punycode` object.\n\t * @name punycode\n\t * @type Object\n\t */\n\tvar punycode,\n\n\t/** Highest positive signed 32-bit float value */\n\tmaxInt = 2147483647, // aka. 0x7FFFFFFF or 2^31-1\n\n\t/** Bootstring parameters */\n\tbase = 36,\n\ttMin = 1,\n\ttMax = 26,\n\tskew = 38,\n\tdamp = 700,\n\tinitialBias = 72,\n\tinitialN = 128, // 0x80\n\tdelimiter = '-', // '\\x2D'\n\n\t/** Regular expressions */\n\tregexPunycode = /^xn--/,\n\tregexNonASCII = /[^\\x20-\\x7E]/, // unprintable ASCII chars + non-ASCII chars\n\tregexSeparators = /[\\x2E\\u3002\\uFF0E\\uFF61]/g, // RFC 3490 separators\n\n\t/** Error messages */\n\terrors = {\n\t\t'overflow': 'Overflow: input needs wider integers to process',\n\t\t'not-basic': 'Illegal input >= 0x80 (not a basic code point)',\n\t\t'invalid-input': 'Invalid input'\n\t},\n\n\t/** Convenience shortcuts */\n\tbaseMinusTMin = base - tMin,\n\tfloor = Math.floor,\n\tstringFromCharCode = String.fromCharCode,\n\n\t/** Temporary variable */\n\tkey;\n\n\t/*--------------------------------------------------------------------------*/\n\n\t/**\n\t * A generic error utility function.\n\t * @private\n\t * @param {String} type The error type.\n\t * @returns {Error} Throws a `RangeError` with the applicable error message.\n\t */\n\tfunction error(type) {\n\t\tthrow new RangeError(errors[type]);\n\t}\n\n\t/**\n\t * A generic `Array#map` utility function.\n\t * @private\n\t * @param {Array} array The array to iterate over.\n\t * @param {Function} callback The function that gets called for every array\n\t * item.\n\t * @returns {Array} A new array of values returned by the callback function.\n\t */\n\tfunction map(array, fn) {\n\t\tvar length = array.length;\n\t\tvar result = [];\n\t\twhile (length--) {\n\t\t\tresult[length] = fn(array[length]);\n\t\t}\n\t\treturn result;\n\t}\n\n\t/**\n\t * A simple `Array#map`-like wrapper to work with domain name strings or email\n\t * addresses.\n\t * @private\n\t * @param {String} domain The domain name or email address.\n\t * @param {Function} callback The function that gets called for every\n\t * character.\n\t * @returns {Array} A new string of characters returned by the callback\n\t * function.\n\t */\n\tfunction mapDomain(string, fn) {\n\t\tvar parts = string.split('@');\n\t\tvar result = '';\n\t\tif (parts.length > 1) {\n\t\t\t// In email addresses, only the domain name should be punycoded. Leave\n\t\t\t// the local part (i.e. everything up to `@`) intact.\n\t\t\tresult = parts[0] + '@';\n\t\t\tstring = parts[1];\n\t\t}\n\t\t// Avoid `split(regex)` for IE8 compatibility. See #17.\n\t\tstring = string.replace(regexSeparators, '\\x2E');\n\t\tvar labels = string.split('.');\n\t\tvar encoded = map(labels, fn).join('.');\n\t\treturn result + encoded;\n\t}\n\n\t/**\n\t * Creates an array containing the numeric code points of each Unicode\n\t * character in the string. While JavaScript uses UCS-2 internally,\n\t * this function will convert a pair of surrogate halves (each of which\n\t * UCS-2 exposes as separate characters) into a single code point,\n\t * matching UTF-16.\n\t * @see `punycode.ucs2.encode`\n\t * @see <https://mathiasbynens.be/notes/javascript-encoding>\n\t * @memberOf punycode.ucs2\n\t * @name decode\n\t * @param {String} string The Unicode input string (UCS-2).\n\t * @returns {Array} The new array of code points.\n\t */\n\tfunction ucs2decode(string) {\n\t\tvar output = [],\n\t\t    counter = 0,\n\t\t    length = string.length,\n\t\t    value,\n\t\t    extra;\n\t\twhile (counter < length) {\n\t\t\tvalue = string.charCodeAt(counter++);\n\t\t\tif (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n\t\t\t\t// high surrogate, and there is a next character\n\t\t\t\textra = string.charCodeAt(counter++);\n\t\t\t\tif ((extra & 0xFC00) == 0xDC00) { // low surrogate\n\t\t\t\t\toutput.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n\t\t\t\t} else {\n\t\t\t\t\t// unmatched surrogate; only append this code unit, in case the next\n\t\t\t\t\t// code unit is the high surrogate of a surrogate pair\n\t\t\t\t\toutput.push(value);\n\t\t\t\t\tcounter--;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\toutput.push(value);\n\t\t\t}\n\t\t}\n\t\treturn output;\n\t}\n\n\t/**\n\t * Creates a string based on an array of numeric code points.\n\t * @see `punycode.ucs2.decode`\n\t * @memberOf punycode.ucs2\n\t * @name encode\n\t * @param {Array} codePoints The array of numeric code points.\n\t * @returns {String} The new Unicode string (UCS-2).\n\t */\n\tfunction ucs2encode(array) {\n\t\treturn map(array, function(value) {\n\t\t\tvar output = '';\n\t\t\tif (value > 0xFFFF) {\n\t\t\t\tvalue -= 0x10000;\n\t\t\t\toutput += stringFromCharCode(value >>> 10 & 0x3FF | 0xD800);\n\t\t\t\tvalue = 0xDC00 | value & 0x3FF;\n\t\t\t}\n\t\t\toutput += stringFromCharCode(value);\n\t\t\treturn output;\n\t\t}).join('');\n\t}\n\n\t/**\n\t * Converts a basic code point into a digit/integer.\n\t * @see `digitToBasic()`\n\t * @private\n\t * @param {Number} codePoint The basic numeric code point value.\n\t * @returns {Number} The numeric value of a basic code point (for use in\n\t * representing integers) in the range `0` to `base - 1`, or `base` if\n\t * the code point does not represent a value.\n\t */\n\tfunction basicToDigit(codePoint) {\n\t\tif (codePoint - 48 < 10) {\n\t\t\treturn codePoint - 22;\n\t\t}\n\t\tif (codePoint - 65 < 26) {\n\t\t\treturn codePoint - 65;\n\t\t}\n\t\tif (codePoint - 97 < 26) {\n\t\t\treturn codePoint - 97;\n\t\t}\n\t\treturn base;\n\t}\n\n\t/**\n\t * Converts a digit/integer into a basic code point.\n\t * @see `basicToDigit()`\n\t * @private\n\t * @param {Number} digit The numeric value of a basic code point.\n\t * @returns {Number} The basic code point whose value (when used for\n\t * representing integers) is `digit`, which needs to be in the range\n\t * `0` to `base - 1`. If `flag` is non-zero, the uppercase form is\n\t * used; else, the lowercase form is used. The behavior is undefined\n\t * if `flag` is non-zero and `digit` has no uppercase form.\n\t */\n\tfunction digitToBasic(digit, flag) {\n\t\t//  0..25 map to ASCII a..z or A..Z\n\t\t// 26..35 map to ASCII 0..9\n\t\treturn digit + 22 + 75 * (digit < 26) - ((flag != 0) << 5);\n\t}\n\n\t/**\n\t * Bias adaptation function as per section 3.4 of RFC 3492.\n\t * https://tools.ietf.org/html/rfc3492#section-3.4\n\t * @private\n\t */\n\tfunction adapt(delta, numPoints, firstTime) {\n\t\tvar k = 0;\n\t\tdelta = firstTime ? floor(delta / damp) : delta >> 1;\n\t\tdelta += floor(delta / numPoints);\n\t\tfor (/* no initialization */; delta > baseMinusTMin * tMax >> 1; k += base) {\n\t\t\tdelta = floor(delta / baseMinusTMin);\n\t\t}\n\t\treturn floor(k + (baseMinusTMin + 1) * delta / (delta + skew));\n\t}\n\n\t/**\n\t * Converts a Punycode string of ASCII-only symbols to a string of Unicode\n\t * symbols.\n\t * @memberOf punycode\n\t * @param {String} input The Punycode string of ASCII-only symbols.\n\t * @returns {String} The resulting string of Unicode symbols.\n\t */\n\tfunction decode(input) {\n\t\t// Don't use UCS-2\n\t\tvar output = [],\n\t\t    inputLength = input.length,\n\t\t    out,\n\t\t    i = 0,\n\t\t    n = initialN,\n\t\t    bias = initialBias,\n\t\t    basic,\n\t\t    j,\n\t\t    index,\n\t\t    oldi,\n\t\t    w,\n\t\t    k,\n\t\t    digit,\n\t\t    t,\n\t\t    /** Cached calculation results */\n\t\t    baseMinusT;\n\n\t\t// Handle the basic code points: let `basic` be the number of input code\n\t\t// points before the last delimiter, or `0` if there is none, then copy\n\t\t// the first basic code points to the output.\n\n\t\tbasic = input.lastIndexOf(delimiter);\n\t\tif (basic < 0) {\n\t\t\tbasic = 0;\n\t\t}\n\n\t\tfor (j = 0; j < basic; ++j) {\n\t\t\t// if it's not a basic code point\n\t\t\tif (input.charCodeAt(j) >= 0x80) {\n\t\t\t\terror('not-basic');\n\t\t\t}\n\t\t\toutput.push(input.charCodeAt(j));\n\t\t}\n\n\t\t// Main decoding loop: start just after the last delimiter if any basic code\n\t\t// points were copied; start at the beginning otherwise.\n\n\t\tfor (index = basic > 0 ? basic + 1 : 0; index < inputLength; /* no final expression */) {\n\n\t\t\t// `index` is the index of the next character to be consumed.\n\t\t\t// Decode a generalized variable-length integer into `delta`,\n\t\t\t// which gets added to `i`. The overflow checking is easier\n\t\t\t// if we increase `i` as we go, then subtract off its starting\n\t\t\t// value at the end to obtain `delta`.\n\t\t\tfor (oldi = i, w = 1, k = base; /* no condition */; k += base) {\n\n\t\t\t\tif (index >= inputLength) {\n\t\t\t\t\terror('invalid-input');\n\t\t\t\t}\n\n\t\t\t\tdigit = basicToDigit(input.charCodeAt(index++));\n\n\t\t\t\tif (digit >= base || digit > floor((maxInt - i) / w)) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\ti += digit * w;\n\t\t\t\tt = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\n\t\t\t\tif (digit < t) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tbaseMinusT = base - t;\n\t\t\t\tif (w > floor(maxInt / baseMinusT)) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\tw *= baseMinusT;\n\n\t\t\t}\n\n\t\t\tout = output.length + 1;\n\t\t\tbias = adapt(i - oldi, out, oldi == 0);\n\n\t\t\t// `i` was supposed to wrap around from `out` to `0`,\n\t\t\t// incrementing `n` each time, so we'll fix that now:\n\t\t\tif (floor(i / out) > maxInt - n) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\tn += floor(i / out);\n\t\t\ti %= out;\n\n\t\t\t// Insert `n` at position `i` of the output\n\t\t\toutput.splice(i++, 0, n);\n\n\t\t}\n\n\t\treturn ucs2encode(output);\n\t}\n\n\t/**\n\t * Converts a string of Unicode symbols (e.g. a domain name label) to a\n\t * Punycode string of ASCII-only symbols.\n\t * @memberOf punycode\n\t * @param {String} input The string of Unicode symbols.\n\t * @returns {String} The resulting Punycode string of ASCII-only symbols.\n\t */\n\tfunction encode(input) {\n\t\tvar n,\n\t\t    delta,\n\t\t    handledCPCount,\n\t\t    basicLength,\n\t\t    bias,\n\t\t    j,\n\t\t    m,\n\t\t    q,\n\t\t    k,\n\t\t    t,\n\t\t    currentValue,\n\t\t    output = [],\n\t\t    /** `inputLength` will hold the number of code points in `input`. */\n\t\t    inputLength,\n\t\t    /** Cached calculation results */\n\t\t    handledCPCountPlusOne,\n\t\t    baseMinusT,\n\t\t    qMinusT;\n\n\t\t// Convert the input in UCS-2 to Unicode\n\t\tinput = ucs2decode(input);\n\n\t\t// Cache the length\n\t\tinputLength = input.length;\n\n\t\t// Initialize the state\n\t\tn = initialN;\n\t\tdelta = 0;\n\t\tbias = initialBias;\n\n\t\t// Handle the basic code points\n\t\tfor (j = 0; j < inputLength; ++j) {\n\t\t\tcurrentValue = input[j];\n\t\t\tif (currentValue < 0x80) {\n\t\t\t\toutput.push(stringFromCharCode(currentValue));\n\t\t\t}\n\t\t}\n\n\t\thandledCPCount = basicLength = output.length;\n\n\t\t// `handledCPCount` is the number of code points that have been handled;\n\t\t// `basicLength` is the number of basic code points.\n\n\t\t// Finish the basic string - if it is not empty - with a delimiter\n\t\tif (basicLength) {\n\t\t\toutput.push(delimiter);\n\t\t}\n\n\t\t// Main encoding loop:\n\t\twhile (handledCPCount < inputLength) {\n\n\t\t\t// All non-basic code points < n have been handled already. Find the next\n\t\t\t// larger one:\n\t\t\tfor (m = maxInt, j = 0; j < inputLength; ++j) {\n\t\t\t\tcurrentValue = input[j];\n\t\t\t\tif (currentValue >= n && currentValue < m) {\n\t\t\t\t\tm = currentValue;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Increase `delta` enough to advance the decoder's <n,i> state to <m,0>,\n\t\t\t// but guard against overflow\n\t\t\thandledCPCountPlusOne = handledCPCount + 1;\n\t\t\tif (m - n > floor((maxInt - delta) / handledCPCountPlusOne)) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\tdelta += (m - n) * handledCPCountPlusOne;\n\t\t\tn = m;\n\n\t\t\tfor (j = 0; j < inputLength; ++j) {\n\t\t\t\tcurrentValue = input[j];\n\n\t\t\t\tif (currentValue < n && ++delta > maxInt) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\tif (currentValue == n) {\n\t\t\t\t\t// Represent delta as a generalized variable-length integer\n\t\t\t\t\tfor (q = delta, k = base; /* no condition */; k += base) {\n\t\t\t\t\t\tt = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\t\t\t\t\t\tif (q < t) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tqMinusT = q - t;\n\t\t\t\t\t\tbaseMinusT = base - t;\n\t\t\t\t\t\toutput.push(\n\t\t\t\t\t\t\tstringFromCharCode(digitToBasic(t + qMinusT % baseMinusT, 0))\n\t\t\t\t\t\t);\n\t\t\t\t\t\tq = floor(qMinusT / baseMinusT);\n\t\t\t\t\t}\n\n\t\t\t\t\toutput.push(stringFromCharCode(digitToBasic(q, 0)));\n\t\t\t\t\tbias = adapt(delta, handledCPCountPlusOne, handledCPCount == basicLength);\n\t\t\t\t\tdelta = 0;\n\t\t\t\t\t++handledCPCount;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t++delta;\n\t\t\t++n;\n\n\t\t}\n\t\treturn output.join('');\n\t}\n\n\t/**\n\t * Converts a Punycode string representing a domain name or an email address\n\t * to Unicode. Only the Punycoded parts of the input will be converted, i.e.\n\t * it doesn't matter if you call it on a string that has already been\n\t * converted to Unicode.\n\t * @memberOf punycode\n\t * @param {String} input The Punycoded domain name or email address to\n\t * convert to Unicode.\n\t * @returns {String} The Unicode representation of the given Punycode\n\t * string.\n\t */\n\tfunction toUnicode(input) {\n\t\treturn mapDomain(input, function(string) {\n\t\t\treturn regexPunycode.test(string)\n\t\t\t\t? decode(string.slice(4).toLowerCase())\n\t\t\t\t: string;\n\t\t});\n\t}\n\n\t/**\n\t * Converts a Unicode string representing a domain name or an email address to\n\t * Punycode. Only the non-ASCII parts of the domain name will be converted,\n\t * i.e. it doesn't matter if you call it with a domain that's already in\n\t * ASCII.\n\t * @memberOf punycode\n\t * @param {String} input The domain name or email address to convert, as a\n\t * Unicode string.\n\t * @returns {String} The Punycode representation of the given domain name or\n\t * email address.\n\t */\n\tfunction toASCII(input) {\n\t\treturn mapDomain(input, function(string) {\n\t\t\treturn regexNonASCII.test(string)\n\t\t\t\t? 'xn--' + encode(string)\n\t\t\t\t: string;\n\t\t});\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\t/** Define the public API */\n\tpunycode = {\n\t\t/**\n\t\t * A string representing the current Punycode.js version number.\n\t\t * @memberOf punycode\n\t\t * @type String\n\t\t */\n\t\t'version': '1.3.2',\n\t\t/**\n\t\t * An object of methods to convert from JavaScript's internal character\n\t\t * representation (UCS-2) to Unicode code points, and back.\n\t\t * @see <https://mathiasbynens.be/notes/javascript-encoding>\n\t\t * @memberOf punycode\n\t\t * @type Object\n\t\t */\n\t\t'ucs2': {\n\t\t\t'decode': ucs2decode,\n\t\t\t'encode': ucs2encode\n\t\t},\n\t\t'decode': decode,\n\t\t'encode': encode,\n\t\t'toASCII': toASCII,\n\t\t'toUnicode': toUnicode\n\t};\n\n\t/** Expose `punycode` */\n\t// Some AMD build optimizers, like r.js, check for specific condition patterns\n\t// like the following:\n\tif (\n\t\ttypeof define == 'function' &&\n\t\ttypeof define.amd == 'object' &&\n\t\tdefine.amd\n\t) {\n\t\tdefine('punycode', function() {\n\t\t\treturn punycode;\n\t\t});\n\t} else if (freeExports && freeModule) {\n\t\tif (module.exports == freeExports) {\n\t\t\t// in Node.js, io.js, or RingoJS v0.8.0+\n\t\t\tfreeModule.exports = punycode;\n\t\t} else {\n\t\t\t// in Narwhal or RingoJS v0.7.0-\n\t\t\tfor (key in punycode) {\n\t\t\t\tpunycode.hasOwnProperty(key) && (freeExports[key] = punycode[key]);\n\t\t\t}\n\t\t}\n\t} else {\n\t\t// in Rhino or a web browser\n\t\troot.punycode = punycode;\n\t}\n\n}(this));\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{}],2:[function(_dereq_,module,exports){\nvar log = _dereq_('./log');\n\nfunction restoreOwnerScroll(ownerDocument, x, y) {\n    if (ownerDocument.defaultView && (x !== ownerDocument.defaultView.pageXOffset || y !== ownerDocument.defaultView.pageYOffset)) {\n        ownerDocument.defaultView.scrollTo(x, y);\n    }\n}\n\nfunction cloneCanvasContents(canvas, clonedCanvas) {\n    try {\n        if (clonedCanvas) {\n            clonedCanvas.width = canvas.width;\n            clonedCanvas.height = canvas.height;\n            clonedCanvas.getContext(\"2d\").putImageData(canvas.getContext(\"2d\").getImageData(0, 0, canvas.width, canvas.height), 0, 0);\n        }\n    } catch(e) {\n        log(\"Unable to copy canvas content from\", canvas, e);\n    }\n}\n\nfunction cloneNode(node, javascriptEnabled) {\n    var clone = node.nodeType === 3 ? document.createTextNode(node.nodeValue) : node.cloneNode(false);\n\n    var child = node.firstChild;\n    while(child) {\n        if (javascriptEnabled === true || child.nodeType !== 1 || child.nodeName !== 'SCRIPT') {\n            clone.appendChild(cloneNode(child, javascriptEnabled));\n        }\n        child = child.nextSibling;\n    }\n\n    if (node.nodeType === 1) {\n        clone._scrollTop = node.scrollTop;\n        clone._scrollLeft = node.scrollLeft;\n        if (node.nodeName === \"CANVAS\") {\n            cloneCanvasContents(node, clone);\n        } else if (node.nodeName === \"TEXTAREA\" || node.nodeName === \"SELECT\") {\n            clone.value = node.value;\n        }\n    }\n\n    return clone;\n}\n\nfunction initNode(node) {\n    if (node.nodeType === 1) {\n        node.scrollTop = node._scrollTop;\n        node.scrollLeft = node._scrollLeft;\n\n        var child = node.firstChild;\n        while(child) {\n            initNode(child);\n            child = child.nextSibling;\n        }\n    }\n}\n\nmodule.exports = function(ownerDocument, containerDocument, width, height, options, x ,y) {\n    var documentElement = cloneNode(ownerDocument.documentElement, options.javascriptEnabled);\n    var container = containerDocument.createElement(\"iframe\");\n\n    container.className = \"html2canvas-container\";\n    container.style.visibility = \"hidden\";\n    container.style.position = \"fixed\";\n    container.style.left = \"-10000px\";\n    container.style.top = \"0px\";\n    container.style.border = \"0\";\n    container.width = width;\n    container.height = height;\n    container.scrolling = \"no\"; // ios won't scroll without it\n    containerDocument.body.appendChild(container);\n\n    return new Promise(function(resolve) {\n        var documentClone = container.contentWindow.document;\n\n        /* Chrome doesn't detect relative background-images assigned in inline <style> sheets when fetched through getComputedStyle\n         if window url is about:blank, we can assign the url to current by writing onto the document\n         */\n        container.contentWindow.onload = container.onload = function() {\n            var interval = setInterval(function() {\n                if (documentClone.body.childNodes.length > 0) {\n                    initNode(documentClone.documentElement);\n                    clearInterval(interval);\n                    if (options.type === \"view\") {\n                        container.contentWindow.scrollTo(x, y);\n                        if ((/(iPad|iPhone|iPod)/g).test(navigator.userAgent) && (container.contentWindow.scrollY !== y || container.contentWindow.scrollX !== x)) {\n                            documentClone.documentElement.style.top = (-y) + \"px\";\n                            documentClone.documentElement.style.left = (-x) + \"px\";\n                            documentClone.documentElement.style.position = 'absolute';\n                        }\n                    }\n                    resolve(container);\n                }\n            }, 50);\n        };\n\n        documentClone.open();\n        documentClone.write(\"<!DOCTYPE html><html></html>\");\n        // Chrome scrolls the parent document for some reason after the write to the cloned window???\n        restoreOwnerScroll(ownerDocument, x, y);\n        documentClone.replaceChild(documentClone.adoptNode(documentElement), documentClone.documentElement);\n        documentClone.close();\n    });\n};\n\n},{\"./log\":13}],3:[function(_dereq_,module,exports){\n// http://dev.w3.org/csswg/css-color/\n\nfunction Color(value) {\n    this.r = 0;\n    this.g = 0;\n    this.b = 0;\n    this.a = null;\n    var result = this.fromArray(value) ||\n        this.namedColor(value) ||\n        this.rgb(value) ||\n        this.rgba(value) ||\n        this.hex6(value) ||\n        this.hex3(value);\n}\n\nColor.prototype.darken = function(amount) {\n    var a = 1 - amount;\n    return  new Color([\n        Math.round(this.r * a),\n        Math.round(this.g * a),\n        Math.round(this.b * a),\n        this.a\n    ]);\n};\n\nColor.prototype.isTransparent = function() {\n    return this.a === 0;\n};\n\nColor.prototype.isBlack = function() {\n    return this.r === 0 && this.g === 0 && this.b === 0;\n};\n\nColor.prototype.fromArray = function(array) {\n    if (Array.isArray(array)) {\n        this.r = Math.min(array[0], 255);\n        this.g = Math.min(array[1], 255);\n        this.b = Math.min(array[2], 255);\n        if (array.length > 3) {\n            this.a = array[3];\n        }\n    }\n\n    return (Array.isArray(array));\n};\n\nvar _hex3 = /^#([a-f0-9]{3})$/i;\n\nColor.prototype.hex3 = function(value) {\n    var match = null;\n    if ((match = value.match(_hex3)) !== null) {\n        this.r = parseInt(match[1][0] + match[1][0], 16);\n        this.g = parseInt(match[1][1] + match[1][1], 16);\n        this.b = parseInt(match[1][2] + match[1][2], 16);\n    }\n    return match !== null;\n};\n\nvar _hex6 = /^#([a-f0-9]{6})$/i;\n\nColor.prototype.hex6 = function(value) {\n    var match = null;\n    if ((match = value.match(_hex6)) !== null) {\n        this.r = parseInt(match[1].substring(0, 2), 16);\n        this.g = parseInt(match[1].substring(2, 4), 16);\n        this.b = parseInt(match[1].substring(4, 6), 16);\n    }\n    return match !== null;\n};\n\n\nvar _rgb = /^rgb\\(\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*\\)$/;\n\nColor.prototype.rgb = function(value) {\n    var match = null;\n    if ((match = value.match(_rgb)) !== null) {\n        this.r = Number(match[1]);\n        this.g = Number(match[2]);\n        this.b = Number(match[3]);\n    }\n    return match !== null;\n};\n\nvar _rgba = /^rgba\\(\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d?\\.?\\d+)\\s*\\)$/;\n\nColor.prototype.rgba = function(value) {\n    var match = null;\n    if ((match = value.match(_rgba)) !== null) {\n        this.r = Number(match[1]);\n        this.g = Number(match[2]);\n        this.b = Number(match[3]);\n        this.a = Number(match[4]);\n    }\n    return match !== null;\n};\n\nColor.prototype.toString = function() {\n    return this.a !== null && this.a !== 1 ?\n    \"rgba(\" + [this.r, this.g, this.b, this.a].join(\",\") + \")\" :\n    \"rgb(\" + [this.r, this.g, this.b].join(\",\") + \")\";\n};\n\nColor.prototype.namedColor = function(value) {\n    value = value.toLowerCase();\n    var color = colors[value];\n    if (color) {\n        this.r = color[0];\n        this.g = color[1];\n        this.b = color[2];\n    } else if (value === \"transparent\") {\n        this.r = this.g = this.b = this.a = 0;\n        return true;\n    }\n\n    return !!color;\n};\n\nColor.prototype.isColor = true;\n\n// JSON.stringify([].slice.call($$('.named-color-table tr'), 1).map(function(row) { return [row.childNodes[3].textContent, row.childNodes[5].textContent.trim().split(\",\").map(Number)] }).reduce(function(data, row) {data[row[0]] = row[1]; return data}, {}))\nvar colors = {\n    \"aliceblue\": [240, 248, 255],\n    \"antiquewhite\": [250, 235, 215],\n    \"aqua\": [0, 255, 255],\n    \"aquamarine\": [127, 255, 212],\n    \"azure\": [240, 255, 255],\n    \"beige\": [245, 245, 220],\n    \"bisque\": [255, 228, 196],\n    \"black\": [0, 0, 0],\n    \"blanchedalmond\": [255, 235, 205],\n    \"blue\": [0, 0, 255],\n    \"blueviolet\": [138, 43, 226],\n    \"brown\": [165, 42, 42],\n    \"burlywood\": [222, 184, 135],\n    \"cadetblue\": [95, 158, 160],\n    \"chartreuse\": [127, 255, 0],\n    \"chocolate\": [210, 105, 30],\n    \"coral\": [255, 127, 80],\n    \"cornflowerblue\": [100, 149, 237],\n    \"cornsilk\": [255, 248, 220],\n    \"crimson\": [220, 20, 60],\n    \"cyan\": [0, 255, 255],\n    \"darkblue\": [0, 0, 139],\n    \"darkcyan\": [0, 139, 139],\n    \"darkgoldenrod\": [184, 134, 11],\n    \"darkgray\": [169, 169, 169],\n    \"darkgreen\": [0, 100, 0],\n    \"darkgrey\": [169, 169, 169],\n    \"darkkhaki\": [189, 183, 107],\n    \"darkmagenta\": [139, 0, 139],\n    \"darkolivegreen\": [85, 107, 47],\n    \"darkorange\": [255, 140, 0],\n    \"darkorchid\": [153, 50, 204],\n    \"darkred\": [139, 0, 0],\n    \"darksalmon\": [233, 150, 122],\n    \"darkseagreen\": [143, 188, 143],\n    \"darkslateblue\": [72, 61, 139],\n    \"darkslategray\": [47, 79, 79],\n    \"darkslategrey\": [47, 79, 79],\n    \"darkturquoise\": [0, 206, 209],\n    \"darkviolet\": [148, 0, 211],\n    \"deeppink\": [255, 20, 147],\n    \"deepskyblue\": [0, 191, 255],\n    \"dimgray\": [105, 105, 105],\n    \"dimgrey\": [105, 105, 105],\n    \"dodgerblue\": [30, 144, 255],\n    \"firebrick\": [178, 34, 34],\n    \"floralwhite\": [255, 250, 240],\n    \"forestgreen\": [34, 139, 34],\n    \"fuchsia\": [255, 0, 255],\n    \"gainsboro\": [220, 220, 220],\n    \"ghostwhite\": [248, 248, 255],\n    \"gold\": [255, 215, 0],\n    \"goldenrod\": [218, 165, 32],\n    \"gray\": [128, 128, 128],\n    \"green\": [0, 128, 0],\n    \"greenyellow\": [173, 255, 47],\n    \"grey\": [128, 128, 128],\n    \"honeydew\": [240, 255, 240],\n    \"hotpink\": [255, 105, 180],\n    \"indianred\": [205, 92, 92],\n    \"indigo\": [75, 0, 130],\n    \"ivory\": [255, 255, 240],\n    \"khaki\": [240, 230, 140],\n    \"lavender\": [230, 230, 250],\n    \"lavenderblush\": [255, 240, 245],\n    \"lawngreen\": [124, 252, 0],\n    \"lemonchiffon\": [255, 250, 205],\n    \"lightblue\": [173, 216, 230],\n    \"lightcoral\": [240, 128, 128],\n    \"lightcyan\": [224, 255, 255],\n    \"lightgoldenrodyellow\": [250, 250, 210],\n    \"lightgray\": [211, 211, 211],\n    \"lightgreen\": [144, 238, 144],\n    \"lightgrey\": [211, 211, 211],\n    \"lightpink\": [255, 182, 193],\n    \"lightsalmon\": [255, 160, 122],\n    \"lightseagreen\": [32, 178, 170],\n    \"lightskyblue\": [135, 206, 250],\n    \"lightslategray\": [119, 136, 153],\n    \"lightslategrey\": [119, 136, 153],\n    \"lightsteelblue\": [176, 196, 222],\n    \"lightyellow\": [255, 255, 224],\n    \"lime\": [0, 255, 0],\n    \"limegreen\": [50, 205, 50],\n    \"linen\": [250, 240, 230],\n    \"magenta\": [255, 0, 255],\n    \"maroon\": [128, 0, 0],\n    \"mediumaquamarine\": [102, 205, 170],\n    \"mediumblue\": [0, 0, 205],\n    \"mediumorchid\": [186, 85, 211],\n    \"mediumpurple\": [147, 112, 219],\n    \"mediumseagreen\": [60, 179, 113],\n    \"mediumslateblue\": [123, 104, 238],\n    \"mediumspringgreen\": [0, 250, 154],\n    \"mediumturquoise\": [72, 209, 204],\n    \"mediumvioletred\": [199, 21, 133],\n    \"midnightblue\": [25, 25, 112],\n    \"mintcream\": [245, 255, 250],\n    \"mistyrose\": [255, 228, 225],\n    \"moccasin\": [255, 228, 181],\n    \"navajowhite\": [255, 222, 173],\n    \"navy\": [0, 0, 128],\n    \"oldlace\": [253, 245, 230],\n    \"olive\": [128, 128, 0],\n    \"olivedrab\": [107, 142, 35],\n    \"orange\": [255, 165, 0],\n    \"orangered\": [255, 69, 0],\n    \"orchid\": [218, 112, 214],\n    \"palegoldenrod\": [238, 232, 170],\n    \"palegreen\": [152, 251, 152],\n    \"paleturquoise\": [175, 238, 238],\n    \"palevioletred\": [219, 112, 147],\n    \"papayawhip\": [255, 239, 213],\n    \"peachpuff\": [255, 218, 185],\n    \"peru\": [205, 133, 63],\n    \"pink\": [255, 192, 203],\n    \"plum\": [221, 160, 221],\n    \"powderblue\": [176, 224, 230],\n    \"purple\": [128, 0, 128],\n    \"rebeccapurple\": [102, 51, 153],\n    \"red\": [255, 0, 0],\n    \"rosybrown\": [188, 143, 143],\n    \"royalblue\": [65, 105, 225],\n    \"saddlebrown\": [139, 69, 19],\n    \"salmon\": [250, 128, 114],\n    \"sandybrown\": [244, 164, 96],\n    \"seagreen\": [46, 139, 87],\n    \"seashell\": [255, 245, 238],\n    \"sienna\": [160, 82, 45],\n    \"silver\": [192, 192, 192],\n    \"skyblue\": [135, 206, 235],\n    \"slateblue\": [106, 90, 205],\n    \"slategray\": [112, 128, 144],\n    \"slategrey\": [112, 128, 144],\n    \"snow\": [255, 250, 250],\n    \"springgreen\": [0, 255, 127],\n    \"steelblue\": [70, 130, 180],\n    \"tan\": [210, 180, 140],\n    \"teal\": [0, 128, 128],\n    \"thistle\": [216, 191, 216],\n    \"tomato\": [255, 99, 71],\n    \"turquoise\": [64, 224, 208],\n    \"violet\": [238, 130, 238],\n    \"wheat\": [245, 222, 179],\n    \"white\": [255, 255, 255],\n    \"whitesmoke\": [245, 245, 245],\n    \"yellow\": [255, 255, 0],\n    \"yellowgreen\": [154, 205, 50]\n};\n\nmodule.exports = Color;\n\n},{}],4:[function(_dereq_,module,exports){\nvar Support = _dereq_('./support');\nvar CanvasRenderer = _dereq_('./renderers/canvas');\nvar ImageLoader = _dereq_('./imageloader');\nvar NodeParser = _dereq_('./nodeparser');\nvar NodeContainer = _dereq_('./nodecontainer');\nvar log = _dereq_('./log');\nvar utils = _dereq_('./utils');\nvar createWindowClone = _dereq_('./clone');\nvar loadUrlDocument = _dereq_('./proxy').loadUrlDocument;\nvar getBounds = utils.getBounds;\n\nvar html2canvasNodeAttribute = \"data-html2canvas-node\";\nvar html2canvasCloneIndex = 0;\n\nfunction html2canvas(nodeList, options) {\n    var index = html2canvasCloneIndex++;\n    options = options || {};\n    if (options.logging) {\n        log.options.logging = true;\n        log.options.start = Date.now();\n    }\n\n    options.async = typeof(options.async) === \"undefined\" ? true : options.async;\n    options.allowTaint = typeof(options.allowTaint) === \"undefined\" ? false : options.allowTaint;\n    options.removeContainer = typeof(options.removeContainer) === \"undefined\" ? true : options.removeContainer;\n    options.javascriptEnabled = typeof(options.javascriptEnabled) === \"undefined\" ? false : options.javascriptEnabled;\n    options.imageTimeout = typeof(options.imageTimeout) === \"undefined\" ? 10000 : options.imageTimeout;\n    options.renderer = typeof(options.renderer) === \"function\" ? options.renderer : CanvasRenderer;\n    options.strict = !!options.strict;\n\n    if (typeof(nodeList) === \"string\") {\n        if (typeof(options.proxy) !== \"string\") {\n            return Promise.reject(\"Proxy must be used when rendering url\");\n        }\n        var width = options.width != null ? options.width : window.innerWidth;\n        var height = options.height != null ? options.height : window.innerHeight;\n        return loadUrlDocument(absoluteUrl(nodeList), options.proxy, document, width, height, options).then(function(container) {\n            return renderWindow(container.contentWindow.document.documentElement, container, options, width, height);\n        });\n    }\n\n    var node = ((nodeList === undefined) ? [document.documentElement] : ((nodeList.length) ? nodeList : [nodeList]))[0];\n    node.setAttribute(html2canvasNodeAttribute + index, index);\n    return renderDocument(node.ownerDocument, options, node.ownerDocument.defaultView.innerWidth, node.ownerDocument.defaultView.innerHeight, index).then(function(canvas) {\n        if (typeof(options.onrendered) === \"function\") {\n            log(\"options.onrendered is deprecated, html2canvas returns a Promise containing the canvas\");\n            options.onrendered(canvas);\n        }\n        return canvas;\n    });\n}\n\nhtml2canvas.CanvasRenderer = CanvasRenderer;\nhtml2canvas.NodeContainer = NodeContainer;\nhtml2canvas.log = log;\nhtml2canvas.utils = utils;\n\nvar html2canvasExport = (typeof(document) === \"undefined\" || typeof(Object.create) !== \"function\" || typeof(document.createElement(\"canvas\").getContext) !== \"function\") ? function() {\n    return Promise.reject(\"No canvas support\");\n} : html2canvas;\n\nmodule.exports = html2canvasExport;\n\nif (typeof(define) === 'function' && define.amd) {\n    define('html2canvas', [], function() {\n        return html2canvasExport;\n    });\n}\n\nfunction renderDocument(document, options, windowWidth, windowHeight, html2canvasIndex) {\n    return createWindowClone(document, document, windowWidth, windowHeight, options, document.defaultView.pageXOffset, document.defaultView.pageYOffset).then(function(container) {\n        log(\"Document cloned\");\n        var attributeName = html2canvasNodeAttribute + html2canvasIndex;\n        var selector = \"[\" + attributeName + \"='\" + html2canvasIndex + \"']\";\n        document.querySelector(selector).removeAttribute(attributeName);\n        var clonedWindow = container.contentWindow;\n        var node = clonedWindow.document.querySelector(selector);\n        var oncloneHandler = (typeof(options.onclone) === \"function\") ? Promise.resolve(options.onclone(clonedWindow.document)) : Promise.resolve(true);\n        return oncloneHandler.then(function() {\n            return renderWindow(node, container, options, windowWidth, windowHeight);\n        });\n    });\n}\n\nfunction renderWindow(node, container, options, windowWidth, windowHeight) {\n    var clonedWindow = container.contentWindow;\n    var support = new Support(clonedWindow.document);\n    var imageLoader = new ImageLoader(options, support);\n    var bounds = getBounds(node);\n    var width = options.type === \"view\" ? windowWidth : documentWidth(clonedWindow.document);\n    var height = options.type === \"view\" ? windowHeight : documentHeight(clonedWindow.document);\n    var renderer = new options.renderer(width, height, imageLoader, options, document);\n    var parser = new NodeParser(node, renderer, support, imageLoader, options);\n    return parser.ready.then(function() {\n        log(\"Finished rendering\");\n        var canvas;\n\n        if (options.type === \"view\") {\n            canvas = crop(renderer.canvas, {width: renderer.canvas.width, height: renderer.canvas.height, top: 0, left: 0, x: 0, y: 0});\n        } else if (node === clonedWindow.document.body || node === clonedWindow.document.documentElement || options.canvas != null) {\n            canvas = renderer.canvas;\n        } else {\n            canvas = crop(renderer.canvas, {width:  options.width != null ? options.width : bounds.width, height: options.height != null ? options.height : bounds.height, top: bounds.top, left: bounds.left, x: 0, y: 0});\n        }\n\n        cleanupContainer(container, options);\n        return canvas;\n    });\n}\n\nfunction cleanupContainer(container, options) {\n    if (options.removeContainer) {\n        container.parentNode.removeChild(container);\n        log(\"Cleaned up container\");\n    }\n}\n\nfunction crop(canvas, bounds) {\n    var croppedCanvas = document.createElement(\"canvas\");\n    var x1 = Math.min(canvas.width - 1, Math.max(0, bounds.left));\n    var x2 = Math.min(canvas.width, Math.max(1, bounds.left + bounds.width));\n    var y1 = Math.min(canvas.height - 1, Math.max(0, bounds.top));\n    var y2 = Math.min(canvas.height, Math.max(1, bounds.top + bounds.height));\n    croppedCanvas.width = bounds.width;\n    croppedCanvas.height =  bounds.height;\n    var width = x2-x1;\n    var height = y2-y1;\n    log(\"Cropping canvas at:\", \"left:\", bounds.left, \"top:\", bounds.top, \"width:\", width, \"height:\", height);\n    log(\"Resulting crop with width\", bounds.width, \"and height\", bounds.height, \"with x\", x1, \"and y\", y1);\n    croppedCanvas.getContext(\"2d\").drawImage(canvas, x1, y1, width, height, bounds.x, bounds.y, width, height);\n    return croppedCanvas;\n}\n\nfunction documentWidth (doc) {\n    return Math.max(\n        Math.max(doc.body.scrollWidth, doc.documentElement.scrollWidth),\n        Math.max(doc.body.offsetWidth, doc.documentElement.offsetWidth),\n        Math.max(doc.body.clientWidth, doc.documentElement.clientWidth)\n    );\n}\n\nfunction documentHeight (doc) {\n    return Math.max(\n        Math.max(doc.body.scrollHeight, doc.documentElement.scrollHeight),\n        Math.max(doc.body.offsetHeight, doc.documentElement.offsetHeight),\n        Math.max(doc.body.clientHeight, doc.documentElement.clientHeight)\n    );\n}\n\nfunction absoluteUrl(url) {\n    var link = document.createElement(\"a\");\n    link.href = url;\n    link.href = link.href;\n    return link;\n}\n\n},{\"./clone\":2,\"./imageloader\":11,\"./log\":13,\"./nodecontainer\":14,\"./nodeparser\":15,\"./proxy\":16,\"./renderers/canvas\":20,\"./support\":22,\"./utils\":26}],5:[function(_dereq_,module,exports){\nvar log = _dereq_('./log');\nvar smallImage = _dereq_('./utils').smallImage;\n\nfunction DummyImageContainer(src) {\n    this.src = src;\n    log(\"DummyImageContainer for\", src);\n    if (!this.promise || !this.image) {\n        log(\"Initiating DummyImageContainer\");\n        DummyImageContainer.prototype.image = new Image();\n        var image = this.image;\n        DummyImageContainer.prototype.promise = new Promise(function(resolve, reject) {\n            image.onload = resolve;\n            image.onerror = reject;\n            image.src = smallImage();\n            if (image.complete === true) {\n                resolve(image);\n            }\n        });\n    }\n}\n\nmodule.exports = DummyImageContainer;\n\n},{\"./log\":13,\"./utils\":26}],6:[function(_dereq_,module,exports){\nvar smallImage = _dereq_('./utils').smallImage;\n\nfunction Font(family, size) {\n    var container = document.createElement('div'),\n        img = document.createElement('img'),\n        span = document.createElement('span'),\n        sampleText = 'Hidden Text',\n        baseline,\n        middle;\n\n    container.style.visibility = \"hidden\";\n    container.style.fontFamily = family;\n    container.style.fontSize = size;\n    container.style.margin = 0;\n    container.style.padding = 0;\n\n    document.body.appendChild(container);\n\n    img.src = smallImage();\n    img.width = 1;\n    img.height = 1;\n\n    img.style.margin = 0;\n    img.style.padding = 0;\n    img.style.verticalAlign = \"baseline\";\n\n    span.style.fontFamily = family;\n    span.style.fontSize = size;\n    span.style.margin = 0;\n    span.style.padding = 0;\n\n    span.appendChild(document.createTextNode(sampleText));\n    container.appendChild(span);\n    container.appendChild(img);\n    baseline = (img.offsetTop - span.offsetTop) + 1;\n\n    container.removeChild(span);\n    container.appendChild(document.createTextNode(sampleText));\n\n    container.style.lineHeight = \"normal\";\n    img.style.verticalAlign = \"super\";\n\n    middle = (img.offsetTop-container.offsetTop) + 1;\n\n    document.body.removeChild(container);\n\n    this.baseline = baseline;\n    this.lineWidth = 1;\n    this.middle = middle;\n}\n\nmodule.exports = Font;\n\n},{\"./utils\":26}],7:[function(_dereq_,module,exports){\nvar Font = _dereq_('./font');\n\nfunction FontMetrics() {\n    this.data = {};\n}\n\nFontMetrics.prototype.getMetrics = function(family, size) {\n    if (this.data[family + \"-\" + size] === undefined) {\n        this.data[family + \"-\" + size] = new Font(family, size);\n    }\n    return this.data[family + \"-\" + size];\n};\n\nmodule.exports = FontMetrics;\n\n},{\"./font\":6}],8:[function(_dereq_,module,exports){\nvar utils = _dereq_('./utils');\nvar getBounds = utils.getBounds;\nvar loadUrlDocument = _dereq_('./proxy').loadUrlDocument;\n\nfunction FrameContainer(container, sameOrigin, options) {\n    this.image = null;\n    this.src = container;\n    var self = this;\n    var bounds = getBounds(container);\n    this.promise = (!sameOrigin ? this.proxyLoad(options.proxy, bounds, options) : new Promise(function(resolve) {\n        if (container.contentWindow.document.URL === \"about:blank\" || container.contentWindow.document.documentElement == null) {\n            container.contentWindow.onload = container.onload = function() {\n                resolve(container);\n            };\n        } else {\n            resolve(container);\n        }\n    })).then(function(container) {\n        var html2canvas = _dereq_('./core');\n        return html2canvas(container.contentWindow.document.documentElement, {type: 'view', width: container.width, height: container.height, proxy: options.proxy, javascriptEnabled: options.javascriptEnabled, removeContainer: options.removeContainer, allowTaint: options.allowTaint, imageTimeout: options.imageTimeout / 2});\n    }).then(function(canvas) {\n        return self.image = canvas;\n    });\n}\n\nFrameContainer.prototype.proxyLoad = function(proxy, bounds, options) {\n    var container = this.src;\n    return loadUrlDocument(container.src, proxy, container.ownerDocument, bounds.width, bounds.height, options);\n};\n\nmodule.exports = FrameContainer;\n\n},{\"./core\":4,\"./proxy\":16,\"./utils\":26}],9:[function(_dereq_,module,exports){\nfunction GradientContainer(imageData) {\n    this.src = imageData.value;\n    this.colorStops = [];\n    this.type = null;\n    this.x0 = 0.5;\n    this.y0 = 0.5;\n    this.x1 = 0.5;\n    this.y1 = 0.5;\n    this.promise = Promise.resolve(true);\n}\n\nGradientContainer.TYPES = {\n    LINEAR: 1,\n    RADIAL: 2\n};\n\n// TODO: support hsl[a], negative %/length values\n// TODO: support <angle> (e.g. -?\\d{1,3}(?:\\.\\d+)deg, etc. : https://developer.mozilla.org/docs/Web/CSS/angle )\nGradientContainer.REGEXP_COLORSTOP = /^\\s*(rgba?\\(\\s*\\d{1,3},\\s*\\d{1,3},\\s*\\d{1,3}(?:,\\s*[0-9\\.]+)?\\s*\\)|[a-z]{3,20}|#[a-f0-9]{3,6})(?:\\s+(\\d{1,3}(?:\\.\\d+)?)(%|px)?)?(?:\\s|$)/i;\n\nmodule.exports = GradientContainer;\n\n},{}],10:[function(_dereq_,module,exports){\nfunction ImageContainer(src, cors) {\n    this.src = src;\n    this.image = new Image();\n    var self = this;\n    this.tainted = null;\n    this.promise = new Promise(function(resolve, reject) {\n        self.image.onload = resolve;\n        self.image.onerror = reject;\n        if (cors) {\n            self.image.crossOrigin = \"anonymous\";\n        }\n        self.image.src = src;\n        if (self.image.complete === true) {\n            resolve(self.image);\n        }\n    });\n}\n\nmodule.exports = ImageContainer;\n\n},{}],11:[function(_dereq_,module,exports){\nvar log = _dereq_('./log');\nvar ImageContainer = _dereq_('./imagecontainer');\nvar DummyImageContainer = _dereq_('./dummyimagecontainer');\nvar ProxyImageContainer = _dereq_('./proxyimagecontainer');\nvar FrameContainer = _dereq_('./framecontainer');\nvar SVGContainer = _dereq_('./svgcontainer');\nvar SVGNodeContainer = _dereq_('./svgnodecontainer');\nvar LinearGradientContainer = _dereq_('./lineargradientcontainer');\nvar WebkitGradientContainer = _dereq_('./webkitgradientcontainer');\nvar bind = _dereq_('./utils').bind;\n\nfunction ImageLoader(options, support) {\n    this.link = null;\n    this.options = options;\n    this.support = support;\n    this.origin = this.getOrigin(window.location.href);\n}\n\nImageLoader.prototype.findImages = function(nodes) {\n    var images = [];\n    nodes.reduce(function(imageNodes, container) {\n        switch(container.node.nodeName) {\n        case \"IMG\":\n            return imageNodes.concat([{\n                args: [container.node.src],\n                method: \"url\"\n            }]);\n        case \"svg\":\n        case \"IFRAME\":\n            return imageNodes.concat([{\n                args: [container.node],\n                method: container.node.nodeName\n            }]);\n        }\n        return imageNodes;\n    }, []).forEach(this.addImage(images, this.loadImage), this);\n    return images;\n};\n\nImageLoader.prototype.findBackgroundImage = function(images, container) {\n    container.parseBackgroundImages().filter(this.hasImageBackground).forEach(this.addImage(images, this.loadImage), this);\n    return images;\n};\n\nImageLoader.prototype.addImage = function(images, callback) {\n    return function(newImage) {\n        newImage.args.forEach(function(image) {\n            if (!this.imageExists(images, image)) {\n                images.splice(0, 0, callback.call(this, newImage));\n                log('Added image #' + (images.length), typeof(image) === \"string\" ? image.substring(0, 100) : image);\n            }\n        }, this);\n    };\n};\n\nImageLoader.prototype.hasImageBackground = function(imageData) {\n    return imageData.method !== \"none\";\n};\n\nImageLoader.prototype.loadImage = function(imageData) {\n    if (imageData.method === \"url\") {\n        var src = imageData.args[0];\n        if (this.isSVG(src) && !this.support.svg && !this.options.allowTaint) {\n            return new SVGContainer(src);\n        } else if (src.match(/data:image\\/.*;base64,/i)) {\n            return new ImageContainer(src.replace(/url\\(['\"]{0,}|['\"]{0,}\\)$/ig, ''), false);\n        } else if (this.isSameOrigin(src) || this.options.allowTaint === true || this.isSVG(src)) {\n            return new ImageContainer(src, false);\n        } else if (this.support.cors && !this.options.allowTaint && this.options.useCORS) {\n            return new ImageContainer(src, true);\n        } else if (this.options.proxy) {\n            return new ProxyImageContainer(src, this.options.proxy);\n        } else {\n            return new DummyImageContainer(src);\n        }\n    } else if (imageData.method === \"linear-gradient\") {\n        return new LinearGradientContainer(imageData);\n    } else if (imageData.method === \"gradient\") {\n        return new WebkitGradientContainer(imageData);\n    } else if (imageData.method === \"svg\") {\n        return new SVGNodeContainer(imageData.args[0], this.support.svg);\n    } else if (imageData.method === \"IFRAME\") {\n        return new FrameContainer(imageData.args[0], this.isSameOrigin(imageData.args[0].src), this.options);\n    } else {\n        return new DummyImageContainer(imageData);\n    }\n};\n\nImageLoader.prototype.isSVG = function(src) {\n    return src.substring(src.length - 3).toLowerCase() === \"svg\" || SVGContainer.prototype.isInline(src);\n};\n\nImageLoader.prototype.imageExists = function(images, src) {\n    return images.some(function(image) {\n        return image.src === src;\n    });\n};\n\nImageLoader.prototype.isSameOrigin = function(url) {\n    return (this.getOrigin(url) === this.origin);\n};\n\nImageLoader.prototype.getOrigin = function(url) {\n    var link = this.link || (this.link = document.createElement(\"a\"));\n    link.href = url;\n    link.href = link.href; // IE9, LOL! - http://jsfiddle.net/niklasvh/2e48b/\n    return link.protocol + link.hostname + link.port;\n};\n\nImageLoader.prototype.getPromise = function(container) {\n    return this.timeout(container, this.options.imageTimeout)['catch'](function() {\n        var dummy = new DummyImageContainer(container.src);\n        return dummy.promise.then(function(image) {\n            container.image = image;\n        });\n    });\n};\n\nImageLoader.prototype.get = function(src) {\n    var found = null;\n    return this.images.some(function(img) {\n        return (found = img).src === src;\n    }) ? found : null;\n};\n\nImageLoader.prototype.fetch = function(nodes) {\n    this.images = nodes.reduce(bind(this.findBackgroundImage, this), this.findImages(nodes));\n    this.images.forEach(function(image, index) {\n        image.promise.then(function() {\n            log(\"Succesfully loaded image #\"+ (index+1), image);\n        }, function(e) {\n            log(\"Failed loading image #\"+ (index+1), image, e);\n        });\n    });\n    this.ready = Promise.all(this.images.map(this.getPromise, this));\n    log(\"Finished searching images\");\n    return this;\n};\n\nImageLoader.prototype.timeout = function(container, timeout) {\n    var timer;\n    var promise = Promise.race([container.promise, new Promise(function(res, reject) {\n        timer = setTimeout(function() {\n            log(\"Timed out loading image\", container);\n            reject(container);\n        }, timeout);\n    })]).then(function(container) {\n        clearTimeout(timer);\n        return container;\n    });\n    promise['catch'](function() {\n        clearTimeout(timer);\n    });\n    return promise;\n};\n\nmodule.exports = ImageLoader;\n\n},{\"./dummyimagecontainer\":5,\"./framecontainer\":8,\"./imagecontainer\":10,\"./lineargradientcontainer\":12,\"./log\":13,\"./proxyimagecontainer\":17,\"./svgcontainer\":23,\"./svgnodecontainer\":24,\"./utils\":26,\"./webkitgradientcontainer\":27}],12:[function(_dereq_,module,exports){\nvar GradientContainer = _dereq_('./gradientcontainer');\nvar Color = _dereq_('./color');\n\nfunction LinearGradientContainer(imageData) {\n    GradientContainer.apply(this, arguments);\n    this.type = GradientContainer.TYPES.LINEAR;\n\n    var hasDirection = LinearGradientContainer.REGEXP_DIRECTION.test( imageData.args[0] ) ||\n        !GradientContainer.REGEXP_COLORSTOP.test( imageData.args[0] );\n\n    if (hasDirection) {\n        imageData.args[0].split(/\\s+/).reverse().forEach(function(position, index) {\n            switch(position) {\n            case \"left\":\n                this.x0 = 0;\n                this.x1 = 1;\n                break;\n            case \"top\":\n                this.y0 = 0;\n                this.y1 = 1;\n                break;\n            case \"right\":\n                this.x0 = 1;\n                this.x1 = 0;\n                break;\n            case \"bottom\":\n                this.y0 = 1;\n                this.y1 = 0;\n                break;\n            case \"to\":\n                var y0 = this.y0;\n                var x0 = this.x0;\n                this.y0 = this.y1;\n                this.x0 = this.x1;\n                this.x1 = x0;\n                this.y1 = y0;\n                break;\n            case \"center\":\n                break; // centered by default\n            // Firefox internally converts position keywords to percentages:\n            // http://www.w3.org/TR/2010/WD-CSS2-20101207/colors.html#propdef-background-position\n            default: // percentage or absolute length\n                // TODO: support absolute start point positions (e.g., use bounds to convert px to a ratio)\n                var ratio = parseFloat(position, 10) * 1e-2;\n                if (isNaN(ratio)) { // invalid or unhandled value\n                    break;\n                }\n                if (index === 0) {\n                    this.y0 = ratio;\n                    this.y1 = 1 - this.y0;\n                } else {\n                    this.x0 = ratio;\n                    this.x1 = 1 - this.x0;\n                }\n                break;\n            }\n        }, this);\n    } else {\n        this.y0 = 0;\n        this.y1 = 1;\n    }\n\n    this.colorStops = imageData.args.slice(hasDirection ? 1 : 0).map(function(colorStop) {\n        var colorStopMatch = colorStop.match(GradientContainer.REGEXP_COLORSTOP);\n        var value = +colorStopMatch[2];\n        var unit = value === 0 ? \"%\" : colorStopMatch[3]; // treat \"0\" as \"0%\"\n        return {\n            color: new Color(colorStopMatch[1]),\n            // TODO: support absolute stop positions (e.g., compute gradient line length & convert px to ratio)\n            stop: unit === \"%\" ? value / 100 : null\n        };\n    });\n\n    if (this.colorStops[0].stop === null) {\n        this.colorStops[0].stop = 0;\n    }\n\n    if (this.colorStops[this.colorStops.length - 1].stop === null) {\n        this.colorStops[this.colorStops.length - 1].stop = 1;\n    }\n\n    // calculates and fills-in explicit stop positions when omitted from rule\n    this.colorStops.forEach(function(colorStop, index) {\n        if (colorStop.stop === null) {\n            this.colorStops.slice(index).some(function(find, count) {\n                if (find.stop !== null) {\n                    colorStop.stop = ((find.stop - this.colorStops[index - 1].stop) / (count + 1)) + this.colorStops[index - 1].stop;\n                    return true;\n                } else {\n                    return false;\n                }\n            }, this);\n        }\n    }, this);\n}\n\nLinearGradientContainer.prototype = Object.create(GradientContainer.prototype);\n\n// TODO: support <angle> (e.g. -?\\d{1,3}(?:\\.\\d+)deg, etc. : https://developer.mozilla.org/docs/Web/CSS/angle )\nLinearGradientContainer.REGEXP_DIRECTION = /^\\s*(?:to|left|right|top|bottom|center|\\d{1,3}(?:\\.\\d+)?%?)(?:\\s|$)/i;\n\nmodule.exports = LinearGradientContainer;\n\n},{\"./color\":3,\"./gradientcontainer\":9}],13:[function(_dereq_,module,exports){\nvar logger = function() {\n    if (logger.options.logging && window.console && window.console.log) {\n        Function.prototype.bind.call(window.console.log, (window.console)).apply(window.console, [(Date.now() - logger.options.start) + \"ms\", \"html2canvas:\"].concat([].slice.call(arguments, 0)));\n    }\n};\n\nlogger.options = {logging: false};\nmodule.exports = logger;\n\n},{}],14:[function(_dereq_,module,exports){\nvar Color = _dereq_('./color');\nvar utils = _dereq_('./utils');\nvar getBounds = utils.getBounds;\nvar parseBackgrounds = utils.parseBackgrounds;\nvar offsetBounds = utils.offsetBounds;\n\nfunction NodeContainer(node, parent) {\n    this.node = node;\n    this.parent = parent;\n    this.stack = null;\n    this.bounds = null;\n    this.borders = null;\n    this.clip = [];\n    this.backgroundClip = [];\n    this.offsetBounds = null;\n    this.visible = null;\n    this.computedStyles = null;\n    this.colors = {};\n    this.styles = {};\n    this.backgroundImages = null;\n    this.transformData = null;\n    this.transformMatrix = null;\n    this.isPseudoElement = false;\n    this.opacity = null;\n}\n\nNodeContainer.prototype.cloneTo = function(stack) {\n    stack.visible = this.visible;\n    stack.borders = this.borders;\n    stack.bounds = this.bounds;\n    stack.clip = this.clip;\n    stack.backgroundClip = this.backgroundClip;\n    stack.computedStyles = this.computedStyles;\n    stack.styles = this.styles;\n    stack.backgroundImages = this.backgroundImages;\n    stack.opacity = this.opacity;\n};\n\nNodeContainer.prototype.getOpacity = function() {\n    return this.opacity === null ? (this.opacity = this.cssFloat('opacity')) : this.opacity;\n};\n\nNodeContainer.prototype.assignStack = function(stack) {\n    this.stack = stack;\n    stack.children.push(this);\n};\n\nNodeContainer.prototype.isElementVisible = function() {\n    return this.node.nodeType === Node.TEXT_NODE ? this.parent.visible : (\n        this.css('display') !== \"none\" &&\n        this.css('visibility') !== \"hidden\" &&\n        !this.node.hasAttribute(\"data-html2canvas-ignore\") &&\n        (this.node.nodeName !== \"INPUT\" || this.node.getAttribute(\"type\") !== \"hidden\")\n    );\n};\n\nNodeContainer.prototype.css = function(attribute) {\n    if (!this.computedStyles) {\n        this.computedStyles = this.isPseudoElement ? this.parent.computedStyle(this.before ? \":before\" : \":after\") : this.computedStyle(null);\n    }\n\n    return this.styles[attribute] || (this.styles[attribute] = this.computedStyles[attribute]);\n};\n\nNodeContainer.prototype.prefixedCss = function(attribute) {\n    var prefixes = [\"webkit\", \"moz\", \"ms\", \"o\"];\n    var value = this.css(attribute);\n    if (value === undefined) {\n        prefixes.some(function(prefix) {\n            value = this.css(prefix + attribute.substr(0, 1).toUpperCase() + attribute.substr(1));\n            return value !== undefined;\n        }, this);\n    }\n    return value === undefined ? null : value;\n};\n\nNodeContainer.prototype.computedStyle = function(type) {\n    return this.node.ownerDocument.defaultView.getComputedStyle(this.node, type);\n};\n\nNodeContainer.prototype.cssInt = function(attribute) {\n    var value = parseInt(this.css(attribute), 10);\n    return (isNaN(value)) ? 0 : value; // borders in old IE are throwing 'medium' for demo.html\n};\n\nNodeContainer.prototype.color = function(attribute) {\n    return this.colors[attribute] || (this.colors[attribute] = new Color(this.css(attribute)));\n};\n\nNodeContainer.prototype.cssFloat = function(attribute) {\n    var value = parseFloat(this.css(attribute));\n    return (isNaN(value)) ? 0 : value;\n};\n\nNodeContainer.prototype.fontWeight = function() {\n    var weight = this.css(\"fontWeight\");\n    switch(parseInt(weight, 10)){\n    case 401:\n        weight = \"bold\";\n        break;\n    case 400:\n        weight = \"normal\";\n        break;\n    }\n    return weight;\n};\n\nNodeContainer.prototype.parseClip = function() {\n    var matches = this.css('clip').match(this.CLIP);\n    if (matches) {\n        return {\n            top: parseInt(matches[1], 10),\n            right: parseInt(matches[2], 10),\n            bottom: parseInt(matches[3], 10),\n            left: parseInt(matches[4], 10)\n        };\n    }\n    return null;\n};\n\nNodeContainer.prototype.parseBackgroundImages = function() {\n    return this.backgroundImages || (this.backgroundImages = parseBackgrounds(this.css(\"backgroundImage\")));\n};\n\nNodeContainer.prototype.cssList = function(property, index) {\n    var value = (this.css(property) || '').split(',');\n    value = value[index || 0] || value[0] || 'auto';\n    value = value.trim().split(' ');\n    if (value.length === 1) {\n        value = [value[0], isPercentage(value[0]) ? 'auto' : value[0]];\n    }\n    return value;\n};\n\nNodeContainer.prototype.parseBackgroundSize = function(bounds, image, index) {\n    var size = this.cssList(\"backgroundSize\", index);\n    var width, height;\n\n    if (isPercentage(size[0])) {\n        width = bounds.width * parseFloat(size[0]) / 100;\n    } else if (/contain|cover/.test(size[0])) {\n        var targetRatio = bounds.width / bounds.height, currentRatio = image.width / image.height;\n        return (targetRatio < currentRatio ^ size[0] === 'contain') ?  {width: bounds.height * currentRatio, height: bounds.height} : {width: bounds.width, height: bounds.width / currentRatio};\n    } else {\n        width = parseInt(size[0], 10);\n    }\n\n    if (size[0] === 'auto' && size[1] === 'auto') {\n        height = image.height;\n    } else if (size[1] === 'auto') {\n        height = width / image.width * image.height;\n    } else if (isPercentage(size[1])) {\n        height =  bounds.height * parseFloat(size[1]) / 100;\n    } else {\n        height = parseInt(size[1], 10);\n    }\n\n    if (size[0] === 'auto') {\n        width = height / image.height * image.width;\n    }\n\n    return {width: width, height: height};\n};\n\nNodeContainer.prototype.parseBackgroundPosition = function(bounds, image, index, backgroundSize) {\n    var position = this.cssList('backgroundPosition', index);\n    var left, top;\n\n    if (isPercentage(position[0])){\n        left = (bounds.width - (backgroundSize || image).width) * (parseFloat(position[0]) / 100);\n    } else {\n        left = parseInt(position[0], 10);\n    }\n\n    if (position[1] === 'auto') {\n        top = left / image.width * image.height;\n    } else if (isPercentage(position[1])){\n        top =  (bounds.height - (backgroundSize || image).height) * parseFloat(position[1]) / 100;\n    } else {\n        top = parseInt(position[1], 10);\n    }\n\n    if (position[0] === 'auto') {\n        left = top / image.height * image.width;\n    }\n\n    return {left: left, top: top};\n};\n\nNodeContainer.prototype.parseBackgroundRepeat = function(index) {\n    return this.cssList(\"backgroundRepeat\", index)[0];\n};\n\nNodeContainer.prototype.parseTextShadows = function() {\n    var textShadow = this.css(\"textShadow\");\n    var results = [];\n\n    if (textShadow && textShadow !== 'none') {\n        var shadows = textShadow.match(this.TEXT_SHADOW_PROPERTY);\n        for (var i = 0; shadows && (i < shadows.length); i++) {\n            var s = shadows[i].match(this.TEXT_SHADOW_VALUES);\n            results.push({\n                color: new Color(s[0]),\n                offsetX: s[1] ? parseFloat(s[1].replace('px', '')) : 0,\n                offsetY: s[2] ? parseFloat(s[2].replace('px', '')) : 0,\n                blur: s[3] ? s[3].replace('px', '') : 0\n            });\n        }\n    }\n    return results;\n};\n\nNodeContainer.prototype.parseTransform = function() {\n    if (!this.transformData) {\n        if (this.hasTransform()) {\n            var offset = this.parseBounds();\n            var origin = this.prefixedCss(\"transformOrigin\").split(\" \").map(removePx).map(asFloat);\n            origin[0] += offset.left;\n            origin[1] += offset.top;\n            this.transformData = {\n                origin: origin,\n                matrix: this.parseTransformMatrix()\n            };\n        } else {\n            this.transformData = {\n                origin: [0, 0],\n                matrix: [1, 0, 0, 1, 0, 0]\n            };\n        }\n    }\n    return this.transformData;\n};\n\nNodeContainer.prototype.parseTransformMatrix = function() {\n    if (!this.transformMatrix) {\n        var transform = this.prefixedCss(\"transform\");\n        var matrix = transform ? parseMatrix(transform.match(this.MATRIX_PROPERTY)) : null;\n        this.transformMatrix = matrix ? matrix : [1, 0, 0, 1, 0, 0];\n    }\n    return this.transformMatrix;\n};\n\nNodeContainer.prototype.parseBounds = function() {\n    return this.bounds || (this.bounds = this.hasTransform() ? offsetBounds(this.node) : getBounds(this.node));\n};\n\nNodeContainer.prototype.hasTransform = function() {\n    return this.parseTransformMatrix().join(\",\") !== \"1,0,0,1,0,0\" || (this.parent && this.parent.hasTransform());\n};\n\nNodeContainer.prototype.getValue = function() {\n    var value = this.node.value || \"\";\n    if (this.node.tagName === \"SELECT\") {\n        value = selectionValue(this.node);\n    } else if (this.node.type === \"password\") {\n        value = Array(value.length + 1).join('\\u2022'); // jshint ignore:line\n    }\n    return value.length === 0 ? (this.node.placeholder || \"\") : value;\n};\n\nNodeContainer.prototype.MATRIX_PROPERTY = /(matrix|matrix3d)\\((.+)\\)/;\nNodeContainer.prototype.TEXT_SHADOW_PROPERTY = /((rgba|rgb)\\([^\\)]+\\)(\\s-?\\d+px){0,})/g;\nNodeContainer.prototype.TEXT_SHADOW_VALUES = /(-?\\d+px)|(#.+)|(rgb\\(.+\\))|(rgba\\(.+\\))/g;\nNodeContainer.prototype.CLIP = /^rect\\((\\d+)px,? (\\d+)px,? (\\d+)px,? (\\d+)px\\)$/;\n\nfunction selectionValue(node) {\n    var option = node.options[node.selectedIndex || 0];\n    return option ? (option.text || \"\") : \"\";\n}\n\nfunction parseMatrix(match) {\n    if (match && match[1] === \"matrix\") {\n        return match[2].split(\",\").map(function(s) {\n            return parseFloat(s.trim());\n        });\n    } else if (match && match[1] === \"matrix3d\") {\n        var matrix3d = match[2].split(\",\").map(function(s) {\n          return parseFloat(s.trim());\n        });\n        return [matrix3d[0], matrix3d[1], matrix3d[4], matrix3d[5], matrix3d[12], matrix3d[13]];\n    }\n}\n\nfunction isPercentage(value) {\n    return value.toString().indexOf(\"%\") !== -1;\n}\n\nfunction removePx(str) {\n    return str.replace(\"px\", \"\");\n}\n\nfunction asFloat(str) {\n    return parseFloat(str);\n}\n\nmodule.exports = NodeContainer;\n\n},{\"./color\":3,\"./utils\":26}],15:[function(_dereq_,module,exports){\nvar log = _dereq_('./log');\nvar punycode = _dereq_('punycode');\nvar NodeContainer = _dereq_('./nodecontainer');\nvar TextContainer = _dereq_('./textcontainer');\nvar PseudoElementContainer = _dereq_('./pseudoelementcontainer');\nvar FontMetrics = _dereq_('./fontmetrics');\nvar Color = _dereq_('./color');\nvar StackingContext = _dereq_('./stackingcontext');\nvar utils = _dereq_('./utils');\nvar bind = utils.bind;\nvar getBounds = utils.getBounds;\nvar parseBackgrounds = utils.parseBackgrounds;\nvar offsetBounds = utils.offsetBounds;\n\nfunction NodeParser(element, renderer, support, imageLoader, options) {\n    log(\"Starting NodeParser\");\n    this.renderer = renderer;\n    this.options = options;\n    this.range = null;\n    this.support = support;\n    this.renderQueue = [];\n    this.stack = new StackingContext(true, 1, element.ownerDocument, null);\n    var parent = new NodeContainer(element, null);\n    if (options.background) {\n        renderer.rectangle(0, 0, renderer.width, renderer.height, new Color(options.background));\n    }\n    if (element === element.ownerDocument.documentElement) {\n        // http://www.w3.org/TR/css3-background/#special-backgrounds\n        var canvasBackground = new NodeContainer(parent.color('backgroundColor').isTransparent() ? element.ownerDocument.body : element.ownerDocument.documentElement, null);\n        renderer.rectangle(0, 0, renderer.width, renderer.height, canvasBackground.color('backgroundColor'));\n    }\n    parent.visibile = parent.isElementVisible();\n    this.createPseudoHideStyles(element.ownerDocument);\n    this.disableAnimations(element.ownerDocument);\n    this.nodes = flatten([parent].concat(this.getChildren(parent)).filter(function(container) {\n        return container.visible = container.isElementVisible();\n    }).map(this.getPseudoElements, this));\n    this.fontMetrics = new FontMetrics();\n    log(\"Fetched nodes, total:\", this.nodes.length);\n    log(\"Calculate overflow clips\");\n    this.calculateOverflowClips();\n    log(\"Start fetching images\");\n    this.images = imageLoader.fetch(this.nodes.filter(isElement));\n    this.ready = this.images.ready.then(bind(function() {\n        log(\"Images loaded, starting parsing\");\n        log(\"Creating stacking contexts\");\n        this.createStackingContexts();\n        log(\"Sorting stacking contexts\");\n        this.sortStackingContexts(this.stack);\n        this.parse(this.stack);\n        log(\"Render queue created with \" + this.renderQueue.length + \" items\");\n        return new Promise(bind(function(resolve) {\n            if (!options.async) {\n                this.renderQueue.forEach(this.paint, this);\n                resolve();\n            } else if (typeof(options.async) === \"function\") {\n                options.async.call(this, this.renderQueue, resolve);\n            } else if (this.renderQueue.length > 0){\n                this.renderIndex = 0;\n                this.asyncRenderer(this.renderQueue, resolve);\n            } else {\n                resolve();\n            }\n        }, this));\n    }, this));\n}\n\nNodeParser.prototype.calculateOverflowClips = function() {\n    this.nodes.forEach(function(container) {\n        if (isElement(container)) {\n            if (isPseudoElement(container)) {\n                container.appendToDOM();\n            }\n            container.borders = this.parseBorders(container);\n            var clip = (container.css('overflow') === \"hidden\") ? [container.borders.clip] : [];\n            var cssClip = container.parseClip();\n            if (cssClip && [\"absolute\", \"fixed\"].indexOf(container.css('position')) !== -1) {\n                clip.push([[\"rect\",\n                        container.bounds.left + cssClip.left,\n                        container.bounds.top + cssClip.top,\n                        cssClip.right - cssClip.left,\n                        cssClip.bottom - cssClip.top\n                ]]);\n            }\n            container.clip = hasParentClip(container) ? container.parent.clip.concat(clip) : clip;\n            container.backgroundClip = (container.css('overflow') !== \"hidden\") ? container.clip.concat([container.borders.clip]) : container.clip;\n            if (isPseudoElement(container)) {\n                container.cleanDOM();\n            }\n        } else if (isTextNode(container)) {\n            container.clip = hasParentClip(container) ? container.parent.clip : [];\n        }\n        if (!isPseudoElement(container)) {\n            container.bounds = null;\n        }\n    }, this);\n};\n\nfunction hasParentClip(container) {\n    return container.parent && container.parent.clip.length;\n}\n\nNodeParser.prototype.asyncRenderer = function(queue, resolve, asyncTimer) {\n    asyncTimer = asyncTimer || Date.now();\n    this.paint(queue[this.renderIndex++]);\n    if (queue.length === this.renderIndex) {\n        resolve();\n    } else if (asyncTimer + 20 > Date.now()) {\n        this.asyncRenderer(queue, resolve, asyncTimer);\n    } else {\n        setTimeout(bind(function() {\n            this.asyncRenderer(queue, resolve);\n        }, this), 0);\n    }\n};\n\nNodeParser.prototype.createPseudoHideStyles = function(document) {\n    this.createStyles(document, '.' + PseudoElementContainer.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE + ':before { content: \"\" !important; display: none !important; }' +\n        '.' + PseudoElementContainer.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER + ':after { content: \"\" !important; display: none !important; }');\n};\n\nNodeParser.prototype.disableAnimations = function(document) {\n    this.createStyles(document, '* { -webkit-animation: none !important; -moz-animation: none !important; -o-animation: none !important; animation: none !important; ' +\n        '-webkit-transition: none !important; -moz-transition: none !important; -o-transition: none !important; transition: none !important;}');\n};\n\nNodeParser.prototype.createStyles = function(document, styles) {\n    var hidePseudoElements = document.createElement('style');\n    hidePseudoElements.innerHTML = styles;\n    document.body.appendChild(hidePseudoElements);\n};\n\nNodeParser.prototype.getPseudoElements = function(container) {\n    var nodes = [[container]];\n    if (container.node.nodeType === Node.ELEMENT_NODE) {\n        var before = this.getPseudoElement(container, \":before\");\n        var after = this.getPseudoElement(container, \":after\");\n\n        if (before) {\n            nodes.push(before);\n        }\n\n        if (after) {\n            nodes.push(after);\n        }\n    }\n    return flatten(nodes);\n};\n\nfunction toCamelCase(str) {\n    return str.replace(/(\\-[a-z])/g, function(match){\n        return match.toUpperCase().replace('-','');\n    });\n}\n\nNodeParser.prototype.getPseudoElement = function(container, type) {\n    var style = container.computedStyle(type);\n    if(!style || !style.content || style.content === \"none\" || style.content === \"-moz-alt-content\" || style.display === \"none\") {\n        return null;\n    }\n\n    var content = stripQuotes(style.content);\n    var isImage = content.substr(0, 3) === 'url';\n    var pseudoNode = document.createElement(isImage ? 'img' : 'html2canvaspseudoelement');\n    var pseudoContainer = new PseudoElementContainer(pseudoNode, container, type);\n\n    for (var i = style.length-1; i >= 0; i--) {\n        var property = toCamelCase(style.item(i));\n        pseudoNode.style[property] = style[property];\n    }\n\n    pseudoNode.className = PseudoElementContainer.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE + \" \" + PseudoElementContainer.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER;\n\n    if (isImage) {\n        pseudoNode.src = parseBackgrounds(content)[0].args[0];\n        return [pseudoContainer];\n    } else {\n        var text = document.createTextNode(content);\n        pseudoNode.appendChild(text);\n        return [pseudoContainer, new TextContainer(text, pseudoContainer)];\n    }\n};\n\n\nNodeParser.prototype.getChildren = function(parentContainer) {\n    return flatten([].filter.call(parentContainer.node.childNodes, renderableNode).map(function(node) {\n        var container = [node.nodeType === Node.TEXT_NODE ? new TextContainer(node, parentContainer) : new NodeContainer(node, parentContainer)].filter(nonIgnoredElement);\n        return node.nodeType === Node.ELEMENT_NODE && container.length && node.tagName !== \"TEXTAREA\" ? (container[0].isElementVisible() ? container.concat(this.getChildren(container[0])) : []) : container;\n    }, this));\n};\n\nNodeParser.prototype.newStackingContext = function(container, hasOwnStacking) {\n    var stack = new StackingContext(hasOwnStacking, container.getOpacity(), container.node, container.parent);\n    container.cloneTo(stack);\n    var parentStack = hasOwnStacking ? stack.getParentStack(this) : stack.parent.stack;\n    parentStack.contexts.push(stack);\n    container.stack = stack;\n};\n\nNodeParser.prototype.createStackingContexts = function() {\n    this.nodes.forEach(function(container) {\n        if (isElement(container) && (this.isRootElement(container) || hasOpacity(container) || isPositionedForStacking(container) || this.isBodyWithTransparentRoot(container) || container.hasTransform())) {\n            this.newStackingContext(container, true);\n        } else if (isElement(container) && ((isPositioned(container) && zIndex0(container)) || isInlineBlock(container) || isFloating(container))) {\n            this.newStackingContext(container, false);\n        } else {\n            container.assignStack(container.parent.stack);\n        }\n    }, this);\n};\n\nNodeParser.prototype.isBodyWithTransparentRoot = function(container) {\n    return container.node.nodeName === \"BODY\" && container.parent.color('backgroundColor').isTransparent();\n};\n\nNodeParser.prototype.isRootElement = function(container) {\n    return container.parent === null;\n};\n\nNodeParser.prototype.sortStackingContexts = function(stack) {\n    stack.contexts.sort(zIndexSort(stack.contexts.slice(0)));\n    stack.contexts.forEach(this.sortStackingContexts, this);\n};\n\nNodeParser.prototype.parseTextBounds = function(container) {\n    return function(text, index, textList) {\n        if (container.parent.css(\"textDecoration\").substr(0, 4) !== \"none\" || text.trim().length !== 0) {\n            if (this.support.rangeBounds && !container.parent.hasTransform()) {\n                var offset = textList.slice(0, index).join(\"\").length;\n                return this.getRangeBounds(container.node, offset, text.length);\n            } else if (container.node && typeof(container.node.data) === \"string\") {\n                var replacementNode = container.node.splitText(text.length);\n                var bounds = this.getWrapperBounds(container.node, container.parent.hasTransform());\n                container.node = replacementNode;\n                return bounds;\n            }\n        } else if(!this.support.rangeBounds || container.parent.hasTransform()){\n            container.node = container.node.splitText(text.length);\n        }\n        return {};\n    };\n};\n\nNodeParser.prototype.getWrapperBounds = function(node, transform) {\n    var wrapper = node.ownerDocument.createElement('html2canvaswrapper');\n    var parent = node.parentNode,\n        backupText = node.cloneNode(true);\n\n    wrapper.appendChild(node.cloneNode(true));\n    parent.replaceChild(wrapper, node);\n    var bounds = transform ? offsetBounds(wrapper) : getBounds(wrapper);\n    parent.replaceChild(backupText, wrapper);\n    return bounds;\n};\n\nNodeParser.prototype.getRangeBounds = function(node, offset, length) {\n    var range = this.range || (this.range = node.ownerDocument.createRange());\n    range.setStart(node, offset);\n    range.setEnd(node, offset + length);\n    return range.getBoundingClientRect();\n};\n\nfunction ClearTransform() {}\n\nNodeParser.prototype.parse = function(stack) {\n    // http://www.w3.org/TR/CSS21/visuren.html#z-index\n    var negativeZindex = stack.contexts.filter(negativeZIndex); // 2. the child stacking contexts with negative stack levels (most negative first).\n    var descendantElements = stack.children.filter(isElement);\n    var descendantNonFloats = descendantElements.filter(not(isFloating));\n    var nonInlineNonPositionedDescendants = descendantNonFloats.filter(not(isPositioned)).filter(not(inlineLevel)); // 3 the in-flow, non-inline-level, non-positioned descendants.\n    var nonPositionedFloats = descendantElements.filter(not(isPositioned)).filter(isFloating); // 4. the non-positioned floats.\n    var inFlow = descendantNonFloats.filter(not(isPositioned)).filter(inlineLevel); // 5. the in-flow, inline-level, non-positioned descendants, including inline tables and inline blocks.\n    var stackLevel0 = stack.contexts.concat(descendantNonFloats.filter(isPositioned)).filter(zIndex0); // 6. the child stacking contexts with stack level 0 and the positioned descendants with stack level 0.\n    var text = stack.children.filter(isTextNode).filter(hasText);\n    var positiveZindex = stack.contexts.filter(positiveZIndex); // 7. the child stacking contexts with positive stack levels (least positive first).\n    negativeZindex.concat(nonInlineNonPositionedDescendants).concat(nonPositionedFloats)\n        .concat(inFlow).concat(stackLevel0).concat(text).concat(positiveZindex).forEach(function(container) {\n            this.renderQueue.push(container);\n            if (isStackingContext(container)) {\n                this.parse(container);\n                this.renderQueue.push(new ClearTransform());\n            }\n        }, this);\n};\n\nNodeParser.prototype.paint = function(container) {\n    try {\n        if (container instanceof ClearTransform) {\n            this.renderer.ctx.restore();\n        } else if (isTextNode(container)) {\n            if (isPseudoElement(container.parent)) {\n                container.parent.appendToDOM();\n            }\n            this.paintText(container);\n            if (isPseudoElement(container.parent)) {\n                container.parent.cleanDOM();\n            }\n        } else {\n            this.paintNode(container);\n        }\n    } catch(e) {\n        log(e);\n        if (this.options.strict) {\n            throw e;\n        }\n    }\n};\n\nNodeParser.prototype.paintNode = function(container) {\n    if (isStackingContext(container)) {\n        this.renderer.setOpacity(container.opacity);\n        this.renderer.ctx.save();\n        if (container.hasTransform()) {\n            this.renderer.setTransform(container.parseTransform());\n        }\n    }\n\n    if (container.node.nodeName === \"INPUT\" && container.node.type === \"checkbox\") {\n        this.paintCheckbox(container);\n    } else if (container.node.nodeName === \"INPUT\" && container.node.type === \"radio\") {\n        this.paintRadio(container);\n    } else {\n        this.paintElement(container);\n    }\n};\n\nNodeParser.prototype.paintElement = function(container) {\n    var bounds = container.parseBounds();\n    this.renderer.clip(container.backgroundClip, function() {\n        this.renderer.renderBackground(container, bounds, container.borders.borders.map(getWidth));\n    }, this);\n\n    this.renderer.clip(container.clip, function() {\n        this.renderer.renderBorders(container.borders.borders);\n    }, this);\n\n    this.renderer.clip(container.backgroundClip, function() {\n        switch (container.node.nodeName) {\n        case \"svg\":\n        case \"IFRAME\":\n            var imgContainer = this.images.get(container.node);\n            if (imgContainer) {\n                this.renderer.renderImage(container, bounds, container.borders, imgContainer);\n            } else {\n                log(\"Error loading <\" + container.node.nodeName + \">\", container.node);\n            }\n            break;\n        case \"IMG\":\n            var imageContainer = this.images.get(container.node.src);\n            if (imageContainer) {\n                this.renderer.renderImage(container, bounds, container.borders, imageContainer);\n            } else {\n                log(\"Error loading <img>\", container.node.src);\n            }\n            break;\n        case \"CANVAS\":\n            this.renderer.renderImage(container, bounds, container.borders, {image: container.node});\n            break;\n        case \"SELECT\":\n        case \"INPUT\":\n        case \"TEXTAREA\":\n            this.paintFormValue(container);\n            break;\n        }\n    }, this);\n};\n\nNodeParser.prototype.paintCheckbox = function(container) {\n    var b = container.parseBounds();\n\n    var size = Math.min(b.width, b.height);\n    var bounds = {width: size - 1, height: size - 1, top: b.top, left: b.left};\n    var r = [3, 3];\n    var radius = [r, r, r, r];\n    var borders = [1,1,1,1].map(function(w) {\n        return {color: new Color('#A5A5A5'), width: w};\n    });\n\n    var borderPoints = calculateCurvePoints(bounds, radius, borders);\n\n    this.renderer.clip(container.backgroundClip, function() {\n        this.renderer.rectangle(bounds.left + 1, bounds.top + 1, bounds.width - 2, bounds.height - 2, new Color(\"#DEDEDE\"));\n        this.renderer.renderBorders(calculateBorders(borders, bounds, borderPoints, radius));\n        if (container.node.checked) {\n            this.renderer.font(new Color('#424242'), 'normal', 'normal', 'bold', (size - 3) + \"px\", 'arial');\n            this.renderer.text(\"\\u2714\", bounds.left + size / 6, bounds.top + size - 1);\n        }\n    }, this);\n};\n\nNodeParser.prototype.paintRadio = function(container) {\n    var bounds = container.parseBounds();\n\n    var size = Math.min(bounds.width, bounds.height) - 2;\n\n    this.renderer.clip(container.backgroundClip, function() {\n        this.renderer.circleStroke(bounds.left + 1, bounds.top + 1, size, new Color('#DEDEDE'), 1, new Color('#A5A5A5'));\n        if (container.node.checked) {\n            this.renderer.circle(Math.ceil(bounds.left + size / 4) + 1, Math.ceil(bounds.top + size / 4) + 1, Math.floor(size / 2), new Color('#424242'));\n        }\n    }, this);\n};\n\nNodeParser.prototype.paintFormValue = function(container) {\n    var value = container.getValue();\n    if (value.length > 0) {\n        var document = container.node.ownerDocument;\n        var wrapper = document.createElement('html2canvaswrapper');\n        var properties = ['lineHeight', 'textAlign', 'fontFamily', 'fontWeight', 'fontSize', 'color',\n            'paddingLeft', 'paddingTop', 'paddingRight', 'paddingBottom',\n            'width', 'height', 'borderLeftStyle', 'borderTopStyle', 'borderLeftWidth', 'borderTopWidth',\n            'boxSizing', 'whiteSpace', 'wordWrap'];\n\n        properties.forEach(function(property) {\n            try {\n                wrapper.style[property] = container.css(property);\n            } catch(e) {\n                // Older IE has issues with \"border\"\n                log(\"html2canvas: Parse: Exception caught in renderFormValue: \" + e.message);\n            }\n        });\n        var bounds = container.parseBounds();\n        wrapper.style.position = \"fixed\";\n        wrapper.style.left = bounds.left + \"px\";\n        wrapper.style.top = bounds.top + \"px\";\n        wrapper.textContent = value;\n        document.body.appendChild(wrapper);\n        this.paintText(new TextContainer(wrapper.firstChild, container));\n        document.body.removeChild(wrapper);\n    }\n};\n\nNodeParser.prototype.paintText = function(container) {\n    container.applyTextTransform();\n    var characters = punycode.ucs2.decode(container.node.data);\n    var textList = (!this.options.letterRendering || noLetterSpacing(container)) && !hasUnicode(container.node.data) ? getWords(characters) : characters.map(function(character) {\n        return punycode.ucs2.encode([character]);\n    });\n\n    var weight = container.parent.fontWeight();\n    var size = container.parent.css('fontSize');\n    var family = container.parent.css('fontFamily');\n    var shadows = container.parent.parseTextShadows();\n\n    this.renderer.font(container.parent.color('color'), container.parent.css('fontStyle'), container.parent.css('fontVariant'), weight, size, family);\n    if (shadows.length) {\n        // TODO: support multiple text shadows\n        this.renderer.fontShadow(shadows[0].color, shadows[0].offsetX, shadows[0].offsetY, shadows[0].blur);\n    } else {\n        this.renderer.clearShadow();\n    }\n\n    this.renderer.clip(container.parent.clip, function() {\n        textList.map(this.parseTextBounds(container), this).forEach(function(bounds, index) {\n            if (bounds) {\n                this.renderer.text(textList[index], bounds.left, bounds.bottom);\n                this.renderTextDecoration(container.parent, bounds, this.fontMetrics.getMetrics(family, size));\n            }\n        }, this);\n    }, this);\n};\n\nNodeParser.prototype.renderTextDecoration = function(container, bounds, metrics) {\n    switch(container.css(\"textDecoration\").split(\" \")[0]) {\n    case \"underline\":\n        // Draws a line at the baseline of the font\n        // TODO As some browsers display the line as more than 1px if the font-size is big, need to take that into account both in position and size\n        this.renderer.rectangle(bounds.left, Math.round(bounds.top + metrics.baseline + metrics.lineWidth), bounds.width, 1, container.color(\"color\"));\n        break;\n    case \"overline\":\n        this.renderer.rectangle(bounds.left, Math.round(bounds.top), bounds.width, 1, container.color(\"color\"));\n        break;\n    case \"line-through\":\n        // TODO try and find exact position for line-through\n        this.renderer.rectangle(bounds.left, Math.ceil(bounds.top + metrics.middle + metrics.lineWidth), bounds.width, 1, container.color(\"color\"));\n        break;\n    }\n};\n\nvar borderColorTransforms = {\n    inset: [\n        [\"darken\", 0.60],\n        [\"darken\", 0.10],\n        [\"darken\", 0.10],\n        [\"darken\", 0.60]\n    ]\n};\n\nNodeParser.prototype.parseBorders = function(container) {\n    var nodeBounds = container.parseBounds();\n    var radius = getBorderRadiusData(container);\n    var borders = [\"Top\", \"Right\", \"Bottom\", \"Left\"].map(function(side, index) {\n        var style = container.css('border' + side + 'Style');\n        var color = container.color('border' + side + 'Color');\n        if (style === \"inset\" && color.isBlack()) {\n            color = new Color([255, 255, 255, color.a]); // this is wrong, but\n        }\n        var colorTransform = borderColorTransforms[style] ? borderColorTransforms[style][index] : null;\n        return {\n            width: container.cssInt('border' + side + 'Width'),\n            color: colorTransform ? color[colorTransform[0]](colorTransform[1]) : color,\n            args: null\n        };\n    });\n    var borderPoints = calculateCurvePoints(nodeBounds, radius, borders);\n\n    return {\n        clip: this.parseBackgroundClip(container, borderPoints, borders, radius, nodeBounds),\n        borders: calculateBorders(borders, nodeBounds, borderPoints, radius)\n    };\n};\n\nfunction calculateBorders(borders, nodeBounds, borderPoints, radius) {\n    return borders.map(function(border, borderSide) {\n        if (border.width > 0) {\n            var bx = nodeBounds.left;\n            var by = nodeBounds.top;\n            var bw = nodeBounds.width;\n            var bh = nodeBounds.height - (borders[2].width);\n\n            switch(borderSide) {\n            case 0:\n                // top border\n                bh = borders[0].width;\n                border.args = drawSide({\n                        c1: [bx, by],\n                        c2: [bx + bw, by],\n                        c3: [bx + bw - borders[1].width, by + bh],\n                        c4: [bx + borders[3].width, by + bh]\n                    }, radius[0], radius[1],\n                    borderPoints.topLeftOuter, borderPoints.topLeftInner, borderPoints.topRightOuter, borderPoints.topRightInner);\n                break;\n            case 1:\n                // right border\n                bx = nodeBounds.left + nodeBounds.width - (borders[1].width);\n                bw = borders[1].width;\n\n                border.args = drawSide({\n                        c1: [bx + bw, by],\n                        c2: [bx + bw, by + bh + borders[2].width],\n                        c3: [bx, by + bh],\n                        c4: [bx, by + borders[0].width]\n                    }, radius[1], radius[2],\n                    borderPoints.topRightOuter, borderPoints.topRightInner, borderPoints.bottomRightOuter, borderPoints.bottomRightInner);\n                break;\n            case 2:\n                // bottom border\n                by = (by + nodeBounds.height) - (borders[2].width);\n                bh = borders[2].width;\n                border.args = drawSide({\n                        c1: [bx + bw, by + bh],\n                        c2: [bx, by + bh],\n                        c3: [bx + borders[3].width, by],\n                        c4: [bx + bw - borders[3].width, by]\n                    }, radius[2], radius[3],\n                    borderPoints.bottomRightOuter, borderPoints.bottomRightInner, borderPoints.bottomLeftOuter, borderPoints.bottomLeftInner);\n                break;\n            case 3:\n                // left border\n                bw = borders[3].width;\n                border.args = drawSide({\n                        c1: [bx, by + bh + borders[2].width],\n                        c2: [bx, by],\n                        c3: [bx + bw, by + borders[0].width],\n                        c4: [bx + bw, by + bh]\n                    }, radius[3], radius[0],\n                    borderPoints.bottomLeftOuter, borderPoints.bottomLeftInner, borderPoints.topLeftOuter, borderPoints.topLeftInner);\n                break;\n            }\n        }\n        return border;\n    });\n}\n\nNodeParser.prototype.parseBackgroundClip = function(container, borderPoints, borders, radius, bounds) {\n    var backgroundClip = container.css('backgroundClip'),\n        borderArgs = [];\n\n    switch(backgroundClip) {\n    case \"content-box\":\n    case \"padding-box\":\n        parseCorner(borderArgs, radius[0], radius[1], borderPoints.topLeftInner, borderPoints.topRightInner, bounds.left + borders[3].width, bounds.top + borders[0].width);\n        parseCorner(borderArgs, radius[1], radius[2], borderPoints.topRightInner, borderPoints.bottomRightInner, bounds.left + bounds.width - borders[1].width, bounds.top + borders[0].width);\n        parseCorner(borderArgs, radius[2], radius[3], borderPoints.bottomRightInner, borderPoints.bottomLeftInner, bounds.left + bounds.width - borders[1].width, bounds.top + bounds.height - borders[2].width);\n        parseCorner(borderArgs, radius[3], radius[0], borderPoints.bottomLeftInner, borderPoints.topLeftInner, bounds.left + borders[3].width, bounds.top + bounds.height - borders[2].width);\n        break;\n\n    default:\n        parseCorner(borderArgs, radius[0], radius[1], borderPoints.topLeftOuter, borderPoints.topRightOuter, bounds.left, bounds.top);\n        parseCorner(borderArgs, radius[1], radius[2], borderPoints.topRightOuter, borderPoints.bottomRightOuter, bounds.left + bounds.width, bounds.top);\n        parseCorner(borderArgs, radius[2], radius[3], borderPoints.bottomRightOuter, borderPoints.bottomLeftOuter, bounds.left + bounds.width, bounds.top + bounds.height);\n        parseCorner(borderArgs, radius[3], radius[0], borderPoints.bottomLeftOuter, borderPoints.topLeftOuter, bounds.left, bounds.top + bounds.height);\n        break;\n    }\n\n    return borderArgs;\n};\n\nfunction getCurvePoints(x, y, r1, r2) {\n    var kappa = 4 * ((Math.sqrt(2) - 1) / 3);\n    var ox = (r1) * kappa, // control point offset horizontal\n        oy = (r2) * kappa, // control point offset vertical\n        xm = x + r1, // x-middle\n        ym = y + r2; // y-middle\n    return {\n        topLeft: bezierCurve({x: x, y: ym}, {x: x, y: ym - oy}, {x: xm - ox, y: y}, {x: xm, y: y}),\n        topRight: bezierCurve({x: x, y: y}, {x: x + ox,y: y}, {x: xm, y: ym - oy}, {x: xm, y: ym}),\n        bottomRight: bezierCurve({x: xm, y: y}, {x: xm, y: y + oy}, {x: x + ox, y: ym}, {x: x, y: ym}),\n        bottomLeft: bezierCurve({x: xm, y: ym}, {x: xm - ox, y: ym}, {x: x, y: y + oy}, {x: x, y:y})\n    };\n}\n\nfunction calculateCurvePoints(bounds, borderRadius, borders) {\n    var x = bounds.left,\n        y = bounds.top,\n        width = bounds.width,\n        height = bounds.height,\n\n        tlh = borderRadius[0][0] < width / 2 ? borderRadius[0][0] : width / 2,\n        tlv = borderRadius[0][1] < height / 2 ? borderRadius[0][1] : height / 2,\n        trh = borderRadius[1][0] < width / 2 ? borderRadius[1][0] : width / 2,\n        trv = borderRadius[1][1] < height / 2 ? borderRadius[1][1] : height / 2,\n        brh = borderRadius[2][0] < width / 2 ? borderRadius[2][0] : width / 2,\n        brv = borderRadius[2][1] < height / 2 ? borderRadius[2][1] : height / 2,\n        blh = borderRadius[3][0] < width / 2 ? borderRadius[3][0] : width / 2,\n        blv = borderRadius[3][1] < height / 2 ? borderRadius[3][1] : height / 2;\n\n    var topWidth = width - trh,\n        rightHeight = height - brv,\n        bottomWidth = width - brh,\n        leftHeight = height - blv;\n\n    return {\n        topLeftOuter: getCurvePoints(x, y, tlh, tlv).topLeft.subdivide(0.5),\n        topLeftInner: getCurvePoints(x + borders[3].width, y + borders[0].width, Math.max(0, tlh - borders[3].width), Math.max(0, tlv - borders[0].width)).topLeft.subdivide(0.5),\n        topRightOuter: getCurvePoints(x + topWidth, y, trh, trv).topRight.subdivide(0.5),\n        topRightInner: getCurvePoints(x + Math.min(topWidth, width + borders[3].width), y + borders[0].width, (topWidth > width + borders[3].width) ? 0 :trh - borders[3].width, trv - borders[0].width).topRight.subdivide(0.5),\n        bottomRightOuter: getCurvePoints(x + bottomWidth, y + rightHeight, brh, brv).bottomRight.subdivide(0.5),\n        bottomRightInner: getCurvePoints(x + Math.min(bottomWidth, width - borders[3].width), y + Math.min(rightHeight, height + borders[0].width), Math.max(0, brh - borders[1].width),  brv - borders[2].width).bottomRight.subdivide(0.5),\n        bottomLeftOuter: getCurvePoints(x, y + leftHeight, blh, blv).bottomLeft.subdivide(0.5),\n        bottomLeftInner: getCurvePoints(x + borders[3].width, y + leftHeight, Math.max(0, blh - borders[3].width), blv - borders[2].width).bottomLeft.subdivide(0.5)\n    };\n}\n\nfunction bezierCurve(start, startControl, endControl, end) {\n    var lerp = function (a, b, t) {\n        return {\n            x: a.x + (b.x - a.x) * t,\n            y: a.y + (b.y - a.y) * t\n        };\n    };\n\n    return {\n        start: start,\n        startControl: startControl,\n        endControl: endControl,\n        end: end,\n        subdivide: function(t) {\n            var ab = lerp(start, startControl, t),\n                bc = lerp(startControl, endControl, t),\n                cd = lerp(endControl, end, t),\n                abbc = lerp(ab, bc, t),\n                bccd = lerp(bc, cd, t),\n                dest = lerp(abbc, bccd, t);\n            return [bezierCurve(start, ab, abbc, dest), bezierCurve(dest, bccd, cd, end)];\n        },\n        curveTo: function(borderArgs) {\n            borderArgs.push([\"bezierCurve\", startControl.x, startControl.y, endControl.x, endControl.y, end.x, end.y]);\n        },\n        curveToReversed: function(borderArgs) {\n            borderArgs.push([\"bezierCurve\", endControl.x, endControl.y, startControl.x, startControl.y, start.x, start.y]);\n        }\n    };\n}\n\nfunction drawSide(borderData, radius1, radius2, outer1, inner1, outer2, inner2) {\n    var borderArgs = [];\n\n    if (radius1[0] > 0 || radius1[1] > 0) {\n        borderArgs.push([\"line\", outer1[1].start.x, outer1[1].start.y]);\n        outer1[1].curveTo(borderArgs);\n    } else {\n        borderArgs.push([ \"line\", borderData.c1[0], borderData.c1[1]]);\n    }\n\n    if (radius2[0] > 0 || radius2[1] > 0) {\n        borderArgs.push([\"line\", outer2[0].start.x, outer2[0].start.y]);\n        outer2[0].curveTo(borderArgs);\n        borderArgs.push([\"line\", inner2[0].end.x, inner2[0].end.y]);\n        inner2[0].curveToReversed(borderArgs);\n    } else {\n        borderArgs.push([\"line\", borderData.c2[0], borderData.c2[1]]);\n        borderArgs.push([\"line\", borderData.c3[0], borderData.c3[1]]);\n    }\n\n    if (radius1[0] > 0 || radius1[1] > 0) {\n        borderArgs.push([\"line\", inner1[1].end.x, inner1[1].end.y]);\n        inner1[1].curveToReversed(borderArgs);\n    } else {\n        borderArgs.push([\"line\", borderData.c4[0], borderData.c4[1]]);\n    }\n\n    return borderArgs;\n}\n\nfunction parseCorner(borderArgs, radius1, radius2, corner1, corner2, x, y) {\n    if (radius1[0] > 0 || radius1[1] > 0) {\n        borderArgs.push([\"line\", corner1[0].start.x, corner1[0].start.y]);\n        corner1[0].curveTo(borderArgs);\n        corner1[1].curveTo(borderArgs);\n    } else {\n        borderArgs.push([\"line\", x, y]);\n    }\n\n    if (radius2[0] > 0 || radius2[1] > 0) {\n        borderArgs.push([\"line\", corner2[0].start.x, corner2[0].start.y]);\n    }\n}\n\nfunction negativeZIndex(container) {\n    return container.cssInt(\"zIndex\") < 0;\n}\n\nfunction positiveZIndex(container) {\n    return container.cssInt(\"zIndex\") > 0;\n}\n\nfunction zIndex0(container) {\n    return container.cssInt(\"zIndex\") === 0;\n}\n\nfunction inlineLevel(container) {\n    return [\"inline\", \"inline-block\", \"inline-table\"].indexOf(container.css(\"display\")) !== -1;\n}\n\nfunction isStackingContext(container) {\n    return (container instanceof StackingContext);\n}\n\nfunction hasText(container) {\n    return container.node.data.trim().length > 0;\n}\n\nfunction noLetterSpacing(container) {\n    return (/^(normal|none|0px)$/.test(container.parent.css(\"letterSpacing\")));\n}\n\nfunction getBorderRadiusData(container) {\n    return [\"TopLeft\", \"TopRight\", \"BottomRight\", \"BottomLeft\"].map(function(side) {\n        var value = container.css('border' + side + 'Radius');\n        var arr = value.split(\" \");\n        if (arr.length <= 1) {\n            arr[1] = arr[0];\n        }\n        return arr.map(asInt);\n    });\n}\n\nfunction renderableNode(node) {\n    return (node.nodeType === Node.TEXT_NODE || node.nodeType === Node.ELEMENT_NODE);\n}\n\nfunction isPositionedForStacking(container) {\n    var position = container.css(\"position\");\n    var zIndex = ([\"absolute\", \"relative\", \"fixed\"].indexOf(position) !== -1) ? container.css(\"zIndex\") : \"auto\";\n    return zIndex !== \"auto\";\n}\n\nfunction isPositioned(container) {\n    return container.css(\"position\") !== \"static\";\n}\n\nfunction isFloating(container) {\n    return container.css(\"float\") !== \"none\";\n}\n\nfunction isInlineBlock(container) {\n    return [\"inline-block\", \"inline-table\"].indexOf(container.css(\"display\")) !== -1;\n}\n\nfunction not(callback) {\n    var context = this;\n    return function() {\n        return !callback.apply(context, arguments);\n    };\n}\n\nfunction isElement(container) {\n    return container.node.nodeType === Node.ELEMENT_NODE;\n}\n\nfunction isPseudoElement(container) {\n    return container.isPseudoElement === true;\n}\n\nfunction isTextNode(container) {\n    return container.node.nodeType === Node.TEXT_NODE;\n}\n\nfunction zIndexSort(contexts) {\n    return function(a, b) {\n        return (a.cssInt(\"zIndex\") + (contexts.indexOf(a) / contexts.length)) - (b.cssInt(\"zIndex\") + (contexts.indexOf(b) / contexts.length));\n    };\n}\n\nfunction hasOpacity(container) {\n    return container.getOpacity() < 1;\n}\n\nfunction asInt(value) {\n    return parseInt(value, 10);\n}\n\nfunction getWidth(border) {\n    return border.width;\n}\n\nfunction nonIgnoredElement(nodeContainer) {\n    return (nodeContainer.node.nodeType !== Node.ELEMENT_NODE || [\"SCRIPT\", \"HEAD\", \"TITLE\", \"OBJECT\", \"BR\", \"OPTION\"].indexOf(nodeContainer.node.nodeName) === -1);\n}\n\nfunction flatten(arrays) {\n    return [].concat.apply([], arrays);\n}\n\nfunction stripQuotes(content) {\n    var first = content.substr(0, 1);\n    return (first === content.substr(content.length - 1) && first.match(/'|\"/)) ? content.substr(1, content.length - 2) : content;\n}\n\nfunction getWords(characters) {\n    var words = [], i = 0, onWordBoundary = false, word;\n    while(characters.length) {\n        if (isWordBoundary(characters[i]) === onWordBoundary) {\n            word = characters.splice(0, i);\n            if (word.length) {\n                words.push(punycode.ucs2.encode(word));\n            }\n            onWordBoundary =! onWordBoundary;\n            i = 0;\n        } else {\n            i++;\n        }\n\n        if (i >= characters.length) {\n            word = characters.splice(0, i);\n            if (word.length) {\n                words.push(punycode.ucs2.encode(word));\n            }\n        }\n    }\n    return words;\n}\n\nfunction isWordBoundary(characterCode) {\n    return [\n        32, // <space>\n        13, // \\r\n        10, // \\n\n        9, // \\t\n        45 // -\n    ].indexOf(characterCode) !== -1;\n}\n\nfunction hasUnicode(string) {\n    return (/[^\\u0000-\\u00ff]/).test(string);\n}\n\nmodule.exports = NodeParser;\n\n},{\"./color\":3,\"./fontmetrics\":7,\"./log\":13,\"./nodecontainer\":14,\"./pseudoelementcontainer\":18,\"./stackingcontext\":21,\"./textcontainer\":25,\"./utils\":26,\"punycode\":1}],16:[function(_dereq_,module,exports){\nvar XHR = _dereq_('./xhr');\nvar utils = _dereq_('./utils');\nvar log = _dereq_('./log');\nvar createWindowClone = _dereq_('./clone');\nvar decode64 = utils.decode64;\n\nfunction Proxy(src, proxyUrl, document) {\n    var supportsCORS = ('withCredentials' in new XMLHttpRequest());\n    if (!proxyUrl) {\n        return Promise.reject(\"No proxy configured\");\n    }\n    var callback = createCallback(supportsCORS);\n    var url = createProxyUrl(proxyUrl, src, callback);\n\n    return supportsCORS ? XHR(url) : (jsonp(document, url, callback).then(function(response) {\n        return decode64(response.content);\n    }));\n}\nvar proxyCount = 0;\n\nfunction ProxyURL(src, proxyUrl, document) {\n    var supportsCORSImage = ('crossOrigin' in new Image());\n    var callback = createCallback(supportsCORSImage);\n    var url = createProxyUrl(proxyUrl, src, callback);\n    return (supportsCORSImage ? Promise.resolve(url) : jsonp(document, url, callback).then(function(response) {\n        return \"data:\" + response.type + \";base64,\" + response.content;\n    }));\n}\n\nfunction jsonp(document, url, callback) {\n    return new Promise(function(resolve, reject) {\n        var s = document.createElement(\"script\");\n        var cleanup = function() {\n            delete window.html2canvas.proxy[callback];\n            document.body.removeChild(s);\n        };\n        window.html2canvas.proxy[callback] = function(response) {\n            cleanup();\n            resolve(response);\n        };\n        s.src = url;\n        s.onerror = function(e) {\n            cleanup();\n            reject(e);\n        };\n        document.body.appendChild(s);\n    });\n}\n\nfunction createCallback(useCORS) {\n    return !useCORS ? \"html2canvas_\" + Date.now() + \"_\" + (++proxyCount) + \"_\" + Math.round(Math.random() * 100000) : \"\";\n}\n\nfunction createProxyUrl(proxyUrl, src, callback) {\n    return proxyUrl + \"?url=\" + encodeURIComponent(src) + (callback.length ? \"&callback=html2canvas.proxy.\" + callback : \"\");\n}\n\nfunction documentFromHTML(src) {\n    return function(html) {\n        var parser = new DOMParser(), doc;\n        try {\n            doc = parser.parseFromString(html, \"text/html\");\n        } catch(e) {\n            log(\"DOMParser not supported, falling back to createHTMLDocument\");\n            doc = document.implementation.createHTMLDocument(\"\");\n            try {\n                doc.open();\n                doc.write(html);\n                doc.close();\n            } catch(ee) {\n                log(\"createHTMLDocument write not supported, falling back to document.body.innerHTML\");\n                doc.body.innerHTML = html; // ie9 doesnt support writing to documentElement\n            }\n        }\n\n        var b = doc.querySelector(\"base\");\n        if (!b || !b.href.host) {\n            var base = doc.createElement(\"base\");\n            base.href = src;\n            doc.head.insertBefore(base, doc.head.firstChild);\n        }\n\n        return doc;\n    };\n}\n\nfunction loadUrlDocument(src, proxy, document, width, height, options) {\n    return new Proxy(src, proxy, window.document).then(documentFromHTML(src)).then(function(doc) {\n        return createWindowClone(doc, document, width, height, options, 0, 0);\n    });\n}\n\nexports.Proxy = Proxy;\nexports.ProxyURL = ProxyURL;\nexports.loadUrlDocument = loadUrlDocument;\n\n},{\"./clone\":2,\"./log\":13,\"./utils\":26,\"./xhr\":28}],17:[function(_dereq_,module,exports){\nvar ProxyURL = _dereq_('./proxy').ProxyURL;\n\nfunction ProxyImageContainer(src, proxy) {\n    var link = document.createElement(\"a\");\n    link.href = src;\n    src = link.href;\n    this.src = src;\n    this.image = new Image();\n    var self = this;\n    this.promise = new Promise(function(resolve, reject) {\n        self.image.crossOrigin = \"Anonymous\";\n        self.image.onload = resolve;\n        self.image.onerror = reject;\n\n        new ProxyURL(src, proxy, document).then(function(url) {\n            self.image.src = url;\n        })['catch'](reject);\n    });\n}\n\nmodule.exports = ProxyImageContainer;\n\n},{\"./proxy\":16}],18:[function(_dereq_,module,exports){\nvar NodeContainer = _dereq_('./nodecontainer');\n\nfunction PseudoElementContainer(node, parent, type) {\n    NodeContainer.call(this, node, parent);\n    this.isPseudoElement = true;\n    this.before = type === \":before\";\n}\n\nPseudoElementContainer.prototype.cloneTo = function(stack) {\n    PseudoElementContainer.prototype.cloneTo.call(this, stack);\n    stack.isPseudoElement = true;\n    stack.before = this.before;\n};\n\nPseudoElementContainer.prototype = Object.create(NodeContainer.prototype);\n\nPseudoElementContainer.prototype.appendToDOM = function() {\n    if (this.before) {\n        this.parent.node.insertBefore(this.node, this.parent.node.firstChild);\n    } else {\n        this.parent.node.appendChild(this.node);\n    }\n    this.parent.node.className += \" \" + this.getHideClass();\n};\n\nPseudoElementContainer.prototype.cleanDOM = function() {\n    this.node.parentNode.removeChild(this.node);\n    this.parent.node.className = this.parent.node.className.replace(this.getHideClass(), \"\");\n};\n\nPseudoElementContainer.prototype.getHideClass = function() {\n    return this[\"PSEUDO_HIDE_ELEMENT_CLASS_\" + (this.before ? \"BEFORE\" : \"AFTER\")];\n};\n\nPseudoElementContainer.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE = \"___html2canvas___pseudoelement_before\";\nPseudoElementContainer.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER = \"___html2canvas___pseudoelement_after\";\n\nmodule.exports = PseudoElementContainer;\n\n},{\"./nodecontainer\":14}],19:[function(_dereq_,module,exports){\nvar log = _dereq_('./log');\n\nfunction Renderer(width, height, images, options, document) {\n    this.width = width;\n    this.height = height;\n    this.images = images;\n    this.options = options;\n    this.document = document;\n}\n\nRenderer.prototype.renderImage = function(container, bounds, borderData, imageContainer) {\n    var paddingLeft = container.cssInt('paddingLeft'),\n        paddingTop = container.cssInt('paddingTop'),\n        paddingRight = container.cssInt('paddingRight'),\n        paddingBottom = container.cssInt('paddingBottom'),\n        borders = borderData.borders;\n\n    var width = bounds.width - (borders[1].width + borders[3].width + paddingLeft + paddingRight);\n    var height = bounds.height - (borders[0].width + borders[2].width + paddingTop + paddingBottom);\n    this.drawImage(\n        imageContainer,\n        0,\n        0,\n        imageContainer.image.width || width,\n        imageContainer.image.height || height,\n        bounds.left + paddingLeft + borders[3].width,\n        bounds.top + paddingTop + borders[0].width,\n        width,\n        height\n    );\n};\n\nRenderer.prototype.renderBackground = function(container, bounds, borderData) {\n    if (bounds.height > 0 && bounds.width > 0) {\n        this.renderBackgroundColor(container, bounds);\n        this.renderBackgroundImage(container, bounds, borderData);\n    }\n};\n\nRenderer.prototype.renderBackgroundColor = function(container, bounds) {\n    var color = container.color(\"backgroundColor\");\n    if (!color.isTransparent()) {\n        this.rectangle(bounds.left, bounds.top, bounds.width, bounds.height, color);\n    }\n};\n\nRenderer.prototype.renderBorders = function(borders) {\n    borders.forEach(this.renderBorder, this);\n};\n\nRenderer.prototype.renderBorder = function(data) {\n    if (!data.color.isTransparent() && data.args !== null) {\n        this.drawShape(data.args, data.color);\n    }\n};\n\nRenderer.prototype.renderBackgroundImage = function(container, bounds, borderData) {\n    var backgroundImages = container.parseBackgroundImages();\n    backgroundImages.reverse().forEach(function(backgroundImage, index, arr) {\n        switch(backgroundImage.method) {\n        case \"url\":\n            var image = this.images.get(backgroundImage.args[0]);\n            if (image) {\n                this.renderBackgroundRepeating(container, bounds, image, arr.length - (index+1), borderData);\n            } else {\n                log(\"Error loading background-image\", backgroundImage.args[0]);\n            }\n            break;\n        case \"linear-gradient\":\n        case \"gradient\":\n            var gradientImage = this.images.get(backgroundImage.value);\n            if (gradientImage) {\n                this.renderBackgroundGradient(gradientImage, bounds, borderData);\n            } else {\n                log(\"Error loading background-image\", backgroundImage.args[0]);\n            }\n            break;\n        case \"none\":\n            break;\n        default:\n            log(\"Unknown background-image type\", backgroundImage.args[0]);\n        }\n    }, this);\n};\n\nRenderer.prototype.renderBackgroundRepeating = function(container, bounds, imageContainer, index, borderData) {\n    var size = container.parseBackgroundSize(bounds, imageContainer.image, index);\n    var position = container.parseBackgroundPosition(bounds, imageContainer.image, index, size);\n    var repeat = container.parseBackgroundRepeat(index);\n    switch (repeat) {\n    case \"repeat-x\":\n    case \"repeat no-repeat\":\n        this.backgroundRepeatShape(imageContainer, position, size, bounds, bounds.left + borderData[3], bounds.top + position.top + borderData[0], 99999, size.height, borderData);\n        break;\n    case \"repeat-y\":\n    case \"no-repeat repeat\":\n        this.backgroundRepeatShape(imageContainer, position, size, bounds, bounds.left + position.left + borderData[3], bounds.top + borderData[0], size.width, 99999, borderData);\n        break;\n    case \"no-repeat\":\n        this.backgroundRepeatShape(imageContainer, position, size, bounds, bounds.left + position.left + borderData[3], bounds.top + position.top + borderData[0], size.width, size.height, borderData);\n        break;\n    default:\n        this.renderBackgroundRepeat(imageContainer, position, size, {top: bounds.top, left: bounds.left}, borderData[3], borderData[0]);\n        break;\n    }\n};\n\nmodule.exports = Renderer;\n\n},{\"./log\":13}],20:[function(_dereq_,module,exports){\nvar Renderer = _dereq_('../renderer');\nvar LinearGradientContainer = _dereq_('../lineargradientcontainer');\nvar log = _dereq_('../log');\n\nfunction CanvasRenderer(width, height) {\n    Renderer.apply(this, arguments);\n    this.canvas = this.options.canvas || this.document.createElement(\"canvas\");\n    if (!this.options.canvas) {\n        this.canvas.width = width;\n        this.canvas.height = height;\n    }\n    this.ctx = this.canvas.getContext(\"2d\");\n    this.taintCtx = this.document.createElement(\"canvas\").getContext(\"2d\");\n    this.ctx.textBaseline = \"bottom\";\n    this.variables = {};\n    log(\"Initialized CanvasRenderer with size\", width, \"x\", height);\n}\n\nCanvasRenderer.prototype = Object.create(Renderer.prototype);\n\nCanvasRenderer.prototype.setFillStyle = function(fillStyle) {\n    this.ctx.fillStyle = typeof(fillStyle) === \"object\" && !!fillStyle.isColor ? fillStyle.toString() : fillStyle;\n    return this.ctx;\n};\n\nCanvasRenderer.prototype.rectangle = function(left, top, width, height, color) {\n    this.setFillStyle(color).fillRect(left, top, width, height);\n};\n\nCanvasRenderer.prototype.circle = function(left, top, size, color) {\n    this.setFillStyle(color);\n    this.ctx.beginPath();\n    this.ctx.arc(left + size / 2, top + size / 2, size / 2, 0, Math.PI*2, true);\n    this.ctx.closePath();\n    this.ctx.fill();\n};\n\nCanvasRenderer.prototype.circleStroke = function(left, top, size, color, stroke, strokeColor) {\n    this.circle(left, top, size, color);\n    this.ctx.strokeStyle = strokeColor.toString();\n    this.ctx.stroke();\n};\n\nCanvasRenderer.prototype.drawShape = function(shape, color) {\n    this.shape(shape);\n    this.setFillStyle(color).fill();\n};\n\nCanvasRenderer.prototype.taints = function(imageContainer) {\n    if (imageContainer.tainted === null) {\n        this.taintCtx.drawImage(imageContainer.image, 0, 0);\n        try {\n            this.taintCtx.getImageData(0, 0, 1, 1);\n            imageContainer.tainted = false;\n        } catch(e) {\n            this.taintCtx = document.createElement(\"canvas\").getContext(\"2d\");\n            imageContainer.tainted = true;\n        }\n    }\n\n    return imageContainer.tainted;\n};\n\nCanvasRenderer.prototype.drawImage = function(imageContainer, sx, sy, sw, sh, dx, dy, dw, dh) {\n    if (!this.taints(imageContainer) || this.options.allowTaint) {\n        this.ctx.drawImage(imageContainer.image, sx, sy, sw, sh, dx, dy, dw, dh);\n    }\n};\n\nCanvasRenderer.prototype.clip = function(shapes, callback, context) {\n    this.ctx.save();\n    shapes.filter(hasEntries).forEach(function(shape) {\n        this.shape(shape).clip();\n    }, this);\n    callback.call(context);\n    this.ctx.restore();\n};\n\nCanvasRenderer.prototype.shape = function(shape) {\n    this.ctx.beginPath();\n    shape.forEach(function(point, index) {\n        if (point[0] === \"rect\") {\n            this.ctx.rect.apply(this.ctx, point.slice(1));\n        } else {\n            this.ctx[(index === 0) ? \"moveTo\" : point[0] + \"To\" ].apply(this.ctx, point.slice(1));\n        }\n    }, this);\n    this.ctx.closePath();\n    return this.ctx;\n};\n\nCanvasRenderer.prototype.font = function(color, style, variant, weight, size, family) {\n    this.setFillStyle(color).font = [style, variant, weight, size, family].join(\" \").split(\",\")[0];\n};\n\nCanvasRenderer.prototype.fontShadow = function(color, offsetX, offsetY, blur) {\n    this.setVariable(\"shadowColor\", color.toString())\n        .setVariable(\"shadowOffsetY\", offsetX)\n        .setVariable(\"shadowOffsetX\", offsetY)\n        .setVariable(\"shadowBlur\", blur);\n};\n\nCanvasRenderer.prototype.clearShadow = function() {\n    this.setVariable(\"shadowColor\", \"rgba(0,0,0,0)\");\n};\n\nCanvasRenderer.prototype.setOpacity = function(opacity) {\n    this.ctx.globalAlpha = opacity;\n};\n\nCanvasRenderer.prototype.setTransform = function(transform) {\n    this.ctx.translate(transform.origin[0], transform.origin[1]);\n    this.ctx.transform.apply(this.ctx, transform.matrix);\n    this.ctx.translate(-transform.origin[0], -transform.origin[1]);\n};\n\nCanvasRenderer.prototype.setVariable = function(property, value) {\n    if (this.variables[property] !== value) {\n        this.variables[property] = this.ctx[property] = value;\n    }\n\n    return this;\n};\n\nCanvasRenderer.prototype.text = function(text, left, bottom) {\n    this.ctx.fillText(text, left, bottom);\n};\n\nCanvasRenderer.prototype.backgroundRepeatShape = function(imageContainer, backgroundPosition, size, bounds, left, top, width, height, borderData) {\n    var shape = [\n        [\"line\", Math.round(left), Math.round(top)],\n        [\"line\", Math.round(left + width), Math.round(top)],\n        [\"line\", Math.round(left + width), Math.round(height + top)],\n        [\"line\", Math.round(left), Math.round(height + top)]\n    ];\n    this.clip([shape], function() {\n        this.renderBackgroundRepeat(imageContainer, backgroundPosition, size, bounds, borderData[3], borderData[0]);\n    }, this);\n};\n\nCanvasRenderer.prototype.renderBackgroundRepeat = function(imageContainer, backgroundPosition, size, bounds, borderLeft, borderTop) {\n    var offsetX = Math.round(bounds.left + backgroundPosition.left + borderLeft), offsetY = Math.round(bounds.top + backgroundPosition.top + borderTop);\n    this.setFillStyle(this.ctx.createPattern(this.resizeImage(imageContainer, size), \"repeat\"));\n    this.ctx.translate(offsetX, offsetY);\n    this.ctx.fill();\n    this.ctx.translate(-offsetX, -offsetY);\n};\n\nCanvasRenderer.prototype.renderBackgroundGradient = function(gradientImage, bounds) {\n    if (gradientImage instanceof LinearGradientContainer) {\n        var gradient = this.ctx.createLinearGradient(\n            bounds.left + bounds.width * gradientImage.x0,\n            bounds.top + bounds.height * gradientImage.y0,\n            bounds.left +  bounds.width * gradientImage.x1,\n            bounds.top +  bounds.height * gradientImage.y1);\n        gradientImage.colorStops.forEach(function(colorStop) {\n            gradient.addColorStop(colorStop.stop, colorStop.color.toString());\n        });\n        this.rectangle(bounds.left, bounds.top, bounds.width, bounds.height, gradient);\n    }\n};\n\nCanvasRenderer.prototype.resizeImage = function(imageContainer, size) {\n    var image = imageContainer.image;\n    if(image.width === size.width && image.height === size.height) {\n        return image;\n    }\n\n    var ctx, canvas = document.createElement('canvas');\n    canvas.width = size.width;\n    canvas.height = size.height;\n    ctx = canvas.getContext(\"2d\");\n    ctx.drawImage(image, 0, 0, image.width, image.height, 0, 0, size.width, size.height );\n    return canvas;\n};\n\nfunction hasEntries(array) {\n    return array.length > 0;\n}\n\nmodule.exports = CanvasRenderer;\n\n},{\"../lineargradientcontainer\":12,\"../log\":13,\"../renderer\":19}],21:[function(_dereq_,module,exports){\nvar NodeContainer = _dereq_('./nodecontainer');\n\nfunction StackingContext(hasOwnStacking, opacity, element, parent) {\n    NodeContainer.call(this, element, parent);\n    this.ownStacking = hasOwnStacking;\n    this.contexts = [];\n    this.children = [];\n    this.opacity = (this.parent ? this.parent.stack.opacity : 1) * opacity;\n}\n\nStackingContext.prototype = Object.create(NodeContainer.prototype);\n\nStackingContext.prototype.getParentStack = function(context) {\n    var parentStack = (this.parent) ? this.parent.stack : null;\n    return parentStack ? (parentStack.ownStacking ? parentStack : parentStack.getParentStack(context)) : context.stack;\n};\n\nmodule.exports = StackingContext;\n\n},{\"./nodecontainer\":14}],22:[function(_dereq_,module,exports){\nfunction Support(document) {\n    this.rangeBounds = this.testRangeBounds(document);\n    this.cors = this.testCORS();\n    this.svg = this.testSVG();\n}\n\nSupport.prototype.testRangeBounds = function(document) {\n    var range, testElement, rangeBounds, rangeHeight, support = false;\n\n    if (document.createRange) {\n        range = document.createRange();\n        if (range.getBoundingClientRect) {\n            testElement = document.createElement('boundtest');\n            testElement.style.height = \"123px\";\n            testElement.style.display = \"block\";\n            document.body.appendChild(testElement);\n\n            range.selectNode(testElement);\n            rangeBounds = range.getBoundingClientRect();\n            rangeHeight = rangeBounds.height;\n\n            if (rangeHeight === 123) {\n                support = true;\n            }\n            document.body.removeChild(testElement);\n        }\n    }\n\n    return support;\n};\n\nSupport.prototype.testCORS = function() {\n    return typeof((new Image()).crossOrigin) !== \"undefined\";\n};\n\nSupport.prototype.testSVG = function() {\n    var img = new Image();\n    var canvas = document.createElement(\"canvas\");\n    var ctx =  canvas.getContext(\"2d\");\n    img.src = \"data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>\";\n\n    try {\n        ctx.drawImage(img, 0, 0);\n        canvas.toDataURL();\n    } catch(e) {\n        return false;\n    }\n    return true;\n};\n\nmodule.exports = Support;\n\n},{}],23:[function(_dereq_,module,exports){\nvar XHR = _dereq_('./xhr');\nvar decode64 = _dereq_('./utils').decode64;\n\nfunction SVGContainer(src) {\n    this.src = src;\n    this.image = null;\n    var self = this;\n\n    this.promise = this.hasFabric().then(function() {\n        return (self.isInline(src) ? Promise.resolve(self.inlineFormatting(src)) : XHR(src));\n    }).then(function(svg) {\n        return new Promise(function(resolve) {\n            window.html2canvas.svg.fabric.loadSVGFromString(svg, self.createCanvas.call(self, resolve));\n        });\n    });\n}\n\nSVGContainer.prototype.hasFabric = function() {\n    return !window.html2canvas.svg || !window.html2canvas.svg.fabric ? Promise.reject(new Error(\"html2canvas.svg.js is not loaded, cannot render svg\")) : Promise.resolve();\n};\n\nSVGContainer.prototype.inlineFormatting = function(src) {\n    return (/^data:image\\/svg\\+xml;base64,/.test(src)) ? this.decode64(this.removeContentType(src)) : this.removeContentType(src);\n};\n\nSVGContainer.prototype.removeContentType = function(src) {\n    return src.replace(/^data:image\\/svg\\+xml(;base64)?,/,'');\n};\n\nSVGContainer.prototype.isInline = function(src) {\n    return (/^data:image\\/svg\\+xml/i.test(src));\n};\n\nSVGContainer.prototype.createCanvas = function(resolve) {\n    var self = this;\n    return function (objects, options) {\n        var canvas = new window.html2canvas.svg.fabric.StaticCanvas('c');\n        self.image = canvas.lowerCanvasEl;\n        canvas\n            .setWidth(options.width)\n            .setHeight(options.height)\n            .add(window.html2canvas.svg.fabric.util.groupSVGElements(objects, options))\n            .renderAll();\n        resolve(canvas.lowerCanvasEl);\n    };\n};\n\nSVGContainer.prototype.decode64 = function(str) {\n    return (typeof(window.atob) === \"function\") ? window.atob(str) : decode64(str);\n};\n\nmodule.exports = SVGContainer;\n\n},{\"./utils\":26,\"./xhr\":28}],24:[function(_dereq_,module,exports){\nvar SVGContainer = _dereq_('./svgcontainer');\n\nfunction SVGNodeContainer(node, _native) {\n    this.src = node;\n    this.image = null;\n    var self = this;\n\n    this.promise = _native ? new Promise(function(resolve, reject) {\n        self.image = new Image();\n        self.image.onload = resolve;\n        self.image.onerror = reject;\n        self.image.src = \"data:image/svg+xml,\" + (new XMLSerializer()).serializeToString(node);\n        if (self.image.complete === true) {\n            resolve(self.image);\n        }\n    }) : this.hasFabric().then(function() {\n        return new Promise(function(resolve) {\n            window.html2canvas.svg.fabric.parseSVGDocument(node, self.createCanvas.call(self, resolve));\n        });\n    });\n}\n\nSVGNodeContainer.prototype = Object.create(SVGContainer.prototype);\n\nmodule.exports = SVGNodeContainer;\n\n},{\"./svgcontainer\":23}],25:[function(_dereq_,module,exports){\nvar NodeContainer = _dereq_('./nodecontainer');\n\nfunction TextContainer(node, parent) {\n    NodeContainer.call(this, node, parent);\n}\n\nTextContainer.prototype = Object.create(NodeContainer.prototype);\n\nTextContainer.prototype.applyTextTransform = function() {\n    this.node.data = this.transform(this.parent.css(\"textTransform\"));\n};\n\nTextContainer.prototype.transform = function(transform) {\n    var text = this.node.data;\n    switch(transform){\n        case \"lowercase\":\n            return text.toLowerCase();\n        case \"capitalize\":\n            return text.replace(/(^|\\s|:|-|\\(|\\))([a-z])/g, capitalize);\n        case \"uppercase\":\n            return text.toUpperCase();\n        default:\n            return text;\n    }\n};\n\nfunction capitalize(m, p1, p2) {\n    if (m.length > 0) {\n        return p1 + p2.toUpperCase();\n    }\n}\n\nmodule.exports = TextContainer;\n\n},{\"./nodecontainer\":14}],26:[function(_dereq_,module,exports){\nexports.smallImage = function smallImage() {\n    return \"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\";\n};\n\nexports.bind = function(callback, context) {\n    return function() {\n        return callback.apply(context, arguments);\n    };\n};\n\n/*\n * base64-arraybuffer\n * https://github.com/niklasvh/base64-arraybuffer\n *\n * Copyright (c) 2012 Niklas von Hertzen\n * Licensed under the MIT license.\n */\n\nexports.decode64 = function(base64) {\n    var chars = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";\n    var len = base64.length, i, encoded1, encoded2, encoded3, encoded4, byte1, byte2, byte3;\n\n    var output = \"\";\n\n    for (i = 0; i < len; i+=4) {\n        encoded1 = chars.indexOf(base64[i]);\n        encoded2 = chars.indexOf(base64[i+1]);\n        encoded3 = chars.indexOf(base64[i+2]);\n        encoded4 = chars.indexOf(base64[i+3]);\n\n        byte1 = (encoded1 << 2) | (encoded2 >> 4);\n        byte2 = ((encoded2 & 15) << 4) | (encoded3 >> 2);\n        byte3 = ((encoded3 & 3) << 6) | encoded4;\n        if (encoded3 === 64) {\n            output += String.fromCharCode(byte1);\n        } else if (encoded4 === 64 || encoded4 === -1) {\n            output += String.fromCharCode(byte1, byte2);\n        } else{\n            output += String.fromCharCode(byte1, byte2, byte3);\n        }\n    }\n\n    return output;\n};\n\nexports.getBounds = function(node) {\n    if (node.getBoundingClientRect) {\n        var clientRect = node.getBoundingClientRect();\n        var width = node.offsetWidth == null ? clientRect.width : node.offsetWidth;\n        return {\n            top: clientRect.top,\n            bottom: clientRect.bottom || (clientRect.top + clientRect.height),\n            right: clientRect.left + width,\n            left: clientRect.left,\n            width:  width,\n            height: node.offsetHeight == null ? clientRect.height : node.offsetHeight\n        };\n    }\n    return {};\n};\n\nexports.offsetBounds = function(node) {\n    var parent = node.offsetParent ? exports.offsetBounds(node.offsetParent) : {top: 0, left: 0};\n\n    return {\n        top: node.offsetTop + parent.top,\n        bottom: node.offsetTop + node.offsetHeight + parent.top,\n        right: node.offsetLeft + parent.left + node.offsetWidth,\n        left: node.offsetLeft + parent.left,\n        width: node.offsetWidth,\n        height: node.offsetHeight\n    };\n};\n\nexports.parseBackgrounds = function(backgroundImage) {\n    var whitespace = ' \\r\\n\\t',\n        method, definition, prefix, prefix_i, block, results = [],\n        mode = 0, numParen = 0, quote, args;\n    var appendResult = function() {\n        if(method) {\n            if (definition.substr(0, 1) === '\"') {\n                definition = definition.substr(1, definition.length - 2);\n            }\n            if (definition) {\n                args.push(definition);\n            }\n            if (method.substr(0, 1) === '-' && (prefix_i = method.indexOf('-', 1 ) + 1) > 0) {\n                prefix = method.substr(0, prefix_i);\n                method = method.substr(prefix_i);\n            }\n            results.push({\n                prefix: prefix,\n                method: method.toLowerCase(),\n                value: block,\n                args: args,\n                image: null\n            });\n        }\n        args = [];\n        method = prefix = definition = block = '';\n    };\n    args = [];\n    method = prefix = definition = block = '';\n    backgroundImage.split(\"\").forEach(function(c) {\n        if (mode === 0 && whitespace.indexOf(c) > -1) {\n            return;\n        }\n        switch(c) {\n        case '\"':\n            if(!quote) {\n                quote = c;\n            } else if(quote === c) {\n                quote = null;\n            }\n            break;\n        case '(':\n            if(quote) {\n                break;\n            } else if(mode === 0) {\n                mode = 1;\n                block += c;\n                return;\n            } else {\n                numParen++;\n            }\n            break;\n        case ')':\n            if (quote) {\n                break;\n            } else if(mode === 1) {\n                if(numParen === 0) {\n                    mode = 0;\n                    block += c;\n                    appendResult();\n                    return;\n                } else {\n                    numParen--;\n                }\n            }\n            break;\n\n        case ',':\n            if (quote) {\n                break;\n            } else if(mode === 0) {\n                appendResult();\n                return;\n            } else if (mode === 1) {\n                if (numParen === 0 && !method.match(/^url$/i)) {\n                    args.push(definition);\n                    definition = '';\n                    block += c;\n                    return;\n                }\n            }\n            break;\n        }\n\n        block += c;\n        if (mode === 0) {\n            method += c;\n        } else {\n            definition += c;\n        }\n    });\n\n    appendResult();\n    return results;\n};\n\n},{}],27:[function(_dereq_,module,exports){\nvar GradientContainer = _dereq_('./gradientcontainer');\n\nfunction WebkitGradientContainer(imageData) {\n    GradientContainer.apply(this, arguments);\n    this.type = imageData.args[0] === \"linear\" ? GradientContainer.TYPES.LINEAR : GradientContainer.TYPES.RADIAL;\n}\n\nWebkitGradientContainer.prototype = Object.create(GradientContainer.prototype);\n\nmodule.exports = WebkitGradientContainer;\n\n},{\"./gradientcontainer\":9}],28:[function(_dereq_,module,exports){\nfunction XHR(url) {\n    return new Promise(function(resolve, reject) {\n        var xhr = new XMLHttpRequest();\n        xhr.open('GET', url);\n\n        xhr.onload = function() {\n            if (xhr.status === 200) {\n                resolve(xhr.responseText);\n            } else {\n                reject(new Error(xhr.statusText));\n            }\n        };\n\n        xhr.onerror = function() {\n            reject(new Error(\"Network Error\"));\n        };\n\n        xhr.send();\n    });\n}\n\nmodule.exports = XHR;\n\n},{}]},{},[4])(4)\n});\n\n\n/** WEBPACK FOOTER **\n ** ./~/html2canvas/dist/html2canvas.js\n **/","/**\n * base class for all object in the library\n * @class Baseobject\n */\nexport default class BaseObject {\n  /**\n   * virtual function for returning class name\n   * @returns {string}\n   */\n  getName() {\n    return '';\n  }\n\n  /**\n   * returns if current mode is debugging mode\n   * @returns {bool}\n   */\n  isDebug() {\n    return this._debugMode;\n  }\n\n  /**\n   * logs message and object for debugging purpose\n   * @param {string} message\n   * @param {Array<any>} args\n   */\n  log(message, ...args) {\n    if (!this.isDebug()) {\n      return;\n    }\n\n    console.log(`${this.getName()}: ${message}`, ...args);\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/base-object.js\n **/","import BaseObject from './base-object';\nimport Rect from './rect';\n\n/**\n * State enabled class to manage grey canvas on top of html page for cropping\n * @class CanvasState\n */\nexport default class CanvasState extends BaseObject {\n  /**\n   * object constructor\n   * @param {HTMLDocument} doc\n   * @param {HTMLElement} canvas - canvas DOM element\n   */\n  constructor(doc, canvas, onSelectionChange = () => {}, debugMode = true) {\n    super();\n\n    this._onMouseDown = this._onMouseDown.bind(this);\n    this._onMouseMove = this._onMouseMove.bind(this);\n    this._onMouseUp = this._onMouseUp.bind(this);\n    this._onTouch = this._onTouch.bind(this);\n    this._onSelectionChange = onSelectionChange;\n\n    this._document = doc;\n    this._canvas = canvas;\n    this._width = canvas.width;\n    this._height = canvas.height;\n    this._ctx = canvas.getContext('2d');\n    this._debugMode = debugMode;\n\n    const html = this._document.body.parentNode;\n\n    this._htmlTop = html.offsetTop;\n    this._htmlLeft = html.offsetLeft;\n\n    this._valid = false; // when set to false, the canvas will redraw everything\n    this._shape = null;  // the rectangle shape\n    this._dragging = false; // Keep track of when we are dragging\n    this._dragoffx = 0; // See mousedown and mousemove events for explanation\n    this._dragoffy = 0;\n\n    this.log('initialized');\n\n    this._initRect();\n    this._initEvents();\n    this._onSelectionChange(this._shape._w, this._shape._h);\n\n    this._interval = 30;\n    setInterval(() => {\n      this.draw();\n    }, this._interval);\n  }\n\n  /**\n   * returns class name\n   * @returns {string}\n   */\n  getName() {\n    return 'CanvasState';\n  }\n\n  _onMouseDown(e) {\n    const { _shape } = this;\n    const mouse = this.getMouse(e);\n    const mx = mouse.x;\n    const my = mouse.y;\n    this._valid = false;\n    if (_shape.contains(mx, my)) {\n      this._dragoffx = mx - _shape._x;\n      this._dragoffy = my - _shape._y;\n      this._dragging = true;\n\n      this.log('mouse down detected. starting drag', mx, my);\n    }\n\n    this._currentHandle = this._shape.getHoverSelectionHandle(mouse.x, mouse.y);\n  }\n\n  _onMouseMove(e) {\n    const { _shape, _canvas } = this;\n    const mouse = this.getMouse(e);\n    const oldx = _shape._x;\n    const oldy = _shape._y;\n    const mx = mouse.x;\n    const my = mouse.y;\n    const handleIndex = _shape.getHoverSelectionHandle(mx, my);\n    switch (handleIndex) {\n      case 0:\n        _canvas.style.cursor = 'nw-resize';\n        break;\n      case 1:\n        _canvas.style.cursor = 'n-resize';\n        break;\n      case 2:\n        _canvas.style.cursor = 'ne-resize';\n        break;\n      case 3:\n        _canvas.style.cursor = 'w-resize';\n        break;\n      case 4:\n        _canvas.style.cursor = 'e-resize';\n        break;\n      case 5:\n        _canvas.style.cursor = 'sw-resize';\n        break;\n      case 6:\n        _canvas.style.cursor = 's-resize';\n        break;\n      case 7:\n        _canvas.style.cursor = 'se-resize';\n        break;\n      default:\n        _canvas.style.cursor = 'auto';\n    }\n\n    if (this._currentHandle !== false) {\n      // Handles resizing\n      switch (this._currentHandle) {\n        case 0:\n          _shape._x = mx;\n          _shape._y = my;\n          _shape._w += oldx - mx;\n          _shape._h += oldy - my;\n          break;\n        case 1:\n          _shape._y = my;\n          _shape._h += oldy - my;\n          break;\n        case 2:\n          _shape._y = my;\n          _shape._w = mx - oldx;\n          _shape._h += oldy - my;\n          break;\n        case 3:\n          _shape._x = mx;\n          _shape._w += oldx - mx;\n          break;\n        case 4:\n          _shape._w = mx - oldx;\n          break;\n        case 5:\n          _shape._x = mx;\n          _shape._w += oldx - mx;\n          _shape._h = my - oldy;\n          break;\n        case 6:\n          _shape._h = my - oldy;\n          break;\n        case 7:\n          _shape._w = mx - oldx;\n          _shape._h = my - oldy;\n          break;\n        default:\n          break;\n      }\n\n      this._onSelectionChange(_shape._w, _shape._h);\n      this._valid = false;\n    } else if (this._dragging) {\n      // We don't want to drag the object by its top-left corner, we want to drag it\n      // from where we clicked. Thats why we saved the offset and use it here\n      this._shape._x = mouse.x - this._dragoffx;\n      this._shape._y = mouse.y - this._dragoffy;\n      this._valid = false; // Something's dragging so we must redraw\n\n      // this.log('moving the rect', mouse.x, mouse.y);\n    }\n  }\n\n  _onMouseUp() {\n    this._dragging = false;\n    this._currentHandle = false;\n  }\n\n  /**\n   * dispatches mouse events on touch\n   */\n  _onTouch(evt) {\n    evt.preventDefault(); // prevents touch event to disable scrolling on mobile devices\n    if (evt.touches.length > 1 || (evt.type === 'touchend' && evt.touches.length > 0)) {\n      return;\n    }\n\n    const newEvt = this._document.createEvent('MouseEvents');\n    const target = evt.target || evt.srcElement || evt.originalTarget;\n    let type = null;\n    let touch = null;\n\n    switch (evt.type) {\n      case 'touchstart':\n        type = 'mousedown';\n        touch = evt.changedTouches[0];\n        break;\n      case 'touchmove':\n        type = 'mousemove';\n        touch = evt.changedTouches[0];\n        break;\n      case 'touchend':\n        type = 'mouseup';\n        touch = evt.changedTouches[0];\n        break;\n      default:\n        break;\n    }\n\n    if (type === 'mousemove' && !this._dragging) {\n      // touchmove occurs without mouse down. thus dispatching mousedown is required.\n      newEvt.initMouseEvent('mousedown', true, true, target.ownerDocument.defaultView, 0,\n        touch.screenX, touch.screenY, touch.clientX, touch.clientY,\n        evt.ctrlKey, evt.altKey, evt.shiftKey, evt.metaKey, 0, null);\n      target.dispatchEvent(newEvt);\n    }\n\n    newEvt.initMouseEvent(type, true, true, target.ownerDocument.defaultView, 0,\n      touch.screenX, touch.screenY, touch.clientX, touch.clientY,\n      evt.ctrlKey, evt.altKey, evt.shiftKey, evt.metaKey, 0, null);\n\n    target.dispatchEvent(newEvt);\n  }\n\n  /**\n   * attaches event handlers to canvas\n   * @private\n   */\n  _initEvents() {\n    const { _canvas } = this;\n    // fixes a problem where double clicking causesShape text to get selected on the canvas\n    _canvas.addEventListener('selectstart', (e) => {\n      e.preventDefault();\n      return false;\n    }, false);\n\n    // up, down, and move are for dragging\n    _canvas.addEventListener('mousedown', this._onMouseDown, true);\n    _canvas.addEventListener('mousemove', this._onMouseMove, true);\n    _canvas.addEventListener('mouseup', this._onMouseUp, true);\n\n    _canvas.addEventListener('tapstart', this._onTouch, true);\n    _canvas.addEventListener('touchmove', this._onTouch, true);\n    _canvas.addEventListener('touchend', this._onTouch, true);\n\n    this.log('initialized events');\n  }\n\n  /**\n   * creates a movable rectangle and attach to canvas\n   * @private\n   */\n  _initRect() {\n    this._shape = new Rect(\n      this._width / 4,\n      this._height / 4,\n      this._width / 2,\n      this._height / 2,\n      'rgba(0, 200, 0, 0.5)',\n      20,\n      false // debug mode is set as false\n    );\n    this._valid = false;\n  }\n\n  /**\n   * Returns shape positions\n   * @returns {{x, y, w, h}}\n   */\n  getSelection() {\n    const { _x, _y, _w, _h } = this._shape;\n\n    return { x: _x, y: _y, w: _w, h: _h };\n  }\n\n  /**\n   * clears the canvas for next draw\n   */\n  clear() {\n    this._ctx.clearRect(0, 0, this._width, this._height);\n  }\n\n  /**\n   * while draw is called as often as the INTERVAL variable demands,\n   * it only ever does something if the canvas gets invalidated by our code\n   */\n  draw() {\n    // if our state is invalid, redraw and validate!\n    if (!this._valid) {\n      this.log('starting draw');\n      const { _ctx, _shape } = this;\n      this.clear();\n\n      // fill outside of the rectangle\n      _ctx.fillStyle = 'rgba(0,0,0,.8)';\n      _ctx.beginPath();\n      _ctx.rect(_shape._x, _shape._y, _shape._w, _shape._h);\n      _ctx.rect(this._width, 0, -this._width, this._height);\n      _ctx.fill();\n\n      // draw shape\n      _shape.draw(_ctx);\n\n      this._valid = true;\n\n      this.log('shape drew', _shape._x, _shape._y, _shape._w, _shape._h);\n    }\n  }\n\n  /**\n   * returns offset for the element\n   * @param {DOMElement} element\n   * @returns {{x: number, y: number}}\n   */\n  getOffset(element) {\n    let el = element;\n    let offsetX = 0;\n    let offsetY = 0;\n\n    // Compute the total offset\n    if (el.offsetParent !== undefined) {\n      do {\n        offsetX += el.offsetLeft;\n        offsetY += el.offsetTop;\n        el = el.offsetParent;\n      } while (el);\n    }\n\n    // Also add the <html> offsets in case there's a position:fixed bar\n    offsetX += this._htmlLeft;\n    offsetY += this._htmlTop;\n\n    // should handle scrolled position in offset\n    offsetX += this._document.body.scrollLeft;\n    offsetY += this._document.body.scrollTop;\n\n    return {\n      x: offsetX,\n      y: offsetY\n    };\n  }\n\n  /**\n   * creates an object with x and y defined, set to the mouse position relative to the state's canvas\n   * If you wanna be super-correct this can be tricky, we have to worry about padding and borders\n   * @param {Event} e\n   * @returns {{x: number, y: number}}\n   */\n  getMouse(e) {\n    const offset = this.getOffset(this._canvas);\n\n    const mx = e.pageX - offset.x;\n    const my = e.pageY - offset.y;\n\n    return { x: mx, y: my };\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/canvas-state.js\n **/","import BaseObject from './base-object';\n\n/**\n * Rectangle for highlighting the cropping area\n * @class Rect\n */\nexport default class Rect extends BaseObject {\n  /**\n   * object constructor\n   * @param {number} x - left position of shape\n   * @param {number} y - top position of shape\n   * @param {number} w - width\n   * @param {number} h - height\n   * @param {string} fill - background color of the shape\n   * @param {number} selectionBoxSize - width/height of selection handle\n   * @param {bool} debugMode\n   */\n  constructor(x, y, w, h, fill, selectionBoxSize = 6, debugMode = true) {\n    super();\n\n    this._selectionHandles = [];\n    this._selectionBoxSize = selectionBoxSize;\n    for (let i = 0; i < 8; i += 1) {\n      this._selectionHandles.push({ x: 0, y: 0 });\n    }\n\n    this._x = x || 0;\n    this._y = y || 0;\n    this._w = w || 1;\n    this._h = h || 1;\n    this._fill = fill || '#AAAAAA';\n    this._debugMode = debugMode;\n\n    this.log('initialized');\n  }\n\n  /**\n   * returns class name\n   * @returns {string}\n   */\n  getName() {\n    return 'Rect';\n  }\n\n  /**\n   * draws the shape\n   * @param {CanvasContext} ctx\n   */\n  draw(ctx) {\n    const { _x, _y, _w, _h, _fill, _selectionHandles, _selectionBoxSize } = this;\n    ctx.fillStyle = _fill; // eslint-disable-line\n    ctx.strokeStyle = 'white'; // eslint-disable-line\n    ctx.lineWidth = 1; // eslint-disable-line\n    ctx.setLineDash([7, 7]);\n    ctx.strokeRect(_x, _y, _w, _h);\n\n    const half = _selectionBoxSize / 2;\n\n    // top left, middle, right\n    _selectionHandles[0].x = _x - half;\n    _selectionHandles[0].y = _y - half;\n\n    _selectionHandles[1].x = _x + _w / 2 - half;\n    _selectionHandles[1].y = _y - half;\n\n    _selectionHandles[2].x = _x + _w - half;\n    _selectionHandles[2].y = _y - half;\n\n    // middle left\n    _selectionHandles[3].x = _x - half;\n    _selectionHandles[3].y = _y + _h / 2 - half;\n\n    // middle right\n    _selectionHandles[4].x = _x + _w - half;\n    _selectionHandles[4].y = _y + _h / 2 - half;\n\n    // bottom left, middle, right\n    _selectionHandles[6].x = _x + _w / 2 - half;\n    _selectionHandles[6].y = _y + _h - half;\n\n    _selectionHandles[5].x = _x - half;\n    _selectionHandles[5].y = _y + _h - half;\n\n    _selectionHandles[7].x = _x + _w - half;\n    _selectionHandles[7].y = _y + _h - half;\n\n    this.log('drawing selection boxes');\n    ctx.fillStyle = 'white'; // eslint-disable-line\n    _selectionHandles.forEach((cur) => {\n      ctx.fillRect(cur.x, cur.y, _selectionBoxSize, _selectionBoxSize);\n    });\n\n    this.log('filling the rectangle', _x, _y, _w, _h);\n  }\n\n  /**\n   * checks if point is inside the shape\n   * @param {number} mx\n   * @param {number} my\n   * @returns {bool}\n   */\n  contains(mx, my) {\n    const { _x, _y, _w, _h } = this;\n    return (_x <= mx) && (_x + _w >= mx) &&\n      (_y <= my) && (_y + _h >= my);\n  }\n\n  /**\n   * returns selection handle if point is inside\n   * @param {number} mx\n   * @param {number} my\n   * @returns {?number}\n   */\n  getHoverSelectionHandle(mx, my) {\n    const { _selectionHandles, _selectionBoxSize } = this;\n    for (let i = 0; i < _selectionHandles.length; i += 1) {\n      const handle = _selectionHandles[i];\n      if (\n        (handle.x <= mx) &&\n        (handle.x + _selectionBoxSize >= mx) &&\n        (handle.y <= my) &&\n        (handle.y + _selectionBoxSize >= my)\n      ) {\n        return i;\n      }\n    }\n\n    return false;\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/rect.js\n **/","import BaseObject from './base-object';\n\nexport const overlayStyles = {\n  position: 'fixed',\n  left: '0',\n  top: '0',\n  bottom: '0',\n  right: '0',\n  'z-index': '9999998',\n  display: 'flex',\n  'justify-content': 'center',\n  'align-items': 'center',\n  'background-color': 'rgba(0,0,0,.7)'\n};\n\nexport const modalWindowStyles = {\n  'background-color': 'white',\n  display: 'flex',\n  'justify-content': 'center',\n  'align-items': 'center',\n  'flex-direction': 'column',\n  'box-shadow': '5px 5px 5px #000'\n};\n\nexport const infoDivStyles = {\n  'margin-top': '5px',\n  'font-size': '12px',\n  color: 'black'\n};\n\nexport const actionDivStyles = {\n  'margin-top': '10px',\n  display: 'flex',\n  'justify-content': 'center',\n  'align-items': 'center',\n  'flex-direction': 'row'\n};\n\nexport const sendBtnStyles = {\n  'margin-right': '30px'\n};\n\n/**\n * Modal window for preview cropped image before compressing and sending to server.\n * @class PreviewModal\n */\nexport default class PreviewModal extends BaseObject {\n  /**\n   * object constructor\n   * @param {HTMLDocument} doc\n   * @param {HTMLDOMElement} canvas\n   * @param {string} serverURL\n   */\n  constructor(doc, canvas, serverURL) {\n    super();\n\n    this._document = doc;\n    this._canvas = canvas;\n    this._serverURL = serverURL;\n    this._width = doc.body.clientWidth;\n    this._height = doc.body.clientHeight;\n\n    const overlayDiv = this._document.createElement('div');\n    this._overlayDiv = overlayDiv;\n    this._applyStyles(overlayDiv, overlayStyles);\n\n    const modalWindow = this._document.createElement('div');\n    modalWindow.style.width = this._width / 1.5;\n    modalWindow.style.height = this._height / 1.5;\n    this._applyStyles(modalWindow, modalWindowStyles);\n\n    const img = this._document.createElement('img');\n    this._img = img;\n    img.src = this.getImage();\n    img.style['max-width'] = this._width / 2;\n    img.style['max-height'] = this._height / 2;\n\n    const infoDiv = this._document.createElement('div');\n    this._infoDiv = infoDiv;\n    infoDiv.innerHTML = `w: ${canvas.width} h: ${canvas.height}`;\n    this._applyStyles(infoDiv, infoDivStyles);\n\n    const actionDiv = this._document.createElement('div');\n    this._actionDiv = actionDiv;\n    this._applyStyles(actionDiv, actionDivStyles);\n    const sendBtn = this._document.createElement('button');\n    sendBtn.appendChild(this._document.createTextNode('Submit Image'));\n    this._sendBtn = sendBtn;\n    this._applyStyles(sendBtn, sendBtnStyles);\n\n    const cancelBtn = this._document.createElement('button');\n    cancelBtn.appendChild(this._document.createTextNode('Cancel'));\n    cancelBtn.onclick = this.removeModal.bind(this);\n\n    actionDiv.appendChild(sendBtn);\n    actionDiv.appendChild(cancelBtn);\n    modalWindow.appendChild(img);\n    modalWindow.appendChild(infoDiv);\n    modalWindow.appendChild(actionDiv);\n    overlayDiv.appendChild(modalWindow);\n    this._document.body.appendChild(overlayDiv);\n  }\n\n  /**\n   * apply styles to dom element\n   * @param {HTMLDOMElement} element\n   * @param {Object} styles\n   * @private\n   */\n  _applyStyles(element, styles) {\n    Object.keys(styles).forEach((key) => {\n      element.style[key] = styles[key]; // eslint-disable-line\n    });\n  }\n\n  /**\n   * removes preview modal window\n   */\n  removeModal() {\n    if (this._overlayDiv) {\n      this._document.body.removeChild(this._overlayDiv);\n      this._overlayDiv = null;\n    }\n  }\n\n  /**\n   * sends image to server\n   */\n  sendImage() {\n    const formData = new FormData();\n    formData.append('image', this.getImage());\n\n    const xhr = new XMLHttpRequest();\n    xhr.addEventListener('load', () => {\n      this.log('finished uploading');\n    });\n\n    xhr.addEventListener('progress', (e) => {\n      if (e.lengthComputable) {\n        const percentage = Math.round((e.loaded / e.total) * 100);\n        this.log(`${percentage}% complete`);\n      }\n    });\n    xhr.addEventListener('error', () => {\n      this.log('uploading failed');\n    });\n    xhr.addEventListener('abort', () => {\n      this.log('uploading aborted');\n    });\n    xhr.open('POST', this._serverURL, true);\n    xhr.send(formData);\n  }\n\n  /**\n   * return image from canvas\n   * @param {string} fileFormat\n   * @returns {ImageData}\n   */\n  getImage(fileFormat = 'image/jpeg') {\n    return this._canvas.toDataURL(fileFormat);\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/preview-modal.js\n **/"],"sourceRoot":""}